(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function lm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wd={exports:{}},Gi={},Kd={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sr=Symbol.for("react.element"),am=Symbol.for("react.portal"),um=Symbol.for("react.fragment"),cm=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),fm=Symbol.for("react.provider"),pm=Symbol.for("react.context"),hm=Symbol.for("react.forward_ref"),mm=Symbol.for("react.suspense"),gm=Symbol.for("react.memo"),vm=Symbol.for("react.lazy"),nu=Symbol.iterator;function ym(t){return t===null||typeof t!="object"?null:(t=nu&&t[nu]||t["@@iterator"],typeof t=="function"?t:null)}var Yd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jd=Object.assign,Xd={};function Co(t,e,n){this.props=t,this.context=e,this.refs=Xd,this.updater=n||Yd}Co.prototype.isReactComponent={};Co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qd(){}Qd.prototype=Co.prototype;function Yl(t,e,n){this.props=t,this.context=e,this.refs=Xd,this.updater=n||Yd}var jl=Yl.prototype=new Qd;jl.constructor=Yl;jd(jl,Co.prototype);jl.isPureReactComponent=!0;var ou=Array.isArray,Zd=Object.prototype.hasOwnProperty,Xl={current:null},ef={key:!0,ref:!0,__self:!0,__source:!0};function tf(t,e,n){var o,r={},i=null,s=null;if(e!=null)for(o in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)Zd.call(e,o)&&!ef.hasOwnProperty(o)&&(r[o]=e[o]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(o in u=t.defaultProps,u)r[o]===void 0&&(r[o]=u[o]);return{$$typeof:Sr,type:t,key:i,ref:s,props:r,_owner:Xl.current}}function Sm(t,e){return{$$typeof:Sr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ql(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sr}function xm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ru=/\/+/g;function cs(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xm(""+t.key):e.toString(36)}function Yr(t,e,n,o,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Sr:case am:s=!0}}if(s)return s=t,r=r(s),t=o===""?"."+cs(s,0):o,ou(r)?(n="",t!=null&&(n=t.replace(ru,"$&/")+"/"),Yr(r,e,n,"",function(d){return d})):r!=null&&(Ql(r)&&(r=Sm(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(ru,"$&/")+"/")+t)),e.push(r)),1;if(s=0,o=o===""?".":o+":",ou(t))for(var u=0;u<t.length;u++){i=t[u];var c=o+cs(i,u);s+=Yr(i,e,n,c,r)}else if(c=ym(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=o+cs(i,u++),s+=Yr(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ir(t,e,n){if(t==null)return t;var o=[],r=0;return Yr(t,o,"","",function(i){return e.call(n,i,r++)}),o}function Em(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tt={current:null},jr={transition:null},Tm={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:jr,ReactCurrentOwner:Xl};function nf(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Ir,forEach:function(t,e,n){Ir(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ir(t,function(){e++}),e},toArray:function(t){return Ir(t,function(e){return e})||[]},only:function(t){if(!Ql(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Co;le.Fragment=um;le.Profiler=dm;le.PureComponent=Yl;le.StrictMode=cm;le.Suspense=mm;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tm;le.act=nf;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=jd({},t.props),r=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=Xl.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Zd.call(e,c)&&!ef.hasOwnProperty(c)&&(o[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:Sr,type:t.type,key:r,ref:i,props:o,_owner:s}};le.createContext=function(t){return t={$$typeof:pm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fm,_context:t},t.Consumer=t};le.createElement=tf;le.createFactory=function(t){var e=tf.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:hm,render:t}};le.isValidElement=Ql;le.lazy=function(t){return{$$typeof:vm,_payload:{_status:-1,_result:t},_init:Em}};le.memo=function(t,e){return{$$typeof:gm,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=jr.transition;jr.transition={};try{t()}finally{jr.transition=e}};le.unstable_act=nf;le.useCallback=function(t,e){return tt.current.useCallback(t,e)};le.useContext=function(t){return tt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return tt.current.useDeferredValue(t)};le.useEffect=function(t,e){return tt.current.useEffect(t,e)};le.useId=function(){return tt.current.useId()};le.useImperativeHandle=function(t,e,n){return tt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return tt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return tt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return tt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return tt.current.useReducer(t,e,n)};le.useRef=function(t){return tt.current.useRef(t)};le.useState=function(t){return tt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return tt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return tt.current.useTransition()};le.version="18.3.1";Kd.exports=le;var V=Kd.exports;const Cm=lm(V);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm=V,Im=Symbol.for("react.element"),Nm=Symbol.for("react.fragment"),_m=Object.prototype.hasOwnProperty,Am=wm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rm={key:!0,ref:!0,__self:!0,__source:!0};function of(t,e,n){var o,r={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(o in e)_m.call(e,o)&&!Rm.hasOwnProperty(o)&&(r[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)r[o]===void 0&&(r[o]=e[o]);return{$$typeof:Im,type:t,key:i,ref:s,props:r,_owner:Am.current}}Gi.Fragment=Nm;Gi.jsx=of;Gi.jsxs=of;Wd.exports=Gi;var p=Wd.exports,Hs={},rf={exports:{}},mt={},sf={exports:{}},lf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,Y){var X=G.length;G.push(Y);e:for(;0<X;){var ue=X-1>>>1,ee=G[ue];if(0<r(ee,Y))G[ue]=Y,G[X]=ee,X=ue;else break e}}function n(G){return G.length===0?null:G[0]}function o(G){if(G.length===0)return null;var Y=G[0],X=G.pop();if(X!==Y){G[0]=X;e:for(var ue=0,ee=G.length,ve=ee>>>1;ue<ve;){var ie=2*(ue+1)-1,A=G[ie],$=ie+1,D=G[$];if(0>r(A,X))$<ee&&0>r(D,A)?(G[ue]=D,G[$]=X,ue=$):(G[ue]=A,G[ie]=X,ue=ie);else if($<ee&&0>r(D,X))G[ue]=D,G[$]=X,ue=$;else break e}}return Y}function r(G,Y){var X=G.sortIndex-Y.sortIndex;return X!==0?X:G.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],d=[],f=1,m=null,h=3,g=!1,x=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var Y=n(d);Y!==null;){if(Y.callback===null)o(d);else if(Y.startTime<=G)o(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(d)}}function T(G){if(E=!1,S(G),!x)if(n(c)!==null)x=!0,re(I);else{var Y=n(d);Y!==null&&ae(T,Y.startTime-G)}}function I(G,Y){x=!1,E&&(E=!1,y(k),k=-1),g=!0;var X=h;try{for(S(Y),m=n(c);m!==null&&(!(m.expirationTime>Y)||G&&!F());){var ue=m.callback;if(typeof ue=="function"){m.callback=null,h=m.priorityLevel;var ee=ue(m.expirationTime<=Y);Y=t.unstable_now(),typeof ee=="function"?m.callback=ee:m===n(c)&&o(c),S(Y)}else o(c);m=n(c)}if(m!==null)var ve=!0;else{var ie=n(d);ie!==null&&ae(T,ie.startTime-Y),ve=!1}return ve}finally{m=null,h=X,g=!1}}var N=!1,_=null,k=-1,b=5,P=-1;function F(){return!(t.unstable_now()-P<b)}function Q(){if(_!==null){var G=t.unstable_now();P=G;var Y=!0;try{Y=_(!0,G)}finally{Y?K():(N=!1,_=null)}}else N=!1}var K;if(typeof v=="function")K=function(){v(Q)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,oe=W.port2;W.port1.onmessage=Q,K=function(){oe.postMessage(null)}}else K=function(){C(Q,0)};function re(G){_=G,N||(N=!0,K())}function ae(G,Y){k=C(function(){G(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,re(I))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var X=h;h=Y;try{return G()}finally{h=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var X=h;h=G;try{return Y()}finally{h=X}},t.unstable_scheduleCallback=function(G,Y,X){var ue=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ue+X:ue):X=ue,G){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=X+ee,G={id:f++,callback:Y,priorityLevel:G,startTime:X,expirationTime:ee,sortIndex:-1},X>ue?(G.sortIndex=X,e(d,G),n(c)===null&&G===n(d)&&(E?(y(k),k=-1):E=!0,ae(T,X-ue))):(G.sortIndex=ee,e(c,G),x||g||(x=!0,re(I))),G},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(G){var Y=h;return function(){var X=h;h=Y;try{return G.apply(this,arguments)}finally{h=X}}}})(lf);sf.exports=lf;var Pm=sf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=V,ht=Pm;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var af=new Set,tr={};function Bn(t,e){go(t,e),go(t+"Capture",e)}function go(t,e){for(tr[t]=e,t=0;t<e.length;t++)af.add(e[t])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vs=Object.prototype.hasOwnProperty,km=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iu={},su={};function bm(t){return Vs.call(su,t)?!0:Vs.call(iu,t)?!1:km.test(t)?su[t]=!0:(iu[t]=!0,!1)}function Dm(t,e,n,o){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Lm(t,e,n,o){if(e===null||typeof e>"u"||Dm(t,e,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nt(t,e,n,o,r,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ze[t]=new nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ze[e]=new nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ze[t]=new nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ze[t]=new nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ze[t]=new nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ze[t]=new nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ze[t]=new nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ze[t]=new nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ze[t]=new nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zl=/[\-:]([a-z])/g;function ea(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zl,ea);ze[e]=new nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zl,ea);ze[e]=new nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zl,ea);ze[e]=new nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ze[t]=new nt(t,1,!1,t.toLowerCase(),null,!1,!1)});ze.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ze[t]=new nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ta(t,e,n,o){var r=ze.hasOwnProperty(e)?ze[e]:null;(r!==null?r.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Lm(e,n,r,o)&&(n=null),o||r===null?bm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,o=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,o?t.setAttributeNS(o,e,n):t.setAttribute(e,n))))}var Qt=Mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nr=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),Kn=Symbol.for("react.fragment"),na=Symbol.for("react.strict_mode"),Bs=Symbol.for("react.profiler"),uf=Symbol.for("react.provider"),cf=Symbol.for("react.context"),oa=Symbol.for("react.forward_ref"),$s=Symbol.for("react.suspense"),qs=Symbol.for("react.suspense_list"),ra=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),df=Symbol.for("react.offscreen"),lu=Symbol.iterator;function Po(t){return t===null||typeof t!="object"?null:(t=lu&&t[lu]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,ds;function Ho(t){if(ds===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ds=e&&e[1]||""}return`
`+ds+t}var fs=!1;function ps(t,e){if(!t||fs)return"";fs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var o=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){o=d}t.call(e.prototype)}else{try{throw Error()}catch(d){o=d}t()}}catch(d){if(d&&o&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=o.stack.split(`
`),s=r.length-1,u=i.length-1;1<=s&&0<=u&&r[s]!==i[u];)u--;for(;1<=s&&0<=u;s--,u--)if(r[s]!==i[u]){if(s!==1||u!==1)do if(s--,u--,0>u||r[s]!==i[u]){var c=`
`+r[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=u);break}}}finally{fs=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ho(t):""}function Um(t){switch(t.tag){case 5:return Ho(t.type);case 16:return Ho("Lazy");case 13:return Ho("Suspense");case 19:return Ho("SuspenseList");case 0:case 2:case 15:return t=ps(t.type,!1),t;case 11:return t=ps(t.type.render,!1),t;case 1:return t=ps(t.type,!0),t;default:return""}}function zs(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kn:return"Fragment";case Wn:return"Portal";case Bs:return"Profiler";case na:return"StrictMode";case $s:return"Suspense";case qs:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cf:return(t.displayName||"Context")+".Consumer";case uf:return(t._context.displayName||"Context")+".Provider";case oa:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ra:return e=t.displayName||null,e!==null?e:zs(t.type)||"Memo";case nn:e=t._payload,t=t._init;try{return zs(t(e))}catch{}}return null}function Fm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zs(e);case 8:return e===na?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ff(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Om(t){var e=ff(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){o=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(s){o=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _r(t){t._valueTracker||(t._valueTracker=Om(t))}function pf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),o="";return t&&(o=ff(t)?t.checked?"true":"false":t.value),t=o,t!==n?(e.setValue(t),!0):!1}function ui(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Js(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function au(t,e){var n=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;n=yn(e.value!=null?e.value:n),t._wrapperState={initialChecked:o,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hf(t,e){e=e.checked,e!=null&&ta(t,"checked",e,!1)}function Ws(t,e){hf(t,e);var n=yn(e.value),o=e.type;if(n!=null)o==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ks(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ks(t,e.type,yn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uu(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ks(t,e,n){(e!=="number"||ui(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vo=Array.isArray;function lo(t,e,n,o){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&o&&(t[n].defaultSelected=!0)}else{for(n=""+yn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,o&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Ys(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(Vo(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yn(n)}}function mf(t,e){var n=yn(e.value),o=yn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),o!=null&&(t.defaultValue=""+o)}function du(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function js(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ar,vf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,o,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,o,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ar=Ar||document.createElement("div"),Ar.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ar.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gm=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(t){Gm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jo[e]=Jo[t]})});function yf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jo.hasOwnProperty(t)&&Jo[t]?(""+e).trim():e+"px"}function Sf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var o=n.indexOf("--")===0,r=yf(n,e[n],o);n==="float"&&(n="cssFloat"),o?t.setProperty(n,r):t[n]=r}}var Hm=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xs(t,e){if(e){if(Hm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Qs(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zs=null;function ia(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var el=null,ao=null,uo=null;function fu(t){if(t=Tr(t)){if(typeof el!="function")throw Error(L(280));var e=t.stateNode;e&&(e=qi(e),el(t.stateNode,t.type,e))}}function xf(t){ao?uo?uo.push(t):uo=[t]:ao=t}function Ef(){if(ao){var t=ao,e=uo;if(uo=ao=null,fu(t),e)for(t=0;t<e.length;t++)fu(e[t])}}function Tf(t,e){return t(e)}function Cf(){}var hs=!1;function wf(t,e,n){if(hs)return t(e,n);hs=!0;try{return Tf(t,e,n)}finally{hs=!1,(ao!==null||uo!==null)&&(Cf(),Ef())}}function or(t,e){var n=t.stateNode;if(n===null)return null;var o=qi(n);if(o===null)return null;n=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var tl=!1;if(Wt)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){tl=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{tl=!1}function Vm(t,e,n,o,r,i,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Wo=!1,ci=null,di=!1,nl=null,Bm={onError:function(t){Wo=!0,ci=t}};function $m(t,e,n,o,r,i,s,u,c){Wo=!1,ci=null,Vm.apply(Bm,arguments)}function qm(t,e,n,o,r,i,s,u,c){if($m.apply(this,arguments),Wo){if(Wo){var d=ci;Wo=!1,ci=null}else throw Error(L(198));di||(di=!0,nl=d)}}function $n(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function If(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pu(t){if($n(t)!==t)throw Error(L(188))}function zm(t){var e=t.alternate;if(!e){if(e=$n(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,o=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(o=r.return,o!==null){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return pu(r),t;if(i===o)return pu(r),e;i=i.sibling}throw Error(L(188))}if(n.return!==o.return)n=r,o=i;else{for(var s=!1,u=r.child;u;){if(u===n){s=!0,n=r,o=i;break}if(u===o){s=!0,o=r,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,o=r;break}if(u===o){s=!0,o=i,n=r;break}u=u.sibling}if(!s)throw Error(L(189))}}if(n.alternate!==o)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function Nf(t){return t=zm(t),t!==null?_f(t):null}function _f(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_f(t);if(e!==null)return e;t=t.sibling}return null}var Af=ht.unstable_scheduleCallback,hu=ht.unstable_cancelCallback,Jm=ht.unstable_shouldYield,Wm=ht.unstable_requestPaint,Me=ht.unstable_now,Km=ht.unstable_getCurrentPriorityLevel,sa=ht.unstable_ImmediatePriority,Rf=ht.unstable_UserBlockingPriority,fi=ht.unstable_NormalPriority,Ym=ht.unstable_LowPriority,Pf=ht.unstable_IdlePriority,Hi=null,Gt=null;function jm(t){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Hi,t,void 0,(t.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Zm,Xm=Math.log,Qm=Math.LN2;function Zm(t){return t>>>=0,t===0?32:31-(Xm(t)/Qm|0)|0}var Rr=64,Pr=4194304;function Bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pi(t,e){var n=t.pendingLanes;if(n===0)return 0;var o=0,r=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var u=s&~r;u!==0?o=Bo(u):(i&=s,i!==0&&(o=Bo(i)))}else s=n&~r,s!==0?o=Bo(s):i!==0&&(o=Bo(i));if(o===0)return 0;if(e!==0&&e!==o&&!(e&r)&&(r=o&-o,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(o&4&&(o|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=o;0<e;)n=31-Pt(e),r=1<<n,o|=t[n],e&=~r;return o}function eg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tg(t,e){for(var n=t.suspendedLanes,o=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Pt(i),u=1<<s,c=r[s];c===-1?(!(u&n)||u&o)&&(r[s]=eg(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function ol(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mf(){var t=Rr;return Rr<<=1,!(Rr&4194240)&&(Rr=64),t}function ms(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xr(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pt(e),t[e]=n}function ng(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Pt(n),i=1<<r;e[r]=0,o[r]=-1,t[r]=-1,n&=~i}}function la(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var o=31-Pt(n),r=1<<o;r&e|t[o]&e&&(t[o]|=e),n&=~r}}var ge=0;function kf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bf,aa,Df,Lf,Uf,rl=!1,Mr=[],cn=null,dn=null,fn=null,rr=new Map,ir=new Map,rn=[],og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mu(t,e){switch(t){case"focusin":case"focusout":cn=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":rr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ir.delete(e.pointerId)}}function ko(t,e,n,o,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Tr(e),e!==null&&aa(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function rg(t,e,n,o,r){switch(e){case"focusin":return cn=ko(cn,t,e,n,o,r),!0;case"dragenter":return dn=ko(dn,t,e,n,o,r),!0;case"mouseover":return fn=ko(fn,t,e,n,o,r),!0;case"pointerover":var i=r.pointerId;return rr.set(i,ko(rr.get(i)||null,t,e,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,ir.set(i,ko(ir.get(i)||null,t,e,n,o,r)),!0}return!1}function Ff(t){var e=Mn(t.target);if(e!==null){var n=$n(e);if(n!==null){if(e=n.tag,e===13){if(e=If(n),e!==null){t.blockedOn=e,Uf(t.priority,function(){Df(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=il(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var o=new n.constructor(n.type,n);Zs=o,n.target.dispatchEvent(o),Zs=null}else return e=Tr(n),e!==null&&aa(e),t.blockedOn=n,!1;e.shift()}return!0}function gu(t,e,n){Xr(t)&&n.delete(e)}function ig(){rl=!1,cn!==null&&Xr(cn)&&(cn=null),dn!==null&&Xr(dn)&&(dn=null),fn!==null&&Xr(fn)&&(fn=null),rr.forEach(gu),ir.forEach(gu)}function bo(t,e){t.blockedOn===e&&(t.blockedOn=null,rl||(rl=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,ig)))}function sr(t){function e(r){return bo(r,t)}if(0<Mr.length){bo(Mr[0],t);for(var n=1;n<Mr.length;n++){var o=Mr[n];o.blockedOn===t&&(o.blockedOn=null)}}for(cn!==null&&bo(cn,t),dn!==null&&bo(dn,t),fn!==null&&bo(fn,t),rr.forEach(e),ir.forEach(e),n=0;n<rn.length;n++)o=rn[n],o.blockedOn===t&&(o.blockedOn=null);for(;0<rn.length&&(n=rn[0],n.blockedOn===null);)Ff(n),n.blockedOn===null&&rn.shift()}var co=Qt.ReactCurrentBatchConfig,hi=!0;function sg(t,e,n,o){var r=ge,i=co.transition;co.transition=null;try{ge=1,ua(t,e,n,o)}finally{ge=r,co.transition=i}}function lg(t,e,n,o){var r=ge,i=co.transition;co.transition=null;try{ge=4,ua(t,e,n,o)}finally{ge=r,co.transition=i}}function ua(t,e,n,o){if(hi){var r=il(t,e,n,o);if(r===null)Is(t,e,o,mi,n),mu(t,o);else if(rg(r,t,e,n,o))o.stopPropagation();else if(mu(t,o),e&4&&-1<og.indexOf(t)){for(;r!==null;){var i=Tr(r);if(i!==null&&bf(i),i=il(t,e,n,o),i===null&&Is(t,e,o,mi,n),i===r)break;r=i}r!==null&&o.stopPropagation()}else Is(t,e,o,null,n)}}var mi=null;function il(t,e,n,o){if(mi=null,t=ia(o),t=Mn(t),t!==null)if(e=$n(t),e===null)t=null;else if(n=e.tag,n===13){if(t=If(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mi=t,null}function Of(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Km()){case sa:return 1;case Rf:return 4;case fi:case Ym:return 16;case Pf:return 536870912;default:return 16}default:return 16}}var ln=null,ca=null,Qr=null;function Gf(){if(Qr)return Qr;var t,e=ca,n=e.length,o,r="value"in ln?ln.value:ln.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(o=1;o<=s&&e[n-o]===r[i-o];o++);return Qr=r.slice(t,1<o?1-o:void 0)}function Zr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kr(){return!0}function vu(){return!1}function gt(t){function e(n,o,r,i,s){this._reactName=n,this._targetInst=r,this.type=o,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?kr:vu,this.isPropagationStopped=vu,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kr)},persist:function(){},isPersistent:kr}),e}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=gt(wo),Er=Ae({},wo,{view:0,detail:0}),ag=gt(Er),gs,vs,Do,Vi=Ae({},Er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Do&&(Do&&t.type==="mousemove"?(gs=t.screenX-Do.screenX,vs=t.screenY-Do.screenY):vs=gs=0,Do=t),gs)},movementY:function(t){return"movementY"in t?t.movementY:vs}}),yu=gt(Vi),ug=Ae({},Vi,{dataTransfer:0}),cg=gt(ug),dg=Ae({},Er,{relatedTarget:0}),ys=gt(dg),fg=Ae({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),pg=gt(fg),hg=Ae({},wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mg=gt(hg),gg=Ae({},wo,{data:0}),Su=gt(gg),vg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sg[t])?!!e[t]:!1}function fa(){return xg}var Eg=Ae({},Er,{key:function(t){if(t.key){var e=vg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fa,charCode:function(t){return t.type==="keypress"?Zr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tg=gt(Eg),Cg=Ae({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xu=gt(Cg),wg=Ae({},Er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fa}),Ig=gt(wg),Ng=Ae({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_g=gt(Ng),Ag=Ae({},Vi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rg=gt(Ag),Pg=[9,13,27,32],pa=Wt&&"CompositionEvent"in window,Ko=null;Wt&&"documentMode"in document&&(Ko=document.documentMode);var Mg=Wt&&"TextEvent"in window&&!Ko,Hf=Wt&&(!pa||Ko&&8<Ko&&11>=Ko),Eu=" ",Tu=!1;function Vf(t,e){switch(t){case"keyup":return Pg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yn=!1;function kg(t,e){switch(t){case"compositionend":return Bf(e);case"keypress":return e.which!==32?null:(Tu=!0,Eu);case"textInput":return t=e.data,t===Eu&&Tu?null:t;default:return null}}function bg(t,e){if(Yn)return t==="compositionend"||!pa&&Vf(t,e)?(t=Gf(),Qr=ca=ln=null,Yn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hf&&e.locale!=="ko"?null:e.data;default:return null}}var Dg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dg[t.type]:e==="textarea"}function $f(t,e,n,o){xf(o),e=gi(e,"onChange"),0<e.length&&(n=new da("onChange","change",null,n,o),t.push({event:n,listeners:e}))}var Yo=null,lr=null;function Lg(t){ep(t,0)}function Bi(t){var e=Qn(t);if(pf(e))return t}function Ug(t,e){if(t==="change")return e}var qf=!1;if(Wt){var Ss;if(Wt){var xs="oninput"in document;if(!xs){var wu=document.createElement("div");wu.setAttribute("oninput","return;"),xs=typeof wu.oninput=="function"}Ss=xs}else Ss=!1;qf=Ss&&(!document.documentMode||9<document.documentMode)}function Iu(){Yo&&(Yo.detachEvent("onpropertychange",zf),lr=Yo=null)}function zf(t){if(t.propertyName==="value"&&Bi(lr)){var e=[];$f(e,lr,t,ia(t)),wf(Lg,e)}}function Fg(t,e,n){t==="focusin"?(Iu(),Yo=e,lr=n,Yo.attachEvent("onpropertychange",zf)):t==="focusout"&&Iu()}function Og(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bi(lr)}function Gg(t,e){if(t==="click")return Bi(e)}function Hg(t,e){if(t==="input"||t==="change")return Bi(e)}function Vg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dt=typeof Object.is=="function"?Object.is:Vg;function ar(t,e){if(Dt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!Vs.call(e,r)||!Dt(t[r],e[r]))return!1}return!0}function Nu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _u(t,e){var n=Nu(t);t=0;for(var o;n;){if(n.nodeType===3){if(o=t+n.textContent.length,t<=e&&o>=e)return{node:n,offset:e-t};t=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nu(n)}}function Jf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wf(){for(var t=window,e=ui();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ui(t.document)}return e}function ha(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bg(t){var e=Wf(),n=t.focusedElem,o=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Jf(n.ownerDocument.documentElement,n)){if(o!==null&&ha(n)){if(e=o.start,t=o.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=o.end===void 0?i:Math.min(o.end,r),!t.extend&&i>o&&(r=o,o=i,i=r),r=_u(n,i);var s=_u(n,o);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>o?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $g=Wt&&"documentMode"in document&&11>=document.documentMode,jn=null,sl=null,jo=null,ll=!1;function Au(t,e,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ll||jn==null||jn!==ui(o)||(o=jn,"selectionStart"in o&&ha(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),jo&&ar(jo,o)||(jo=o,o=gi(sl,"onSelect"),0<o.length&&(e=new da("onSelect","select",null,e,n),t.push({event:e,listeners:o}),e.target=jn)))}function br(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xn={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Es={},Kf={};Wt&&(Kf=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function $i(t){if(Es[t])return Es[t];if(!Xn[t])return t;var e=Xn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Kf)return Es[t]=e[n];return t}var Yf=$i("animationend"),jf=$i("animationiteration"),Xf=$i("animationstart"),Qf=$i("transitionend"),Zf=new Map,Ru="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(t,e){Zf.set(t,e),Bn(e,[t])}for(var Ts=0;Ts<Ru.length;Ts++){var Cs=Ru[Ts],qg=Cs.toLowerCase(),zg=Cs[0].toUpperCase()+Cs.slice(1);En(qg,"on"+zg)}En(Yf,"onAnimationEnd");En(jf,"onAnimationIteration");En(Xf,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(Qf,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jg=new Set("cancel close invalid load scroll toggle".split(" ").concat($o));function Pu(t,e,n){var o=t.type||"unknown-event";t.currentTarget=n,qm(o,e,void 0,t),t.currentTarget=null}function ep(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var o=t[n],r=o.event;o=o.listeners;e:{var i=void 0;if(e)for(var s=o.length-1;0<=s;s--){var u=o[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&r.isPropagationStopped())break e;Pu(r,u,d),i=c}else for(s=0;s<o.length;s++){if(u=o[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&r.isPropagationStopped())break e;Pu(r,u,d),i=c}}}if(di)throw t=nl,di=!1,nl=null,t}function Ee(t,e){var n=e[fl];n===void 0&&(n=e[fl]=new Set);var o=t+"__bubble";n.has(o)||(tp(e,t,2,!1),n.add(o))}function ws(t,e,n){var o=0;e&&(o|=4),tp(n,t,o,e)}var Dr="_reactListening"+Math.random().toString(36).slice(2);function ur(t){if(!t[Dr]){t[Dr]=!0,af.forEach(function(n){n!=="selectionchange"&&(Jg.has(n)||ws(n,!1,t),ws(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dr]||(e[Dr]=!0,ws("selectionchange",!1,e))}}function tp(t,e,n,o){switch(Of(e)){case 1:var r=sg;break;case 4:r=lg;break;default:r=ua}n=r.bind(null,e,n,t),r=void 0,!tl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),o?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Is(t,e,n,o,r){var i=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var s=o.tag;if(s===3||s===4){var u=o.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(s===4)for(s=o.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;s=s.return}for(;u!==null;){if(s=Mn(u),s===null)return;if(c=s.tag,c===5||c===6){o=i=s;continue e}u=u.parentNode}}o=o.return}wf(function(){var d=i,f=ia(n),m=[];e:{var h=Zf.get(t);if(h!==void 0){var g=da,x=t;switch(t){case"keypress":if(Zr(n)===0)break e;case"keydown":case"keyup":g=Tg;break;case"focusin":x="focus",g=ys;break;case"focusout":x="blur",g=ys;break;case"beforeblur":case"afterblur":g=ys;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=cg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ig;break;case Yf:case jf:case Xf:g=pg;break;case Qf:g=_g;break;case"scroll":g=ag;break;case"wheel":g=Rg;break;case"copy":case"cut":case"paste":g=mg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=xu}var E=(e&4)!==0,C=!E&&t==="scroll",y=E?h!==null?h+"Capture":null:h;E=[];for(var v=d,S;v!==null;){S=v;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,y!==null&&(T=or(v,y),T!=null&&E.push(cr(v,T,S)))),C)break;v=v.return}0<E.length&&(h=new g(h,x,null,n,f),m.push({event:h,listeners:E}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==Zs&&(x=n.relatedTarget||n.fromElement)&&(Mn(x)||x[Kt]))break e;if((g||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=d,x=x?Mn(x):null,x!==null&&(C=$n(x),x!==C||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=d),g!==x)){if(E=yu,T="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=xu,T="onPointerLeave",y="onPointerEnter",v="pointer"),C=g==null?h:Qn(g),S=x==null?h:Qn(x),h=new E(T,v+"leave",g,n,f),h.target=C,h.relatedTarget=S,T=null,Mn(f)===d&&(E=new E(y,v+"enter",x,n,f),E.target=S,E.relatedTarget=C,T=E),C=T,g&&x)t:{for(E=g,y=x,v=0,S=E;S;S=zn(S))v++;for(S=0,T=y;T;T=zn(T))S++;for(;0<v-S;)E=zn(E),v--;for(;0<S-v;)y=zn(y),S--;for(;v--;){if(E===y||y!==null&&E===y.alternate)break t;E=zn(E),y=zn(y)}E=null}else E=null;g!==null&&Mu(m,h,g,E,!1),x!==null&&C!==null&&Mu(m,C,x,E,!0)}}e:{if(h=d?Qn(d):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var I=Ug;else if(Cu(h))if(qf)I=Hg;else{I=Og;var N=Fg}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=Gg);if(I&&(I=I(t,d))){$f(m,I,n,f);break e}N&&N(t,h,d),t==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Ks(h,"number",h.value)}switch(N=d?Qn(d):window,t){case"focusin":(Cu(N)||N.contentEditable==="true")&&(jn=N,sl=d,jo=null);break;case"focusout":jo=sl=jn=null;break;case"mousedown":ll=!0;break;case"contextmenu":case"mouseup":case"dragend":ll=!1,Au(m,n,f);break;case"selectionchange":if($g)break;case"keydown":case"keyup":Au(m,n,f)}var _;if(pa)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Yn?Vf(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Hf&&n.locale!=="ko"&&(Yn||k!=="onCompositionStart"?k==="onCompositionEnd"&&Yn&&(_=Gf()):(ln=f,ca="value"in ln?ln.value:ln.textContent,Yn=!0)),N=gi(d,k),0<N.length&&(k=new Su(k,t,null,n,f),m.push({event:k,listeners:N}),_?k.data=_:(_=Bf(n),_!==null&&(k.data=_)))),(_=Mg?kg(t,n):bg(t,n))&&(d=gi(d,"onBeforeInput"),0<d.length&&(f=new Su("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=_))}ep(m,e)})}function cr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gi(t,e){for(var n=e+"Capture",o=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=or(t,n),i!=null&&o.unshift(cr(t,i,r)),i=or(t,e),i!=null&&o.push(cr(t,i,r))),t=t.return}return o}function zn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mu(t,e,n,o,r){for(var i=e._reactName,s=[];n!==null&&n!==o;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===o)break;u.tag===5&&d!==null&&(u=d,r?(c=or(n,i),c!=null&&s.unshift(cr(n,c,u))):r||(c=or(n,i),c!=null&&s.push(cr(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Wg=/\r\n?/g,Kg=/\u0000|\uFFFD/g;function ku(t){return(typeof t=="string"?t:""+t).replace(Wg,`
`).replace(Kg,"")}function Lr(t,e,n){if(e=ku(e),ku(t)!==e&&n)throw Error(L(425))}function vi(){}var al=null,ul=null;function cl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dl=typeof setTimeout=="function"?setTimeout:void 0,Yg=typeof clearTimeout=="function"?clearTimeout:void 0,bu=typeof Promise=="function"?Promise:void 0,jg=typeof queueMicrotask=="function"?queueMicrotask:typeof bu<"u"?function(t){return bu.resolve(null).then(t).catch(Xg)}:dl;function Xg(t){setTimeout(function(){throw t})}function Ns(t,e){var n=e,o=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(o===0){t.removeChild(r),sr(e);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=r}while(n);sr(e)}function pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Du(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Io=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Io,dr="__reactProps$"+Io,Kt="__reactContainer$"+Io,fl="__reactEvents$"+Io,Qg="__reactListeners$"+Io,Zg="__reactHandles$"+Io;function Mn(t){var e=t[Ot];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kt]||n[Ot]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Du(t);t!==null;){if(n=t[Ot])return n;t=Du(t)}return e}t=n,n=t.parentNode}return null}function Tr(t){return t=t[Ot]||t[Kt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function qi(t){return t[dr]||null}var pl=[],Zn=-1;function Tn(t){return{current:t}}function Te(t){0>Zn||(t.current=pl[Zn],pl[Zn]=null,Zn--)}function xe(t,e){Zn++,pl[Zn]=t.current,t.current=e}var Sn={},je=Tn(Sn),st=Tn(!1),Fn=Sn;function vo(t,e){var n=t.type.contextTypes;if(!n)return Sn;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function lt(t){return t=t.childContextTypes,t!=null}function yi(){Te(st),Te(je)}function Lu(t,e,n){if(je.current!==Sn)throw Error(L(168));xe(je,e),xe(st,n)}function np(t,e,n){var o=t.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var r in o)if(!(r in e))throw Error(L(108,Fm(t)||"Unknown",r));return Ae({},n,o)}function Si(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sn,Fn=je.current,xe(je,t),xe(st,st.current),!0}function Uu(t,e,n){var o=t.stateNode;if(!o)throw Error(L(169));n?(t=np(t,e,Fn),o.__reactInternalMemoizedMergedChildContext=t,Te(st),Te(je),xe(je,t)):Te(st),xe(st,n)}var $t=null,zi=!1,_s=!1;function op(t){$t===null?$t=[t]:$t.push(t)}function e0(t){zi=!0,op(t)}function Cn(){if(!_s&&$t!==null){_s=!0;var t=0,e=ge;try{var n=$t;for(ge=1;t<n.length;t++){var o=n[t];do o=o(!0);while(o!==null)}$t=null,zi=!1}catch(r){throw $t!==null&&($t=$t.slice(t+1)),Af(sa,Cn),r}finally{ge=e,_s=!1}}return null}var eo=[],to=0,xi=null,Ei=0,vt=[],yt=0,On=null,qt=1,zt="";function An(t,e){eo[to++]=Ei,eo[to++]=xi,xi=t,Ei=e}function rp(t,e,n){vt[yt++]=qt,vt[yt++]=zt,vt[yt++]=On,On=t;var o=qt;t=zt;var r=32-Pt(o)-1;o&=~(1<<r),n+=1;var i=32-Pt(e)+r;if(30<i){var s=r-r%5;i=(o&(1<<s)-1).toString(32),o>>=s,r-=s,qt=1<<32-Pt(e)+r|n<<r|o,zt=i+t}else qt=1<<i|n<<r|o,zt=t}function ma(t){t.return!==null&&(An(t,1),rp(t,1,0))}function ga(t){for(;t===xi;)xi=eo[--to],eo[to]=null,Ei=eo[--to],eo[to]=null;for(;t===On;)On=vt[--yt],vt[yt]=null,zt=vt[--yt],vt[yt]=null,qt=vt[--yt],vt[yt]=null}var pt=null,ft=null,we=!1,Rt=null;function ip(t,e){var n=St(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pt=t,ft=pn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pt=t,ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=On!==null?{id:qt,overflow:zt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=St(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pt=t,ft=null,!0):!1;default:return!1}}function hl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ml(t){if(we){var e=ft;if(e){var n=e;if(!Fu(t,e)){if(hl(t))throw Error(L(418));e=pn(n.nextSibling);var o=pt;e&&Fu(t,e)?ip(o,n):(t.flags=t.flags&-4097|2,we=!1,pt=t)}}else{if(hl(t))throw Error(L(418));t.flags=t.flags&-4097|2,we=!1,pt=t}}}function Ou(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pt=t}function Ur(t){if(t!==pt)return!1;if(!we)return Ou(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cl(t.type,t.memoizedProps)),e&&(e=ft)){if(hl(t))throw sp(),Error(L(418));for(;e;)ip(t,e),e=pn(e.nextSibling)}if(Ou(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ft=pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ft=null}}else ft=pt?pn(t.stateNode.nextSibling):null;return!0}function sp(){for(var t=ft;t;)t=pn(t.nextSibling)}function yo(){ft=pt=null,we=!1}function va(t){Rt===null?Rt=[t]:Rt.push(t)}var t0=Qt.ReactCurrentBatchConfig;function Lo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var o=n.stateNode}if(!o)throw Error(L(147,t));var r=o,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var u=r.refs;s===null?delete u[i]:u[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Fr(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gu(t){var e=t._init;return e(t._payload)}function lp(t){function e(y,v){if(t){var S=y.deletions;S===null?(y.deletions=[v],y.flags|=16):S.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function o(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function r(y,v){return y=vn(y,v),y.index=0,y.sibling=null,y}function i(y,v,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<v?(y.flags|=2,v):S):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function u(y,v,S,T){return v===null||v.tag!==6?(v=Ds(S,y.mode,T),v.return=y,v):(v=r(v,S),v.return=y,v)}function c(y,v,S,T){var I=S.type;return I===Kn?f(y,v,S.props.children,T,S.key):v!==null&&(v.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===nn&&Gu(I)===v.type)?(T=r(v,S.props),T.ref=Lo(y,v,S),T.return=y,T):(T=si(S.type,S.key,S.props,null,y.mode,T),T.ref=Lo(y,v,S),T.return=y,T)}function d(y,v,S,T){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Ls(S,y.mode,T),v.return=y,v):(v=r(v,S.children||[]),v.return=y,v)}function f(y,v,S,T,I){return v===null||v.tag!==7?(v=Ln(S,y.mode,T,I),v.return=y,v):(v=r(v,S),v.return=y,v)}function m(y,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ds(""+v,y.mode,S),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Nr:return S=si(v.type,v.key,v.props,null,y.mode,S),S.ref=Lo(y,null,v),S.return=y,S;case Wn:return v=Ls(v,y.mode,S),v.return=y,v;case nn:var T=v._init;return m(y,T(v._payload),S)}if(Vo(v)||Po(v))return v=Ln(v,y.mode,S,null),v.return=y,v;Fr(y,v)}return null}function h(y,v,S,T){var I=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return I!==null?null:u(y,v,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Nr:return S.key===I?c(y,v,S,T):null;case Wn:return S.key===I?d(y,v,S,T):null;case nn:return I=S._init,h(y,v,I(S._payload),T)}if(Vo(S)||Po(S))return I!==null?null:f(y,v,S,T,null);Fr(y,S)}return null}function g(y,v,S,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return y=y.get(S)||null,u(v,y,""+T,I);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Nr:return y=y.get(T.key===null?S:T.key)||null,c(v,y,T,I);case Wn:return y=y.get(T.key===null?S:T.key)||null,d(v,y,T,I);case nn:var N=T._init;return g(y,v,S,N(T._payload),I)}if(Vo(T)||Po(T))return y=y.get(S)||null,f(v,y,T,I,null);Fr(v,T)}return null}function x(y,v,S,T){for(var I=null,N=null,_=v,k=v=0,b=null;_!==null&&k<S.length;k++){_.index>k?(b=_,_=null):b=_.sibling;var P=h(y,_,S[k],T);if(P===null){_===null&&(_=b);break}t&&_&&P.alternate===null&&e(y,_),v=i(P,v,k),N===null?I=P:N.sibling=P,N=P,_=b}if(k===S.length)return n(y,_),we&&An(y,k),I;if(_===null){for(;k<S.length;k++)_=m(y,S[k],T),_!==null&&(v=i(_,v,k),N===null?I=_:N.sibling=_,N=_);return we&&An(y,k),I}for(_=o(y,_);k<S.length;k++)b=g(_,y,k,S[k],T),b!==null&&(t&&b.alternate!==null&&_.delete(b.key===null?k:b.key),v=i(b,v,k),N===null?I=b:N.sibling=b,N=b);return t&&_.forEach(function(F){return e(y,F)}),we&&An(y,k),I}function E(y,v,S,T){var I=Po(S);if(typeof I!="function")throw Error(L(150));if(S=I.call(S),S==null)throw Error(L(151));for(var N=I=null,_=v,k=v=0,b=null,P=S.next();_!==null&&!P.done;k++,P=S.next()){_.index>k?(b=_,_=null):b=_.sibling;var F=h(y,_,P.value,T);if(F===null){_===null&&(_=b);break}t&&_&&F.alternate===null&&e(y,_),v=i(F,v,k),N===null?I=F:N.sibling=F,N=F,_=b}if(P.done)return n(y,_),we&&An(y,k),I;if(_===null){for(;!P.done;k++,P=S.next())P=m(y,P.value,T),P!==null&&(v=i(P,v,k),N===null?I=P:N.sibling=P,N=P);return we&&An(y,k),I}for(_=o(y,_);!P.done;k++,P=S.next())P=g(_,y,k,P.value,T),P!==null&&(t&&P.alternate!==null&&_.delete(P.key===null?k:P.key),v=i(P,v,k),N===null?I=P:N.sibling=P,N=P);return t&&_.forEach(function(Q){return e(y,Q)}),we&&An(y,k),I}function C(y,v,S,T){if(typeof S=="object"&&S!==null&&S.type===Kn&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Nr:e:{for(var I=S.key,N=v;N!==null;){if(N.key===I){if(I=S.type,I===Kn){if(N.tag===7){n(y,N.sibling),v=r(N,S.props.children),v.return=y,y=v;break e}}else if(N.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===nn&&Gu(I)===N.type){n(y,N.sibling),v=r(N,S.props),v.ref=Lo(y,N,S),v.return=y,y=v;break e}n(y,N);break}else e(y,N);N=N.sibling}S.type===Kn?(v=Ln(S.props.children,y.mode,T,S.key),v.return=y,y=v):(T=si(S.type,S.key,S.props,null,y.mode,T),T.ref=Lo(y,v,S),T.return=y,y=T)}return s(y);case Wn:e:{for(N=S.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(y,v.sibling),v=r(v,S.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=Ls(S,y.mode,T),v.return=y,y=v}return s(y);case nn:return N=S._init,C(y,v,N(S._payload),T)}if(Vo(S))return x(y,v,S,T);if(Po(S))return E(y,v,S,T);Fr(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(y,v.sibling),v=r(v,S),v.return=y,y=v):(n(y,v),v=Ds(S,y.mode,T),v.return=y,y=v),s(y)):n(y,v)}return C}var So=lp(!0),ap=lp(!1),Ti=Tn(null),Ci=null,no=null,ya=null;function Sa(){ya=no=Ci=null}function xa(t){var e=Ti.current;Te(Ti),t._currentValue=e}function gl(t,e,n){for(;t!==null;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===n)break;t=t.return}}function fo(t,e){Ci=t,ya=no=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(it=!0),t.firstContext=null)}function Tt(t){var e=t._currentValue;if(ya!==t)if(t={context:t,memoizedValue:e,next:null},no===null){if(Ci===null)throw Error(L(308));no=t,Ci.dependencies={lanes:0,firstContext:t}}else no=no.next=t;return e}var kn=null;function Ea(t){kn===null?kn=[t]:kn.push(t)}function up(t,e,n,o){var r=e.interleaved;return r===null?(n.next=n,Ea(e)):(n.next=r.next,r.next=n),e.interleaved=n,Yt(t,o)}function Yt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var on=!1;function Ta(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hn(t,e,n){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,de&2){var r=o.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),o.pending=e,Yt(t,n)}return r=o.interleaved,r===null?(e.next=e,Ea(o)):(e.next=r.next,r.next=e),o.interleaved=e,Yt(t,n)}function ei(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,la(t,n)}}function Hu(t,e){var n=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wi(t,e,n,o){var r=t.updateQueue;on=!1;var i=r.firstBaseUpdate,s=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?i=d:s.next=d,s=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=r.baseState;s=0,f=d=c=null,u=i;do{var h=u.lane,g=u.eventTime;if((o&h)===h){f!==null&&(f=f.next={eventTime:g,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var x=t,E=u;switch(h=e,g=n,E.tag){case 1:if(x=E.payload,typeof x=="function"){m=x.call(g,m,h);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=E.payload,h=typeof x=="function"?x.call(g,m,h):x,h==null)break e;m=Ae({},m,h);break e;case 2:on=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[u]:h.push(u))}else g={eventTime:g,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=g,c=m):f=f.next=g,s|=h;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;h=u,u=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(f===null&&(c=m),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Hn|=s,t.lanes=s,t.memoizedState=m}}function Vu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var o=t[e],r=o.callback;if(r!==null){if(o.callback=null,o=n,typeof r!="function")throw Error(L(191,r));r.call(o)}}}var Cr={},Ht=Tn(Cr),fr=Tn(Cr),pr=Tn(Cr);function bn(t){if(t===Cr)throw Error(L(174));return t}function Ca(t,e){switch(xe(pr,e),xe(fr,t),xe(Ht,Cr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:js(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=js(e,t)}Te(Ht),xe(Ht,e)}function xo(){Te(Ht),Te(fr),Te(pr)}function dp(t){bn(pr.current);var e=bn(Ht.current),n=js(e,t.type);e!==n&&(xe(fr,t),xe(Ht,n))}function wa(t){fr.current===t&&(Te(Ht),Te(fr))}var Ne=Tn(0);function Ii(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var As=[];function Ia(){for(var t=0;t<As.length;t++)As[t]._workInProgressVersionPrimary=null;As.length=0}var ti=Qt.ReactCurrentDispatcher,Rs=Qt.ReactCurrentBatchConfig,Gn=0,_e=null,Ue=null,Ge=null,Ni=!1,Xo=!1,hr=0,n0=0;function Je(){throw Error(L(321))}function Na(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dt(t[n],e[n]))return!1;return!0}function _a(t,e,n,o,r,i){if(Gn=i,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ti.current=t===null||t.memoizedState===null?s0:l0,t=n(o,r),Xo){i=0;do{if(Xo=!1,hr=0,25<=i)throw Error(L(301));i+=1,Ge=Ue=null,e.updateQueue=null,ti.current=a0,t=n(o,r)}while(Xo)}if(ti.current=_i,e=Ue!==null&&Ue.next!==null,Gn=0,Ge=Ue=_e=null,Ni=!1,e)throw Error(L(300));return t}function Aa(){var t=hr!==0;return hr=0,t}function Ft(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?_e.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Ct(){if(Ue===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=Ge===null?_e.memoizedState:Ge.next;if(e!==null)Ge=e,Ue=t;else{if(t===null)throw Error(L(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ge===null?_e.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function mr(t,e){return typeof e=="function"?e(t):e}function Ps(t){var e=Ct(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var o=Ue,r=o.baseQueue,i=n.pending;if(i!==null){if(r!==null){var s=r.next;r.next=i.next,i.next=s}o.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,o=o.baseState;var u=s=null,c=null,d=i;do{var f=d.lane;if((Gn&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),o=d.hasEagerState?d.eagerState:t(o,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=m,s=o):c=c.next=m,_e.lanes|=f,Hn|=f}d=d.next}while(d!==null&&d!==i);c===null?s=o:c.next=u,Dt(o,e.memoizedState)||(it=!0),e.memoizedState=o,e.baseState=s,e.baseQueue=c,n.lastRenderedState=o}if(t=n.interleaved,t!==null){r=t;do i=r.lane,_e.lanes|=i,Hn|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ms(t){var e=Ct(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var o=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do i=t(i,s.action),s=s.next;while(s!==r);Dt(i,e.memoizedState)||(it=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,o]}function fp(){}function pp(t,e){var n=_e,o=Ct(),r=e(),i=!Dt(o.memoizedState,r);if(i&&(o.memoizedState=r,it=!0),o=o.queue,Ra(gp.bind(null,n,o,t),[t]),o.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,gr(9,mp.bind(null,n,o,r,e),void 0,null),He===null)throw Error(L(349));Gn&30||hp(n,e,r)}return r}function hp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mp(t,e,n,o){e.value=n,e.getSnapshot=o,vp(e)&&yp(t)}function gp(t,e,n){return n(function(){vp(e)&&yp(t)})}function vp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dt(t,n)}catch{return!0}}function yp(t){var e=Yt(t,1);e!==null&&Mt(e,t,1,-1)}function Bu(t){var e=Ft();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:t},e.queue=t,t=t.dispatch=i0.bind(null,_e,t),[e.memoizedState,t]}function gr(t,e,n,o){return t={tag:t,create:e,destroy:n,deps:o,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(o=n.next,n.next=t,t.next=o,e.lastEffect=t)),t}function Sp(){return Ct().memoizedState}function ni(t,e,n,o){var r=Ft();_e.flags|=t,r.memoizedState=gr(1|e,n,void 0,o===void 0?null:o)}function Ji(t,e,n,o){var r=Ct();o=o===void 0?null:o;var i=void 0;if(Ue!==null){var s=Ue.memoizedState;if(i=s.destroy,o!==null&&Na(o,s.deps)){r.memoizedState=gr(e,n,i,o);return}}_e.flags|=t,r.memoizedState=gr(1|e,n,i,o)}function $u(t,e){return ni(8390656,8,t,e)}function Ra(t,e){return Ji(2048,8,t,e)}function xp(t,e){return Ji(4,2,t,e)}function Ep(t,e){return Ji(4,4,t,e)}function Tp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cp(t,e,n){return n=n!=null?n.concat([t]):null,Ji(4,4,Tp.bind(null,e,t),n)}function Pa(){}function wp(t,e){var n=Ct();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&Na(e,o[1])?o[0]:(n.memoizedState=[t,e],t)}function Ip(t,e){var n=Ct();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&Na(e,o[1])?o[0]:(t=t(),n.memoizedState=[t,e],t)}function Np(t,e,n){return Gn&21?(Dt(n,e)||(n=Mf(),_e.lanes|=n,Hn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,it=!0),t.memoizedState=n)}function o0(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var o=Rs.transition;Rs.transition={};try{t(!1),e()}finally{ge=n,Rs.transition=o}}function _p(){return Ct().memoizedState}function r0(t,e,n){var o=gn(t);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},Ap(t))Rp(e,n);else if(n=up(t,e,n,o),n!==null){var r=Ze();Mt(n,t,o,r),Pp(n,e,o)}}function i0(t,e,n){var o=gn(t),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ap(t))Rp(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,u=i(s,n);if(r.hasEagerState=!0,r.eagerState=u,Dt(u,s)){var c=e.interleaved;c===null?(r.next=r,Ea(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=up(t,e,r,o),n!==null&&(r=Ze(),Mt(n,t,o,r),Pp(n,e,o))}}function Ap(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function Rp(t,e){Xo=Ni=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Pp(t,e,n){if(n&4194240){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,la(t,n)}}var _i={readContext:Tt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},s0={readContext:Tt,useCallback:function(t,e){return Ft().memoizedState=[t,e===void 0?null:e],t},useContext:Tt,useEffect:$u,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ni(4194308,4,Tp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ni(4194308,4,t,e)},useInsertionEffect:function(t,e){return ni(4,2,t,e)},useMemo:function(t,e){var n=Ft();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var o=Ft();return e=n!==void 0?n(e):e,o.memoizedState=o.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},o.queue=t,t=t.dispatch=r0.bind(null,_e,t),[o.memoizedState,t]},useRef:function(t){var e=Ft();return t={current:t},e.memoizedState=t},useState:Bu,useDebugValue:Pa,useDeferredValue:function(t){return Ft().memoizedState=t},useTransition:function(){var t=Bu(!1),e=t[0];return t=o0.bind(null,t[1]),Ft().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var o=_e,r=Ft();if(we){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),He===null)throw Error(L(349));Gn&30||hp(o,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,$u(gp.bind(null,o,i,t),[t]),o.flags|=2048,gr(9,mp.bind(null,o,i,n,e),void 0,null),n},useId:function(){var t=Ft(),e=He.identifierPrefix;if(we){var n=zt,o=qt;n=(o&~(1<<32-Pt(o)-1)).toString(32)+n,e=":"+e+"R"+n,n=hr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=n0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},l0={readContext:Tt,useCallback:wp,useContext:Tt,useEffect:Ra,useImperativeHandle:Cp,useInsertionEffect:xp,useLayoutEffect:Ep,useMemo:Ip,useReducer:Ps,useRef:Sp,useState:function(){return Ps(mr)},useDebugValue:Pa,useDeferredValue:function(t){var e=Ct();return Np(e,Ue.memoizedState,t)},useTransition:function(){var t=Ps(mr)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:fp,useSyncExternalStore:pp,useId:_p,unstable_isNewReconciler:!1},a0={readContext:Tt,useCallback:wp,useContext:Tt,useEffect:Ra,useImperativeHandle:Cp,useInsertionEffect:xp,useLayoutEffect:Ep,useMemo:Ip,useReducer:Ms,useRef:Sp,useState:function(){return Ms(mr)},useDebugValue:Pa,useDeferredValue:function(t){var e=Ct();return Ue===null?e.memoizedState=t:Np(e,Ue.memoizedState,t)},useTransition:function(){var t=Ms(mr)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:fp,useSyncExternalStore:pp,useId:_p,unstable_isNewReconciler:!1};function _t(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vl(t,e,n,o){e=t.memoizedState,n=n(o,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wi={isMounted:function(t){return(t=t._reactInternals)?$n(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var o=Ze(),r=gn(t),i=Jt(o,r);i.payload=e,n!=null&&(i.callback=n),e=hn(t,i,r),e!==null&&(Mt(e,t,r,o),ei(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var o=Ze(),r=gn(t),i=Jt(o,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hn(t,i,r),e!==null&&(Mt(e,t,r,o),ei(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ze(),o=gn(t),r=Jt(n,o);r.tag=2,e!=null&&(r.callback=e),e=hn(t,r,o),e!==null&&(Mt(e,t,o,n),ei(e,t,o))}};function qu(t,e,n,o,r,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,i,s):e.prototype&&e.prototype.isPureReactComponent?!ar(n,o)||!ar(r,i):!0}function Mp(t,e,n){var o=!1,r=Sn,i=e.contextType;return typeof i=="object"&&i!==null?i=Tt(i):(r=lt(e)?Fn:je.current,o=e.contextTypes,i=(o=o!=null)?vo(t,r):Sn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wi,t.stateNode=e,e._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function zu(t,e,n,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,o),e.state!==t&&Wi.enqueueReplaceState(e,e.state,null)}function yl(t,e,n,o){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ta(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Tt(i):(i=lt(e)?Fn:je.current,r.context=vo(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(vl(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Wi.enqueueReplaceState(r,r.state,null),wi(t,n,r,o),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,e){try{var n="",o=e;do n+=Um(o),o=o.return;while(o);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function ks(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var u0=typeof WeakMap=="function"?WeakMap:Map;function kp(t,e,n){n=Jt(-1,n),n.tag=3,n.payload={element:null};var o=e.value;return n.callback=function(){Ri||(Ri=!0,Rl=o),Sl(t,e)},n}function bp(t,e,n){n=Jt(-1,n),n.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var r=e.value;n.payload=function(){return o(r)},n.callback=function(){Sl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Sl(t,e),typeof o!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Ju(t,e,n){var o=t.pingCache;if(o===null){o=t.pingCache=new u0;var r=new Set;o.set(e,r)}else r=o.get(e),r===void 0&&(r=new Set,o.set(e,r));r.has(n)||(r.add(n),t=C0.bind(null,t,e,n),e.then(t,t))}function Wu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ku(t,e,n,o,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jt(-1,1),e.tag=2,hn(n,e,1))),n.lanes|=1),t)}var c0=Qt.ReactCurrentOwner,it=!1;function Qe(t,e,n,o){e.child=t===null?ap(e,null,n,o):So(e,t.child,n,o)}function Yu(t,e,n,o,r){n=n.render;var i=e.ref;return fo(e,r),o=_a(t,e,n,o,i,r),n=Aa(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,jt(t,e,r)):(we&&n&&ma(e),e.flags|=1,Qe(t,e,o,r),e.child)}function ju(t,e,n,o,r){if(t===null){var i=n.type;return typeof i=="function"&&!Oa(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Dp(t,e,i,o,r)):(t=si(n.type,null,o,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:ar,n(s,o)&&t.ref===e.ref)return jt(t,e,r)}return e.flags|=1,t=vn(i,o),t.ref=e.ref,t.return=e,e.child=t}function Dp(t,e,n,o,r){if(t!==null){var i=t.memoizedProps;if(ar(i,o)&&t.ref===e.ref)if(it=!1,e.pendingProps=o=i,(t.lanes&r)!==0)t.flags&131072&&(it=!0);else return e.lanes=t.lanes,jt(t,e,r)}return xl(t,e,n,o,r)}function Lp(t,e,n){var o=e.pendingProps,r=o.children,i=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(ro,dt),dt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(ro,dt),dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=i!==null?i.baseLanes:n,xe(ro,dt),dt|=o}else i!==null?(o=i.baseLanes|n,e.memoizedState=null):o=n,xe(ro,dt),dt|=o;return Qe(t,e,r,n),e.child}function Up(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xl(t,e,n,o,r){var i=lt(n)?Fn:je.current;return i=vo(e,i),fo(e,r),n=_a(t,e,n,o,i,r),o=Aa(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,jt(t,e,r)):(we&&o&&ma(e),e.flags|=1,Qe(t,e,n,r),e.child)}function Xu(t,e,n,o,r){if(lt(n)){var i=!0;Si(e)}else i=!1;if(fo(e,r),e.stateNode===null)oi(t,e),Mp(e,n,o),yl(e,n,o,r),o=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tt(d):(d=lt(n)?Fn:je.current,d=vo(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";m||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==o||c!==d)&&zu(e,s,o,d),on=!1;var h=e.memoizedState;s.state=h,wi(e,o,s,r),c=e.memoizedState,u!==o||h!==c||st.current||on?(typeof f=="function"&&(vl(e,n,f,o),c=e.memoizedState),(u=on||qu(e,n,u,o,h,c,d))?(m||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=c),s.props=o,s.state=c,s.context=d,o=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{s=e.stateNode,cp(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:_t(e.type,u),s.props=d,m=e.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Tt(c):(c=lt(n)?Fn:je.current,c=vo(e,c));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==m||h!==c)&&zu(e,s,o,c),on=!1,h=e.memoizedState,s.state=h,wi(e,o,s,r);var x=e.memoizedState;u!==m||h!==x||st.current||on?(typeof g=="function"&&(vl(e,n,g,o),x=e.memoizedState),(d=on||qu(e,n,d,o,h,x,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(o,x,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(o,x,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=x),s.props=o,s.state=x,s.context=c,o=d):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),o=!1)}return El(t,e,n,o,i,r)}function El(t,e,n,o,r,i){Up(t,e);var s=(e.flags&128)!==0;if(!o&&!s)return r&&Uu(e,n,!1),jt(t,e,i);o=e.stateNode,c0.current=e;var u=s&&typeof n.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,t!==null&&s?(e.child=So(e,t.child,null,i),e.child=So(e,null,u,i)):Qe(t,e,u,i),e.memoizedState=o.state,r&&Uu(e,n,!0),e.child}function Fp(t){var e=t.stateNode;e.pendingContext?Lu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lu(t,e.context,!1),Ca(t,e.containerInfo)}function Qu(t,e,n,o,r){return yo(),va(r),e.flags|=256,Qe(t,e,n,o),e.child}var Tl={dehydrated:null,treeContext:null,retryLane:0};function Cl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Op(t,e,n){var o=e.pendingProps,r=Ne.current,i=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),xe(Ne,r&1),t===null)return ml(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=o.children,t=o.fallback,i?(o=e.mode,i=e.child,s={mode:"hidden",children:s},!(o&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=ji(s,o,0,null),t=Ln(t,o,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Cl(n),e.memoizedState=Tl,t):Ma(e,s));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return d0(t,e,s,o,u,r,n);if(i){i=o.fallback,s=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:o.children};return!(s&1)&&e.child!==r?(o=e.child,o.childLanes=0,o.pendingProps=c,e.deletions=null):(o=vn(r,c),o.subtreeFlags=r.subtreeFlags&14680064),u!==null?i=vn(u,i):(i=Ln(i,s,n,null),i.flags|=2),i.return=e,o.return=e,o.sibling=i,e.child=o,o=i,i=e.child,s=t.child.memoizedState,s=s===null?Cl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=Tl,o}return i=t.child,t=i.sibling,o=vn(i,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=n),o.return=e,o.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=o,e.memoizedState=null,o}function Ma(t,e){return e=ji({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Or(t,e,n,o){return o!==null&&va(o),So(e,t.child,null,n),t=Ma(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function d0(t,e,n,o,r,i,s){if(n)return e.flags&256?(e.flags&=-257,o=ks(Error(L(422))),Or(t,e,s,o)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=o.fallback,r=e.mode,o=ji({mode:"visible",children:o.children},r,0,null),i=Ln(i,r,s,null),i.flags|=2,o.return=e,i.return=e,o.sibling=i,e.child=o,e.mode&1&&So(e,t.child,null,s),e.child.memoizedState=Cl(s),e.memoizedState=Tl,i);if(!(e.mode&1))return Or(t,e,s,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var u=o.dgst;return o=u,i=Error(L(419)),o=ks(i,o,void 0),Or(t,e,s,o)}if(u=(s&t.childLanes)!==0,it||u){if(o=He,o!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|s)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Yt(t,r),Mt(o,t,r,-1))}return Fa(),o=ks(Error(L(421))),Or(t,e,s,o)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=w0.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,ft=pn(r.nextSibling),pt=e,we=!0,Rt=null,t!==null&&(vt[yt++]=qt,vt[yt++]=zt,vt[yt++]=On,qt=t.id,zt=t.overflow,On=e),e=Ma(e,o.children),e.flags|=4096,e)}function Zu(t,e,n){t.lanes|=e;var o=t.alternate;o!==null&&(o.lanes|=e),gl(t.return,e,n)}function bs(t,e,n,o,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function Gp(t,e,n){var o=e.pendingProps,r=o.revealOrder,i=o.tail;if(Qe(t,e,o.children,n),o=Ne.current,o&2)o=o&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zu(t,n,e);else if(t.tag===19)Zu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(xe(Ne,o),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ii(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),bs(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ii(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}bs(e,!0,n,null,i);break;case"together":bs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function f0(t,e,n){switch(e.tag){case 3:Fp(e),yo();break;case 5:dp(e);break;case 1:lt(e.type)&&Si(e);break;case 4:Ca(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,r=e.memoizedProps.value;xe(Ti,o._currentValue),o._currentValue=r;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(xe(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?Op(t,e,n):(xe(Ne,Ne.current&1),t=jt(t,e,n),t!==null?t.sibling:null);xe(Ne,Ne.current&1);break;case 19:if(o=(n&e.childLanes)!==0,t.flags&128){if(o)return Gp(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),xe(Ne,Ne.current),o)break;return null;case 22:case 23:return e.lanes=0,Lp(t,e,n)}return jt(t,e,n)}var Hp,wl,Vp,Bp;Hp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wl=function(){};Vp=function(t,e,n,o){var r=t.memoizedProps;if(r!==o){t=e.stateNode,bn(Ht.current);var i=null;switch(n){case"input":r=Js(t,r),o=Js(t,o),i=[];break;case"select":r=Ae({},r,{value:void 0}),o=Ae({},o,{value:void 0}),i=[];break;case"textarea":r=Ys(t,r),o=Ys(t,o),i=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=vi)}Xs(n,o);var s;n=null;for(d in r)if(!o.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var u=r[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(tr.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in o){var c=o[d];if(u=r!=null?r[d]:void 0,o.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(tr.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ee("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Bp=function(t,e,n,o){n!==o&&(e.flags|=4)};function Uo(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,o=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=o,t.childLanes=n,e}function p0(t,e,n){var o=e.pendingProps;switch(ga(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return lt(e.type)&&yi(),We(e),null;case 3:return o=e.stateNode,xo(),Te(st),Te(je),Ia(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Ur(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rt!==null&&(kl(Rt),Rt=null))),wl(t,e),We(e),null;case 5:wa(e);var r=bn(pr.current);if(n=e.type,t!==null&&e.stateNode!=null)Vp(t,e,n,o,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(L(166));return We(e),null}if(t=bn(Ht.current),Ur(e)){o=e.stateNode,n=e.type;var i=e.memoizedProps;switch(o[Ot]=e,o[dr]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",o),Ee("close",o);break;case"iframe":case"object":case"embed":Ee("load",o);break;case"video":case"audio":for(r=0;r<$o.length;r++)Ee($o[r],o);break;case"source":Ee("error",o);break;case"img":case"image":case"link":Ee("error",o),Ee("load",o);break;case"details":Ee("toggle",o);break;case"input":au(o,i),Ee("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",o);break;case"textarea":cu(o,i),Ee("invalid",o)}Xs(n,i),r=null;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="children"?typeof u=="string"?o.textContent!==u&&(i.suppressHydrationWarning!==!0&&Lr(o.textContent,u,t),r=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Lr(o.textContent,u,t),r=["children",""+u]):tr.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&Ee("scroll",o)}switch(n){case"input":_r(o),uu(o,i,!0);break;case"textarea":_r(o),du(o);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(o.onclick=vi)}o=r,e.updateQueue=o,o!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=s.createElement(n,{is:o.is}):(t=s.createElement(n),n==="select"&&(s=t,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):t=s.createElementNS(t,n),t[Ot]=e,t[dr]=o,Hp(t,e,!1,!1),e.stateNode=t;e:{switch(s=Qs(n,o),n){case"dialog":Ee("cancel",t),Ee("close",t),r=o;break;case"iframe":case"object":case"embed":Ee("load",t),r=o;break;case"video":case"audio":for(r=0;r<$o.length;r++)Ee($o[r],t);r=o;break;case"source":Ee("error",t),r=o;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),r=o;break;case"details":Ee("toggle",t),r=o;break;case"input":au(t,o),r=Js(t,o),Ee("invalid",t);break;case"option":r=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},r=Ae({},o,{value:void 0}),Ee("invalid",t);break;case"textarea":cu(t,o),r=Ys(t,o),Ee("invalid",t);break;default:r=o}Xs(n,r),u=r;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?Sf(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&vf(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&nr(t,c):typeof c=="number"&&nr(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(tr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ee("scroll",t):c!=null&&ta(t,i,c,s))}switch(n){case"input":_r(t),uu(t,o,!1);break;case"textarea":_r(t),du(t);break;case"option":o.value!=null&&t.setAttribute("value",""+yn(o.value));break;case"select":t.multiple=!!o.multiple,i=o.value,i!=null?lo(t,!!o.multiple,i,!1):o.defaultValue!=null&&lo(t,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=vi)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return We(e),null;case 6:if(t&&e.stateNode!=null)Bp(t,e,t.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(L(166));if(n=bn(pr.current),bn(Ht.current),Ur(e)){if(o=e.stateNode,n=e.memoizedProps,o[Ot]=e,(i=o.nodeValue!==n)&&(t=pt,t!==null))switch(t.tag){case 3:Lr(o.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lr(o.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[Ot]=e,e.stateNode=o}return We(e),null;case 13:if(Te(Ne),o=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&ft!==null&&e.mode&1&&!(e.flags&128))sp(),yo(),e.flags|=98560,i=!1;else if(i=Ur(e),o!==null&&o.dehydrated!==null){if(t===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Ot]=e}else yo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),i=!1}else Rt!==null&&(kl(Rt),Rt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Fe===0&&(Fe=3):Fa())),e.updateQueue!==null&&(e.flags|=4),We(e),null);case 4:return xo(),wl(t,e),t===null&&ur(e.stateNode.containerInfo),We(e),null;case 10:return xa(e.type._context),We(e),null;case 17:return lt(e.type)&&yi(),We(e),null;case 19:if(Te(Ne),i=e.memoizedState,i===null)return We(e),null;if(o=(e.flags&128)!==0,s=i.rendering,s===null)if(o)Uo(i,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Ii(t),s!==null){for(e.flags|=128,Uo(i,!1),o=s.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=n,n=e.child;n!==null;)i=n,t=o,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&Me()>To&&(e.flags|=128,o=!0,Uo(i,!1),e.lanes=4194304)}else{if(!o)if(t=Ii(s),t!==null){if(e.flags|=128,o=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Uo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!we)return We(e),null}else 2*Me()-i.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,o=!0,Uo(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Me(),e.sibling=null,n=Ne.current,xe(Ne,o?n&1|2:n&1),e):(We(e),null);case 22:case 23:return Ua(),o=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?dt&1073741824&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function h0(t,e){switch(ga(e),e.tag){case 1:return lt(e.type)&&yi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xo(),Te(st),Te(je),Ia(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wa(e),null;case 13:if(Te(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));yo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Ne),null;case 4:return xo(),null;case 10:return xa(e.type._context),null;case 22:case 23:return Ua(),null;case 24:return null;default:return null}}var Gr=!1,Ke=!1,m0=typeof WeakSet=="function"?WeakSet:Set,z=null;function oo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){Pe(t,e,o)}else n.current=null}function Il(t,e,n){try{n()}catch(o){Pe(t,e,o)}}var ec=!1;function g0(t,e){if(al=hi,t=Wf(),ha(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var r=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,f=0,m=t,h=null;t:for(;;){for(var g;m!==n||r!==0&&m.nodeType!==3||(u=s+r),m!==i||o!==0&&m.nodeType!==3||(c=s+o),m.nodeType===3&&(s+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===t)break t;if(h===n&&++d===r&&(u=s),h===i&&++f===o&&(c=s),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ul={focusedElem:t,selectionRange:n},hi=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,C=x.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?E:_t(e.type,E),C);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(T){Pe(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return x=ec,ec=!1,x}function Qo(t,e,n){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Il(e,n,i)}r=r.next}while(r!==o)}}function Ki(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var o=n.create;n.destroy=o()}n=n.next}while(n!==e)}}function Nl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $p(t){var e=t.alternate;e!==null&&(t.alternate=null,$p(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ot],delete e[dr],delete e[fl],delete e[Qg],delete e[Zg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qp(t){return t.tag===5||t.tag===3||t.tag===4}function tc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _l(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vi));else if(o!==4&&(t=t.child,t!==null))for(_l(t,e,n),t=t.sibling;t!==null;)_l(t,e,n),t=t.sibling}function Al(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(Al(t,e,n),t=t.sibling;t!==null;)Al(t,e,n),t=t.sibling}var $e=null,At=!1;function tn(t,e,n){for(n=n.child;n!==null;)zp(t,e,n),n=n.sibling}function zp(t,e,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Hi,n)}catch{}switch(n.tag){case 5:Ke||oo(n,e);case 6:var o=$e,r=At;$e=null,tn(t,e,n),$e=o,At=r,$e!==null&&(At?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(At?(t=$e,n=n.stateNode,t.nodeType===8?Ns(t.parentNode,n):t.nodeType===1&&Ns(t,n),sr(t)):Ns($e,n.stateNode));break;case 4:o=$e,r=At,$e=n.stateNode.containerInfo,At=!0,tn(t,e,n),$e=o,At=r;break;case 0:case 11:case 14:case 15:if(!Ke&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var i=r,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Il(n,e,s),r=r.next}while(r!==o)}tn(t,e,n);break;case 1:if(!Ke&&(oo(n,e),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){Pe(n,e,u)}tn(t,e,n);break;case 21:tn(t,e,n);break;case 22:n.mode&1?(Ke=(o=Ke)||n.memoizedState!==null,tn(t,e,n),Ke=o):tn(t,e,n);break;default:tn(t,e,n)}}function nc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new m0),e.forEach(function(o){var r=I0.bind(null,t,o);n.has(o)||(n.add(o),o.then(r,r))})}}function Nt(t,e){var n=e.deletions;if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];try{var i=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:$e=u.stateNode,At=!1;break e;case 3:$e=u.stateNode.containerInfo,At=!0;break e;case 4:$e=u.stateNode.containerInfo,At=!0;break e}u=u.return}if($e===null)throw Error(L(160));zp(i,s,r),$e=null,At=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Pe(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jp(e,t),e=e.sibling}function Jp(t,e){var n=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nt(e,t),Ut(t),o&4){try{Qo(3,t,t.return),Ki(3,t)}catch(E){Pe(t,t.return,E)}try{Qo(5,t,t.return)}catch(E){Pe(t,t.return,E)}}break;case 1:Nt(e,t),Ut(t),o&512&&n!==null&&oo(n,n.return);break;case 5:if(Nt(e,t),Ut(t),o&512&&n!==null&&oo(n,n.return),t.flags&32){var r=t.stateNode;try{nr(r,"")}catch(E){Pe(t,t.return,E)}}if(o&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&hf(r,i),Qs(u,s);var d=Qs(u,i);for(s=0;s<c.length;s+=2){var f=c[s],m=c[s+1];f==="style"?Sf(r,m):f==="dangerouslySetInnerHTML"?vf(r,m):f==="children"?nr(r,m):ta(r,f,m,d)}switch(u){case"input":Ws(r,i);break;case"textarea":mf(r,i);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?lo(r,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?lo(r,!!i.multiple,i.defaultValue,!0):lo(r,!!i.multiple,i.multiple?[]:"",!1))}r[dr]=i}catch(E){Pe(t,t.return,E)}}break;case 6:if(Nt(e,t),Ut(t),o&4){if(t.stateNode===null)throw Error(L(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(E){Pe(t,t.return,E)}}break;case 3:if(Nt(e,t),Ut(t),o&4&&n!==null&&n.memoizedState.isDehydrated)try{sr(e.containerInfo)}catch(E){Pe(t,t.return,E)}break;case 4:Nt(e,t),Ut(t);break;case 13:Nt(e,t),Ut(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Da=Me())),o&4&&nc(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ke=(d=Ke)||f,Nt(e,t),Ke=d):Nt(e,t),Ut(t),o&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(z=t,f=t.child;f!==null;){for(m=z=f;z!==null;){switch(h=z,g=h.child,h.tag){case 0:case 11:case 14:case 15:Qo(4,h,h.return);break;case 1:oo(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){o=h,n=h.return;try{e=o,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(E){Pe(o,n,E)}}break;case 5:oo(h,h.return);break;case 22:if(h.memoizedState!==null){rc(m);continue}}g!==null?(g.return=h,z=g):rc(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{r=m.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,c=m.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=yf("display",s))}catch(E){Pe(t,t.return,E)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(E){Pe(t,t.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Nt(e,t),Ut(t),o&4&&nc(t);break;case 21:break;default:Nt(e,t),Ut(t)}}function Ut(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qp(n)){var o=n;break e}n=n.return}throw Error(L(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(nr(r,""),o.flags&=-33);var i=tc(t);Al(t,i,r);break;case 3:case 4:var s=o.stateNode.containerInfo,u=tc(t);_l(t,u,s);break;default:throw Error(L(161))}}catch(c){Pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function v0(t,e,n){z=t,Wp(t)}function Wp(t,e,n){for(var o=(t.mode&1)!==0;z!==null;){var r=z,i=r.child;if(r.tag===22&&o){var s=r.memoizedState!==null||Gr;if(!s){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Ke;u=Gr;var d=Ke;if(Gr=s,(Ke=c)&&!d)for(z=r;z!==null;)s=z,c=s.child,s.tag===22&&s.memoizedState!==null?ic(r):c!==null?(c.return=s,z=c):ic(r);for(;i!==null;)z=i,Wp(i),i=i.sibling;z=r,Gr=u,Ke=d}oc(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,z=i):oc(t)}}function oc(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ke||Ki(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!Ke)if(n===null)o.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:_t(e.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Vu(e,i,o);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vu(e,s,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&sr(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Ke||e.flags&512&&Nl(e)}catch(h){Pe(e,e.return,h)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function rc(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function ic(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ki(4,e)}catch(c){Pe(e,n,c)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var r=e.return;try{o.componentDidMount()}catch(c){Pe(e,r,c)}}var i=e.return;try{Nl(e)}catch(c){Pe(e,i,c)}break;case 5:var s=e.return;try{Nl(e)}catch(c){Pe(e,s,c)}}}catch(c){Pe(e,e.return,c)}if(e===t){z=null;break}var u=e.sibling;if(u!==null){u.return=e.return,z=u;break}z=e.return}}var y0=Math.ceil,Ai=Qt.ReactCurrentDispatcher,ka=Qt.ReactCurrentOwner,xt=Qt.ReactCurrentBatchConfig,de=0,He=null,ke=null,qe=0,dt=0,ro=Tn(0),Fe=0,vr=null,Hn=0,Yi=0,ba=0,Zo=null,rt=null,Da=0,To=1/0,Bt=null,Ri=!1,Rl=null,mn=null,Hr=!1,an=null,Pi=0,er=0,Pl=null,ri=-1,ii=0;function Ze(){return de&6?Me():ri!==-1?ri:ri=Me()}function gn(t){return t.mode&1?de&2&&qe!==0?qe&-qe:t0.transition!==null?(ii===0&&(ii=Mf()),ii):(t=ge,t!==0||(t=window.event,t=t===void 0?16:Of(t.type)),t):1}function Mt(t,e,n,o){if(50<er)throw er=0,Pl=null,Error(L(185));xr(t,n,o),(!(de&2)||t!==He)&&(t===He&&(!(de&2)&&(Yi|=n),Fe===4&&sn(t,qe)),at(t,o),n===1&&de===0&&!(e.mode&1)&&(To=Me()+500,zi&&Cn()))}function at(t,e){var n=t.callbackNode;tg(t,e);var o=pi(t,t===He?qe:0);if(o===0)n!==null&&hu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=o&-o,t.callbackPriority!==e){if(n!=null&&hu(n),e===1)t.tag===0?e0(sc.bind(null,t)):op(sc.bind(null,t)),jg(function(){!(de&6)&&Cn()}),n=null;else{switch(kf(o)){case 1:n=sa;break;case 4:n=Rf;break;case 16:n=fi;break;case 536870912:n=Pf;break;default:n=fi}n=th(n,Kp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Kp(t,e){if(ri=-1,ii=0,de&6)throw Error(L(327));var n=t.callbackNode;if(po()&&t.callbackNode!==n)return null;var o=pi(t,t===He?qe:0);if(o===0)return null;if(o&30||o&t.expiredLanes||e)e=Mi(t,o);else{e=o;var r=de;de|=2;var i=jp();(He!==t||qe!==e)&&(Bt=null,To=Me()+500,Dn(t,e));do try{E0();break}catch(u){Yp(t,u)}while(!0);Sa(),Ai.current=i,de=r,ke!==null?e=0:(He=null,qe=0,e=Fe)}if(e!==0){if(e===2&&(r=ol(t),r!==0&&(o=r,e=Ml(t,r))),e===1)throw n=vr,Dn(t,0),sn(t,o),at(t,Me()),n;if(e===6)sn(t,o);else{if(r=t.current.alternate,!(o&30)&&!S0(r)&&(e=Mi(t,o),e===2&&(i=ol(t),i!==0&&(o=i,e=Ml(t,i))),e===1))throw n=vr,Dn(t,0),sn(t,o),at(t,Me()),n;switch(t.finishedWork=r,t.finishedLanes=o,e){case 0:case 1:throw Error(L(345));case 2:Rn(t,rt,Bt);break;case 3:if(sn(t,o),(o&130023424)===o&&(e=Da+500-Me(),10<e)){if(pi(t,0)!==0)break;if(r=t.suspendedLanes,(r&o)!==o){Ze(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=dl(Rn.bind(null,t,rt,Bt),e);break}Rn(t,rt,Bt);break;case 4:if(sn(t,o),(o&4194240)===o)break;for(e=t.eventTimes,r=-1;0<o;){var s=31-Pt(o);i=1<<s,s=e[s],s>r&&(r=s),o&=~i}if(o=r,o=Me()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*y0(o/1960))-o,10<o){t.timeoutHandle=dl(Rn.bind(null,t,rt,Bt),o);break}Rn(t,rt,Bt);break;case 5:Rn(t,rt,Bt);break;default:throw Error(L(329))}}}return at(t,Me()),t.callbackNode===n?Kp.bind(null,t):null}function Ml(t,e){var n=Zo;return t.current.memoizedState.isDehydrated&&(Dn(t,e).flags|=256),t=Mi(t,e),t!==2&&(e=rt,rt=n,e!==null&&kl(e)),t}function kl(t){rt===null?rt=t:rt.push.apply(rt,t)}function S0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!Dt(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sn(t,e){for(e&=~ba,e&=~Yi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pt(e),o=1<<n;t[n]=-1,e&=~o}}function sc(t){if(de&6)throw Error(L(327));po();var e=pi(t,0);if(!(e&1))return at(t,Me()),null;var n=Mi(t,e);if(t.tag!==0&&n===2){var o=ol(t);o!==0&&(e=o,n=Ml(t,o))}if(n===1)throw n=vr,Dn(t,0),sn(t,e),at(t,Me()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rn(t,rt,Bt),at(t,Me()),null}function La(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(To=Me()+500,zi&&Cn())}}function Vn(t){an!==null&&an.tag===0&&!(de&6)&&po();var e=de;de|=1;var n=xt.transition,o=ge;try{if(xt.transition=null,ge=1,t)return t()}finally{ge=o,xt.transition=n,de=e,!(de&6)&&Cn()}}function Ua(){dt=ro.current,Te(ro)}function Dn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yg(n)),ke!==null)for(n=ke.return;n!==null;){var o=n;switch(ga(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&yi();break;case 3:xo(),Te(st),Te(je),Ia();break;case 5:wa(o);break;case 4:xo();break;case 13:Te(Ne);break;case 19:Te(Ne);break;case 10:xa(o.type._context);break;case 22:case 23:Ua()}n=n.return}if(He=t,ke=t=vn(t.current,null),qe=dt=e,Fe=0,vr=null,ba=Yi=Hn=0,rt=Zo=null,kn!==null){for(e=0;e<kn.length;e++)if(n=kn[e],o=n.interleaved,o!==null){n.interleaved=null;var r=o.next,i=n.pending;if(i!==null){var s=i.next;i.next=r,o.next=s}n.pending=o}kn=null}return t}function Yp(t,e){do{var n=ke;try{if(Sa(),ti.current=_i,Ni){for(var o=_e.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}Ni=!1}if(Gn=0,Ge=Ue=_e=null,Xo=!1,hr=0,ka.current=null,n===null||n.return===null){Fe=1,vr=e,ke=null;break}e:{var i=t,s=n.return,u=n,c=e;if(e=qe,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=Wu(s);if(g!==null){g.flags&=-257,Ku(g,s,u,i,e),g.mode&1&&Ju(i,d,e),e=g,c=d;var x=e.updateQueue;if(x===null){var E=new Set;E.add(c),e.updateQueue=E}else x.add(c);break e}else{if(!(e&1)){Ju(i,d,e),Fa();break e}c=Error(L(426))}}else if(we&&u.mode&1){var C=Wu(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Ku(C,s,u,i,e),va(Eo(c,u));break e}}i=c=Eo(c,u),Fe!==4&&(Fe=2),Zo===null?Zo=[i]:Zo.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=kp(i,c,e);Hu(i,y);break e;case 1:u=c;var v=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(mn===null||!mn.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=bp(i,u,e);Hu(i,T);break e}}i=i.return}while(i!==null)}Qp(n)}catch(I){e=I,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function jp(){var t=Ai.current;return Ai.current=_i,t===null?_i:t}function Fa(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||!(Hn&268435455)&&!(Yi&268435455)||sn(He,qe)}function Mi(t,e){var n=de;de|=2;var o=jp();(He!==t||qe!==e)&&(Bt=null,Dn(t,e));do try{x0();break}catch(r){Yp(t,r)}while(!0);if(Sa(),de=n,Ai.current=o,ke!==null)throw Error(L(261));return He=null,qe=0,Fe}function x0(){for(;ke!==null;)Xp(ke)}function E0(){for(;ke!==null&&!Jm();)Xp(ke)}function Xp(t){var e=eh(t.alternate,t,dt);t.memoizedProps=t.pendingProps,e===null?Qp(t):ke=e,ka.current=null}function Qp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=h0(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,ke=null;return}}else if(n=p0(n,e,dt),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Fe===0&&(Fe=5)}function Rn(t,e,n){var o=ge,r=xt.transition;try{xt.transition=null,ge=1,T0(t,e,n,o)}finally{xt.transition=r,ge=o}return null}function T0(t,e,n,o){do po();while(an!==null);if(de&6)throw Error(L(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ng(t,i),t===He&&(ke=He=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hr||(Hr=!0,th(fi,function(){return po(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=xt.transition,xt.transition=null;var s=ge;ge=1;var u=de;de|=4,ka.current=null,g0(t,n),Jp(n,t),Bg(ul),hi=!!al,ul=al=null,t.current=n,v0(n),Wm(),de=u,ge=s,xt.transition=i}else t.current=n;if(Hr&&(Hr=!1,an=t,Pi=r),i=t.pendingLanes,i===0&&(mn=null),jm(n.stateNode),at(t,Me()),e!==null)for(o=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(Ri)throw Ri=!1,t=Rl,Rl=null,t;return Pi&1&&t.tag!==0&&po(),i=t.pendingLanes,i&1?t===Pl?er++:(er=0,Pl=t):er=0,Cn(),null}function po(){if(an!==null){var t=kf(Pi),e=xt.transition,n=ge;try{if(xt.transition=null,ge=16>t?16:t,an===null)var o=!1;else{if(t=an,an=null,Pi=0,de&6)throw Error(L(331));var r=de;for(de|=4,z=t.current;z!==null;){var i=z,s=i.child;if(z.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(z=d;z!==null;){var f=z;switch(f.tag){case 0:case 11:case 15:Qo(8,f,i)}var m=f.child;if(m!==null)m.return=f,z=m;else for(;z!==null;){f=z;var h=f.sibling,g=f.return;if($p(f),f===d){z=null;break}if(h!==null){h.return=g,z=h;break}z=g}}}var x=i.alternate;if(x!==null){var E=x.child;if(E!==null){x.child=null;do{var C=E.sibling;E.sibling=null,E=C}while(E!==null)}}z=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,z=s;else e:for(;z!==null;){if(i=z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qo(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,z=y;break e}z=i.return}}var v=t.current;for(z=v;z!==null;){s=z;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,z=S;else e:for(s=v;z!==null;){if(u=z,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ki(9,u)}}catch(I){Pe(u,u.return,I)}if(u===s){z=null;break e}var T=u.sibling;if(T!==null){T.return=u.return,z=T;break e}z=u.return}}if(de=r,Cn(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Hi,t)}catch{}o=!0}return o}finally{ge=n,xt.transition=e}}return!1}function lc(t,e,n){e=Eo(n,e),e=kp(t,e,1),t=hn(t,e,1),e=Ze(),t!==null&&(xr(t,1,e),at(t,e))}function Pe(t,e,n){if(t.tag===3)lc(t,t,n);else for(;e!==null;){if(e.tag===3){lc(e,t,n);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(mn===null||!mn.has(o))){t=Eo(n,t),t=bp(e,t,1),e=hn(e,t,1),t=Ze(),e!==null&&(xr(e,1,t),at(e,t));break}}e=e.return}}function C0(t,e,n){var o=t.pingCache;o!==null&&o.delete(e),e=Ze(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(qe&n)===n&&(Fe===4||Fe===3&&(qe&130023424)===qe&&500>Me()-Da?Dn(t,0):ba|=n),at(t,e)}function Zp(t,e){e===0&&(t.mode&1?(e=Pr,Pr<<=1,!(Pr&130023424)&&(Pr=4194304)):e=1);var n=Ze();t=Yt(t,e),t!==null&&(xr(t,e,n),at(t,n))}function w0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Zp(t,n)}function I0(t,e){var n=0;switch(t.tag){case 13:var o=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(L(314))}o!==null&&o.delete(e),Zp(t,n)}var eh;eh=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||st.current)it=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return it=!1,f0(t,e,n);it=!!(t.flags&131072)}else it=!1,we&&e.flags&1048576&&rp(e,Ei,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;oi(t,e),t=e.pendingProps;var r=vo(e,je.current);fo(e,n),r=_a(null,e,o,t,r,n);var i=Aa();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(o)?(i=!0,Si(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ta(e),r.updater=Wi,e.stateNode=r,r._reactInternals=e,yl(e,o,t,n),e=El(null,e,o,!0,i,n)):(e.tag=0,we&&i&&ma(e),Qe(null,e,r,n),e=e.child),e;case 16:o=e.elementType;e:{switch(oi(t,e),t=e.pendingProps,r=o._init,o=r(o._payload),e.type=o,r=e.tag=_0(o),t=_t(o,t),r){case 0:e=xl(null,e,o,t,n);break e;case 1:e=Xu(null,e,o,t,n);break e;case 11:e=Yu(null,e,o,t,n);break e;case 14:e=ju(null,e,o,_t(o.type,t),n);break e}throw Error(L(306,o,""))}return e;case 0:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:_t(o,r),xl(t,e,o,r,n);case 1:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:_t(o,r),Xu(t,e,o,r,n);case 3:e:{if(Fp(e),t===null)throw Error(L(387));o=e.pendingProps,i=e.memoizedState,r=i.element,cp(t,e),wi(e,o,null,n);var s=e.memoizedState;if(o=s.element,i.isDehydrated)if(i={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Eo(Error(L(423)),e),e=Qu(t,e,o,n,r);break e}else if(o!==r){r=Eo(Error(L(424)),e),e=Qu(t,e,o,n,r);break e}else for(ft=pn(e.stateNode.containerInfo.firstChild),pt=e,we=!0,Rt=null,n=ap(e,null,o,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yo(),o===r){e=jt(t,e,n);break e}Qe(t,e,o,n)}e=e.child}return e;case 5:return dp(e),t===null&&ml(e),o=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,s=r.children,cl(o,r)?s=null:i!==null&&cl(o,i)&&(e.flags|=32),Up(t,e),Qe(t,e,s,n),e.child;case 6:return t===null&&ml(e),null;case 13:return Op(t,e,n);case 4:return Ca(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=So(e,null,o,n):Qe(t,e,o,n),e.child;case 11:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:_t(o,r),Yu(t,e,o,r,n);case 7:return Qe(t,e,e.pendingProps,n),e.child;case 8:return Qe(t,e,e.pendingProps.children,n),e.child;case 12:return Qe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(o=e.type._context,r=e.pendingProps,i=e.memoizedProps,s=r.value,xe(Ti,o._currentValue),o._currentValue=s,i!==null)if(Dt(i.value,s)){if(i.children===r.children&&!st.current){e=jt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){s=i.child;for(var c=u.firstContext;c!==null;){if(c.context===o){if(i.tag===1){c=Jt(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),gl(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(L(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),gl(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Qe(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,o=e.pendingProps.children,fo(e,n),r=Tt(r),o=o(r),e.flags|=1,Qe(t,e,o,n),e.child;case 14:return o=e.type,r=_t(o,e.pendingProps),r=_t(o.type,r),ju(t,e,o,r,n);case 15:return Dp(t,e,e.type,e.pendingProps,n);case 17:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:_t(o,r),oi(t,e),e.tag=1,lt(o)?(t=!0,Si(e)):t=!1,fo(e,n),Mp(e,o,r),yl(e,o,r,n),El(null,e,o,!0,t,n);case 19:return Gp(t,e,n);case 22:return Lp(t,e,n)}throw Error(L(156,e.tag))};function th(t,e){return Af(t,e)}function N0(t,e,n,o){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(t,e,n,o){return new N0(t,e,n,o)}function Oa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _0(t){if(typeof t=="function")return Oa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===oa)return 11;if(t===ra)return 14}return 2}function vn(t,e){var n=t.alternate;return n===null?(n=St(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function si(t,e,n,o,r,i){var s=2;if(o=t,typeof t=="function")Oa(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Kn:return Ln(n.children,r,i,e);case na:s=8,r|=8;break;case Bs:return t=St(12,n,e,r|2),t.elementType=Bs,t.lanes=i,t;case $s:return t=St(13,n,e,r),t.elementType=$s,t.lanes=i,t;case qs:return t=St(19,n,e,r),t.elementType=qs,t.lanes=i,t;case df:return ji(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uf:s=10;break e;case cf:s=9;break e;case oa:s=11;break e;case ra:s=14;break e;case nn:s=16,o=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=St(s,n,e,r),e.elementType=t,e.type=o,e.lanes=i,e}function Ln(t,e,n,o){return t=St(7,t,o,e),t.lanes=n,t}function ji(t,e,n,o){return t=St(22,t,o,e),t.elementType=df,t.lanes=n,t.stateNode={isHidden:!1},t}function Ds(t,e,n){return t=St(6,t,null,e),t.lanes=n,t}function Ls(t,e,n){return e=St(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function A0(t,e,n,o,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ms(0),this.expirationTimes=ms(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ms(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ga(t,e,n,o,r,i,s,u,c){return t=new A0(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=St(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ta(i),t}function R0(t,e,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:o==null?null:""+o,children:t,containerInfo:e,implementation:n}}function nh(t){if(!t)return Sn;t=t._reactInternals;e:{if($n(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(lt(n))return np(t,n,e)}return e}function oh(t,e,n,o,r,i,s,u,c){return t=Ga(n,o,!0,t,r,i,s,u,c),t.context=nh(null),n=t.current,o=Ze(),r=gn(n),i=Jt(o,r),i.callback=e??null,hn(n,i,r),t.current.lanes=r,xr(t,r,o),at(t,o),t}function Xi(t,e,n,o){var r=e.current,i=Ze(),s=gn(r);return n=nh(n),e.context===null?e.context=n:e.pendingContext=n,e=Jt(i,s),e.payload={element:t},o=o===void 0?null:o,o!==null&&(e.callback=o),t=hn(r,e,s),t!==null&&(Mt(t,r,s,i),ei(t,r,s)),s}function ki(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ac(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ha(t,e){ac(t,e),(t=t.alternate)&&ac(t,e)}function P0(){return null}var rh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Va(t){this._internalRoot=t}Qi.prototype.render=Va.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));Xi(t,e,null,null)};Qi.prototype.unmount=Va.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vn(function(){Xi(null,t,null,null)}),e[Kt]=null}};function Qi(t){this._internalRoot=t}Qi.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rn.length&&e!==0&&e<rn[n].priority;n++);rn.splice(n,0,t),n===0&&Ff(t)}};function Ba(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uc(){}function M0(t,e,n,o,r){if(r){if(typeof o=="function"){var i=o;o=function(){var d=ki(s);i.call(d)}}var s=oh(e,o,t,0,null,!1,!1,"",uc);return t._reactRootContainer=s,t[Kt]=s.current,ur(t.nodeType===8?t.parentNode:t),Vn(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof o=="function"){var u=o;o=function(){var d=ki(c);u.call(d)}}var c=Ga(t,0,!1,null,null,!1,!1,"",uc);return t._reactRootContainer=c,t[Kt]=c.current,ur(t.nodeType===8?t.parentNode:t),Vn(function(){Xi(e,c,n,o)}),c}function es(t,e,n,o,r){var i=n._reactRootContainer;if(i){var s=i;if(typeof r=="function"){var u=r;r=function(){var c=ki(s);u.call(c)}}Xi(e,s,t,r)}else s=M0(n,e,t,r,o);return ki(s)}bf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bo(e.pendingLanes);n!==0&&(la(e,n|1),at(e,Me()),!(de&6)&&(To=Me()+500,Cn()))}break;case 13:Vn(function(){var o=Yt(t,1);if(o!==null){var r=Ze();Mt(o,t,1,r)}}),Ha(t,1)}};aa=function(t){if(t.tag===13){var e=Yt(t,134217728);if(e!==null){var n=Ze();Mt(e,t,134217728,n)}Ha(t,134217728)}};Df=function(t){if(t.tag===13){var e=gn(t),n=Yt(t,e);if(n!==null){var o=Ze();Mt(n,t,e,o)}Ha(t,e)}};Lf=function(){return ge};Uf=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};el=function(t,e,n){switch(e){case"input":if(Ws(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var o=n[e];if(o!==t&&o.form===t.form){var r=qi(o);if(!r)throw Error(L(90));pf(o),Ws(o,r)}}}break;case"textarea":mf(t,n);break;case"select":e=n.value,e!=null&&lo(t,!!n.multiple,e,!1)}};Tf=La;Cf=Vn;var k0={usingClientEntryPoint:!1,Events:[Tr,Qn,qi,xf,Ef,La]},Fo={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b0={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nf(t),t===null?null:t.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance||P0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vr.isDisabled&&Vr.supportsFiber)try{Hi=Vr.inject(b0),Gt=Vr}catch{}}mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k0;mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ba(e))throw Error(L(200));return R0(t,e,null,n)};mt.createRoot=function(t,e){if(!Ba(t))throw Error(L(299));var n=!1,o="",r=rh;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Ga(t,1,!1,null,null,n,!1,o,r),t[Kt]=e.current,ur(t.nodeType===8?t.parentNode:t),new Va(e)};mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=Nf(e),t=t===null?null:t.stateNode,t};mt.flushSync=function(t){return Vn(t)};mt.hydrate=function(t,e,n){if(!Zi(e))throw Error(L(200));return es(null,t,e,!0,n)};mt.hydrateRoot=function(t,e,n){if(!Ba(t))throw Error(L(405));var o=n!=null&&n.hydratedSources||null,r=!1,i="",s=rh;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=oh(e,null,t,1,n??null,r,!1,i,s),t[Kt]=e.current,ur(t),o)for(t=0;t<o.length;t++)n=o[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Qi(e)};mt.render=function(t,e,n){if(!Zi(e))throw Error(L(200));return es(null,t,e,!1,n)};mt.unmountComponentAtNode=function(t){if(!Zi(t))throw Error(L(40));return t._reactRootContainer?(Vn(function(){es(null,null,t,!1,function(){t._reactRootContainer=null,t[Kt]=null})}),!0):!1};mt.unstable_batchedUpdates=La;mt.unstable_renderSubtreeIntoContainer=function(t,e,n,o){if(!Zi(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return es(t,e,n,!1,o)};mt.version="18.3.1-next-f1338f8080-20240426";function ih(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ih)}catch(t){console.error(t)}}ih(),rf.exports=mt;var D0=rf.exports,cc=D0;Hs.createRoot=cc.createRoot,Hs.hydrateRoot=cc.hydrateRoot;let Br;const L0=new Uint8Array(16);function U0(){if(!Br&&(Br=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Br))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Br(L0)}const Be=[];for(let t=0;t<256;++t)Be.push((t+256).toString(16).slice(1));function F0(t,e=0){return Be[t[e+0]]+Be[t[e+1]]+Be[t[e+2]]+Be[t[e+3]]+"-"+Be[t[e+4]]+Be[t[e+5]]+"-"+Be[t[e+6]]+Be[t[e+7]]+"-"+Be[t[e+8]]+Be[t[e+9]]+"-"+Be[t[e+10]]+Be[t[e+11]]+Be[t[e+12]]+Be[t[e+13]]+Be[t[e+14]]+Be[t[e+15]]}const O0=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),dc={randomUUID:O0};function Us(t,e,n){if(dc.randomUUID&&!t)return dc.randomUUID();t=t||{};const o=t.random||(t.rng||U0)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,F0(o)}const G0="SintongBangtongDB",xn="projects",$a=()=>new Promise((t,e)=>{if(typeof window>"u"||!window.indexedDB){e(new Error("IndexedDB is not supported"));return}const n=indexedDB.open(G0,1);n.onupgradeneeded=o=>{const r=o.target.result;r.objectStoreNames.contains(xn)||r.createObjectStore(xn)},n.onsuccess=()=>t(n.result),n.onerror=()=>e(n.error)}),qo=async(t,e)=>{try{const n=await $a();return new Promise((o,r)=>{const u=n.transaction(xn,"readwrite").objectStore(xn).put(e,t);u.onsuccess=()=>o(),u.onerror=()=>r(u.error)})}catch(n){console.error("IndexedDB Save Error:",n)}},bl=async t=>{try{const e=await $a();return new Promise((n,o)=>{const s=e.transaction(xn,"readonly").objectStore(xn).get(t);s.onsuccess=()=>n(s.result),s.onerror=()=>o(s.error)})}catch(e){return console.error("IndexedDB Load Error:",e),null}},sh=async t=>{try{const e=await $a();return new Promise((n,o)=>{const s=e.transaction(xn,"readwrite").objectStore(xn).delete(t);s.onsuccess=()=>n(),s.onerror=()=>o(s.error)})}catch(e){console.error("IndexedDB Delete Error:",e)}},lh=V.createContext(void 0),fc=`[  ]
1. :    . (  ,      )
2.   ():
   -   **()  ** . (     ).
   -       .
   -  :  ** **. (   ).
   -  : , ,   .
3.   ():
   -    .   .
   -  :  (),   /, , ,  .
   -   .`,H0=({children:t})=>{const[e,n]=V.useState(""),[o,r]=V.useState(""),[i,s]=V.useState([]),[u,c]=V.useState("webtoon"),[d,f]=V.useState("16:9"),[m,h]=V.useState([]),[g,x]=V.useState([]),[E,C]=V.useState([]),[y,v]=V.useState([]),[S,T]=V.useState(!0),[I,N]=V.useState(fc),[_,k]=V.useState(!1),[b,P]=V.useState(null),[F,Q]=V.useState(null);V.useEffect(()=>{if(i.length>0){const ie=i.map(A=>`[${A.title}]
${A.content}`).join(`

`);r(ie)}},[i]),V.useEffect(()=>{(async()=>{const A=localStorage.getItem("sb_api_key");A&&n(A);try{let $=await bl("currentProject");if(!$){const D=localStorage.getItem("sb_project_data");if(D)try{$=JSON.parse(D)}catch(J){console.error("Failed to parse LocalStorage data",J)}}$&&(r($.script||""),$.scriptSegments&&$.scriptSegments.length>0?s($.scriptSegments):$.script&&!$.scriptSegments&&s([{id:Us(),title:" ",content:$.script}]),c($.selectedStyle||"webtoon"),h($.scenes||[]),x($.characters||[]),C($.referenceImages||[]),v($.props||[]),$.globalAspectRatio&&f($.globalAspectRatio),$.globalScenePrompt&&N($.globalScenePrompt))}catch($){console.error("Load failed",$)}finally{k(!0)}})()},[]);const K=ie=>{r(ie),i.length===0&&s([{id:Us(),title:" ",content:ie}])},W=(ie,A)=>{const $={id:Us(),title:ie,content:A};s(D=>[...D,$])},oe=ie=>{s(A=>A.filter($=>$.id!==ie))},re=(ie,A)=>{s($=>$.map(D=>D.id===ie?{...D,content:A}:D))},ae=()=>{s([]),r("")},G=()=>{qo("currentProject",{script:o,scriptSegments:i,selectedStyle:u,scenes:m,characters:g,referenceImages:E,props:y,globalAspectRatio:d,globalScenePrompt:I}).catch(A=>{console.warn("Failed to save to IndexedDB",A),X("   (   )","error")})};V.useEffect(()=>{if(!_)return;const ie=setTimeout(G,2e3);return()=>clearTimeout(ie)},[o,i,u,m,g,E,y,d,I,_]),V.useEffect(()=>{e&&localStorage.setItem("sb_api_key",e)},[e]);const Y=async()=>{r(""),s([]),h([]),x([]),C([]),v([]),N(fc),localStorage.removeItem("sb_project_data"),await sh("currentProject"),X(" . (  )","success")},X=(ie,A="success")=>{P({message:ie,type:A})},ue=()=>P(null),ee=ie=>Q(ie),ve=()=>Q(null);return p.jsx(lh.Provider,{value:{apiKey:e,setApiKey:n,script:o,setScript:K,scriptSegments:i,addScriptSegment:W,removeScriptSegment:oe,updateScriptSegment:re,clearScriptSegments:ae,selectedStyle:u,setSelectedStyle:c,globalAspectRatio:d,setGlobalAspectRatio:f,scenes:m,setScenes:h,characters:g,setCharacters:x,referenceImages:E,setReferenceImages:C,props:y,setProps:v,isContinuityMode:S,setIsContinuityMode:T,globalScenePrompt:I,setGlobalScenePrompt:N,saveProject:G,resetProject:Y,toast:b,showToast:X,closeToast:ue,modalConfig:F,openModal:ee,closeModal:ve},children:t})},Vt=()=>{const t=V.useContext(lh);if(!t)throw new Error("useProject must be used within a ProjectProvider");return t};var V0={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let B0,$0;function q0(){return{geminiUrl:B0,vertexUrl:$0}}function z0(t,e,n,o){var r,i;if(!(t!=null&&t.baseUrl)){const s=q0();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(i=s.geminiUrl)!==null&&i!==void 0?i:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zt{}function q(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function a(t,e,n){for(let i=0;i<e.length-1;i++){const s=e[i];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];a(f,e.slice(i+1),n[d])}else for(const d of c)a(d,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];a(c[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(u=>l(u,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function J0(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),i=o.split("."),s=new Set;let u=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){u=c;break}if(u!==-1&&i.length>u)for(let c=u;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Dl(t,r,i,0,s)}}function Dl(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const i=e[o];if(i.endsWith("[]")){const s=i.slice(0,-2),u=t;if(s in u&&Array.isArray(u[s]))for(const c of u[s])Dl(c,e,n,o+1,r)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,u=Object.keys(s).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(const d of u)c[d]=s[d];for(const[d,f]of Object.entries(c)){const m=[];for(const h of n.slice(o))h==="*"?m.push(d):m.push(h);a(s,m,f)}for(const d of u)delete s[d]}}else{const s=t;i in s&&Dl(s[i],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qa(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W0(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["operationName"],n);const o=l(t,["resourceName"]);return o!=null&&a(e,["_url","resourceName"],o),e}function K0(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],j0(s)),e}function Y0(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],X0(s)),e}function j0(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Q0(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function X0(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Z0(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function Q0(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],iv(n)),e}function Z0(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],sv(n)),e}function ev(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function tv(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function nv(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],ov(s)),e}function ov(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function ah(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],rv(s)),e}function rv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function iv(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],qa(o));const r=l(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function sv(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],qa(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pc;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(pc||(pc={}));var hc;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(hc||(hc={}));var mc;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(mc||(mc={}));var un;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(un||(un={}));var gc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(gc||(gc={}));var vc;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(vc||(vc={}));var yc;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(yc||(yc={}));var Sc;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Sc||(Sc={}));var xc;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(xc||(xc={}));var Ec;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Ec||(Ec={}));var Tc;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Tc||(Tc={}));var Cc;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Cc||(Cc={}));var wc;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(wc||(wc={}));var Ic;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Ic||(Ic={}));var Nc;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Nc||(Nc={}));var _c;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(_c||(_c={}));var Ac;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ac||(Ac={}));var Rc;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Rc||(Rc={}));var Pc;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Pc||(Pc={}));var bi;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(bi||(bi={}));var Mc;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mc||(Mc={}));var kc;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(kc||(kc={}));var bc;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(bc||(bc={}));var Ll;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ll||(Ll={}));var Dc;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Dc||(Dc={}));var Lc;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Lc||(Lc={}));var Uc;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Uc||(Uc={}));var Fc;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Fc||(Fc={}));var Oc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Oc||(Oc={}));var Gc;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Gc||(Gc={}));var Hc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Hc||(Hc={}));var Vc;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Vc||(Vc={}));var Bc;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Bc||(Bc={}));var $c;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})($c||($c={}));var qc;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(qc||(qc={}));var zc;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(zc||(zc={}));var Jc;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Jc||(Jc={}));var Wc;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Wc||(Wc={}));var Kc;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Kc||(Kc={}));var Yc;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Yc||(Yc={}));var jc;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(jc||(jc={}));var Xc;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Xc||(Xc={}));var Qc;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Qc||(Qc={}));var Zc;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Zc||(Zc={}));var ed;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(ed||(ed={}));var td;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(td||(td={}));var nd;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(nd||(nd={}));var od;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(od||(od={}));var rd;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(rd||(rd={}));var id;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(id||(id={}));var sd;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(sd||(sd={}));var ld;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ld||(ld={}));var ad;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ad||(ad={}));var ud;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ud||(ud={}));var cd;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(cd||(cd={}));var io;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(io||(io={}));class Ul{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Oo{get text(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const m=[];for(const h of(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(x!==null||x!==void 0)&&m.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,d+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const m of(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[h,g]of Object.entries(m))h!=="inlineData"&&(g!==null||g!==void 0)&&f.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,o,r,i,s,u,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,o,r,i,s,u,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class dd{}class fd{}class lv{}class av{}class uv{}class cv{}class pd{}class hd{}class md{}class dv{}class Di{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Di;let r;const i=e;return n?r=Y0(i):r=K0(i),Object.assign(o,r),o}}class gd{}class vd{}class yd{}class Sd{}class fv{}class pv{}class hv{}class za{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new za,i=nv(e);return Object.assign(o,i),o}}class mv{}class gv{}class vv{}class xd{}class yv{get text(){var e,n,o;let r="",i=!1;const s=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,r+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,n,o;let r="";const i=[];for(const s of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&i.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Sv{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ja{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Ja,i=ah(e);return Object.assign(o,i),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function uh(t,e){const n=pe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ch(t){return Array.isArray(t)?t.map(e=>Li(e)):[Li(t)]}function Li(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function dh(t){const e=Li(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fh(t){const e=Li(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ed(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function ph(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Ed(e)):[Ed(t)]}function Fl(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Td(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Cd(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ye(t){if(t==null)throw new Error("ContentUnion is required");return Fl(t)?t:{role:"user",parts:ph(t)}}function Wa(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=Ye(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=Ye(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ye(n)):[Ye(e)]}function Et(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Td(t)||Cd(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ye(t)]}const e=[],n=[],o=Fl(t[0]);for(const r of t){const i=Fl(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(r);else{if(Td(r)||Cd(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:ph(n)}),e}function xv(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(un).includes(n[0].toUpperCase())?n[0].toUpperCase():un.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(un).includes(o.toUpperCase())?o.toUpperCase():un.TYPE_UNSPECIFIED})}}function ho(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&xv(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(un).includes(u.toUpperCase())?u.toUpperCase():un.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=ho(u);else if(o.includes(s)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(ho(d))}e[s]=c}else if(r.includes(s)){const c={};for(const[d,f]of Object.entries(u))c[d]=ho(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function Ka(t){return ho(t)}function Ya(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ja(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function No(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ho(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ho(e.response));return t}function _o(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Ev(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function en(t,e){if(typeof e!="string")throw new Error("name must be a string");return Ev(t,e,"cachedContents")}function hh(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function wn(t){return qa(t)}function Tv(t){return t!=null&&typeof t=="object"&&"name"in t}function Cv(t){return t!=null&&typeof t=="object"&&"video"in t}function wv(t){return t!=null&&typeof t=="object"&&"uri"in t}function mh(t){var e;let n;if(Tv(t)&&(n=t.name),!(wv(t)&&(n=t.uri,n===void 0))&&!(Cv(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function gh(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function vh(t){for(const e of["models","tunedModels","publisherModels"])if(Iv(t,e))return t[e];return[]}function Iv(t,e){return t!==null&&typeof t=="object"&&e in t}function Nv(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function _v(t,e={}){const n=[],o=new Set;for(const r of t){const i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const s=Nv(r,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function yh(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Av(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Sh(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let i=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ao(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function xh(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rv(t){const e={},n=l(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);const o=l(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>uy(s))),a(e,["inlinedResponses"],i)}const r=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["inlinedEmbedContentResponses"],i)}return e}function Pv(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);const o=l(t,["gcsDestination","outputUriPrefix"]);o!=null&&a(e,["gcsUri"],o);const r=l(t,["bigqueryDestination","outputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function Mv(t){const e={},n=l(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);const o=l(t,["gcsUri"]);o!=null&&a(e,["gcsDestination","outputUriPrefix"],o);const r=l(t,["bigqueryUri"]);if(r!=null&&a(e,["bigqueryDestination","outputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function li(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata","displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["metadata","state"]);r!=null&&a(e,["state"],xh(r));const i=l(t,["metadata","createTime"]);i!=null&&a(e,["createTime"],i);const s=l(t,["metadata","endTime"]);s!=null&&a(e,["endTime"],s);const u=l(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const c=l(t,["metadata","model"]);c!=null&&a(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&a(e,["dest"],Rv(Sh(d))),e}function Ol(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["state"]);r!=null&&a(e,["state"],xh(r));const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(e,["startTime"],u);const c=l(t,["endTime"]);c!=null&&a(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(e,["updateTime"],d);const f=l(t,["model"]);f!=null&&a(e,["model"],f);const m=l(t,["inputConfig"]);m!=null&&a(e,["src"],kv(m));const h=l(t,["outputConfig"]);h!=null&&a(e,["dest"],Pv(Sh(h)));const g=l(t,["completionStats"]);return g!=null&&a(e,["completionStats"],g),e}function kv(t){const e={},n=l(t,["instancesFormat"]);n!=null&&a(e,["format"],n);const o=l(t,["gcsSource","uris"]);o!=null&&a(e,["gcsUri"],o);const r=l(t,["bigquerySource","inputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function bv(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=l(e,["fileName"]);o!=null&&a(n,["fileName"],o);const r=l(e,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>ay(t,s))),a(n,["requests","requests"],i)}return n}function Dv(t){const e={},n=l(t,["format"]);n!=null&&a(e,["instancesFormat"],n);const o=l(t,["gcsUri"]);o!=null&&a(e,["gcsSource","uris"],o);const r=l(t,["bigqueryUri"]);if(r!=null&&a(e,["bigquerySource","inputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Lv(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Uv(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function Fv(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function Ov(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const o=l(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],Gv(o));const r=l(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=l(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&a(e,["avgLogprobs"],s);const u=l(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=l(t,["index"]);c!=null&&a(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),a(e,["safetyRatings"],h)}const m=l(t,["urlContextMetadata"]);return m!=null&&a(e,["urlContextMetadata"],m),e}function Gv(t){const e={},n=l(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function Eh(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>gy(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function Hv(t,e){const n={},o=l(t,["displayName"]);if(e!==void 0&&o!=null&&a(e,["batch","displayName"],o),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Vv(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["dest"]);return e!==void 0&&r!=null&&a(e,["outputConfig"],Mv(Av(r))),n}function wd(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["src"]);r!=null&&a(n,["batch","inputConfig"],bv(t,yh(t,r)));const i=l(e,["config"]);return i!=null&&Hv(i,n),n}function Bv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],pe(t,o));const r=l(e,["src"]);r!=null&&a(n,["inputConfig"],Dv(yh(t,r)));const i=l(e,["config"]);return i!=null&&Vv(i,n),n}function $v(t,e){const n={},o=l(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["batch","displayName"],o),n}function qv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["src"]);r!=null&&a(n,["batch","inputConfig"],Xv(t,r));const i=l(e,["config"]);return i!=null&&$v(i,n),n}function zv(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function Jv(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function Wv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);return i!=null&&a(e,["error"],i),e}function Kv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);return i!=null&&a(e,["error"],i),e}function Yv(t,e){const n={},o=l(e,["contents"]);if(o!=null){let i=Wa(t,o);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["requests[]","request","content"],i)}const r=l(e,["config"]);return r!=null&&(a(n,["_self"],jv(r,n)),J0(n,{"requests[].*":"requests[].request.*"})),n}function jv(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Xv(t,e){const n={},o=l(e,["fileName"]);o!=null&&a(n,["file_name"],o);const r=l(e,["inlinedRequests"]);return r!=null&&a(n,["requests"],Yv(t,r)),n}function Qv(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Zv(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ey(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const o=l(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ty(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Eh(Ye(r)));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const m=l(e,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const h=l(e,["logprobs"]);h!=null&&a(o,["logprobs"],h);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const x=l(e,["frequencyPenalty"]);x!=null&&a(o,["frequencyPenalty"],x);const E=l(e,["seed"]);E!=null&&a(o,["seed"],E);const C=l(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&a(o,["responseSchema"],Ka(y));const v=l(e,["responseJsonSchema"]);if(v!=null&&a(o,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=l(e,["safetySettings"]);if(n!==void 0&&S!=null){let K=S;Array.isArray(K)&&(K=K.map(W=>vy(W))),a(n,["safetySettings"],K)}const T=l(e,["tools"]);if(n!==void 0&&T!=null){let K=_o(T);Array.isArray(K)&&(K=K.map(W=>Sy(No(W)))),a(n,["tools"],K)}const I=l(e,["toolConfig"]);if(n!==void 0&&I!=null&&a(n,["toolConfig"],yy(I)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=l(e,["cachedContent"]);n!==void 0&&N!=null&&a(n,["cachedContent"],en(t,N));const _=l(e,["responseModalities"]);_!=null&&a(o,["responseModalities"],_);const k=l(e,["mediaResolution"]);k!=null&&a(o,["mediaResolution"],k);const b=l(e,["speechConfig"]);if(b!=null&&a(o,["speechConfig"],Ya(b)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=l(e,["thinkingConfig"]);P!=null&&a(o,["thinkingConfig"],P);const F=l(e,["imageConfig"]);F!=null&&a(o,["imageConfig"],ly(F));const Q=l(e,["enableEnhancedCivicAnswers"]);return Q!=null&&a(o,["enableEnhancedCivicAnswers"],Q),o}function ny(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>Ov(d))),a(e,["candidates"],c)}const r=l(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=l(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function oy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function ry(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function iy(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function sy(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function ly(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ay(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["request","model"],pe(t,o));const r=l(e,["contents"]);if(r!=null){let u=Et(r);Array.isArray(u)&&(u=u.map(c=>Eh(c))),a(n,["request","contents"],u)}const i=l(e,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(e,["config"]);return s!=null&&a(n,["request","generationConfig"],ty(t,s,l(n,["request"],{}))),n}function uy(t){const e={},n=l(t,["response"]);n!=null&&a(e,["response"],ny(n));const o=l(t,["error"]);return o!=null&&a(e,["error"],o),e}function cy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);if(e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function dy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const i=l(t,["filter"]);return e!==void 0&&i!=null&&a(e,["_query","filter"],i),n}function fy(t){const e={},n=l(t,["config"]);return n!=null&&cy(n,e),e}function py(t){const e={},n=l(t,["config"]);return n!=null&&dy(n,e),e}function hy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>li(s))),a(e,["batchJobs"],i)}return e}function my(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Ol(s))),a(e,["batchJobs"],i)}return e}function gy(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],Qv(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],Zv(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],Lv(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const m=l(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const h=l(t,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function vy(t){const e={},n=l(t,["category"]);if(n!=null&&a(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=l(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function yy(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],ey(n));const o=l(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function Sy(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],iy(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],sy(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xt;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Xt||(Xt={}));class qn{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xy extends Zt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qn(Xt.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=wd(this.apiClient,e),o=n._url,r=q("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const m=Object.assign({},f);if(m.systemInstruction){const h=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=h,m.request=g}d.push(m)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(s)o.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Bv(this.apiClient,e);return u=q("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ol(f))}else{const d=wd(this.apiClient,e);return u=q("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>li(f))}}async createEmbeddingsInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=qv(this.apiClient,e);return i=q("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>li(c))}}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=ry(this.apiClient,e);return u=q("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ol(f))}else{const d=oy(this.apiClient,e);return u=q("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>li(f))}}async cancel(e){var n,o,r,i;let s="",u={};if(this.apiClient.isVertexAI()){const c=Fv(this.apiClient,e);s=q("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=Uv(this.apiClient,e);s=q("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=py(e);return u=q("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=my(f),h=new xd;return Object.assign(h,m),h})}else{const d=fy(e);return u=q("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=hy(f),h=new xd;return Object.assign(h,m),h})}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Jv(this.apiClient,e);return u=q("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Kv(f))}else{const d=zv(this.apiClient,e);return u=q("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Wv(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ey(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Id(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>qy(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function Ty(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let f=Et(s);Array.isArray(f)&&(f=f.map(m=>Id(m))),a(e,["contents"],f)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Id(Ye(u)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>Jy(m))),a(e,["tools"],f)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&a(e,["toolConfig"],zy(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Cy(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let m=Et(s);Array.isArray(m)&&(m=m.map(h=>h)),a(e,["contents"],m)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Ye(u));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>Wy(h))),a(e,["tools"],m)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&a(e,["toolConfig"],d);const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&a(e,["encryption_spec","kmsKeyName"],f),n}function wy(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],uh(t,o));const r=l(e,["config"]);return r!=null&&Ty(r,n),n}function Iy(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],uh(t,o));const r=l(e,["config"]);return r!=null&&Cy(r,n),n}function Ny(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],en(t,o)),n}function _y(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],en(t,o)),n}function Ay(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Ry(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Py(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function My(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ky(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const o=l(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function by(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function Dy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],en(t,o)),n}function Ly(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],en(t,o)),n}function Uy(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Fy(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function Oy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function Gy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function Hy(t){const e={},n=l(t,["config"]);return n!=null&&Oy(n,e),e}function Vy(t){const e={},n=l(t,["config"]);return n!=null&&Gy(n,e),e}function By(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["cachedContents"],i)}return e}function $y(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["cachedContents"],i)}return e}function qy(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],Py(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],My(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],Ey(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const m=l(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const h=l(t,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function zy(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],ky(n));const o=l(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function Jy(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],Uy(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],Fy(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function Wy(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>by(h))),a(e,["functionDeclarations"],m)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function Ky(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function Yy(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function jy(t,e){const n={},o=l(e,["name"]);o!=null&&a(n,["_url","name"],en(t,o));const r=l(e,["config"]);return r!=null&&Ky(r,n),n}function Xy(t,e){const n={},o=l(e,["name"]);o!=null&&a(n,["_url","name"],en(t,o));const r=l(e,["config"]);return r!=null&&Yy(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qy extends Zt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qn(Xt.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Iy(this.apiClient,e);return u=q("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=wy(this.apiClient,e);return u=q("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Ly(this.apiClient,e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=Dy(this.apiClient,e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=_y(this.apiClient,e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=Ry(f),h=new yd;return Object.assign(h,m),h})}else{const d=Ny(this.apiClient,e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=Ay(f),h=new yd;return Object.assign(h,m),h})}}async update(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Xy(this.apiClient,e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=jy(this.apiClient,e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Vy(e);return u=q("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=$y(f),h=new Sd;return Object.assign(h,m),h})}else{const d=Hy(e);return u=q("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=By(f),h=new Sd;return Object.assign(h,m),h})}}}function Ui(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function Nd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ne(t){return this instanceof ne?(this.v=t,this):new ne(t)}function kt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(x){return Promise.resolve(x).then(g,m)}}function u(g,x){o[g]&&(r[g]=function(E){return new Promise(function(C,y){i.push([g,E,C,y])>1||c(g,E)})},x&&(r[g]=x(r[g])))}function c(g,x){try{d(o[g](x))}catch(E){h(i[0][3],E)}}function d(g){g.value instanceof ne?Promise.resolve(g.value.v).then(f,m):h(i[0][2],g)}function f(g){c("next",g)}function m(g){c("throw",g)}function h(g,x){g(x),i.shift(),i.length&&c(i[0][0],i[0][1])}}function bt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Nd=="function"?Nd(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=t[i]&&function(s){return new Promise(function(u,c){s=t[i](s),r(u,c,s.done,s.value)})}}function r(i,s,u,c){Promise.resolve(c).then(function(d){i({value:d,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zy(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Th(n)}function Th(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function eS(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function _d(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let i=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),i&&!Th(t[o])&&(i=!1),o++;i?e.push(...r):e.pop()}return e}class tS{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new nS(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class nS{constructor(e,n,o,r={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),eS(i)}async sendMessage(e){var n;await this.sendPromise;const o=Ye(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,u;const c=await r,d=(s=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let h=[];f!=null&&(h=(u=f.slice(m))!==null&&u!==void 0?u:[]);const g=d?[d]:[];this.recordHistory(o,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=Ye(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,o)}getHistory(e=!1){const n=e?_d(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return kt(this,arguments,function*(){var r,i,s,u,c,d;const f=[];try{for(var m=!0,h=bt(e),g;g=yield ne(h.next()),r=g.done,!r;m=!0){u=g.value,m=!1;const x=u;if(Zy(x)){const E=(d=(c=x.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;E!==void 0&&f.push(E)}yield yield ne(x)}}catch(x){i={error:x}}finally{try{!m&&!r&&(s=h.return)&&(yield ne(s.call(h)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(..._d(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ts extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ts.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oS(t){const e={},n=l(t,["file"]);return n!=null&&a(e,["file"],n),e}function rS(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function iS(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],mh(n)),e}function sS(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function lS(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],mh(n)),e}function aS(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function uS(t){const e={},n=l(t,["config"]);return n!=null&&aS(n,e),e}function cS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dS extends Zt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qn(Xt.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=uS(e);return i=q("files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=cS(c),f=new mv;return Object.assign(f,d),f})}}async createInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=oS(e);return i=q("upload/v1beta/files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=rS(c),f=new gv;return Object.assign(f,d),f})}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lS(e);return i=q("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iS(e);return i=q("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=sS(c),f=new vv;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ai(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function fS(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>AS(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function pS(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function hS(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mS(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function gS(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=l(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const r=l(t,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const i=l(t,["candidateCount"]);i!=null&&a(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&a(e,["enableAffectiveDialog"],s);const u=l(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=l(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const m=l(t,["presencePenalty"]);m!=null&&a(e,["presencePenalty"],m);const h=l(t,["responseLogprobs"]);h!=null&&a(e,["responseLogprobs"],h);const g=l(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const x=l(t,["responseModalities"]);x!=null&&a(e,["responseModalities"],x);const E=l(t,["responseSchema"]);E!=null&&a(e,["responseSchema"],E);const C=l(t,["routingConfig"]);C!=null&&a(e,["routingConfig"],C);const y=l(t,["seed"]);y!=null&&a(e,["seed"],y);const v=l(t,["speechConfig"]);v!=null&&a(e,["speechConfig"],v);const S=l(t,["stopSequences"]);S!=null&&a(e,["stopSequences"],S);const T=l(t,["temperature"]);T!=null&&a(e,["temperature"],T);const I=l(t,["thinkingConfig"]);I!=null&&a(e,["thinkingConfig"],I);const N=l(t,["topK"]);N!=null&&a(e,["topK"],N);const _=l(t,["topP"]);if(_!=null&&a(e,["topP"],_),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vS(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function yS(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function SS(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],ja(m));const h=l(t,["thinkingConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","thinkingConfig"],h);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&a(e,["setup","systemInstruction"],fS(Ye(x)));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let N=_o(E);Array.isArray(N)&&(N=N.map(_=>PS(No(_)))),a(e,["setup","tools"],N)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],RS(C));const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","inputAudioTranscription"],y);const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","outputAudioTranscription"],v);const S=l(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&a(e,["setup","realtimeInputConfig"],S);const T=l(t,["contextWindowCompression"]);e!==void 0&&T!=null&&a(e,["setup","contextWindowCompression"],T);const I=l(t,["proactivity"]);if(e!==void 0&&I!=null&&a(e,["setup","proactivity"],I),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function xS(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],gS(o));const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],ja(m));const h=l(t,["thinkingConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","thinkingConfig"],h);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&a(e,["setup","systemInstruction"],Ye(x));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let _=_o(E);Array.isArray(_)&&(_=_.map(k=>MS(No(k)))),a(e,["setup","tools"],_)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],C);const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","inputAudioTranscription"],y);const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","outputAudioTranscription"],v);const S=l(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&a(e,["setup","realtimeInputConfig"],S);const T=l(t,["contextWindowCompression"]);e!==void 0&&T!=null&&a(e,["setup","contextWindowCompression"],T);const I=l(t,["proactivity"]);e!==void 0&&I!=null&&a(e,["setup","proactivity"],I);const N=l(t,["explicitVadSignal"]);return e!==void 0&&N!=null&&a(e,["setup","explicitVadSignal"],N),n}function ES(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],pe(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],SS(r,n)),n}function TS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],pe(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],xS(r,n)),n}function CS(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],n),e}function wS(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["weightedPrompts"],o)}return e}function IS(t){const e={},n=l(t,["media"]);if(n!=null){let d=ch(n);Array.isArray(d)&&(d=d.map(f=>ai(f))),a(e,["mediaChunks"],d)}const o=l(t,["audio"]);o!=null&&a(e,["audio"],ai(fh(o)));const r=l(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=l(t,["video"]);i!=null&&a(e,["video"],ai(dh(i)));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=l(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function NS(t){const e={},n=l(t,["media"]);if(n!=null){let d=ch(n);Array.isArray(d)&&(d=d.map(f=>f)),a(e,["mediaChunks"],d)}const o=l(t,["audio"]);o!=null&&a(e,["audio"],fh(o));const r=l(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=l(t,["video"]);i!=null&&a(e,["video"],dh(i));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=l(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function _S(t){const e={},n=l(t,["setupComplete"]);n!=null&&a(e,["setupComplete"],n);const o=l(t,["serverContent"]);o!=null&&a(e,["serverContent"],o);const r=l(t,["toolCall"]);r!=null&&a(e,["toolCall"],r);const i=l(t,["toolCallCancellation"]);i!=null&&a(e,["toolCallCancellation"],i);const s=l(t,["usageMetadata"]);s!=null&&a(e,["usageMetadata"],kS(s));const u=l(t,["goAway"]);u!=null&&a(e,["goAway"],u);const c=l(t,["sessionResumptionUpdate"]);c!=null&&a(e,["sessionResumptionUpdate"],c);const d=l(t,["voiceActivityDetectionSignal"]);return d!=null&&a(e,["voiceActivityDetectionSignal"],d),e}function AS(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],pS(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],hS(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],ai(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const m=l(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const h=l(t,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function RS(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function PS(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],vS(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],yS(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function MS(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>mS(h))),a(e,["functionDeclarations"],m)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function kS(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const o=l(t,["cachedContentTokenCount"]);o!=null&&a(e,["cachedContentTokenCount"],o);const r=l(t,["candidatesTokenCount"]);r!=null&&a(e,["responseTokenCount"],r);const i=l(t,["toolUsePromptTokenCount"]);i!=null&&a(e,["toolUsePromptTokenCount"],i);const s=l(t,["thoughtsTokenCount"]);s!=null&&a(e,["thoughtsTokenCount"],s);const u=l(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const c=l(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(x=>x)),a(e,["promptTokensDetails"],g)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(x=>x)),a(e,["cacheTokensDetails"],g)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(x=>x)),a(e,["responseTokensDetails"],g)}const m=l(t,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(x=>x)),a(e,["toolUsePromptTokensDetails"],g)}const h=l(t,["trafficType"]);return h!=null&&a(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bS(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function DS(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const o=l(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],LS(o));const r=l(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=l(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&a(e,["avgLogprobs"],s);const u=l(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=l(t,["index"]);c!=null&&a(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),a(e,["safetyRatings"],h)}const m=l(t,["urlContextMetadata"]);return m!=null&&a(e,["urlContextMetadata"],m),e}function LS(t){const e={},n=l(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function US(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["contents"]);if(r!=null){let i=Et(r);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["contents"],i)}return n}function FS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["tokensInfo"],r)}return e}function OS(t){const e={},n=l(t,["values"]);n!=null&&a(e,["values"],n);const o=l(t,["statistics"]);return o!=null&&a(e,["statistics"],GS(o)),e}function GS(t){const e={},n=l(t,["truncated"]);n!=null&&a(e,["truncated"],n);const o=l(t,["token_count"]);return o!=null&&a(e,["tokenCount"],o),e}function ns(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Kx(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function HS(t){const e={},n=l(t,["controlType"]);n!=null&&a(e,["controlType"],n);const o=l(t,["enableControlImageComputation"]);return o!=null&&a(e,["computeControl"],o),e}function VS(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function BS(t,e){const n={},o=l(t,["systemInstruction"]);e!==void 0&&o!=null&&a(e,["systemInstruction"],Ye(o));const r=l(t,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>Nh(u))),a(e,["tools"],s)}const i=l(t,["generationConfig"]);return e!==void 0&&i!=null&&a(e,["generationConfig"],bx(i)),n}function $S(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["contents"]);if(r!=null){let s=Et(r);Array.isArray(s)&&(s=s.map(u=>ns(u))),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&VS(i),n}function qS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["contents"]);if(r!=null){let s=Et(r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&BS(i,n),n}function zS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["totalTokens"]);o!=null&&a(e,["totalTokens"],o);const r=l(t,["cachedContentTokenCount"]);return r!=null&&a(e,["cachedContentTokenCount"],r),e}function JS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["totalTokens"]);return o!=null&&a(e,["totalTokens"],o),e}function WS(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],pe(t,o)),n}function KS(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],pe(t,o)),n}function YS(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function jS(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function XS(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const m=l(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&a(e,["parameters","includeSafetyAttributes"],m);const h=l(t,["includeRaiReason"]);e!==void 0&&h!=null&&a(e,["parameters","includeRaiReason"],h);const g=l(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const x=l(t,["outputMimeType"]);e!==void 0&&x!=null&&a(e,["parameters","outputOptions","mimeType"],x);const E=l(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&a(e,["parameters","outputOptions","compressionQuality"],E);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&a(e,["parameters","addWatermark"],C);const y=l(t,["labels"]);e!==void 0&&y!=null&&a(e,["labels"],y);const v=l(t,["editMode"]);e!==void 0&&v!=null&&a(e,["parameters","editMode"],v);const S=l(t,["baseSteps"]);return e!==void 0&&S!=null&&a(e,["parameters","editConfig","baseSteps"],S),n}function QS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["referenceImages"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>eE(c))),a(n,["instances[0]","referenceImages"],u)}const s=l(e,["config"]);return s!=null&&XS(s,n),n}function ZS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>os(i))),a(e,["generatedImages"],r)}return e}function ex(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function tx(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["instances[]","task_type"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["instances[]","title"],r);const i=l(t,["outputDimensionality"]);e!==void 0&&i!=null&&a(e,["parameters","outputDimensionality"],i);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&a(e,["instances[]","mimeType"],s);const u=l(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function nx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["contents"]);if(r!=null){let u=Wa(t,r);Array.isArray(u)&&(u=u.map(c=>c)),a(n,["requests[]","content"],u)}const i=l(e,["config"]);i!=null&&ex(i,n);const s=l(e,["model"]);return s!==void 0&&a(n,["requests[]","model"],pe(t,s)),n}function ox(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["contents"]);if(r!=null){let s=Wa(t,r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["instances[]","content"],s)}const i=l(e,["config"]);return i!=null&&tx(i,n),n}function rx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["embeddings"],i)}const r=l(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function ix(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions[]","embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>OS(s))),a(e,["embeddings"],i)}const r=l(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function sx(t){const e={},n=l(t,["endpoint"]);n!=null&&a(e,["name"],n);const o=l(t,["deployedModelId"]);return o!=null&&a(e,["deployedModelId"],o),e}function lx(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function ax(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ux(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const o=l(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cx(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function dx(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],ns(Ye(r)));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const m=l(e,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const h=l(e,["logprobs"]);h!=null&&a(o,["logprobs"],h);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const x=l(e,["frequencyPenalty"]);x!=null&&a(o,["frequencyPenalty"],x);const E=l(e,["seed"]);E!=null&&a(o,["seed"],E);const C=l(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&a(o,["responseSchema"],Ka(y));const v=l(e,["responseJsonSchema"]);if(v!=null&&a(o,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=l(e,["safetySettings"]);if(n!==void 0&&S!=null){let K=S;Array.isArray(K)&&(K=K.map(W=>tE(W))),a(n,["safetySettings"],K)}const T=l(e,["tools"]);if(n!==void 0&&T!=null){let K=_o(T);Array.isArray(K)&&(K=K.map(W=>aE(No(W)))),a(n,["tools"],K)}const I=l(e,["toolConfig"]);if(n!==void 0&&I!=null&&a(n,["toolConfig"],lE(I)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=l(e,["cachedContent"]);n!==void 0&&N!=null&&a(n,["cachedContent"],en(t,N));const _=l(e,["responseModalities"]);_!=null&&a(o,["responseModalities"],_);const k=l(e,["mediaResolution"]);k!=null&&a(o,["mediaResolution"],k);const b=l(e,["speechConfig"]);if(b!=null&&a(o,["speechConfig"],Ya(b)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=l(e,["thinkingConfig"]);P!=null&&a(o,["thinkingConfig"],P);const F=l(e,["imageConfig"]);F!=null&&a(o,["imageConfig"],Ox(F));const Q=l(e,["enableEnhancedCivicAnswers"]);return Q!=null&&a(o,["enableEnhancedCivicAnswers"],Q),o}function fx(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Ye(r));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const m=l(e,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const h=l(e,["logprobs"]);h!=null&&a(o,["logprobs"],h);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const x=l(e,["frequencyPenalty"]);x!=null&&a(o,["frequencyPenalty"],x);const E=l(e,["seed"]);E!=null&&a(o,["seed"],E);const C=l(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&a(o,["responseSchema"],Ka(y));const v=l(e,["responseJsonSchema"]);v!=null&&a(o,["responseJsonSchema"],v);const S=l(e,["routingConfig"]);S!=null&&a(o,["routingConfig"],S);const T=l(e,["modelSelectionConfig"]);T!=null&&a(o,["modelConfig"],T);const I=l(e,["safetySettings"]);if(n!==void 0&&I!=null){let re=I;Array.isArray(re)&&(re=re.map(ae=>ae)),a(n,["safetySettings"],re)}const N=l(e,["tools"]);if(n!==void 0&&N!=null){let re=_o(N);Array.isArray(re)&&(re=re.map(ae=>Nh(No(ae)))),a(n,["tools"],re)}const _=l(e,["toolConfig"]);n!==void 0&&_!=null&&a(n,["toolConfig"],_);const k=l(e,["labels"]);n!==void 0&&k!=null&&a(n,["labels"],k);const b=l(e,["cachedContent"]);n!==void 0&&b!=null&&a(n,["cachedContent"],en(t,b));const P=l(e,["responseModalities"]);P!=null&&a(o,["responseModalities"],P);const F=l(e,["mediaResolution"]);F!=null&&a(o,["mediaResolution"],F);const Q=l(e,["speechConfig"]);Q!=null&&a(o,["speechConfig"],Ya(Q));const K=l(e,["audioTimestamp"]);K!=null&&a(o,["audioTimestamp"],K);const W=l(e,["thinkingConfig"]);W!=null&&a(o,["thinkingConfig"],W);const oe=l(e,["imageConfig"]);if(oe!=null&&a(o,["imageConfig"],Gx(oe)),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function Ad(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["contents"]);if(r!=null){let s=Et(r);Array.isArray(s)&&(s=s.map(u=>ns(u))),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&a(n,["generationConfig"],dx(t,i,n)),n}function Rd(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["contents"]);if(r!=null){let s=Et(r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&a(n,["generationConfig"],fx(t,i,n)),n}function Pd(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>DS(d))),a(e,["candidates"],c)}const r=l(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=l(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function Md(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["candidates"],d)}const r=l(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=l(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const s=l(t,["promptFeedback"]);s!=null&&a(e,["promptFeedback"],s);const u=l(t,["responseId"]);u!=null&&a(e,["responseId"],u);const c=l(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function px(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["aspectRatio"]);e!==void 0&&r!=null&&a(e,["parameters","aspectRatio"],r);const i=l(t,["guidanceScale"]);if(e!==void 0&&i!=null&&a(e,["parameters","guidanceScale"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&a(e,["parameters","safetySetting"],s);const u=l(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&a(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&a(e,["parameters","includeRaiReason"],d);const f=l(t,["language"]);e!==void 0&&f!=null&&a(e,["parameters","language"],f);const m=l(t,["outputMimeType"]);e!==void 0&&m!=null&&a(e,["parameters","outputOptions","mimeType"],m);const h=l(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&a(e,["parameters","outputOptions","compressionQuality"],h),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=l(t,["imageSize"]);if(e!==void 0&&g!=null&&a(e,["parameters","sampleImageSize"],g),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function hx(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const m=l(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&a(e,["parameters","includeSafetyAttributes"],m);const h=l(t,["includeRaiReason"]);e!==void 0&&h!=null&&a(e,["parameters","includeRaiReason"],h);const g=l(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const x=l(t,["outputMimeType"]);e!==void 0&&x!=null&&a(e,["parameters","outputOptions","mimeType"],x);const E=l(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&a(e,["parameters","outputOptions","compressionQuality"],E);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&a(e,["parameters","addWatermark"],C);const y=l(t,["labels"]);e!==void 0&&y!=null&&a(e,["labels"],y);const v=l(t,["imageSize"]);e!==void 0&&v!=null&&a(e,["parameters","sampleImageSize"],v);const S=l(t,["enhancePrompt"]);return e!==void 0&&S!=null&&a(e,["parameters","enhancePrompt"],S),n}function mx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["config"]);return i!=null&&px(i,n),n}function gx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["config"]);return i!=null&&hx(i,n),n}function vx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Rx(s))),a(e,["generatedImages"],i)}const r=l(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],wh(r)),e}function yx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>os(s))),a(e,["generatedImages"],i)}const r=l(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],Ih(r)),e}function Sx(t,e){const n={},o=l(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=l(t,["durationSeconds"]);if(e!==void 0&&r!=null&&a(e,["parameters","durationSeconds"],r),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&a(e,["parameters","aspectRatio"],i);const s=l(t,["resolution"]);e!==void 0&&s!=null&&a(e,["parameters","resolution"],s);const u=l(t,["personGeneration"]);if(e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&a(e,["parameters","negativePrompt"],c);const d=l(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&a(e,["parameters","enhancePrompt"],d),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=l(t,["lastFrame"]);e!==void 0&&f!=null&&a(e,["instances[0]","lastFrame"],rs(f));const m=l(t,["referenceImages"]);if(e!==void 0&&m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>EE(g))),a(e,["instances[0]","referenceImages"],h)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function xx(t,e){const n={},o=l(t,["numberOfVideos"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["fps"]);e!==void 0&&i!=null&&a(e,["parameters","fps"],i);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&a(e,["parameters","durationSeconds"],s);const u=l(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&a(e,["parameters","resolution"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const m=l(t,["pubsubTopic"]);e!==void 0&&m!=null&&a(e,["parameters","pubsubTopic"],m);const h=l(t,["negativePrompt"]);e!==void 0&&h!=null&&a(e,["parameters","negativePrompt"],h);const g=l(t,["enhancePrompt"]);e!==void 0&&g!=null&&a(e,["parameters","enhancePrompt"],g);const x=l(t,["generateAudio"]);e!==void 0&&x!=null&&a(e,["parameters","generateAudio"],x);const E=l(t,["lastFrame"]);e!==void 0&&E!=null&&a(e,["instances[0]","lastFrame"],Lt(E));const C=l(t,["referenceImages"]);if(e!==void 0&&C!=null){let S=C;Array.isArray(S)&&(S=S.map(T=>TE(T))),a(e,["instances[0]","referenceImages"],S)}const y=l(t,["mask"]);e!==void 0&&y!=null&&a(e,["instances[0]","mask"],xE(y));const v=l(t,["compressionQuality"]);return e!==void 0&&v!=null&&a(e,["parameters","compressionQuality"],v),n}function Ex(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],Ix(s)),e}function Tx(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],Nx(s)),e}function Cx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],rs(i));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],_h(s));const u=l(e,["source"]);u!=null&&_x(u,n);const c=l(e,["config"]);return c!=null&&Sx(c,n),n}function wx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],Lt(i));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],Ah(s));const u=l(e,["source"]);u!=null&&Ax(u,n);const c=l(e,["config"]);return c!=null&&xx(c,n),n}function Ix(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Mx(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function Nx(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>kx(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function _x(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],rs(r));const i=l(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],_h(i)),n}function Ax(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],Lt(r));const i=l(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],Ah(i)),n}function Rx(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],Hx(n));const o=l(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=l(t,["_self"]);return r!=null&&a(e,["safetyAttributes"],wh(r)),e}function os(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],Ch(n));const o=l(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=l(t,["_self"]);r!=null&&a(e,["safetyAttributes"],Ih(r));const i=l(t,["prompt"]);return i!=null&&a(e,["enhancedPrompt"],i),e}function Px(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["mask"],Ch(n));const o=l(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["labels"],r)}return e}function Mx(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],yE(n)),e}function kx(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],SE(n)),e}function bx(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=l(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const r=l(t,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const i=l(t,["candidateCount"]);i!=null&&a(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&a(e,["enableAffectiveDialog"],s);const u=l(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=l(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const m=l(t,["presencePenalty"]);m!=null&&a(e,["presencePenalty"],m);const h=l(t,["responseLogprobs"]);h!=null&&a(e,["responseLogprobs"],h);const g=l(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const x=l(t,["responseModalities"]);x!=null&&a(e,["responseModalities"],x);const E=l(t,["responseSchema"]);E!=null&&a(e,["responseSchema"],E);const C=l(t,["routingConfig"]);C!=null&&a(e,["routingConfig"],C);const y=l(t,["seed"]);y!=null&&a(e,["seed"],y);const v=l(t,["speechConfig"]);v!=null&&a(e,["speechConfig"],v);const S=l(t,["stopSequences"]);S!=null&&a(e,["stopSequences"],S);const T=l(t,["temperature"]);T!=null&&a(e,["temperature"],T);const I=l(t,["thinkingConfig"]);I!=null&&a(e,["thinkingConfig"],I);const N=l(t,["topK"]);N!=null&&a(e,["topK"],N);const _=l(t,["topP"]);if(_!=null&&a(e,["topP"],_),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Dx(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],pe(t,o)),n}function Lx(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],pe(t,o)),n}function Ux(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Fx(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function Ox(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Gx(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);o!=null&&a(e,["imageSize"],o);const r=l(t,["outputMimeType"]);r!=null&&a(e,["imageOutputOptions","mimeType"],r);const i=l(t,["outputCompressionQuality"]);return i!=null&&a(e,["imageOutputOptions","compressionQuality"],i),e}function Hx(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],wn(n));const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Ch(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["imageBytes"],wn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function rs(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],wn(n));const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Lt(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["imageBytes"]);o!=null&&a(e,["bytesBase64Encoded"],wn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function Vx(t,e,n){const o={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],gh(t,u)),o}function Bx(t,e,n){const o={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],gh(t,u)),o}function $x(t,e){const n={},o=l(e,["config"]);return o!=null&&Vx(t,o,n),n}function qx(t,e){const n={},o=l(e,["config"]);return o!=null&&Bx(t,o,n),n}function zx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["_self"]);if(r!=null){let i=vh(r);Array.isArray(i)&&(i=i.map(s=>Gl(s))),a(e,["models"],i)}return e}function Jx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["_self"]);if(r!=null){let i=vh(r);Array.isArray(i)&&(i=i.map(s=>Hl(s))),a(e,["models"],i)}return e}function Wx(t){const e={},n=l(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);const o=l(t,["segmentationClasses"]);o!=null&&a(e,["maskClasses"],o);const r=l(t,["maskDilation"]);return r!=null&&a(e,["dilation"],r),e}function Gl(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["version"]);i!=null&&a(e,["version"],i);const s=l(t,["_self"]);s!=null&&a(e,["tunedModelInfo"],uE(s));const u=l(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const c=l(t,["outputTokenLimit"]);c!=null&&a(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);d!=null&&a(e,["supportedActions"],d);const f=l(t,["temperature"]);f!=null&&a(e,["temperature"],f);const m=l(t,["maxTemperature"]);m!=null&&a(e,["maxTemperature"],m);const h=l(t,["topP"]);h!=null&&a(e,["topP"],h);const g=l(t,["topK"]);g!=null&&a(e,["topK"],g);const x=l(t,["thinking"]);return x!=null&&a(e,["thinking"],x),e}function Hl(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["versionId"]);i!=null&&a(e,["version"],i);const s=l(t,["deployedModels"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(h=>sx(h))),a(e,["endpoints"],m)}const u=l(t,["labels"]);u!=null&&a(e,["labels"],u);const c=l(t,["_self"]);c!=null&&a(e,["tunedModelInfo"],cE(c));const d=l(t,["defaultCheckpointId"]);d!=null&&a(e,["defaultCheckpointId"],d);const f=l(t,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>h)),a(e,["checkpoints"],m)}return e}function Kx(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],lx(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],ax(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],bS(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const m=l(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const h=l(t,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function Yx(t){const e={},n=l(t,["productImage"]);return n!=null&&a(e,["image"],Lt(n)),e}function jx(t,e){const n={},o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["baseSteps"]);e!==void 0&&r!=null&&a(e,["parameters","baseSteps"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const s=l(t,["seed"]);e!==void 0&&s!=null&&a(e,["parameters","seed"],s);const u=l(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&a(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&a(e,["parameters","addWatermark"],d);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&a(e,["parameters","outputOptions","mimeType"],f);const m=l(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&a(e,["parameters","outputOptions","compressionQuality"],m);const h=l(t,["enhancePrompt"]);e!==void 0&&h!=null&&a(e,["parameters","enhancePrompt"],h);const g=l(t,["labels"]);return e!==void 0&&g!=null&&a(e,["labels"],g),n}function Xx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["source"]);r!=null&&Zx(r,n);const i=l(e,["config"]);return i!=null&&jx(i,n),n}function Qx(t){const e={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>os(r))),a(e,["generatedImages"],o)}return e}function Zx(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["personImage"]);e!==void 0&&r!=null&&a(e,["instances[0]","personImage","image"],Lt(r));const i=l(t,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>Yx(u))),a(e,["instances[0]","productImages"],s)}return n}function eE(t){const e={},n=l(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],Lt(n));const o=l(t,["referenceId"]);o!=null&&a(e,["referenceId"],o);const r=l(t,["referenceType"]);r!=null&&a(e,["referenceType"],r);const i=l(t,["maskImageConfig"]);i!=null&&a(e,["maskImageConfig"],Wx(i));const s=l(t,["controlImageConfig"]);s!=null&&a(e,["controlImageConfig"],HS(s));const u=l(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],u);const c=l(t,["subjectImageConfig"]);return c!=null&&a(e,["subjectImageConfig"],c),e}function wh(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=l(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=l(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function Ih(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=l(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=l(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function tE(t){const e={},n=l(t,["category"]);if(n!=null&&a(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=l(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function nE(t){const e={},n=l(t,["image"]);return n!=null&&a(e,["image"],Lt(n)),e}function oE(t,e){const n={},o=l(t,["mode"]);e!==void 0&&o!=null&&a(e,["parameters","mode"],o);const r=l(t,["maxPredictions"]);e!==void 0&&r!=null&&a(e,["parameters","maxPredictions"],r);const i=l(t,["confidenceThreshold"]);e!==void 0&&i!=null&&a(e,["parameters","confidenceThreshold"],i);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&a(e,["parameters","maskDilation"],s);const u=l(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u);const c=l(t,["labels"]);return e!==void 0&&c!=null&&a(e,["labels"],c),n}function rE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["source"]);r!=null&&sE(r,n);const i=l(e,["config"]);return i!=null&&oE(i,n),n}function iE(t){const e={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Px(r))),a(e,["generatedMasks"],o)}return e}function sE(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],Lt(r));const i=l(t,["scribbleImage"]);return e!==void 0&&i!=null&&a(e,["instances[0]","scribble"],nE(i)),n}function lE(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],ux(n));const o=l(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function aE(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],Ux(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],Fx(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function Nh(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>cx(h))),a(e,["functionDeclarations"],m)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function uE(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=l(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function cE(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=l(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function dE(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function fE(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function pE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","name"],pe(t,o));const r=l(e,["config"]);return r!=null&&dE(r,n),n}function hE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["config"]);return r!=null&&fE(r,n),n}function mE(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&a(e,["parameters","safetySetting"],r);const i=l(t,["personGeneration"]);e!==void 0&&i!=null&&a(e,["parameters","personGeneration"],i);const s=l(t,["includeRaiReason"]);e!==void 0&&s!=null&&a(e,["parameters","includeRaiReason"],s);const u=l(t,["outputMimeType"]);e!==void 0&&u!=null&&a(e,["parameters","outputOptions","mimeType"],u);const c=l(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&a(e,["parameters","outputOptions","compressionQuality"],c);const d=l(t,["enhanceInputImage"]);e!==void 0&&d!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=l(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const m=l(t,["labels"]);e!==void 0&&m!=null&&a(e,["labels"],m);const h=l(t,["numberOfImages"]);e!==void 0&&h!=null&&a(e,["parameters","sampleCount"],h);const g=l(t,["mode"]);return e!==void 0&&g!=null&&a(e,["parameters","mode"],g),n}function gE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],pe(t,o));const r=l(e,["image"]);r!=null&&a(n,["instances[0]","image"],Lt(r));const i=l(e,["upscaleFactor"]);i!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=l(e,["config"]);return s!=null&&mE(s,n),n}function vE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>os(i))),a(e,["generatedImages"],r)}return e}function yE(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],wn(o));const r=l(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function SE(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],wn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function xE(t){const e={},n=l(t,["image"]);n!=null&&a(e,["_self"],Lt(n));const o=l(t,["maskMode"]);return o!=null&&a(e,["maskMode"],o),e}function EE(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],rs(n));const o=l(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function TE(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],Lt(n));const o=l(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function _h(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["videoBytes"]);o!=null&&a(e,["encodedVideo"],wn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["encoding"],r),e}function Ah(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["videoBytes"]);o!=null&&a(e,["bytesBase64Encoded"],wn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CE(t,e){const n={},o=l(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["displayName"],o),n}function wE(t){const e={},n=l(t,["config"]);return n!=null&&CE(n,e),e}function IE(t,e){const n={},o=l(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function NE(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=l(t,["config"]);return o!=null&&IE(o,e),e}function _E(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function AE(t,e){const n={},o=l(t,["customMetadata"]);if(e!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["customMetadata"],i)}const r=l(t,["chunkingConfig"]);return e!==void 0&&r!=null&&a(e,["chunkingConfig"],r),n}function RE(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],ME(s)),e}function PE(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=l(t,["fileName"]);o!=null&&a(e,["fileName"],o);const r=l(t,["config"]);return r!=null&&AE(r,e),e}function ME(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function kE(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function bE(t){const e={},n=l(t,["config"]);return n!=null&&kE(n,e),e}function DE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["fileSearchStores"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["fileSearchStores"],i)}return e}function Rh(t,e){const n={},o=l(t,["mimeType"]);e!==void 0&&o!=null&&a(e,["mimeType"],o);const r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["customMetadata"]);if(e!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>c)),a(e,["customMetadata"],u)}const s=l(t,["chunkingConfig"]);return e!==void 0&&s!=null&&a(e,["chunkingConfig"],s),n}function LE(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=l(t,["config"]);return o!=null&&Rh(o,e),e}function UE(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FE="Content-Type",OE="X-Server-Timeout",GE="User-Agent",Vl="x-goog-api-client",HE="1.34.0",VE=`google-genai-sdk/${HE}`,BE="v1beta1",$E="v1beta";class qE{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:BE,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:$E,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))r.searchParams.append(s,String(u));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>i.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&zE(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await kd(r),new Ul(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await kd(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return kt(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield ne(r.read());if(d){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(f,{stream:!0});try{const x=JSON.parse(m);if("error"in x){const E=JSON.parse(JSON.stringify(x.error)),C=E.status,y=E.code,v=`got status: ${C}. ${JSON.stringify(x)}`;if(y>=400&&y<600)throw new ts({message:v,status:y})}}catch(x){if(x.name==="ApiError")throw x}s+=m;let h=-1,g=0;for(;;){h=-1,g=0;for(const C of c){const y=s.indexOf(C);y!==-1&&(h===-1||y<h)&&(h=y,g=C.length)}if(h===-1)break;const x=s.substring(0,h);s=s.substring(h+g);const E=x.trim();if(E.startsWith(u)){const C=E.substring(u.length).trim();try{const y=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ne(new Ul(y))}catch(y){throw new Error(`exception parsing stream chunk ${C}. ${y}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=VE+" "+this.clientOptions.userAgentExtra;return e[GE]=n,e[Vl]=n,e[FE]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))o.append(r,i);e.timeout&&e.timeout>0&&o.append(OE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,s=await i.stat(e);r.sizeBytes=String(s.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const c={file:r},d=this.getFileName(e),f=q("upload/v1beta/files",c._url),m=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,o){var r;const i=this.clientOptions.uploader,s=await i.stat(n),u=String(s.size),c=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),m={};o!=null&&Rh(o,m);const h=await this.fetchUploadUrl(d,u,c,f,m,o==null?void 0:o.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,i,s){var u;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function kd(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new ts({message:r,status:n}):new Error(r)}}function zE(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,s){const u=Object.assign({},i);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=o(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JE="mcp_used/unknown";let WE=!1;function Ph(t){for(const e of t)if(KE(e)||typeof e=="object"&&"inputSchema"in e)return!0;return WE}function Mh(t){var e;const n=(e=t[Vl])!==null&&e!==void 0?e:"";t[Vl]=(n+` ${JE}`).trimStart()}function KE(t){return t!==null&&typeof t=="object"&&t instanceof Xa}function YE(t){return kt(this,arguments,function*(n,o=100){let r,i=0;for(;i<o;){const s=yield ne(n.listTools({cursor:r}));for(const u of s.tools)yield yield ne(u),i++;if(!s.nextCursor)break;r=s.nextCursor}})}class Xa{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Xa(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var u=!0,c=(n=void 0,bt(YE(f))),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const m=r;s.push(m);const h=m.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=f}}catch(m){n={error:m}}finally{try{!u&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),_v(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jE(t,e,n){const o=new Sv;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class XE{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=eT(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(S=>{d=S}),m=e.callbacks,h=function(){d({})},g=this.apiClient,x={onopen:h,onmessage:S=>{jE(g,m.onmessage,S)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(S){},onclose:(o=m==null?void 0:m.onclose)!==null&&o!==void 0?o:function(S){}},E=this.webSocketFactory.create(c,ZE(s),x);E.connect(),await f;const v={setup:{model:pe(this.apiClient,e.model)}};return E.send(JSON.stringify(v)),new QE(E,this.apiClient)}}class QE{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=wS(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=CS(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(io.PLAY)}pause(){this.sendPlaybackControl(io.PAUSE)}stop(){this.sendPlaybackControl(io.STOP)}resetContext(){this.sendPlaybackControl(io.RESET_CONTEXT)}close(){this.conn.close()}}function ZE(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function eT(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tT="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function nT(t,e,n){const o=new yv;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const i=JSON.parse(r);if(t.isVertexAI()){const s=_S(i);Object.assign(o,s)}else Object.assign(o,i);e(o)}class oT{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new XE(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,i,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&Ph(e.config.tools)&&Mh(m);const h=lT(m);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{const b=this.apiClient.getApiKey();let P="BidiGenerateContent",F="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",F="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${P}?${F}=${b}`}let g=()=>{};const x=new Promise(b=>{g=b}),E=e.callbacks,C=function(){var b;(b=E==null?void 0:E.onopen)===null||b===void 0||b.call(E),g({})},y=this.apiClient,v={onopen:C,onmessage:b=>{nT(y,E.onmessage,b)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(b){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(b){}},S=this.webSocketFactory.create(f,sT(h),v);S.connect(),await x;let T=pe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const b=this.apiClient.getProject(),P=this.apiClient.getLocation();T=`projects/${b}/locations/${P}/`+T}let I={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[bi.AUDIO]}:e.config.responseModalities=[bi.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const N=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],_=[];for(const b of N)if(this.isCallableTool(b)){const P=b;_.push(await P.tool())}else _.push(b);_.length>0&&(e.config.tools=_);const k={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=TS(this.apiClient,k):I=ES(this.apiClient,k),delete I.config,S.send(JSON.stringify(I)),new iT(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const rT={turnComplete:!0};class iT{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Et(n.turns),e.isVertexAI()||(o=o.map(r=>ns(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(tT)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},rT),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:NS(e)}:n={realtimeInput:IS(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function sT(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function lT(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bd=10;function Dd(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(mo(s)){r=!0;break}if(!r)return!0;const i=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function mo(t){return"callTool"in t&&typeof t.callTool=="function"}function aT(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>mo(r)))!==null&&o!==void 0?o:!1}function Ld(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(mo(o))return;const i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(r)}),n}function Ud(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uT extends Zt{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,i,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!aT(n)||Dd(n.config))return await this.generateContentInternal(c);const d=Ld(n);if(d.length>0){const E=d.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let f,m;const h=Et(c.contents),g=(i=(r=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:bd;let x=0;for(;x<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const E=f.candidates[0].content,C=[];for(const y of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(mo(y)){const S=await y.callTool(f.functionCalls);C.push(...S)}x++,m={role:"user",parts:C},c.contents=Et(c.contents),c.contents.push(E),c.contents.push(m),Ud(c.config)&&(h.push(E),h.push(m))}return Ud(c.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var o,r,i,s,u;if(this.maybeMoveToResponseJsonSchem(n),Dd(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const c=Ld(n);if(c.length>0){const m=c.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(u=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i;const s=[];if(o!=null&&o.generatedImages)for(const c of o.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:s.push(c);let u;return i?u={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new qn(Xt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,s,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const s=await Promise.all(i.map(async c=>mo(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&Ph(e.config.tools)){const c=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Mh(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,o,r;const i=new Map;for(const s of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(mo(s)){const u=s,c=await u.tool();for(const d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,u)}}return i}async processAfcStream(e){var n,o,r;const i=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:bd;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return function(d,f,m){return kt(this,arguments,function*(){for(var h,g,x,E,C,y;u<i;){s&&(u++,s=!1);const I=yield ne(d.processParamsMaybeAddMcpUsage(m)),N=yield ne(d.generateContentStreamInternal(I)),_=[],k=[];try{for(var v=!0,S=(g=void 0,bt(N)),T;T=yield ne(S.next()),h=T.done,!h;v=!0){E=T.value,v=!1;const b=E;if(yield yield ne(b),b.candidates&&(!((C=b.candidates[0])===null||C===void 0)&&C.content)){k.push(b.candidates[0].content);for(const P of(y=b.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(u<i&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(P.functionCall.name)){const F=yield ne(f.get(P.functionCall.name).callTool([P.functionCall]));_.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(b){g={error:b}}finally{try{!v&&!h&&(x=S.return)&&(yield ne(x.call(S)))}finally{if(g)throw g.error}}if(_.length>0){s=!0;const b=new Oo;b.candidates=[{content:{role:"user",parts:_}}],yield yield ne(b);const P=[];P.push(...k),P.push({role:"user",parts:_});const F=Et(m.contents).concat(P);m.contents=F}else break}})}(this,c,e)}async generateContentInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Rd(this.apiClient,e);return u=q("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=Md(f),h=new Oo;return Object.assign(h,m),h})}else{const d=Ad(this.apiClient,e);return u=q("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=Pd(f),h=new Oo;return Object.assign(h,m),h})}}async generateContentStreamInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Rd(this.apiClient,e);return u=q("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(m){return kt(this,arguments,function*(){var h,g,x,E;try{for(var C=!0,y=bt(m),v;v=yield ne(y.next()),h=v.done,!h;C=!0){E=v.value,C=!1;const S=E,T=Md(yield ne(S.json()));T.sdkHttpResponse={headers:S.headers};const I=new Oo;Object.assign(I,T),yield yield ne(I)}}catch(S){g={error:S}}finally{try{!C&&!h&&(x=y.return)&&(yield ne(x.call(y)))}finally{if(g)throw g.error}}})})}else{const d=Ad(this.apiClient,e);return u=q("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(m){return kt(this,arguments,function*(){var h,g,x,E;try{for(var C=!0,y=bt(m),v;v=yield ne(y.next()),h=v.done,!h;C=!0){E=v.value,C=!1;const S=E,T=Pd(yield ne(S.json()));T.sdkHttpResponse={headers:S.headers};const I=new Oo;Object.assign(I,T),yield yield ne(I)}}catch(S){g={error:S}}finally{try{!C&&!h&&(x=y.return)&&(yield ne(x.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=ox(this.apiClient,e);return u=q("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=ix(f),h=new dd;return Object.assign(h,m),h})}else{const d=nx(this.apiClient,e);return u=q("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=rx(f),h=new dd;return Object.assign(h,m),h})}}async generateImagesInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=gx(this.apiClient,e);return u=q("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=yx(f),h=new fd;return Object.assign(h,m),h})}else{const d=mx(this.apiClient,e);return u=q("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=vx(f),h=new fd;return Object.assign(h,m),h})}}async editImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=QS(this.apiClient,e);return i=q("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=ZS(c),f=new lv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=gE(this.apiClient,e);return i=q("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=vE(c),f=new av;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=Xx(this.apiClient,e);return i=q("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=Qx(c),f=new uv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=rE(this.apiClient,e);return i=q("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=iE(c),f=new cv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Lx(this.apiClient,e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Hl(f))}else{const d=Dx(this.apiClient,e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Gl(f))}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=qx(this.apiClient,e);return u=q("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=Jx(f),h=new pd;return Object.assign(h,m),h})}else{const d=$x(this.apiClient,e);return u=q("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=zx(f),h=new pd;return Object.assign(h,m),h})}}async update(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=hE(this.apiClient,e);return u=q("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Hl(f))}else{const d=pE(this.apiClient,e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Gl(f))}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=KS(this.apiClient,e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=jS(f),h=new hd;return Object.assign(h,m),h})}else{const d=WS(this.apiClient,e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=YS(f),h=new hd;return Object.assign(h,m),h})}}async countTokens(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=qS(this.apiClient,e);return u=q("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=JS(f),h=new md;return Object.assign(h,m),h})}else{const d=$S(this.apiClient,e);return u=q("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=zS(f),h=new md;return Object.assign(h,m),h})}}async computeTokens(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=US(this.apiClient,e);return i=q("{model}:computeTokens",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=FS(c),f=new dv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=wx(this.apiClient,e);return u=q("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const m=Tx(f),h=new Di;return Object.assign(h,m),h})}else{const d=Cx(this.apiClient,e);return u=q("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const m=Ex(f),h=new Di;return Object.assign(h,m),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cT extends Zt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=tv(e);return u=q("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}else{const d=ev(e);return u=q("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=W0(e);return i=q("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dT(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function fT(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ET(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function pT(t,e,n){const o={},r=l(e,["expireTime"]);n!==void 0&&r!=null&&a(n,["expireTime"],r);const i=l(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&a(n,["newSessionExpireTime"],i);const s=l(e,["uses"]);n!==void 0&&s!=null&&a(n,["uses"],s);const u=l(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],xT(t,u));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),o}function hT(t,e){const n={},o=l(e,["config"]);return o!=null&&a(n,["config"],pT(t,o,n)),n}function mT(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function gT(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vT(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function yT(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function ST(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],ja(m));const h=l(t,["thinkingConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","thinkingConfig"],h);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&a(e,["setup","systemInstruction"],fT(Ye(x)));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let N=_o(E);Array.isArray(N)&&(N=N.map(_=>CT(No(_)))),a(e,["setup","tools"],N)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],TT(C));const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","inputAudioTranscription"],y);const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","outputAudioTranscription"],v);const S=l(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&a(e,["setup","realtimeInputConfig"],S);const T=l(t,["contextWindowCompression"]);e!==void 0&&T!=null&&a(e,["setup","contextWindowCompression"],T);const I=l(t,["proactivity"]);if(e!==void 0&&I!=null&&a(e,["setup","proactivity"],I),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function xT(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],pe(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],ST(r,n)),n}function ET(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],mT(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],gT(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],dT(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const m=l(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const h=l(t,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function TT(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],vT(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],yT(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wT(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(i=>`${n}.${i}`);e.push(...r)}else e.push(n)}return e.join(",")}function IT(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const i=o.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const i=wT(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class NT extends Zt{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=hT(this.apiClient,e);i=q("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=IT(u,e.config);return r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _T(t,e){const n={},o=l(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function AT(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=l(t,["config"]);return o!=null&&_T(o,e),e}function RT(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function PT(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function MT(t){const e={},n=l(t,["parent"]);n!=null&&a(e,["_url","parent"],n);const o=l(t,["config"]);return o!=null&&PT(o,e),e}function kT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["documents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bT extends Zt{constructor(e){super(),this.apiClient=e,this.list=async n=>new qn(Xt.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=RT(e);return i=q("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=AT(e);r=q("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=MT(e);return i=q("{parent}/documents",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=kT(c),f=new fv;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DT extends Zt{constructor(e,n=new bT(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new qn(Xt.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wE(e);return i=q("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_E(e);return i=q("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=NE(e);r=q("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bE(e);return i=q("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=DE(c),f=new pv;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LE(e);return i=q("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=UE(c),f=new hv;return Object.assign(f,d),f})}}async importFile(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=PE(e);return i=q("{file_search_store_name}:importFile",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=RE(c),f=new za;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let kh=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return kh=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const LT=()=>kh();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bl(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const $l=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wt extends Error{}class et extends wt{constructor(e,n,o,r){super(`${et.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new is({message:o,cause:$l(n)});const i=n;return e===400?new Dh(e,i,o,r):e===401?new Lh(e,i,o,r):e===403?new Uh(e,i,o,r):e===404?new Fh(e,i,o,r):e===409?new Oh(e,i,o,r):e===422?new Gh(e,i,o,r):e===429?new Hh(e,i,o,r):e>=500?new Vh(e,i,o,r):new et(e,i,o,r)}}class ql extends et{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class is extends et{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class bh extends is{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Dh extends et{}class Lh extends et{}class Uh extends et{}class Fh extends et{}class Oh extends et{}class Gh extends et{}class Hh extends et{}class Vh extends et{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UT=/^[a-z][a-z0-9+.-]*:/i,FT=t=>UT.test(t);let zl=t=>(zl=Array.isArray,zl(t));const OT=zl;let GT=OT;const Fd=GT;function HT(t){if(!t)return!0;for(const e in t)return!1;return!0}function VT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const BT=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new wt(`${t} must be an integer`);if(e<0)throw new wt(`${t} must be a positive integer`);return e},$T=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qT=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jn="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zT(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const JT=()=>{var t,e,n,o,r;const i=zT();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jn,"X-Stainless-OS":Gd(Deno.build.os),"X-Stainless-Arch":Od(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jn,"X-Stainless-OS":Gd((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Od((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const s=WT();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function WT(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,i=o[2]||0,s=o[3]||0;return{browser:e,version:`${r}.${i}.${s}`}}}return null}const Od=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Gd=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let $r;const KT=()=>$r??($r=JT());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YT(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Bh(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function jT(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Bh({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function $h(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function XT(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QT=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qh=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Fs(t,e,n){return qh(),new File(t,e??"unknown_file",n)}function ZT(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const eC=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zh=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",tC=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&zh(t),nC=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function oC(t,e,n){if(qh(),t=await t,tC(t))return t instanceof File?t:Fs([await t.arrayBuffer()],t.name);if(nC(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Fs(await Jl(r),e,n)}const o=await Jl(t);if(e||(e=ZT(t)),!(n!=null&&n.type)){const r=o.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Fs(o,e,n)}async function Jl(t){var e,n,o,r,i;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(zh(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(eC(t))try{for(var u=!0,c=bt(t),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const f=r;s.push(...await Jl(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}else{const f=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${rC(t)}`)}return s}function rC(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jh{constructor(e){this._client=e}}Jh._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wh(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Hd=Object.freeze(Object.create(null)),iC=(t=Wh)=>function(n,...o){if(n.length===1)return n[0];let r=!1;const i=[],s=n.reduce((f,m,h)=>{var g,x,E;/[?#]/.test(m)&&(r=!0);const C=o[h];let y=(r?encodeURIComponent:t)(""+C);return h!==o.length&&(C==null||typeof C=="object"&&C.toString===((E=Object.getPrototypeOf((x=Object.getPrototypeOf((g=C.hasOwnProperty)!==null&&g!==void 0?g:Hd))!==null&&x!==void 0?x:Hd))===null||E===void 0?void 0:E.toString))&&(y=C+"",i.push({start:f.length+m.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),f+m+(h===o.length?"":y)},""),u=s.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(u))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,m)=>f.start-m.start),i.length>0){let f=0;const m=i.reduce((h,g)=>{const x=" ".repeat(g.start-f),E="^".repeat(g.length);return f=g.start+g.length,h+x+E},"");throw new wt(`Path parameters result in path with invalid segments:
${i.map(h=>h.error).join(`
`)}
${s}
${m}`)}return s},qr=iC(Wh);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kh extends Jh{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,i=Ui(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new wt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new wt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(qr`/${r}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(qr`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(qr`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const i=n??{},{api_version:s=this._client.apiVersion}=i,u=Ui(i,["api_version"]);return this._client.get(qr`/${s}/interactions/${e}`,Object.assign(Object.assign({query:u},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}Kh._key=Object.freeze(["interactions"]);class Yh extends Kh{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sC(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let zr;function Qa(t){let e;return(zr??(e=new globalThis.TextEncoder,zr=e.encode.bind(e)))(t)}let Jr;function Vd(t){let e;return(Jr??(e=new globalThis.TextDecoder,Jr=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ss{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Qa(e):e;this.buffer=sC([this.buffer,n]);const o=[];let r;for(;(r=lC(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(Vd(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=Vd(this.buffer.subarray(0,i));o.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}ss.NEWLINE_CHARS=new Set([`
`,"\r"]);ss.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lC(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function aC(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fi={off:0,error:200,warn:300,info:400,debug:500},Bd=(t,e,n)=>{if(t){if(VT(Fi,t))return t;Xe(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Fi))}`)}};function zo(){}function Wr(t,e,n){return!e||Fi[t]>Fi[n]?zo:e[t].bind(e)}const uC={error:zo,warn:zo,info:zo,debug:zo};let $d=new WeakMap;function Xe(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return uC;const r=$d.get(n);if(r&&r[0]===o)return r[1];const i={error:Wr("error",n,o),warn:Wr("warn",n,o),info:Wr("info",n,o),debug:Wr("debug",n,o)};return $d.set(n,[o,i]),i}const Pn=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class so{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const i=o?Xe(o):console;function s(){return kt(this,arguments,function*(){var c,d,f,m;if(r)throw new wt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let h=!1;try{try{for(var g=!0,x=bt(cC(e,n)),E;E=yield ne(x.next()),c=E.done,!c;g=!0){m=E.value,g=!1;const C=m;if(!h)if(C.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield ne(JSON.parse(C.data))}catch(y){throw i.error("Could not parse message into JSON:",C.data),i.error("From chunk:",C.raw),y}}}catch(C){d={error:C}}finally{try{!g&&!c&&(f=x.return)&&(yield ne(f.call(x)))}finally{if(d)throw d.error}}h=!0}catch(C){if(Bl(C))return yield ne(void 0);throw C}finally{h||n.abort()}})}return new so(s,n,o)}static fromReadableStream(e,n,o){let r=!1;function i(){return kt(this,arguments,function*(){var c,d,f,m;const h=new ss,g=$h(e);try{for(var x=!0,E=bt(g),C;C=yield ne(E.next()),c=C.done,!c;x=!0){m=C.value,x=!1;const y=m;for(const v of h.decode(y))yield yield ne(v)}}catch(y){d={error:y}}finally{try{!x&&!c&&(f=E.return)&&(yield ne(f.call(E)))}finally{if(d)throw d.error}}for(const y of h.flush())yield yield ne(y)})}function s(){return kt(this,arguments,function*(){var c,d,f,m;if(r)throw new wt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let h=!1;try{try{for(var g=!0,x=bt(i()),E;E=yield ne(x.next()),c=E.done,!c;g=!0){m=E.value,g=!1;const C=m;h||C&&(yield yield ne(JSON.parse(C)))}}catch(C){d={error:C}}finally{try{!g&&!c&&(f=x.return)&&(yield ne(f.call(x)))}finally{if(d)throw d.error}}h=!0}catch(C){if(Bl(C))return yield ne(void 0);throw C}finally{h||n.abort()}})}return new so(s,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=i=>({next:()=>{if(i.length===0){const s=o.next();e.push(s),n.push(s)}return i.shift()}});return[new so(()=>r(e),this.controller,this.client),new so(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Bh({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:i}=await n.next();if(i)return o.close();const s=Qa(JSON.stringify(r)+`
`);o.enqueue(s)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function cC(t,e){return kt(this,arguments,function*(){var o,r,i,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new wt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new wt("Attempted to iterate over a response with no body");const u=new fC,c=new ss,d=$h(t.body);try{for(var f=!0,m=bt(dC(d)),h;h=yield ne(m.next()),o=h.done,!o;f=!0){s=h.value,f=!1;const g=s;for(const x of c.decode(g)){const E=u.decode(x);E&&(yield yield ne(E))}}}catch(g){r={error:g}}finally{try{!f&&!o&&(i=m.return)&&(yield ne(i.call(m)))}finally{if(r)throw r.error}}for(const g of c.flush()){const x=u.decode(g);x&&(yield yield ne(x))}})}function dC(t){return kt(this,arguments,function*(){var n,o,r,i;let s=new Uint8Array;try{for(var u=!0,c=bt(t),d;d=yield ne(c.next()),n=d.done,!n;u=!0){i=d.value,u=!1;const f=i;if(f==null)continue;const m=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?Qa(f):f;let h=new Uint8Array(s.length+m.length);h.set(s),h.set(m,s.length),s=h;let g;for(;(g=aC(s))!==-1;)yield yield ne(s.slice(0,g)),s=s.slice(g)}}catch(f){o={error:f}}finally{try{!u&&!n&&(r=c.return)&&(yield ne(r.call(c)))}finally{if(o)throw o.error}}s.length>0&&(yield yield ne(s))})}class fC{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=pC(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function pC(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function hC(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:i}=e,s=await(async()=>{var u;if(e.options.stream)return Xe(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):so.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(u=c==null?void 0:c.split(";")[0])===null||u===void 0?void 0:u.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return Xe(t).debug(`[${o}] response parsed`,Pn({retryOfRequestLogID:r,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Za extends Promise{constructor(e,n,o=hC){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Za(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jh=Symbol("brand.privateNullableHeaders");function*mC(t){if(!t)return;if(jh in t){const{values:o,nulls:r}=t;yield*o.entries();for(const i of r)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Fd(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const i=Fd(o[1])?o[1]:[o[1]];let s=!1;for(const u of i)u!==void 0&&(e&&!s&&(s=!0,yield[r,null]),yield[r,u])}}const Go=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[i,s]of mC(o)){const u=i.toLowerCase();r.has(u)||(e.delete(i),r.add(u)),s===null?(e.delete(i),n.add(u)):(e.append(i,s),n.delete(u))}}return{[jh]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Os=t=>{var e,n,o,r,i,s;if(typeof globalThis.process<"u")return(o=(n=(e=V0)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||i===void 0?void 0:i.call(r,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xh;class ls{constructor(e){var n,o,r,i,s,u,c,{baseURL:d=Os("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Os("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,h=Ui(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:f,apiVersion:m},h),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(o=g.timeout)!==null&&o!==void 0?o:ls.DEFAULT_TIMEOUT,this.logger=(r=g.logger)!==null&&r!==void 0?r:console;const x="warn";this.logLevel=x,this.logLevel=(s=(i=Bd(g.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:Bd(Os("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:x,this.fetchOptions=g.fetchOptions,this.maxRetries=(u=g.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(c=g.fetch)!==null&&c!==void 0?c:YT(),this.encoder=QT,this._options=g,this.apiKey=f,this.apiVersion=m,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Go([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Go([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Go([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new wt(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Jn}`}defaultIdempotencyKey(){return`stainless-node-retry-${LT()}`}makeStatusError(e,n,o,r){return et.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,i=FT(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return HT(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Za(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,i,s;const u=await e,c=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=c),await this.prepareOptions(u);const{req:d,url:f,timeout:m}=await this.buildRequest(u,{retryCount:c-n});await this.prepareRequest(d,{url:f,options:u});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=o===void 0?"":`, retryOf: ${o}`,x=Date.now();if(Xe(this).debug(`[${h}] sending request`,Pn({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:d.headers})),!((i=u.signal)===null||i===void 0)&&i.aborted)throw new ql;const E=new AbortController,C=await this.fetchWithTimeout(f,d,m,E).catch($l),y=Date.now();if(C instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(!((s=u.signal)===null||s===void 0)&&s.aborted)throw new ql;const T=Bl(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(n)return Xe(this).info(`[${h}] connection ${T?"timed out":"failed"} - ${S}`),Xe(this).debug(`[${h}] connection ${T?"timed out":"failed"} (${S})`,Pn({retryOfRequestLogID:o,url:f,durationMs:y-x,message:C.message})),this.retryRequest(u,n,o??h);throw Xe(this).info(`[${h}] connection ${T?"timed out":"failed"} - error; no more retries left`),Xe(this).debug(`[${h}] connection ${T?"timed out":"failed"} (error; no more retries left)`,Pn({retryOfRequestLogID:o,url:f,durationMs:y-x,message:C.message})),T?new bh:new is({cause:C})}const v=`[${h}${g}] ${d.method} ${f} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${y-x}ms`;if(!C.ok){const S=await this.shouldRetry(C);if(n&&S){const b=`retrying, ${n} attempts remaining`;return await XT(C.body),Xe(this).info(`${v} - ${b}`),Xe(this).debug(`[${h}] response error (${b})`,Pn({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:y-x})),this.retryRequest(u,n,o??h,C.headers)}const T=S?"error; no more retries left":"error; not retryable";Xe(this).info(`${v} - ${T}`);const I=await C.text().catch(b=>$l(b).message),N=$T(I),_=N?void 0:I;throw Xe(this).debug(`[${h}] response error (${T})`,Pn({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,message:_,durationMs:Date.now()-x})),this.makeStatusError(C.status,N,_,C.headers)}return Xe(this).info(v),Xe(this).debug(`[${h}] response start`,Pn({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:y-x})),{response:C,options:u,controller:E,requestLogID:h,retryOfRequestLogID:o,startTime:x}}async fetchWithTimeout(e,n,o,r){const i=n||{},{signal:s,method:u}=i,c=Ui(i,["signal","method"]);s&&s.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),o),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var i;let s;const u=r==null?void 0:r.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(s=d)}const c=r==null?void 0:r.get("retry-after");if(c&&!s){const d=parseFloat(c);Number.isNaN(d)?s=Date.parse(c)-Date.now():s=d*1e3}if(!(s&&0<=s&&s<60*1e3)){const d=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,d)}return await qT(s),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,s=Math.min(.5*Math.pow(2,i),8),u=1-Math.random()*.25;return s*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,i;const s=Object.assign({},e),{method:u,path:c,query:d,defaultBaseURL:f}=s,m=this.buildURL(c,d,f);"timeout"in s&&BT("timeout",s.timeout),s.timeout=(o=s.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:s}),x=await this.buildHeaders({options:e,method:u,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:x},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(i=s.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let u=Go([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),KT()),this._options.defaultHeaders,o,e.headers,s]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Go([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:jT(e)}:this.encoder({body:e,headers:o})}}ls.DEFAULT_TIMEOUT=6e4;class Ve extends ls{constructor(){super(...arguments),this.interactions=new Yh(this)}}Xh=Ve;Ve.GeminiNextGenAPIClient=Xh;Ve.GeminiNextGenAPIClientError=wt;Ve.APIError=et;Ve.APIConnectionError=is;Ve.APIConnectionTimeoutError=bh;Ve.APIUserAbortError=ql;Ve.NotFoundError=Fh;Ve.ConflictError=Oh;Ve.RateLimitError=Hh;Ve.BadRequestError=Dh;Ve.AuthenticationError=Lh;Ve.InternalServerError=Vh;Ve.PermissionDeniedError=Uh;Ve.UnprocessableEntityError=Gh;Ve.toFile=oC;Ve.Interactions=Yh;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gC(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function vC(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function yC(t,e){const n={},o=l(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function SC(t,e){const n={},o=l(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function xC(t,e,n){const o={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&a(e,["displayName"],r),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&a(e,["tuningTask","hyperparameters","epochCount"],i);const s=l(t,["learningRateMultiplier"]);if(s!=null&&a(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=l(t,["batchSize"]);e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","batchSize"],u);const c=l(t,["learningRate"]);if(e!==void 0&&c!=null&&a(e,["tuningTask","hyperparameters","learningRate"],c),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function EC(t,e,n){const o={};let r=l(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec"],qd(g))}else if(r==="PREFERENCE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec"],qd(g))}const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&a(e,["tunedModelDisplayName"],i);const s=l(t,["description"]);e!==void 0&&s!=null&&a(e,["description"],s);let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=l(t,["labels"]);e!==void 0&&m!=null&&a(e,["labels"],m);const h=l(t,["beta"]);return e!==void 0&&h!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),o}function TC(t,e){const n={},o=l(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=l(t,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&bC(i);const s=l(t,["config"]);return s!=null&&xC(s,n),n}function CC(t,e){const n={},o=l(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=l(t,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&DC(i,n,e);const s=l(t,["config"]);return s!=null&&EC(s,n,e),n}function wC(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function IC(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function NC(t,e,n){const o={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&a(e,["_query","filter"],s),o}function _C(t,e,n){const o={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&a(e,["_query","filter"],s),o}function AC(t,e){const n={},o=l(t,["config"]);return o!=null&&NC(o,n),n}function RC(t,e){const n={},o=l(t,["config"]);return o!=null&&_C(o,n),n}function PC(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>Qh(u))),a(n,["tuningJobs"],s)}return n}function MC(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>Wl(u))),a(n,["tuningJobs"],s)}return n}function kC(t,e){const n={},o=l(t,["name"]);o!=null&&a(n,["model"],o);const r=l(t,["name"]);return r!=null&&a(n,["endpoint"],r),n}function bC(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=l(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(n,["examples","examples"],r)}return n}function DC(t,e,n){const o={};let r=l(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Qh(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["state"]);i!=null&&a(n,["state"],hh(i));const s=l(t,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(t,["tuningTask","startTime"]);u!=null&&a(n,["startTime"],u);const c=l(t,["tuningTask","completeTime"]);c!=null&&a(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=l(t,["description"]);f!=null&&a(n,["description"],f);const m=l(t,["baseModel"]);m!=null&&a(n,["baseModel"],m);const h=l(t,["_self"]);return h!=null&&a(n,["tunedModel"],kC(h)),n}function Wl(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["state"]);i!=null&&a(n,["state"],hh(i));const s=l(t,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(n,["startTime"],u);const c=l(t,["endTime"]);c!=null&&a(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=l(t,["error"]);f!=null&&a(n,["error"],f);const m=l(t,["description"]);m!=null&&a(n,["description"],m);const h=l(t,["baseModel"]);h!=null&&a(n,["baseModel"],h);const g=l(t,["tunedModel"]);g!=null&&a(n,["tunedModel"],g);const x=l(t,["preTunedModel"]);x!=null&&a(n,["preTunedModel"],x);const E=l(t,["supervisedTuningSpec"]);E!=null&&a(n,["supervisedTuningSpec"],E);const C=l(t,["preferenceOptimizationSpec"]);C!=null&&a(n,["preferenceOptimizationSpec"],C);const y=l(t,["tuningDataStats"]);y!=null&&a(n,["tuningDataStats"],y);const v=l(t,["encryptionSpec"]);v!=null&&a(n,["encryptionSpec"],v);const S=l(t,["partnerModelTuningSpec"]);S!=null&&a(n,["partnerModelTuningSpec"],S);const T=l(t,["customBaseModel"]);T!=null&&a(n,["customBaseModel"],T);const I=l(t,["experiment"]);I!=null&&a(n,["experiment"],I);const N=l(t,["labels"]);N!=null&&a(n,["labels"],N);const _=l(t,["outputUri"]);_!=null&&a(n,["outputUri"],_);const k=l(t,["pipelineJob"]);k!=null&&a(n,["pipelineJob"],k);const b=l(t,["serviceAccount"]);b!=null&&a(n,["serviceAccount"],b);const P=l(t,["tunedModelDisplayName"]);P!=null&&a(n,["tunedModelDisplayName"],P);const F=l(t,["veoTuningSpec"]);return F!=null&&a(n,["veoTuningSpec"],F),n}function LC(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(t,["done"]);s!=null&&a(n,["done"],s);const u=l(t,["error"]);return u!=null&&a(n,["error"],u),n}function qd(t,e){const n={},o=l(t,["gcsUri"]);o!=null&&a(n,["validationDatasetUri"],o);const r=l(t,["vertexDatasetResource"]);return r!=null&&a(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UC extends Zt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qn(Xt.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:Ll.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=IC(e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Wl(f))}else{const d=wC(e);return u=q("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Qh(f))}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=RC(e);return u=q("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=MC(f),h=new gd;return Object.assign(h,m),h})}else{const d=AC(e);return u=q("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=PC(f),h=new gd;return Object.assign(h,m),h})}}async cancel(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=vC(e);return u=q("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=SC(f),h=new vd;return Object.assign(h,m),h})}else{const d=gC(e);return u=q("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const m=yC(f),h=new vd;return Object.assign(h,m),h})}}async tuneInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=CC(e,e);return i=q("tuningJobs",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>Wl(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=TC(e);return i=q("tunedModels",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>LC(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FC{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const OC=1024*1024*8,GC=3,HC=1e3,VC=2,Oi="x-goog-upload-status";async function BC(t,e,n){var o;const r=await Zh(t,e,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Oi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function $C(t,e,n){var o;const r=await Zh(t,e,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Oi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=ah(i),u=new Ja;return Object.assign(u,s),u}async function Zh(t,e,n){var o,r;let i=0,s=0,u=new Ul(new Response),c="upload";for(i=t.size;s<i;){const d=Math.min(OC,i-s),f=t.slice(s,s+d);s+d>=i&&(c+=", finalize");let m=0,h=HC;for(;m<GC&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[Oi]));)m++,await zC(h),h=h*VC;if(s+=d,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[Oi])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function qC(t){return{size:t.size,type:t.type}}function zC(t){return new Promise(e=>setTimeout(e,t))}class JC{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await BC(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $C(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qC(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WC{create(e,n,o){return new KC(e,n,o)}}class KC{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zd="x-goog-api-key";class YC{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(zd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(zd,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jC="gl-node/";class XC{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ve({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=z0(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new YC(this.apiKey);this.apiClient=new qE({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:jC+"web",uploader:new JC,downloader:new FC}),this.models=new uT(this.apiClient),this.live=new oT(this.apiClient,r,new WC),this.batches=new xy(this.apiClient),this.chats=new tS(this.models,this.apiClient),this.caches=new Qy(this.apiClient),this.files=new dS(this.apiClient),this.operations=new cT(this.apiClient),this.authTokens=new NT(this.apiClient),this.tunings=new UC(this.apiClient),this.fileSearchStores=new DT(this.apiClient)}}const yr={webtoon:{name:"  ",desc:"   +    ( )",prompt:"Premium Korean Historical Webtoon Style, High Quality 2D Digital Art, Crisp Line Art (Outlines), Cel Shading, Smooth Coloring, Beautiful Characters (Sparkling eyes, delicate features, pale skin, soft blush), Fusion Hanbok, Vibrant and Pastel tones, Webtoon Cover Art aesthetic, Sharp focus, No photorealism, Manhwa style"},animation:{name:"  ",desc:" ,  ",prompt:"2D cell animation style, Korean folklore atmosphere, flat shading, clean lines, Studio Ghibli inspired but Korean Joseon aesthetics"},inkwash:{name:"  (Modern)",desc:"   +   ",prompt:"Modern Korean emotional watercolor illustration, beautiful and handsome characters with modern aesthetic faces (sharp jawline, large expressive eyes, delicate features), soft transparent watercolor texture, ink spreading effect, dreamy and romantic atmosphere, detailed character design, NOT old traditional folk art style, NOT round ugly faces, pastel tones, artistic masterpiece"},fantasy:{name:"  ()",desc:"    ",prompt:"Korean Romance Fantasy Webnovel Cover Art Style, Semi-realistic Digital Illustration, Beautiful and Aesthetic, Highly Detailed Masterpiece, Soft Cinematic Lighting, 8k resolution, vibrant colors, dreamy atmosphere, detailed hair and eyes, no photorealistic skin texture, 2D rendering"}},ot=t=>{if(!t)throw new Error("API   .   'API  '    .");return new XC({apiKey:t})},Ro=t=>{try{let e=t.replace(/```json\s*/g,"").replace(/```\s*/g,"");return e=e.trim(),JSON.parse(e)}catch(e){throw console.error("JSON Parse Error:",e,"Raw Text:",t),new Error("AI    . (JSON  )")}},QC=`
  [STRICT ARCHITECTURAL RULES - JOSEON DYNASTY]
  1. ONDOL STRUCTURE (CRITICAL): 
     - Kitchen (Bu-eok) MUST be attached to the Main Room (An-bang). NO OUTDOOR ISLAND KITCHENS.
     - Kitchen floor is LOWER (dirt). Room floor is RAISED (wood/stone).
  2. DOORS & WINDOWS:
     - ROOM DOORS: White rice paper (Changhoji) on wooden lattice.
     - KITCHEN DOORS: Rough solid wood planks. NO PAPER.
  3. ROOF & WALLS:
     - Commoner: Mud walls + Rounded Straw Roof (Choga).
     - Noble: Plaster walls + Black Tile Roof (Giwa).
`,em=`
  [STRICT COSTUME RULES - DO NOT HALLUCINATE]
  1. SHOES:
     - Jipsin (Straw shoes): COVERS TOES. No flip-flops.
     - Indoors: NO SHOES. White socks (Beoseon) only.
  2. CLOTHING:
     - Hanbok Skirt (Chima): **MUST BE ANKLE LENGTH**. Show the shoes. Never drag on floor like a western dress.
     - Sleeves: Curved (Baerae).
  3. HAIR:
     - Men (Married): Sangtu (Topknot) + Headband (Manggeon).
     - Men (Unmarried): Long braided hair (Daenggi).
     - Women (Married): Low Bun (Jjok-jin) with Binyeo (Hairpin).
     - Women (Unmarried): Long braided hair.
     - **NO MODERN HAIRSTYLES**. No bangs unless specified.
  
  4. **[CRITICAL] UNDRESSED STATE (SEE-THROUGH RAMIE)**:
     - When prompt says "Remove Jeogori", "Undressed", "Sleeping", "Transparent":
       - **ITEM**: **"Moshi-Jeoksam" (White Ramie Summer Shirt)**.
       - **TRANSPARENCY**: The fabric is **EXTREMELY SHEER / SEE-THROUGH**.
       - **VISUAL EFFECT**:
         1. **SKIN TONE**: The **flesh tone** of Shoulders, Arms, and **Upper Chest (Cleavage)** MUST be clearly visible through the white fabric.
         2. **UNDER-LAYER**: The **White Chest Band (Mal-gi)** wrapping the breasts is visible **BENEATH** the sheer shirt.
         3. **RIBBON (Goreum)**: Even the chest ribbon is **TRANSPARENT WHITE RAMIE**.
       - **SILHOUETTE**: A white misty veil over the skin. Not opaque.
`,tm=`
  NEGATIVE PROMPT: **LOOKING AT CAMERA**, **EYE CONTACT**, posing for photo, selfie, modern items, electricity, cars, concrete, western clothes, beds, chairs, glass windows, paved roads, Japanese style shoes (Geta/Zori), Chinese queues, text, watermark, speech bubble, dirty face (unless specified), messy hair (unless specified), short skirt, showing legs, modernized hanbok, 3d render, plastic skin, western lingerie, nipples, genitals, modern bra, thick clothes, winter clothes.
`,eu=`
  CONTEXT: Korea, Joseon Dynasty (19th Century).
  ${QC}
  ${em}
  ${tm}
`,ZC=async(t,e)=>{const n=ot(t),o=e.match(/^data:(.+);base64,(.+)$/);if(!o)return"Imported image";const r=`
    Analyze this character image for a CONTINUITY SHEET.
    
    [CRITICAL INSTRUCTION]
    Describe specific visual traits that MUST be preserved in future drawings.
    
    1. **HEADWEAR**: Exact type (Gat, Nambawi, None) and color.
    2. **HAIR**: Exact style (Topknot, Braid, Bun) and hairline.
    3. **CLOTHING**: 
       - Top (Jeogori) Color & Pattern.
       - Bottom (Baji/Chima) Color.
       - Outer (Dopo/Jangot) Color.
    4. **FACE**: Eye shape, facial hair (beard/mustache), distinct features.
    
    Output a single paragraph. Be extremely precise about COLORS.
  `;try{return(await n.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:o[1],data:o[2]}},{text:r}]}})).text||"Imported Character Reference"}catch(i){return console.error("Vision Analysis Failed",i),"Imported Character Reference (Analysis Failed)"}},ew=async(t,e,n)=>{const o=ot(t),r=`
      You are a storyboard director. SPLIT this scene into ${n} sequential cuts.
      ORIGINAL: "${e.scriptSegment}" (${e.location})
      
      RULES:
      1. Break the action/dialogue logically.
      2. Keep the same Location/Time.
      3. Create specific visual descriptions for each cut.
      
      OUTPUT JSON:
      [ { "location": "Location (Keep Korean)", "timeOfDay": "Time (Keep Korean)", "scriptSegment": "Script Content (Keep Korean)", "description": "Visual Description (English)" }, ... ]

      [LANGUAGE RULES]
      1. **scriptSegment**: MUST BE KOREAN. Copy the exact lines from the original script. DO NOT TRANSLATE.
      2. **location** & **timeOfDay**: MUST BE KOREAN (e.g., "", "").
      3. **description**: MUST BE ENGLISH (Visual instructions for Image AI).
    `;try{const i=await o.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json"}});if(i.text){const s=Ro(i.text);if(Array.isArray(s))return s.map((u,c)=>({id:`${e.id}-split-${Date.now()}-${c}`,sceneNumber:0,location:u.location||e.location,timeOfDay:u.timeOfDay||e.timeOfDay,scriptSegment:u.scriptSegment,description:u.description,aspectRatio:e.aspectRatio,casting:e.casting}))}return[e]}catch(i){throw console.error(i),new Error("  ")}},tw=async(t,e,n=[])=>{const o=ot(t),r=n.length>0?`EXISTING LOCATIONS: ${n.map(s=>`${s.location} (${s.description})`).join("; ")}`:"",i=`
    Analyze this Korean script for a Webtoon/Animation storyboard.
    ${eu}
    ${r}
    
    TASK: Break down the script into SCENES based on NARRATIVE BEATS.
    Target Count: ~20-30 scenes for 3000 chars.
    
    OUTPUT JSON:
    [{ "sceneNumber": 1, "location": "Location (KOREAN)", "scriptSegment": "Original Script Text (KOREAN)", "description": "Visual Description for AI Prompt (ENGLISH)", "timeOfDay": "Day/Night (KOREAN)" }]
    
    [IMPORTANT LANGUAGE RULES]
    1. **scriptSegment**: MUST BE KOREAN. Copy exact lines from script. DO NOT TRANSLATE.
    2. **location**: MUST BE KOREAN (e.g., "", "", "").
    3. **timeOfDay**: MUST BE KOREAN (e.g., "", "", "", "").
    4. **description**: MUST BE ENGLISH (This is for the AI Image Generator).
    
    SCRIPT:
    ${e.substring(0,3e4)}
  `;try{const s=await o.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json"}});if(s.text){const u=Ro(s.text);if(Array.isArray(u))return u.map((c,d)=>({id:`scene-${Date.now()}-${d}`,...c}))}return[]}catch(s){throw console.error(s),new Error("  .  .")}},nw=async(t,e,n,o=[])=>{const r=ot(t),i=`
    You are a Casting Director. Extract characters from the script.
    OUTPUT JSON:
    [{ "name": "Name (KOREAN)", "visualGuide": "Korean Desc", "age": "20", "gender": "Male", "description": "English visual prompt" }]

    [LANGUAGE RULES]
    1. **name**: Keep in KOREAN (e.g., "").
    2. **visualGuide**: Korean description for the user.
    3. **description**: English visual description for AI.

    SCRIPT:
    ${e.substring(0,15e3)}...
  `;try{const s=await r.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json"}});if(s.text){const u=Ro(s.text);if(Array.isArray(u))return u.map((c,d)=>({id:`char-${Date.now()}-${d}`,...c,hasDialogue:!0,chromaKeyColor:"green",actions:[]}))}return[]}catch(s){return console.error(s),[]}},ow=async(t,e,n,o,r,i="auto")=>{const s=ot(t),u=n.map(g=>`[CHARACTER: ${g.name}] (ID: ${g.id}) ${g.description}`).join(`
`),c=o?o.map(g=>`[PROP: ${g.name}] (ID: ${g.id}) ${g.description}`).join(`
`):"",d=r?`[GLOBAL RULES] ${r}`:"",f={auto:`
      [THEME: AI AUTO-ANALYSIS (BEST FIT)]
      - **TASK**: Analyze the script and DETERMINE THE BEST GENRE/TONE (Mystery, Comedy, Tragedy, etc.) yourself.
      - **GOAL**: Choose the theme that will generate the MOST CURIOSITY and VIEWS.
      - **EXECUTION**: Apply the rules of the chosen genre (e.g., if you choose Comedy, use wide angles; if Horror, use shadows).
      - **IMPORTANT**: Do not be generic. Pick a SPECIFIC angle (e.g., "Deep Tragedy" or "Slapstick Comedy") and stick to it.
    `,mystery:`
      [THEME: MYSTERY & THRILLER]
      - **MOOD**: Dark, Suspenseful, Uneasy.
      - **FOCUS**: Secrets, Shadows, Unseen threats.
      - **ENDING**: The protagonist opens a "Forbidden Box" or sees something shocking. CUT before revealing what it is.
      - **LIGHTING**: High contrast (Chiaroscuro), Moonlight, Flickering candles.
    `,comedy:`
      [THEME: SATIRE & COMEDY (B-Class Humor)]
      - **MOOD**: Absurd, Exaggerated, Ironic.
      - **FOCUS**: "WTF Moments", Stupid decisions, Slapstick consequences.
      - **ENDING**: A ridiculous situation freezes frame. The protagonist realizes they messed up big time.
      - **VISUALS**: Bright colors, wide angles (fisheye effect), funny facial expressions.
    `,destiny:`
      [THEME: EPIC DESTINY]
      - **MOOD**: Grand, Mythical, Serious.
      - **FOCUS**: Prophecies, Birth secrets, Royal bloodlines.
      - **ENDING**: A moment of realization or acceptance of a great burden. The "Hero's Journey" begins.
      - **VISUALS**: Cinematic wide shots, God rays, Slow motion, Golden/Warm tones.
    `,tragedy:`
      [THEME: SADNESS & HAN (Deep Sorrow)]
      - **MOOD**: Melancholic, Heartbreaking, Lonely.
      - **FOCUS**: Loss, Separation, Unjust suffering.
      - **ENDING**: The protagonist screams in silence or tears fall in slow motion. Focus on the emotional pain.
      - **VISUALS**: Desaturated colors, Rain, Snow, Cold/Blue tones, Close-ups on tears.
    `,revenge:`
      [THEME: REVENGE & PASSION]
      - **MOOD**: Intense, Violent, Burning.
      - **FOCUS**: Betrayal, Anger, Preparation for the kill.
      - **ENDING**: The protagonist eyes burn with vengeance. They hold a weapon. CUT before the strike.
      - **VISUALS**: High contrast, Red accents (blood/fire), Sharp focus, Dutch angles.
    `,despair:`
      [THEME: POVERTY & DESPAIR (Realism)]
      - **MOOD**: Gritty, Dirty, Hopeless.
      - **FOCUS**: Hunger, Cold, Cruelty of the world.
      - **ENDING**: The protagonist hits rock bottom. A look of total emptiness.
      - **VISUALS**: Dirty textures, Earthy tones, Handheld camera (shaky), Raw realism.
    `},m=f[i]||f.mystery,h=`
    Act as a PD for a viral 'Mystery/Folktale' YouTube channel.
    Create a 5-shot "HOOKING TEASER" sequence based on the selected theme.

    [VISUAL CONSISTENCY BIBLE]
    You MUST adhere to these character and prop designs strictly.
    ${u}
    ${c}
    ${d}
    ${eu}

    ${m}

    [CRITICAL RULE: NO SPOILERS & NO RESOLUTION]
    - **ABSOLUTE PROHIBITION**: Do NOT reveal the "Secret Identity" or "Final Twist" in the opening.
    - **NO KEY CHARACTERS**: Do NOT show the "Answer" character (e.g., The King, The Real Father). If the goal is to meet the King, do NOT show the King. Show the *Gatekeeper* or the *Obstacle* instead.
    - **AMBIGUOUS LOCATION**: Do not make it obvious where it is (e.g., "Is this the Palace or a Prison?"). Keep the background focused on the *conflict*, not the landmark.
    - **Example**: A girl holding a knife. Is she in front of the King? We don't know. We only see the knife and the soldiers blocking her. **The King is NOT in the frame.**
    - **HIDE THE ANSWER**: The audience must NOT know *who* she really is yet. They should only see a "desperate girl fighting against the world".
    - **CUT BEFORE THE TRUTH**: Stop the scene *right before* the secret is revealed.

    [CRITICAL MISSION: FIND THE "INCITING INCIDENT" AND DRAMATIZE IT]
    Every story, no matter the genre, has a "Spark" (Inciting Incident) that starts the fire.
    Your job is to **find that spark and pour gasoline on it** according to the THEME.
    
    1. **SCAN FOR CONFLICT**:
       - Look for the moment matching the theme (e.g., Absurdity for Comedy, Loss for Tragedy).
       - It could be a physical threat, a social humiliation, a shocking discovery, or a heartbreaking loss.
       - **Ignore the "Setup" and "Resolution". Go straight for the "Problem".**
    
    2. **DRAMATIZE THE MOMENT (Make it Cinematic)**:
       - Even if the text says "He was sad", you must visualize it as "He screams at the rain".
       - Even if the text says "She was scared", you must visualize it as "Her hands tremble as she hides under the floorboards".
       - **Translate "Text Description" into "Visual Action".**
    
    // Theme strategy is already injected above via selectedThemeInstruction
    
    [CRITICAL INSTRUCTION: ONE SCENE, FIVE CONTINUOUS CUTS]
    1. **SINGLE MOMENT**: Do not jump around in time. Stay in ONE scene.
    2. **CONTINUITY IS KING**: Shot 2 MUST be the direct consequence of Shot 1.
    3. **NARRATIVE ARC (The "Universal Cliffhanger" Formula)**:
       - Shot 1 (Trigger): The conflict begins (e.g., The threat appears).
       - Shot 2 (Escalation): The situation gets worse (No escape).
       - Shot 3 (Desperation): The protagonist realizes there is no way out.
       - Shot 4 (Decision): The protagonist makes a "Fatal Decision" or "Last Resort".
       - **Shot 5 (The CLIFFHANGER)**: **The moment of "Irreversible Action"**.
         - **RULE**: Stop exactly **1 second before the result/consequence**.
         - If they jump: Show the leap, NOT the landing.
         - If they stab: Show the blade touching the skin, NOT the blood.
         - If they scream: Show the open mouth, NOT the silence after.
         - **BLACK OUT** at the peak of tension.

    [EXAMPLES OF HOOKING LOGIC]
    - If the story is about revenge: Show the cruel moment the protagonist is kicked out in the rain, crying blood tears.
    - If the story is about a slave: Show the pain/torture of the slave market, then end with the rich man saying "I will buy him."
    - **Goal**: Show the SUFFERING, CONFLICT, or SHOCKING REVEAL.
    
    [VEO VIDEO PROMPT RULES - CINEMATIC JSON FORMAT]
    Instead of a simple string, generate a structured 'videoPrompt' JSON object for professional control.
    
    [OUTPUT FORMAT]
    OUTPUT JSON: 
    [
      { 
        "sequenceNumber": 1, 
        "title": "Shot Title (Korean)", 
        "visualPrompt": "Detailed visual description for Image Gen (KOREAN)", 
        "characterIds": ["char_id"], 
        "propIds": ["prop_id"],
        "videoPrompt": {
            "subject": {
                 "action": "NARRATIVE EVENT: Describe the story action clearly (e.g., 'Woman falls on knees and screams', 'Man draws sword aggressively'). Do NOT just say 'standing'.",
                 "emotion": "Facial expression and mood"
             },
             "cinematography": {
                 "camera_motion": "e.g., 'Fast zoom in to eyes', 'Handheld chaos', 'Slow tracking shot'",
                 "lighting": "e.g., 'Moonlight through paper door', 'Flickering candlelight', 'Stormy grey light'",
                 "lens": "e.g., '35mm wide', '85mm portrait', 'Macro close-up'"
             },
             "transition": {
                 "type": "morph",
                 "timing": "Late transition at 7s",
                 "description": "Describe the visual change into the next shot (Image B)"
             },
             "ambience": "e.g., 'Rain falling heavily', 'Dust rising from ground', 'Smoke filling the air'"
         }
       }
     ]
     
     [CONSTRAINT]
     - "visualPrompt": MUST BE KOREAN. Detailed.
     - "videoPrompt": MUST BE A JSON OBJECT (as shown above), written in ENGLISH.
     - **CRITICAL**: The 'action' field must describe a STORY MOMENT, not just passive movement. Something must HAPPEN.
    
    SOURCE TEXT:
    ${e.substring(0,5e4)}
  `;try{const g=await s.models.generateContent({model:"gemini-2.5-flash",contents:h,config:{responseMimeType:"application/json"}});if(g.text){const x=Ro(g.text);if(Array.isArray(x))return x.map(E=>({id:`open-${Date.now()}-${E.sequenceNumber}`,...E}))}return[]}catch(g){throw console.error(g),new Error("  ")}},Kl=async(t,e,n,o="16:9",r="background",i,s,u,c,d,f,m)=>{var G,Y,X,ue;const h=ot(t),g=yr[n].prompt;let E={aspectRatio:o||"16:9"},C=e;if(e&&/[-]/.test(e)&&(C=await Un(h,e)),m&&m.length>0&&Array.isArray(i)&&i.length>0){const ee=m.map((ve,ie)=>`${ve} (MATCH WITH PROVIDED REFERENCE IMAGE #${ie+1})`).join(", ");ee&&(C+=`
[CHARACTER MATCHING: ${ee}]`)}let y=s||"";s&&/[-]/.test(s)&&(y=await Un(h,s));let v=d||"";d&&/[-]/.test(d)&&(v=await Un(h,d));const S=`
    [ROLE] You are the "Continuity Supervisor" for a high-budget Korean Historical Drama.
    [ABSOLUTE CASTING RULE]
    - **DRAW ONLY** the characters explicitly listed in the "[FOCUS SUBJECT]" section of the prompt.
    - If the script mentions other characters (talking/listening) but they are NOT in "[FOCUS SUBJECT]", **DO NOT DRAW THEM**.
    - If only ONE character is listed, it must be a **SOLO SHOT**.
    
    [YOUR MISSION]
    1. **CONSISTENCY IS GOD**: 
       - If a Character Reference is provided, the character MUST look exactly like it.
       - If a Background Reference is provided, the room/environment MUST look exactly like it.
    2. **ACTING DIRECTOR**: Natural acting, candid shots.
    3. **HISTORICAL POLICE**: Enforce Joseon Dynasty rules.
  `,T=v?`
    [MANDATORY GLOBAL PRODUCTION DESIGN GUIDELINES]
    (These rules apply to ALL scenes unless specifically overridden)
    ${v}
  `:"",I=y?`
    [USER COMMAND - ABSOLUTE PRIORITY - OVERRIDES REFERENCE]
    The user wants to CHANGE specific details from the reference image.
    User says: "${y}".
    
    [EXECUTION RULES]
    1. If the user asks to change clothing/hair (e.g., "Remove Hat", "Wear Indoor Clothes"), YOU MUST OBEY.
    2. Ignore the "Reference Image" constraint for that specific item.
    3. Keep the FACE and IDENTITY the same, but change the requested item.
  `:"";let N="";const _=Array.isArray(i)?i:i?[i]:[];_.length>0&&(r==="character"||r==="cinematic")&&(N=`
        [VISUAL ANCHOR - CHARACTERS]
        The provided images (tagged as Character Refs) are the **MASTER REFERENCES**.
        
        - **MATCHING RULE**: The prompt explicitly tags characters with "(MATCH WITH PROVIDED REFERENCE IMAGE #N)".
        - **EXECUTION**: You MUST map the Nth provided image to that specific character.
          (e.g., "Reference Image #1" -> First image in the list, "Reference Image #2" -> Second image).
        
        - **HAIR**: Copy the reference hairstyles EXACTLY.
        - **CLOTHES**: Copy colors, layers, and patterns EXACTLY.
        - **FACE**: Copy facial features.
        - **BACKGROUND EXCLUSION**: IGNORE any background elements (walls, furniture, landscapes) visible in the Character Reference Images. Use them ONLY for Character Design.
      `);let k="";u&&(k=`
        [VISUAL MASTER - BACKGROUND & STYLE]
        The provided image is the **BACKGROUND REFERENCE**.
        1. **ARCHITECTURE & ATMOSPHERE**: Copy the room structure, furniture, lighting, and textures EXACTLY.
        2. **ADAPT FRAMING**: 
           - IF a specific Camera Shot (e.g., Waist Shot) is requested in the prompt, YOU MUST ZOOM IN/OUT within this environment.
           - DO NOT just copy the reference's framing if it conflicts with the [CAMERA] instruction.
           - Example: If Reference is Wide Room but Prompt is "Waist Shot", draw the character from waist up with the blurred room background behind them.
      `);let b="";c&&c.length>0&&(b=`
        [VISUAL ANCHOR - PROPS/OBJECTS]
        The provided additional images are IMPORTANT OBJECTS (Props) that must appear in the scene.
        1. **INTEGRATION**: Include these objects in the scene naturally as described in the script.
        2. **APPEARANCE**: Maintain their visual appearance (color, shape, details) as shown in the reference images.
        3. **INTERACTION**: If the character is interacting with them (holding, looking at), ensure realistic interaction.
      `);const P=`
    [ACTING & CAMERA]
    - **DO NOT LOOK AT CAMERA**. (Unless 'Close Up Face' is requested).
    - Eyes should follow the action.
    - Candid Shot. Natural Movement.
  `,F=`
    [POSTURE & POSE RULES]
    1. **DEFAULT POSE**:
       - IF Location is OUTDOOR (Yard, Street, Forest): **MUST BE STANDING** unless script explicitly says "Sitting".
       - IF Location is INDOOR: Follow script context.
    2. **FRAMING VS POSE**:
       - **DO NOT CHANGE THE POSE** to fit the camera frame.
       - If "Waist Shot" is requested, **CROP THE IMAGE**. DO NOT make the character sit to hide their legs.
       - If the character is Standing, keep them Standing and just show the upper body.
  `,Q=`
    [SPATIAL REALISM & LENS]
    1. **DO NOT SHRINK THE ROOM**: The room must remain spacious. Do not make the walls close in on the characters.
    2. **DEPTH**: Use "Depth of Field" or "Bokeh" for Close-ups/Waist Shots to separate character from background.
    3. **LENS**:
       - For Waist/Bust Shots: Use **85mm or 100mm Telephoto Lens**. (Flattens features, blurs background, keeps room scale natural).
       - Avoid Wide Angle (distorts face, makes room look small/curved) unless "Full Shot" is requested.
  `,K=`
    [HANBOK LAYERING & TRANSPARENCY]
    - If the user/script asks to "Remove Jeogori", "Undress", "Sleeping", or "Summer":
      1. **DRAW "MOSHI-JEOKSAM" (SHEER WHITE RAMIE SHIRT)**.
      2. **ABSOLUTE TRANSPARENCY**: The white fabric is translucent like a mist.
      3. **VISIBLE LAYERS (SEE-THROUGH)**: 
         - **SKIN**: The skin tone of Shoulders, Arms, and **Upper Chest (Cleavage)** is **CLEARLY VISIBLE** through the fabric.
         - **UNDERGARMENT**: The **White Chest Band (Mal-gi)** of the skirt is visible **UNDER** the sheer shirt.
         - **RIBBON**: The chest ribbon (Goreum) is also **TRANSPARENT white ramie**.
  `;let W="",oe="";e.includes("[CAMERA]")&&(e.includes("Waist Shot")||e.includes("ws")?oe=`
            [ABSOLUTE FRAMING RULE: WAIST SHOT] 
            1. **ZOOM / CROP**: The framing MUST be a **CLOSE-UP from Head to Waist**.
            2. **FILL THE SCREEN**: The Character's Head and Torso MUST FILL the vertical space of the 16:9 frame.
            3. **CUT OFF**: The bottom of the frame MUST CUT OFF at the Belt/Waist line. **DO NOT SHOW LEGS**.
            4. **POSTURE**: **SITTING IS ALLOWED**. If sitting, the camera zooms in to the upper body only.
            5. **NEGATIVE PROMPT**: Full body, Distant shot, Small character, Showing legs, Showing shoes.
          `:e.includes("Bust Shot")||e.includes("bs")||e.includes("Close Up")||e.includes("cu")?oe=`
            [ABSOLUTE FRAMING RULE: BUST SHOT / CLOSE UP] 
            1. **EXTREME ZOOM**: The framing is TIGHT on the Face and Shoulders.
            2. **FILL THE SCREEN**: The Face and Shoulders MUST DOMINATE the frame (80% of screen).
            3. **CUT OFF**: The bottom of the frame MUST CUT OFF at the Chest/Armpits. **DO NOT SHOW WAIST**.
            4. **POSTURE**: **SITTING IS ALLOWED**. Even if sitting, we only see the face.
            5. **NEGATIVE PROMPT**: Waist, Stomach, Belt, Hands (unless gesture), Full body, Distant shot.
          `:e.includes("Knee Shot")||e.includes("mls")?oe=`
            [ABSOLUTE FRAMING RULE: KNEE SHOT (Medium Long)] 
            1. **ZOOM**: The framing is from Head to Knees.
            2. **FILL THE SCREEN**: The Character (Head to Knees) MUST FILL the vertical space.
            3. **CUT OFF**: The bottom of the frame MUST CUT OFF at the Knees/Thighs. **DO NOT SHOW FEET**.
            4. **POSTURE**: **SITTING IS ALLOWED**. If sitting, show the character from Head to Knees.
            5. **NEGATIVE PROMPT**: Feet, Shoes, Ground at feet, Full body, Distant shot.
          `:(e.includes("Full Shot")||e.includes("full"))&&(oe=`
            [ABSOLUTE FRAMING RULE: FULL SHOT]
            1. **WIDE ANGLE**: Show the ENTIRE BODY from Head to Toe.
            2. **FEET VISIBLE**: You MUST show the shoes/feet on the ground.
            3. **SPACE**: Leave some space above the head and below the feet.
            4. **POSTURE**: **SITTING IS ALLOWED**. If sitting, show the full sitting pose including legs/knees on floor.
          `));let re="";f&&(re=`
        [VISUAL ANCHOR - MASTER SCENE LOCATION]
        The provided first image is the **ACTUAL FILM SET** we are shooting in.
        
        [CRITICAL SPATIAL RULES - 3D WORLD EXTENSION]
        1. **IMMUTABLE WORLD**: The walls, floor, furniture, lighting, and atmosphere are **FIXED REALITY**.
        2. **CAMERA WORK ONLY**: You are a cameraman inside this specific room. You can ONLY change the Camera Angle, Lens, and Distance.
        3. **EXTEND THE SPACE**: 
           - Treat the image as a viewport into a full 3D room.
           - If the camera rotates to show a part NOT visible in the reference, **INFER** the environment based on the visible parts.
           - **CONTINUITY**: The unseen wall must match the style of the seen wall. The floor pattern must continue.
           - **DO NOT** invent a completely different style for the unseen areas.
        4. **PERSPECTIVE SHIFT**:
           - If prompt says "Side View", show THIS SAME ROOM from the side.
           - If prompt says "Reverse Shot", show the other side of THIS SAME ROOM.
      `),W=`
    [SYSTEM INSTRUCTION: IMAGE EDITING & FRAMING MODE]
    ${re}
    ${oe}
    
    [ORIGINAL SCENE CONTEXT]
    ${S}
    ${g}
    ${T}
    ${eu}
    ${K}
    ${N}
    ${k}
    ${b}
    ${I}
    ${P}
    ${F}
    
    [SCENE GENERATION PROMPT]
    ${C}
    
    ${Q}
    
    [FINAL CHECK]
    - DID YOU CROP THE IMAGE AS REQUESTED?
    - Is the framing correct (Waist/Bust/CloseUp)?
    - Is the background consistent with the Master Image?
  `;const ae=[];if(u&&!f){const ee=u.match(/^data:(.+);base64,(.+)$/);ee&&ae.push({inlineData:{mimeType:ee[1],data:ee[2]}})}if(f){const ee=f.match(/^data:(.+);base64,(.+)$/);ee&&ae.push({inlineData:{mimeType:ee[1],data:ee[2]}})}_.length>0&&(r==="character"||r==="cinematic")&&_.forEach(ee=>{const ve=ee.match(/^data:(.+);base64,(.+)$/);ve&&ae.push({inlineData:{mimeType:ve[1],data:ve[2]}})}),c&&c.length>0&&c.forEach(ee=>{const ve=ee.match(/^data:(.+);base64,(.+)$/);ve&&ae.push({inlineData:{mimeType:ve[1],data:ve[2]}})}),ae.push({text:W});try{const ee=await h.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:ae},config:{imageConfig:E}});for(const ve of((X=(Y=(G=ee.candidates)==null?void 0:G[0])==null?void 0:Y.content)==null?void 0:X.parts)||[])if(ve.inlineData)return`data:${ve.inlineData.mimeType};base64,${ve.inlineData.data}`;throw new Error("  .")}catch(ee){throw console.error(ee),(ue=ee.message)!=null&&ue.includes("SAFETY")?new Error("  :   ."):new Error("    .")}},Un=async(t,e)=>{var n;if(!e||!/[-]/.test(e))return e;try{return((n=(await t.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:`Translate the following Korean text to English for an image generation prompt. Keep it concise and descriptive. Text: "${e}"`}]}})).text)==null?void 0:n.trim())||e}catch(o){return console.error("Translation failed, using original text:",o),e}},rw=async(t,e,n,o,r)=>{var d,f,m,h;const i=ot(t),s=await Un(i,n);let c=`
    ${yr[o].prompt}
    CONTEXT: Korea, Joseon Dynasty.
    TASK: Generate a high-quality visual reference for a specific OBJECT/PROP.
    
    OBJECT NAME: ${e}
    VISUAL DESCRIPTION: ${s}
    
    [RULES]
    1. Single Object isolated on a clean, simple background (or solid color).
    2. Focus on the object details.
    3. Historical accuracy for Joseon Dynasty.
    4. NO text, NO watermarks, NO user interface elements.
    5. High resolution, clear definition.
  `;r&&(c+=`
      [REFERENCE IMAGE PROVIDED]
      - Use the provided image as a strict visual reference for SHAPE, COLOR, and MATERIAL.
      - Copy the structure and design of the object in the reference image.
      - Apply the Joseon Dynasty context if necessary, but keep the core look from the reference.
      `);try{const g=[];if(r){const E=r.match(/^data:(.+);base64,(.+)$/);E&&g.push({inlineData:{mimeType:E[1],data:E[2]}})}g.push({text:c});const x=await i.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:g},config:{imageConfig:{aspectRatio:"1:1"}}});for(const E of((m=(f=(d=x.candidates)==null?void 0:d[0])==null?void 0:f.content)==null?void 0:m.parts)||[])if(E.inlineData)return`data:${E.inlineData.mimeType};base64,${E.inlineData.data}`;throw new Error("  .")}catch(g){throw console.error(g),(h=g.message)!=null&&h.includes("SAFETY")?new Error("  :   ."):new Error("     .")}},iw=async(t,e,n,o,r)=>{var E,C,y,v,S,T;const i=ot(t),s={...e};for(const I in s)typeof s[I]=="string"&&(s[I]=await Un(i,s[I]));const u=await Un(i,o||""),c=yr[n].prompt,d=Object.entries(s).map(([I,N])=>N?`${I}: ${N}`:"").filter(Boolean).join(`
- `),f=(E=e.backgroundColor)!=null&&E.includes("Green")?"Solid Green Screen (#00FF00)":"Solid Background",m=u?`
  [USER RESTRICTIONS - ABSOLUTE PRIORITY]
  DO NOT DRAW: ${u}.
  If the user says "No Hairpin", REMOVE ALL HAIRPINS.
  If the user says "No Hat", REMOVE ALL HATS.
  `:"";let h="";const g=(C=s.gender)==null?void 0:C.match(/(\d+)\s*year\s*old/i);if(g){const I=parseInt(g[1]);h=`
     [AGE CONTROL: ${I} YEARS OLD]
     - The character MUST look exactly ${I} years old.
     `,I<12?h+=`- VISUALS: Childlike proportions, round face, soft features, short stature.
`:I<20?h+=`- VISUALS: Youthful teenager, fresh skin, no wrinkles.
`:I>=60?h+=`- VISUALS: Visible WRINKLES, aged skin texture, grey/white hair (unless dyed), wise/tired eyes.
- DO NOT make them look like a young K-pop star with grey hair. They must have OLD SKIN.
`:I>=40&&(h+=`- VISUALS: Mature adult, slight laugh lines, confident bearing. Not a 20-year-old.
`)}let x=`
    ${c}
    CONTEXT: Korea, Joseon Dynasty.
    ${em} 
    ${tm}
    ${m}
    ${h}

    TASK: Generate Character Reference Sheet.
    [DETAILS] - ${d}
    [RULES] Full Body, Feet Visible, ${f}, Neutral Pose.
  `;r&&(x+=`
      [VISUAL REFERENCE - SOURCE MATERIAL]
      The provided image is the **SOURCE ACTOR/DESIGN**.
      
      [CRITICAL INSTRUCTION]
      1. **FACE & IDENTITY**: Copy the facial features, eye shape, and expression from the reference image EXACTLY.
      2. **CLOTHING**: Maintain the style and structure of the clothing from the reference.
      3. **ADAPTATION**: Apply the Joseon Dynasty style ONLY to the texture/materials if necessary, but KEEP THE FORM.
      4. **GOAL**: The result must look like the SAME PERSON wearing the SAME CLOTHES (or Joseon version of them).
      `);try{const I=[];if(r){const _=r.match(/^data:(.+);base64,(.+)$/);_&&I.push({inlineData:{mimeType:_[1],data:_[2]}})}I.push({text:x});const N=await i.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:I},config:{imageConfig:{aspectRatio:"9:16"}}});for(const _ of((S=(v=(y=N.candidates)==null?void 0:y[0])==null?void 0:v.content)==null?void 0:S.parts)||[])if(_.inlineData)return`data:${_.inlineData.mimeType};base64,${_.inlineData.data}`;throw new Error("  .")}catch(I){throw(T=I.message)!=null&&T.includes("SAFETY")?new Error("  ."):new Error("  .")}},sw=async(t,e,n="green")=>{var c,d,f;const o=ot(t),r=e.match(/^data:(.+);base64,(.+)$/);if(!r)throw new Error("Invalid image format");const u=`
    Change the background of this image to a solid flat ${n==="green"?"Green Screen":"Solid White"} (${n==="green"?"#00FF00":"#FFFFFF"}).
    [CRITICAL RULES]
    1. **KEEP FOREGROUND EXACTLY THE SAME**: Do not change the character's face, clothes, or pose. Only change the environment behind them.
    2. The background must be a single solid color for chroma keying.
    3. High quality edges.
  `;try{const m=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:r[1],data:r[2]}},{text:u}]}});for(const h of((f=(d=(c=m.candidates)==null?void 0:c[0])==null?void 0:d.content)==null?void 0:f.parts)||[])if(h.inlineData)return`data:${h.inlineData.mimeType};base64,${h.inlineData.data}`;throw new Error("  .")}catch(m){throw console.error("Bg Edit Failed",m),new Error("    .")}},lw=async(t,e)=>{var i,s,u;const n=ot(t),o=e.match(/^data:(.+);base64,(.+)$/);if(!o)throw new Error("Invalid image format");const r=`
    Remove the person/character from this image completely.
    [TASK]
    1. Identify the character in the foreground.
    2. Erase the character.
    3. Inpaint (Fill) the empty space with the background texture and objects to match the surrounding environment perfectly.
    4. The result should be an empty room/landscape with NO PEOPLE.
    5. Maintain the original lighting, style, and camera angle.
  `;try{const c=await n.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:o[1],data:o[2]}},{text:r}]}});for(const d of((u=(s=(i=c.candidates)==null?void 0:i[0])==null?void 0:s.content)==null?void 0:u.parts)||[])if(d.inlineData)return`data:${d.inlineData.mimeType};base64,${d.inlineData.data}`;throw new Error("  .")}catch(c){throw console.error("Remove Char Failed",c),new Error("    .")}},aw=async(t,e,n)=>{var u,c,d;const o=ot(t),r=await Un(o,n),i=e.match(/^data:(.+);base64,(.+)$/);if(!i)throw new Error("Invalid image format");const s=`
    Modify this image based on the user's instruction.
    USER INSTRUCTION: "${r}"
    
    [RULES]
    1. Apply the change STRICTLY to the requested area.
    2. Keep the rest of the image (Face, Identity, Pose, Background) EXACTLY THE SAME unless the instruction asks to change it.
    3. High quality inpainting. Seamless blending.
    
    Example: 
    - If instruction is "Remove the hairpin", remove only the hairpin and reconstruct the hair.
    - If instruction is "Close eyes", change only the eyes.
  `;try{const f=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:i[1],data:i[2]}},{text:s}]}});for(const m of((d=(c=(u=f.candidates)==null?void 0:u[0])==null?void 0:c.content)==null?void 0:d.parts)||[])if(m.inlineData)return`data:${m.inlineData.mimeType};base64,${m.inlineData.data}`;throw new Error(" .")}catch(f){throw console.error("Magic Edit Failed",f),new Error("   .")}},uw=async(t,e)=>{var r;const n=ot(t),o=`
          .
       ,      "   "  .
     
     [ ]
         " ", " ", "" , AI        .
     
     [ ]
     1. ** / **: (: (99 ), (), ,  )
     2. **   **: (:   -  ,  /   -  )
     3. **  /**: (:    ,    )
     4. **  **: (: , ,      )

     [ ]
     - **  .** (     .)
     -   ( ,  ) "  "   .
     -    .
     
     SCRIPT:
     ${e.substring(0,3e4)}
   `;try{return((r=(await n.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:o}]}})).text)==null?void 0:r.trim())||""}catch(i){throw console.error("Global context analysis failed",i),new Error("  ")}},cw=async(t,e)=>{const n=ot(t),o=`
       1000  **   **.
      ,          **   50** .

    [ ]
    ${e.substring(0,5e4)}

    [  - " "]
    1. ** 50**: 50    . (  )
    2. **  - "   " ()**:
        - **    .**          .
        - **   '  '   .**

        - ** A (  /  )**:      ?  "  OO , ..."
        - ** B ( /)**:       ?  "OO   , ..."
        - ** C ( /)**:        ?  "   ,   "
        - ** D ( )**:       ?  "  ,    "
        - ** E ( )**:     ?  "  ,    "

    [   (  )]
     - "   5    " (     )
     - "    , ..." (    )
     - "   ,     " ( )
     - "    ,    " ( )
     - "  ,    " (/ )
     - "   ,    ..." (/)
     - "   ,    !" (   /)
     - "  ,   ..." ( /)

    3. **  **:
       - /: "...", " "
       - : "  ?", " ?"
       - /: "  ", "  "
    4. ** **:    15 .
    5. ** **:           .

    [ ]
    **JSON   .**
    : ["1", "2", ..., "50"]
  `;try{const i=(await n.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:o}]},config:{responseMimeType:"application/json"}})).text||"[]",s=Ro(i);return Array.isArray(s)?s:typeof s=="object"&&Array.isArray(s.titles)?s.titles:[]}catch(r){throw console.error("Massive hooking title generation failed",r),new Error("  : "+r.message)}},dw=async(t,e,n)=>{var i;const o=ot(t),r=`
        .
     (Shot)  **   (Caption)** 1 .

    [ ]
    - : ${e}
    -  : ${n}

    [ ]
    1. ****: 15   .
    2. ****: , , ,    " ".
    3. ****:    1 . ( )
    
    :
    - " ,   "
    - "   "
    - "     "
  `;try{return((i=(await o.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:r}]}})).text)==null?void 0:i.trim())||""}catch(s){throw console.error("Trailer caption generation failed",s),new Error("  ")}},fw=async(t,e,n,o="auto")=>{const r=ot(t),i=e.map(f=>`[Scene ${f.sequenceNumber}] ${f.title}: ${f.visualPrompt}`).join(`
`),s={auto:"",fast_exciting:`
      [STYLE]: Korean Traditional Folk, Pungmul, Madangnori (Pure Gugak).
      [INSTRUMENTS]: Kkwaenggwari (Metallic, bright, fast attack, sharp), Janggu (Dynamic rhythms, sharp stick sound, drum rolls), Buk (Deep resonance, heartbeat-like thud, strong bass), Jing (Deep sustained resonance, long decay, oscillating), Taepyeongso (Piercing, high-pitched, loud, intense).
      [TEMPO]: Fast & Energetic (Hwimori, Jajinmori), Excited, Bouncy, Rhythmic.
      [VOCAL]: Playful, Energetic, Spoken-style, Narrative, With Chuimsae (Eol-su, Jihwaja).
      [MIXING]: Rich and well-blended sound, warm spatial mixing, energetic percussion.
      [NOTE]: **NO WESTERN INSTRUMENTS**. No Guitar, No Brass. Pure Korean sound.
      [NOTE]: The lyrics MUST be in **Jeolla-do or Chungcheong-do Dialect (Saturi)**. Use spoken word style like Pansori Aniri.
              Examples: ",  !", ",   !", ", !".
    `,sad_sorrowful:`
      [STYLE]: Sad Sagueuk Ballad, Cinematic, Emotional Gugak.
      [INSTRUMENTS]: Haegeum (Grainy, sorrowful, nasal, expressive), Ajaeng (Deep raspy bow sound, mellow, melancholic), Daegeum (Breathy, deep wind sound, emotional), Gayageum (Clear plucked notes, soft, lyrical).
      [TEMPO]: Slow, Flowing, Rubato, Melancholic.
      [VOCAL]: Soft Female Vocals, Breathy, Sorrowful, Tearful, Lyrical.
      [MIXING]: Soft resonance, emotional reverb, intimate, grainy texture.
    `,faint_hazy:`
      [STYLE]: Dreamy Sagueuk, Ambient, Ethereal Gugak.
      [INSTRUMENTS]: Daegeum (Breathy, air sound, spiritual), Sogeum (Clear, high-pitched, bird-like), Saenghwang (Mysterious chords, harmonic), Gayageum (Plucked, soft, floating).
      [TEMPO]: Slow, Floating, Non-rhythmic, Mystical.
      [VOCAL]: Whispering, Echoing, Mysterious, Faint.
      [MIXING]: Ethereal reverb, wide spatial mixing, dreamy atmosphere.
    `,slow_mystery:`
      [STYLE]: Korean Traditional Noir, Suspense, Dark Gugak.
      [INSTRUMENTS]: Geomungo (Percussive string snaps, deep resonance, masculine), Jing (Dark resonance, slow decay, ominous), Buk (Deep thud, low frequency), Ajaeng (Low friction sound, scratching).
      [TEMPO]: Slow tension, Heartbeat rhythm, Heavy, Suspenseful.
      [VOCAL]: Low male vocal, Spoken word, Warning tone, Monologue-style.
      [MIXING]: Dark ambience, deep bass resonance, tension.
    `,medium_story:`
      [STYLE]: Korean Folk Storytelling, Mid-tempo Gugak.
      [INSTRUMENTS]: Buk (Resonant, steady beat), Janggu (Rhythmic accompaniment), Daegeum (Breathy, melodic), Gayageum (Clear, rhythmic plucking).
      [TEMPO]: Medium, Walking pace, Rhythmic (Gutgeori), (90-110 BPM).
      [VOCAL]: Clear narration, Minyo style, Storytelling, Conversational, With Chuimsae.
      [MIXING]: Clear vocal focus, balanced ensemble.
      [NOTE]: Use a storytelling tone (Taryeong) with occasional Chuimsae. Dialect (Saturi) is preferred for humor.
    `,grand_epic:`
      [STYLE]: Epic Sagueuk Orchestra, War Movie OST (Pure Gugak Version).
      [INSTRUMENTS]: Taepyeongso (Piercing, loud, commanding), Large Buk Ensemble (Thunderous, epic, rumbling), Jing (Metallic resonance, crash), Piri (Strong, nasal, piercing), Kkwaenggwari (Accent, sharp).
      [TEMPO]: Dynamic, Marching, Grandiose, Powerful.
      [VOCAL]: Grand Chorus, Chanting, Heroic, Powerful, Theatrical.
      [MIXING]: Massive sound, wide dynamic range, cinematic impact.
      [NOTE]: **NO WESTERN BRASS/STRINGS**. Create epicness with massive Korean drum ensemble and piercing wind instruments.
    `},u={auto:"Analyze the sequence and choose the most fitting Sagueuk (Korean Historical Drama) OST style using ONLY Korean traditional instruments.",mystery:`
      [STYLE]: Korean Traditional Noir, Sagueuk OST, Cinematic.
      [INSTRUMENTS]: Geomungo (Percussive string snaps, deep resonance), Jing (Dark resonance, slow decay), Daegeum (Breathy timber, deep wind sound).
      [TEMPO]: Slow tension, Heartbeat rhythm, Slow-burn.
      [VOCAL]: Whispering, Low male vocal, Minimal Vocals.
      [MIXING]: Dark ambience, deep resonance.
    `,comedy:`
      [STYLE]: Korean Folk Pop, Madangnori, Upbeat OST.
      [INSTRUMENTS]: Kkwaenggwari (Metallic, sharp, fast attack), Janggu (Dynamic rhythms, sharp stick sound), Taepyeongso (Piercing, high-pitched, loud).
      [TEMPO]: Fast Tempo, Bouncy, Rhythmic, Marching.
      [VOCAL]: Playful, Storytelling, Pansori style narration, Spoken-style.
      [MIXING]: Bright, clear, energetic.
    `,destiny:`
      [STYLE]: Epic Sagueuk Orchestra, Cinematic, Grandiose.
      [INSTRUMENTS]: Daegeum (Breathy timber, deep wind sound), Large Buk Ensemble (Thunderous, epic, rumbling), Piri (Strong, nasal, piercing).
      [TEMPO]: Slow build-up to Fast, Dynamic, Marching.
      [VOCAL]: Grand Chorus, Chanting, Heroic Vocals.
      [MIXING]: Wide, cinematic, majestic.
    `,tragedy:`
      [STYLE]: Sad Sagueuk Ballad, Cinematic, OST.
      [INSTRUMENTS]: Haegeum (Grainy texture, sorrowful, expressive), Ajaeng (Deep raspy sound, mellow), Gayageum (Clear plucked notes, soft).
      [TEMPO]: Slow, Flowing, Rubato.
      [VOCAL]: Soft Female Vocals, Emotional, Breathy, Sorrowful.
      [MIXING]: Intimate, emotional reverb.
    `,revenge:`
      [STYLE]: Intense Gugak, Cinematic, Driving.
      [INSTRUMENTS]: Geomungo (Percussive string snaps, aggressive resonance), Buk (Deep thud, driving rhythm), Taepyeongso (Piercing, high-pitched, loud).
      [TEMPO]: Fast Paced, Aggressive, Driving rhythm.
      [VOCAL]: Gritty, Powerful, Spoken-style.
      [MIXING]: Sharp, punchy, intense.
    `,despair:`
      [STYLE]: Minimalist Sagueuk, Cinematic, Ambient.
      [INSTRUMENTS]: Ajaeng (Deep raspy bow sound, sorrowful), Daegeum (Breathy timber, wind sound), Wind Sound.
      [TEMPO]: Very Slow, Dragging, Stillness.
      [VOCAL]: Spoken word, Low humming, Mournful.
      [MIXING]: Empty space, cold atmosphere.
    `};let c="";o!=="auto"&&s[o]?c=s[o]:c=u[n]||u.auto;const d=`
    You are a professional Music Director and Lyricist for a Korean Historical Drama (Sagueuk).
    Create a **40-second Background Music (OST) prompt** for the following 5-shot opening sequence.

    [GOAL]
    The music must **SUPPORT** the video, not overpower it. It should set the perfect atmosphere.
    The lyrics should be poetic and abstract, enhancing the mood without narrating every detail.
    For 'fast_exciting', 'comedy', or 'medium_story' styles:
      - **TONE**: Use **Satire & Humor (Haehak)**.
      - **STYLE**: Use **Spoken Word / Monologue (Pansori Aniri)** style.
      - **DIALECT**: Use **Korean Dialect (Saturi)** like "", "", "~", "~".
      - **CONTENT**: Directly address the situation with wit. NOT poetic descriptions.
      - Example: "     !"

    [SEQUENCE STORY]
    ${i}

    [MUSIC STYLE GUIDE]
    ${c}

    [TASK]
    1. **Title**: A catchy, poetic title for the song (Korean).
    2. **Style of Music (English)**: A single string of English tags for Suno AI.
       - **CRITICAL**: USE the instrument descriptions provided in the STYLE GUIDE. Focus on sound adjectives.
       - **COMBINE**: Genre + Full Instrument Descriptions + Tempo + Vocal Style + Mixing Keywords.
       - **FORMAT**: Comma-separated tags.
       - **MUST INCLUDE**: "Cinematic", "OST", "Background Music", "No Intro", "Immediate Start".
    3. **Style of Music (Korean)**: A single string of Korean tags for Suno AI.
       - **COMBINE ALL ELEMENTS**: Genre + Instruments + Tempo + Vocal Style in Korean.
       - **IMPORTANT**: For "No Intro", use English "No Intro" even in the Korean string as it works better.
       - **FORMAT**: Comma-separated tags (e.g., "   OST, , , ,  , ,  , No Intro").
    4. **Lyrics**: Korean lyrics structured for ~30 seconds (Total 40s).
       - **CRITICAL RULE 0 (NO PRELUDE)**: The song must start singing IMMEDIATELY.
       - **CRITICAL RULE 4 (LENGTH LIMIT)**: **ABSOLUTE MAXIMUM 6 LINES TOTAL**. 
         - The song is very short. Do not write a full song.
         - **Recommended Structure**: 
           [Verse] (2 lines)
           [Chorus] (2-3 lines)
           [Outro] (1 line)
       - **CRITICAL RULE 1 (NO NAMES)**: NEVER use specific character names. Use pronouns or metaphors.
       - **CRITICAL RULE 2 (NO SPOILERS)**: Do NOT describe specific plot events literally. Focus on *Atmosphere* and *Emotion*.
       - **CRITICAL RULE 3 (SUPPORTIVE)**: The lyrics should feel like a part of the soundtrack, not a separate pop song.

    [OUTPUT JSON FORMAT]
    {
      "title": "Song Title",
      "style_en": "Style Tags (English)",
      "style_ko": "Style Tags (Korean)",
      "lyrics": "[Verse]
Line 1
Line 2...

[Chorus]
Line 3..."
    }
  `;try{const m=(await r.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:d}]},config:{responseMimeType:"application/json"}})).text||"{}";return Ro(m)}catch(f){throw console.error("Suno lyrics generation failed",f),new Error("  ")}},Re={gender:[{label:"",value:"Male"},{label:"",value:"Female"}],class:[{label:" ()",value:"Seonbi (Joseon Scholar), noble, silk robes"},{label:"/",value:"Bandit, rough appearance, wild, animal skins"},{label:"/",value:"King of Joseon, Red Royal Robe (Gonryongpo)"},{label:"/",value:"Queen of Joseon, Royal ceremonial dress"},{label:"/",value:"General, Warrior, Military uniform (Cheollik)"},{label:"/",value:"Merchant, Peddler, carrying bundle on back"},{label:"",value:"Buddhist Monk, grey robes"},{label:"/",value:"Peasant, Commoner, White hemp clothes"},{label:"",value:"Gisaeng, colorful Hanbok, artistic"},{label:"",value:"Shaman (Mudang), colorful ritual clothing"},{label:"/",value:"Magistrate (Sato), Official uniform"},{label:"",value:"Grim Reaper (Jeoseung Saja), Black Hanbok, Black Gat"},{label:"/",value:"Mother figure, modest Hanbok"},{label:"/",value:"Father figure, traditional Hanbok"}],race:[{label:"",value:"Human"},{label:"",value:"Dokkaebi (Korean Goblin), holding club"},{label:"",value:"Gumiho (Nine-tailed Fox)"},{label:"",value:"Virgin Ghost (Cheonyeo Gwishin), white Sobok, messy hair"},{label:" ()",value:"Tiger Spirit, anthropomorphic"},{label:" (/)",value:"Dragon King (Turtle spirit)"}],hair:[{label:" ( )",value:"Sangtu (Topknot) with Manggeon headband"},{label:" ()",value:"Daenggi-meori (Long Braid)"},{label:"  ()",value:"Half-tied hair with Manggeon ( )"},{label:" (/)",value:"Half-tied hair (No Manggeon), wild style"},{label:"  (/)",value:"Short Bob Hair (Danbal), rough cut"},{label:" (/)",value:"Shaggy Dog Hair (Deobeok-meori), messy and unkempt"},{label:"   ()",value:"Binyeo Bun (Low bun with silver hairpin)"},{label:"  ()",value:"Grey hair Sangtu (Topknot)"},{label:"   ()",value:"Grey hair Binyeo Bun"},{label:"  ()",value:"Gisaeng Gache (Large ornate wig)"},{label:"/ ",value:"Court Lady Gache (Rounded wig)"},{label:" ()",value:"Daesu-meori (Royal ceremonial wig with gold)"},{label:"  (/)",value:"Loose long black hair"},{label:" ()",value:"Wild messy hair"}],headwear:[{label:" ",value:"None"},{label:" (  )",value:"Gat (Black translucent horsehair hat)"},{label:" ()",value:"Jeongjagwan (Indoor scholar hat)"},{label:" ()",value:"Paeraengi (Bamboo hat)"},{label:" ()",value:"Jeonrip (Military hat with peacock feather)"},{label:" ()",value:"Ikseongwan (King black cap)"},{label:" ()",value:"Samo (Official black cap with wings)"},{label:" ( )",value:"Jokduri (Wedding headpiece)"},{label:" ()",value:"Jeonmo (Wide hat with butterfly decorations)"},{label:" ()",value:"Satgat (Conical straw hat)"},{label:" ()",value:"Nambawi (Winter cap)"}],outer:[{label:"  ()",value:"None"},{label:" ()",value:"Dopo (Scholar Robe with wide sleeves)"},{label:"",value:"Durumagi (Overcoat)"},{label:" ()",value:"Cheollik (Military Robe with pleated skirt)"},{label:"/",value:"Kwaeja (Long Vest)"},{label:" ( )",value:"Jangot (Coat worn over head)"},{label:"/ ()",value:"Hwarot/Wonsam (Ceremonial Robe)"},{label:" ()",value:"Sobok (White mourning clothes)"}],top:[{label:" ",value:"Jeogori (Traditional Jacket, curved sleeves)"},{label:" ",value:"Samhwejang Jeogori (Colorful cuffs and collar)"},{label:" ",value:"Saekdong Jeogori (Striped sleeves)"},{label:" ( )",value:"Jeoksam (Hemp shirt)"}],bottom:[{label:"  ()",value:"Baji (Wide trousers tied at ankles)"},{label:"  ()",value:"Chima (Full volume Ankle-length skirt, showing shoes)"},{label:" ()",value:"Seuran-chima (Ankle-length Skirt with gold leaf pattern, showing shoes)"},{label:" ( )",value:"Short Chima (Working class)"}],shoes:[{label:" ( )",value:"Jipsin (Straw shoes, covering toes like loafers)"},{label:" ()",value:"Taasahye (Leather shoes with patterns)"},{label:" ( )",value:"Mokhwa (Black velvet boots)"},{label:" ()",value:"Kkot-sin (Flower embroidered shoes)"},{label:"",value:"Barefoot"}],accessories:[{label:"",value:"None"},{label:" ()",value:"Gombangdae (Long pipe)"},{label:"",value:"Foldable Fan"},{label:" ()",value:"Hwando (Korean Sword)"},{label:" ()",value:"Cloth Bundle/Backpack (Bojim)"},{label:"",value:"Bokjumeoni (Lucky pouch)"},{label:"",value:"Norigae (Pendant)"},{label:"",value:"Eunjangdo (Silver knife)"},{label:"",value:"Wooden Walking Stick"}],bg:[{label:"  (Green)",value:"Green Screen"},{label:"  (Blue)",value:"Blue Screen"},{label:" ",value:"Solid White"},{label:" ",value:"Solid Black"}]},pw=({onClose:t,initialName:e="",initialDesign:n,initialAge:o="30"})=>{const{apiKey:r,selectedStyle:i,setReferenceImages:s,setCharacters:u,showToast:c}=Vt(),[d,f]=V.useState(e),[m,h]=V.useState(o),[g,x]=V.useState(""),[E,C]=V.useState({gender:(n==null?void 0:n.gender)||Re.gender[0].value,class:(n==null?void 0:n.class)||Re.class[0].value,race:(n==null?void 0:n.race)||Re.race[0].value,hair:(n==null?void 0:n.hair)||Re.hair[0].value,headwear:(n==null?void 0:n.headwear)||Re.headwear[0].value,outer:(n==null?void 0:n.outer)||Re.outer[0].value,top:(n==null?void 0:n.top)||Re.top[0].value,bottom:(n==null?void 0:n.bottom)||Re.bottom[0].value,shoes:(n==null?void 0:n.shoes)||Re.shoes[0].value,accessories:(n==null?void 0:n.accessories)||Re.accessories[0].value,clothingColor:(n==null?void 0:n.clothingColor)||"",backgroundColor:Re.bg[0].value,extraDetails:(n==null?void 0:n.extraDetails)||""}),[y,v]=V.useState(!1),[S,T]=V.useState(null),[I,N]=V.useState(null),[_,k]=V.useState([]);V.useEffect(()=>{},[E.gender,m]);const b=(W,oe)=>{C(re=>({...re,[W]:oe}))},P=W=>{var ae;const oe=(ae=W.target.files)==null?void 0:ae[0];if(!oe)return;if(oe.size>5*1024*1024){c("  5MB  .","warning");return}const re=new FileReader;re.onloadend=()=>{N(re.result)},re.readAsDataURL(oe)},F=async()=>{if(!d.trim())return c("  ","warning");if(!m.trim())return c(" ","warning");if(!r)return c("API  ","warning");v(!0);try{const W={...E,gender:`${m} year old ${E.gender}`},oe=await iw(r,W,i,g,I||void 0);T(oe),k(re=>[oe,...re]),c(" .   .","success")}catch(W){c(W.message,"error")}finally{v(!1)}},Q=()=>{if(!S||!d)return;const W=`${m} ${E.class}. ${E.hair}, ${E.headwear}. ${E.facialFeatures?`(: ${E.facialFeatures}) `:""}${E.extraDetails}`;s(oe=>[...oe.filter(ae=>ae.name!==d),{id:`ref-${Date.now()}`,name:d,imageUrl:S,description:W,design:{...E,gender:`${m} year old ${E.gender}`}}]),u(oe=>oe.some(re=>re.name===d)?oe:[...oe,{id:`char-builder-${Date.now()}`,name:d,description:W,visualGuide:"AI    ",age:m,gender:E.gender,hasDialogue:!0,chromaKeyColor:"green",actions:[]}]),c(`'${d}'  . (   )`,"success"),t()},K=(W,oe,re)=>p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold",children:W}),p.jsx("select",{value:E[oe],onChange:ae=>b(oe,ae.target.value),className:"bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-indigo-500",children:re.map((ae,G)=>p.jsx("option",{value:ae.value,children:ae.label},G))})]});return p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in overflow-hidden",children:p.jsxs("div",{className:"bg-slate-800 w-full max-w-6xl h-[90vh] rounded-2xl border border-slate-600 shadow-2xl flex flex-col md:flex-row overflow-hidden",children:[p.jsxs("div",{className:"w-full md:w-1/2 p-6 overflow-y-auto border-r border-slate-700 custom-scrollbar bg-slate-800 z-10",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-user-edit text-indigo-400"}),"   "]}),p.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:p.jsx("i",{className:"fas fa-times text-xl"})})]}),n&&p.jsxs("div",{className:"mb-4 bg-indigo-900/40 border border-indigo-500/50 p-3 rounded-lg flex items-center gap-3",children:[p.jsx("i",{className:"fas fa-robot text-indigo-300 text-xl"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-indigo-200 text-sm font-bold",children:"AI   "}),p.jsx("p",{className:"text-xs text-indigo-400",children:"   , ,   ."})]})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-bold text-slate-300 block mb-2",children:"  ( )"}),p.jsx("input",{type:"text",value:d,onChange:W=>f(W.target.value),placeholder:": , ",className:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white focus:ring-indigo-500 font-bold text-lg"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"col-span-2 flex gap-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:"1. "}),p.jsx("select",{value:E.gender,onChange:W=>b("gender",W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white",children:Re.gender.map((W,oe)=>p.jsx("option",{value:W.value,children:W.label},oe))})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:" ( )"}),p.jsx("input",{type:"number",value:m,onChange:W=>h(W.target.value),placeholder:": 60",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white"})]})]}),K("2. /","class",Re.class),K("3. ","race",Re.race),K("4.  ","hair",Re.hair),K("5. /","headwear",Re.headwear),K("6. ","outer",Re.outer),K("7. ","top",Re.top),K("8. ","bottom",Re.bottom),K("9. ","shoes",Re.shoes),K("10. /","accessories",Re.accessories)]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold",children:"11.   ( )"}),p.jsx("input",{type:"text",value:E.clothingColor,onChange:W=>b("clothingColor",W.target.value),placeholder:":    ,  ",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold",children:"12.   (:  )"}),p.jsx("input",{type:"text",value:E.facialFeatures||"",onChange:W=>b("facialFeatures",W.target.value),placeholder:":  , , ,  , ...",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-yellow-500"})]}),p.jsxs("div",{className:"space-y-2 bg-indigo-900/20 p-3 rounded border border-indigo-500/30",children:[p.jsxs("label",{className:"text-xs text-indigo-300 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-plus-circle"}),"   /  ()"]}),p.jsx("textarea",{value:E.extraDetails,onChange:W=>b("extraDetails",W.target.value),placeholder:":    ,  ,  ,  ...",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white h-16 focus:ring-indigo-500 resize-none"})]}),p.jsxs("div",{className:"space-y-2 bg-red-900/10 p-3 rounded border border-red-500/30",children:[p.jsxs("label",{className:"text-xs text-red-400 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-ban"}),"  /  (  )"]}),p.jsx("input",{type:"text",value:g,onChange:W=>x(W.target.value),placeholder:": , ,  , , , ",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-red-500 placeholder-slate-500"}),p.jsxs("p",{className:"text-[10px] text-slate-400",children:["    AI ",p.jsx("strong",{children:'"   !"'}),"  ."]})]}),p.jsxs("div",{className:"space-y-2 bg-indigo-900/20 p-3 rounded border border-indigo-500/30",children:[p.jsxs("label",{className:"text-xs text-indigo-300 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-image"}),"    (/ )"]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("label",{className:"cursor-pointer bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded border border-slate-600 flex items-center gap-2 text-sm",children:[p.jsx("i",{className:"fas fa-upload"}),"  ",p.jsx("input",{type:"file",accept:"image/*",onChange:P,className:"hidden"})]}),I&&p.jsxs("div",{className:"relative h-16 w-16 bg-black rounded border border-slate-600 overflow-hidden group",children:[p.jsx("img",{src:I,alt:"Reference",className:"h-full w-full object-cover"}),p.jsx("button",{onClick:()=>N(null),className:"absolute inset-0 bg-black/50 hidden group-hover:flex items-center justify-center text-red-400",children:p.jsx("i",{className:"fas fa-trash"})})]})]}),p.jsx("p",{className:"text-[10px] text-slate-400",children:" , ,     AI   ."})]}),K("13.  ()","backgroundColor",Re.bg),p.jsxs("button",{onClick:F,disabled:y,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 mt-4",children:[y?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-paint-brush"}),"  "]})]})]}),p.jsxs("div",{className:"w-full md:w-1/2 bg-black flex flex-col relative h-full",children:[p.jsxs("div",{className:"p-4 flex-grow flex flex-col items-center justify-center overflow-hidden",children:[p.jsx("h3",{className:"text-slate-500 font-bold mb-4 absolute top-6 left-6",children:""}),p.jsxs("div",{className:"w-full max-w-sm aspect-[9/16] bg-slate-900 rounded-lg overflow-hidden border border-slate-700 flex items-center justify-center mb-4 relative shadow-2xl",children:[S?p.jsx("img",{src:S,alt:"Preview",className:"w-full h-full object-contain"}):p.jsxs("div",{className:"text-center text-slate-600",children:[p.jsx("i",{className:"fas fa-user-circle text-6xl mb-4 opacity-50"}),p.jsxs("p",{children:["  ",p.jsx("br",{}),"  ."]})]}),y&&p.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center backdrop-blur-sm",children:p.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-indigo-500"})})]}),S&&p.jsxs("div",{className:"flex gap-4 w-full max-w-sm",children:[p.jsxs("button",{onClick:Q,className:"flex-1 bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold shadow-lg transform hover:scale-105 transition-all",children:[p.jsx("i",{className:"fas fa-check-circle mr-2"}),"    ()"]}),p.jsx("a",{href:S,download:`${d}_reference.png`,className:"bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-lg border border-slate-600",children:p.jsx("i",{className:"fas fa-download"})})]})]}),p.jsxs("div",{className:"bg-slate-900 border-t border-slate-700 p-4 h-48 flex-shrink-0 flex flex-col",children:[p.jsxs("p",{className:"text-xs text-slate-400 mb-2 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-history text-indigo-400"}),"     (",_.length,")",p.jsx("span",{className:"text-[10px] font-normal text-slate-500 ml-auto",children:" "})]}),_.length===0?p.jsx("div",{className:"flex-grow flex items-center justify-center text-slate-600 text-xs border border-dashed border-slate-700 rounded-lg",children:"   ."}):p.jsx("div",{className:"flex gap-3 overflow-x-auto overflow-y-hidden pb-2 custom-scrollbar px-1 h-full items-center",children:_.map((W,oe)=>p.jsx("div",{onClick:()=>T(W),className:`flex-shrink-0 w-20 h-28 rounded-lg overflow-hidden cursor-pointer border-2 transition-all hover:scale-105 shadow-lg ${S===W?"border-indigo-500 ring-2 ring-indigo-500/50 scale-105":"border-slate-700 hover:border-slate-500 opacity-70 hover:opacity-100"}`,children:p.jsx("img",{src:W,alt:`History ${oe}`,className:"w-full h-full object-cover"})},oe))})]})]})]})})},Kr={types:[{label:" ",value:"Object"},{label:"/ ",value:"Evidence"},{label:" (/ )",value:"Weapon"},{label:" (/ )",value:"Accessory"},{label:"/ ",value:"Furniture"}],materials:[{label:" (Wood)",value:"Wooden"},{label:"/ (Metal)",value:"Metal, Iron, Steel"},{label:" (Gold)",value:"Gold"},{label:" (Silver)",value:"Silver"},{label:" (Jade)",value:"Jade"},{label:"/ (Fabric)",value:"Fabric, Silk, Cotton"},{label:" (Paper)",value:"Paper"},{label:" (Ceramic)",value:"Ceramic, Porcelain"},{label:" (Stone)",value:"Stone"}],colors:[{label:"/",value:"Natural"},{label:" (Red)",value:"Red"},{label:" (Blue)",value:"Blue"},{label:" (Black)",value:"Black"},{label:" (White)",value:"White"},{label:" (Gold)",value:"Gold"},{label:" (Silver)",value:"Silver"},{label:" (Green)",value:"Green"}]},hw=({onClose:t,initialName:e=""})=>{const{apiKey:n,selectedStyle:o,setProps:r,showToast:i}=Vt(),[s,u]=V.useState(e),[c,d]=V.useState(Kr.types[0].value),[f,m]=V.useState(""),[h,g]=V.useState(""),[x,E]=V.useState(""),[C,y]=V.useState(!1),[v,S]=V.useState(null),[T,I]=V.useState(null),[N,_]=V.useState([]),k=F=>{var W;const Q=(W=F.target.files)==null?void 0:W[0];if(!Q)return;if(Q.size>5*1024*1024){i("  5MB  .","warning");return}const K=new FileReader;K.onloadend=()=>{I(K.result)},K.readAsDataURL(Q)},b=async()=>{if(!s.trim())return i("  ","warning");if(!x.trim()&&!T)return i("     .","warning");if(!n)return i("API  ","warning");y(!0);try{let F=`Type: ${c}.
`;h&&(F+=`Color: ${h}.
`),f&&(F+=`Material: ${f}.
`),F+=`Details: ${x}`;const Q=await rw(n,s,F,o,T||void 0);S(Q),_(K=>[Q,...K]),i(" .   .","success")}catch(F){i(F.message,"error")}finally{y(!1)}},P=()=>{if(!v||!s)return;const F=`${h} ${f} ${s}. ${x}`;r(Q=>[...Q,{id:`prop-builder-${Date.now()}`,name:s,imageUrl:v,description:F,type:"object"}]),i(`'${s}'  !`,"success"),t()};return p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in overflow-hidden",children:p.jsxs("div",{className:"bg-slate-800 w-full max-w-6xl h-[90vh] rounded-2xl border border-slate-600 shadow-2xl flex flex-col md:flex-row overflow-hidden",children:[p.jsxs("div",{className:"w-full md:w-1/2 p-6 overflow-y-auto border-r border-slate-700 custom-scrollbar bg-slate-800 z-10",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-cube text-amber-500"}),"   "]}),p.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:p.jsx("i",{className:"fas fa-times text-xl"})})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-bold text-slate-300 block mb-2",children:" "}),p.jsx("input",{type:"text",value:s,onChange:F=>u(F.target.value),placeholder:": , , ",className:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white focus:ring-amber-500 font-bold text-lg"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:"1.  "}),p.jsx("select",{value:c,onChange:F=>d(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-amber-500",children:Kr.types.map((F,Q)=>p.jsx("option",{value:F.value,children:F.label},Q))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:"2.  (Color)"}),p.jsx("input",{type:"text",value:h,onChange:F=>g(F.target.value),placeholder:": , ",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-amber-500",list:"color-options"}),p.jsx("datalist",{id:"color-options",children:Kr.colors.map((F,Q)=>p.jsx("option",{value:F.label},Q))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:"3.  (Material)"}),p.jsx("input",{type:"text",value:f,onChange:F=>m(F.target.value),placeholder:": , , ",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-amber-500",list:"material-options"}),p.jsx("datalist",{id:"material-options",children:Kr.materials.map((F,Q)=>p.jsx("option",{value:F.label},Q))})]})]}),p.jsxs("div",{className:"space-y-2 bg-slate-900/50 p-3 rounded border border-slate-700",children:[p.jsxs("label",{className:"text-xs text-amber-400 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-pen"}),"    (, )"]}),p.jsx("textarea",{value:x,onChange:F=>E(F.target.value),placeholder:":     ,     .   .",className:"w-full bg-slate-800 border border-slate-600 rounded p-2 text-sm text-white h-24 focus:ring-amber-500 resize-none"})]}),p.jsxs("div",{className:"space-y-2 bg-amber-900/20 p-3 rounded border border-amber-500/30",children:[p.jsxs("label",{className:"text-xs text-amber-300 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-image"}),"    (/ )"]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("label",{className:"cursor-pointer bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded border border-slate-600 flex items-center gap-2 text-sm transition-colors",children:[p.jsx("i",{className:"fas fa-upload"}),"  ",p.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"hidden"})]}),T&&p.jsxs("div",{className:"relative h-16 w-16 bg-black rounded border border-slate-600 overflow-hidden group",children:[p.jsx("img",{src:T,alt:"Reference",className:"h-full w-full object-cover"}),p.jsx("button",{onClick:()=>I(null),className:"absolute inset-0 bg-black/50 hidden group-hover:flex items-center justify-center text-red-400",children:p.jsx("i",{className:"fas fa-trash"})})]})]}),p.jsx("p",{className:"text-[10px] text-slate-400",children:"   AI       ."})]}),p.jsxs("button",{onClick:b,disabled:C,className:"w-full bg-amber-600 hover:bg-amber-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 mt-4 transition-all hover:shadow-amber-500/20",children:[C?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-paint-brush"})," "]})]})]}),p.jsxs("div",{className:"w-full md:w-1/2 bg-black/50 p-6 flex flex-col relative",children:[p.jsx("div",{className:"flex-grow flex items-center justify-center relative bg-[url('/grid.png')]",children:v?p.jsxs("div",{className:"relative w-full max-w-md aspect-square shadow-2xl rounded-lg overflow-hidden border-2 border-slate-700 group",children:[p.jsx("img",{src:v,alt:"Preview",className:"w-full h-full object-contain bg-[#202020]"}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 p-4 transform translate-y-full group-hover:translate-y-0 transition-transform",children:p.jsxs("button",{onClick:P,className:"w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold shadow-lg",children:[p.jsx("i",{className:"fas fa-check mr-2"}),"   "]})})]}):p.jsxs("div",{className:"text-center text-slate-500",children:[p.jsx("i",{className:"fas fa-cube text-6xl mb-4 opacity-20"}),p.jsx("p",{className:"text-lg",children:"  '' ."})]})}),N.length>0&&p.jsx("div",{className:"h-24 border-t border-slate-700 bg-slate-900/80 p-2 flex gap-2 overflow-x-auto custom-scrollbar mt-4",children:N.map((F,Q)=>p.jsx("div",{onClick:()=>S(F),className:`aspect-square h-full rounded cursor-pointer border-2 overflow-hidden flex-shrink-0 ${v===F?"border-amber-500":"border-transparent opacity-50 hover:opacity-100"}`,children:p.jsx("img",{src:F,alt:`History ${Q}`,className:"w-full h-full object-cover"})},Q))})]})]})})},mw=({id:t,style:e,selected:n,onSelect:o})=>p.jsxs("div",{onClick:()=>o(t),className:`cursor-pointer rounded-xl p-4 border-2 transition-all h-full flex flex-col gap-2 relative overflow-hidden ${n?"border-indigo-500 bg-indigo-900/30 ring-2 ring-indigo-500/50":"border-slate-700 bg-slate-800 hover:border-slate-500"}`,children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:`text-lg font-bold ${n?"text-indigo-300":"text-slate-200"}`,children:e.name}),n&&p.jsx("i",{className:"fas fa-check-circle text-indigo-400 text-xl"})]}),p.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:e.desc})]}),gw=({selected:t,onChange:e})=>{const n=[{id:"16:9",label:" (16:9)",icon:"fa-tv"},{id:"9:16",label:" (9:16)",icon:"fa-mobile-alt"},{id:"1:1",label:" (1:1)",icon:"fa-square"}];return p.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(o=>p.jsxs("button",{onClick:()=>e(o.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium flex items-center gap-2 border transition-all ${t===o.id?"bg-indigo-600 text-white border-indigo-500 shadow-md":"bg-slate-800 text-slate-400 border-slate-700 hover:bg-slate-700"}`,children:[p.jsx("i",{className:`fas ${o.icon}`}),o.label]},o.id))})},vw=({onAnalyze:t,isAnalyzing:e})=>{const{apiKey:n,script:o,scriptSegments:r,addScriptSegment:i,removeScriptSegment:s,clearScriptSegments:u,selectedStyle:c,setSelectedStyle:d,globalAspectRatio:f,setGlobalAspectRatio:m,isContinuityMode:h,setIsContinuityMode:g,referenceImages:x,setReferenceImages:E,characters:C,setCharacters:y,props:v,setProps:S,showToast:T,openModal:I}=Vt(),[N,_]=V.useState(!1),[k,b]=V.useState(!1),[P,F]=V.useState(null),[Q,K]=V.useState(""),[W,oe]=V.useState(""),re=V.useRef(null),ae=V.useRef(null),G=(D,J,j)=>{D.preventDefault(),D.stopPropagation(),I({type:"confirm",title:"  ",message:`'${j}'    ?
(   .)`,onConfirm:()=>{E(he=>he.filter(be=>be.id!==J)),T(".","success")}})},Y=()=>{re.current&&(re.current.value="",re.current.click())},X=D=>{var he;const J=(he=D.target.files)==null?void 0:he[0];if(!J)return;if(J.size>5*1024*1024){T("   5MB  .","warning");return}const j=new FileReader;j.onload=async be=>{var De;const It=(De=be.target)==null?void 0:De.result;It&&I({type:"prompt",title:"  ",message:"    (: )",confirmText:": AI ",onConfirm:async Ie=>{if(Ie&&Ie.trim()){const Le=Ie.trim();let ut="Imported external character. (Auto-analysis failed)";if(n){T("AI    ...","success");try{ut=await ZC(n,It)}catch(In){console.error(In),T(" .  .","error"),ut=" .       ."}}I({type:"textarea",title:`${Le} /  ()`,message:`AI  . 
      ** **. 
 , ,     !`,defaultValue:ut,confirmText:"  (  )",onConfirm:In=>{const wr=In||ut;E(Nn=>[...Nn,{id:`ref-upload-${Date.now()}`,name:Le,imageUrl:It,description:wr}]),y(Nn=>Nn.some(as=>as.name===Le)?Nn:[...Nn,{id:`char-manual-${Date.now()}`,name:Le,description:wr,visualGuide:"   ( )",age:"",gender:"",hasDialogue:!0,chromaKeyColor:"green",actions:[]}]),T(`'${Le}'  ! (   )`,"success")}})}}})},j.onerror=()=>{T("   .","error")},j.readAsDataURL(J)},ue=()=>{ae.current&&(ae.current.value="",ae.current.click())},ee=D=>{var he;const J=(he=D.target.files)==null?void 0:he[0];if(!J)return;if(J.size>5*1024*1024){T("   5MB  .","warning");return}const j=new FileReader;j.onload=async be=>{var De;const It=(De=be.target)==null?void 0:De.result;It&&I({type:"prompt",title:"/  ",message:"    (: ,   )",confirmText:"",onConfirm:Ie=>{if(Ie&&Ie.trim()){const Le=Ie.trim();I({type:"textarea",title:`${Le}  `,message:`     .
(AI      .)`,defaultValue:"  , ,  ...",confirmText:"",onConfirm:ut=>{S(In=>[...In,{id:`prop-upload-${Date.now()}`,name:Le,imageUrl:It,description:ut||" ",type:"object"}]),T(`'${Le}'  !`,"success")}})}}})},j.readAsDataURL(J)},ve=()=>{if(!n){T("API  .","warning");return}b(!0)},ie=(D,J,j)=>{D.preventDefault(),D.stopPropagation(),I({type:"confirm",title:" ",message:`'${j}'  ?`,onConfirm:()=>{S(he=>he.filter(be=>be.id!==J)),T(".","success")}})},A=()=>{I({type:"confirm",title:"  ",message:"  () ?",confirmText:"",onConfirm:()=>u()})},$=()=>{if(!Q.trim()){T(" .","warning");return}const D=W.trim()||`Chapter ${r.length+1}`;i(D,Q),K(""),oe(""),T(`${D} !`,"success")};return p.jsxs("div",{className:"space-y-10 animate-fade-in",children:[p.jsxs("section",{className:"space-y-4",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"1"}),"  ( )"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"file",ref:re,onChange:X,accept:"image/*",className:"hidden"}),p.jsxs("button",{onClick:Y,className:"bg-slate-700 hover:bg-slate-600 text-slate-200 px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 border border-slate-600",children:[p.jsx("i",{className:"fas fa-upload"}),"   "]}),p.jsxs("button",{onClick:()=>_(!0),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 shadow-lg",children:[p.jsx("i",{className:"fas fa-plus"}),"  "]})]})]}),x.length===0?p.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 border-dashed rounded-xl p-6 text-center text-slate-500",children:[p.jsx("i",{className:"fas fa-users text-4xl mb-3 opacity-30"}),p.jsx("p",{children:"   ."})]}):p.jsx("div",{className:"flex gap-4 overflow-x-auto pt-2 pb-4 custom-scrollbar px-1",children:x.map(D=>p.jsxs("div",{className:"min-w-[150px] w-40 bg-slate-800 rounded-lg border border-slate-700 p-3 relative group hover:border-indigo-500 transition-colors",children:[p.jsxs("div",{className:"aspect-[9/16] bg-black rounded overflow-hidden mb-2 relative cursor-zoom-in",onClick:()=>F({url:D.imageUrl,title:D.name}),children:[p.jsx("img",{src:D.imageUrl,alt:D.name,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"}),p.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:p.jsx("i",{className:"fas fa-search-plus text-white opacity-0 group-hover:opacity-100 text-2xl drop-shadow-lg transform scale-50 group-hover:scale-100 transition-all"})})]}),p.jsx("p",{className:"font-bold text-center text-white text-base truncate",children:D.name}),p.jsx("button",{onClick:J=>G(J,D.id,D.name),className:"absolute top-2 right-2 bg-red-600 hover:bg-red-500 text-white w-7 h-7 rounded-full flex items-center justify-center shadow-lg z-20 transition-transform active:scale-95",title:"",children:p.jsx("i",{className:"fas fa-times text-sm"})})]},D.id))})]}),p.jsxs("section",{className:"space-y-4",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("span",{className:"w-8 h-8 rounded-full bg-amber-600 flex items-center justify-center text-sm",children:"1.5"}),"  ( /)"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"file",ref:ae,onChange:ee,accept:"image/*",className:"hidden"}),p.jsxs("button",{onClick:ue,className:"bg-slate-700 hover:bg-slate-600 text-slate-200 px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 border border-slate-600",children:[p.jsx("i",{className:"fas fa-upload"}),"   "]}),p.jsxs("button",{onClick:ve,className:"bg-amber-600 hover:bg-amber-500 text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 shadow-lg",children:[p.jsx("i",{className:"fas fa-cube"}),"  "]})]})]}),v.length===0?p.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 border-dashed rounded-xl p-6 text-center text-slate-500",children:[p.jsx("i",{className:"fas fa-box-open text-4xl mb-3 opacity-30"}),p.jsx("p",{children:"   . (: , ,   )"})]}):p.jsx("div",{className:"flex gap-4 overflow-x-auto pt-2 pb-4 custom-scrollbar px-1",children:v.map(D=>p.jsxs("div",{className:"min-w-[100px] w-28 bg-slate-800 rounded-lg border border-slate-700 p-2 relative group hover:border-amber-500 transition-colors",children:[p.jsxs("div",{className:"aspect-square bg-black rounded overflow-hidden mb-2 relative cursor-zoom-in",onClick:()=>F({url:D.imageUrl,title:D.name}),children:[p.jsx("img",{src:D.imageUrl,alt:D.name,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"}),p.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:p.jsx("i",{className:"fas fa-search-plus text-white opacity-0 group-hover:opacity-100 text-lg drop-shadow-lg transform scale-50 group-hover:scale-100 transition-all"})})]}),p.jsx("p",{className:"font-bold text-center text-white text-xs truncate",children:D.name}),p.jsx("button",{onClick:J=>ie(J,D.id,D.name),className:"absolute top-1 right-1 bg-red-600 hover:bg-red-500 text-white w-6 h-6 rounded-full flex items-center justify-center shadow-lg z-20 transition-transform active:scale-95",title:"",children:p.jsx("i",{className:"fas fa-times text-xs"})})]},D.id))})]}),p.jsxs("section",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"2"}),"  ( )"]}),p.jsxs("div",{className:"text-slate-400 text-sm",children:["  : ",p.jsx("span",{className:"text-indigo-400 font-bold",children:o.length}),"  / ",r.length," "]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 p-5 rounded-xl border border-slate-700 shadow-lg flex flex-col h-full",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold block mb-1",children:"  ()"}),p.jsx("input",{type:"text",value:W,onChange:D=>oe(D.target.value),placeholder:`Chapter ${r.length+1}`,className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-white focus:ring-indigo-500 text-sm"})]}),p.jsx("label",{className:"text-xs text-slate-400 font-bold block mb-1",children:" "}),p.jsx("textarea",{value:Q,onChange:D=>K(D.target.value),placeholder:"    . (:    ...)",className:"w-full flex-grow min-h-[200px] bg-slate-900 text-base p-4 rounded-lg border border-slate-700 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-slate-100 placeholder-slate-500 resize-none mb-4"}),p.jsxs("button",{onClick:$,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-lg font-bold shadow-lg flex items-center justify-center gap-2 transition-all",children:[p.jsx("i",{className:"fas fa-plus-circle"}),"  "]})]}),p.jsxs("div",{className:"bg-slate-900/50 p-5 rounded-xl border border-slate-700 h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("h3",{className:"text-lg font-bold text-slate-200",children:[p.jsx("i",{className:"fas fa-list-ol mr-2 text-indigo-400"}),"  "]}),r.length>0&&p.jsx("button",{onClick:A,className:"text-xs text-red-400 hover:text-red-300 underline",children:" "})]}),p.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-3 pr-2",style:{maxHeight:"400px"},children:r.length===0?p.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600 opacity-50",children:[p.jsx("i",{className:"fas fa-book-open text-5xl mb-3"}),p.jsxs("p",{children:["  ",p.jsx("br",{}),"'' ."]})]}):r.map((D,J)=>p.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-600 relative group hover:border-indigo-500 transition-colors",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-bold text-indigo-300 bg-indigo-900/50 px-2 py-0.5 rounded uppercase",children:D.title||`Chapter ${J+1}`}),p.jsx("button",{onClick:()=>s(D.id),className:"text-slate-500 hover:text-red-500 p-1",children:p.jsx("i",{className:"fas fa-trash-alt"})})]}),p.jsx("p",{className:"text-sm text-slate-300 line-clamp-3",children:D.content})]},D.id))})]})]})]}),p.jsxs("section",{className:"space-y-4",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"3"}),""]}),p.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 mb-4",children:[p.jsxs("div",{className:"mb-2 font-bold text-slate-300 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-crop-alt"}),"  "]}),p.jsx(gw,{selected:f,onChange:m})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.keys(yr).map(D=>p.jsx(mw,{id:D,style:yr[D],selected:c===D,onSelect:d},D))})]}),p.jsxs("div",{className:"flex flex-col items-center gap-4 pt-8",children:[p.jsxs("label",{className:"flex items-center gap-3 bg-slate-800 px-6 py-3 rounded-full border border-slate-600 cursor-pointer hover:bg-slate-750 select-none",children:[p.jsx("input",{type:"checkbox",checked:h,onChange:D=>g(D.target.checked),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500 border-gray-300"}),p.jsx("span",{className:"text-lg font-bold text-indigo-300",children:"  "}),p.jsx("span",{className:"text-xs text-slate-400 border-l border-slate-600 pl-3",children:"      ."})]}),r.length===0&&p.jsx("p",{className:"text-red-400 text-sm font-bold animate-pulse",children:"   !"}),p.jsxs("button",{onClick:t,disabled:e||r.length===0,className:"bg-indigo-600 hover:bg-indigo-500 text-white text-xl font-bold px-12 py-5 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-3 w-full max-w-lg justify-center",children:[e?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-magic"}),e?" ...":"   /  "]})]}),P&&p.jsx("div",{className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>F(null),children:p.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] flex flex-col items-center",children:[p.jsx("img",{src:P.url,alt:P.title,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl border border-slate-700",onClick:D=>D.stopPropagation()}),p.jsx("p",{className:"text-white font-bold text-xl mt-4 drop-shadow-md",children:P.title}),p.jsx("button",{onClick:()=>F(null),className:"absolute -top-12 right-0 text-slate-400 hover:text-white transition-colors",children:p.jsx("i",{className:"fas fa-times text-4xl"})})]})}),N&&p.jsx(pw,{onClose:()=>_(!1)}),k&&p.jsx(hw,{onClose:()=>b(!1)})]})},Jd=[{value:"background",label:"  ( )"},{value:"full",label:"  ()"},{value:"mls",label:"  ( )"},{value:"ws",label:"  ( , )"},{value:"bs",label:"  ( )"},{value:"cu",label:" ()"}],yw=t=>{switch(t){case"mls":return`
      [CAMERA: KNEE SHOT]
      - **CROP TASK**: Crop the image from Head to Knees.
      - **REMOVE**: Feet and Shoes must be CUT OFF.
      - **FILL**: The character (Head to Knees) must FILL the vertical space.
      - **POSTURE**: **MAINTAIN ORIGINAL POSE**. If sitting, keep sitting.
    `;case"ws":return`
      [CAMERA: WAIST SHOT]
      - **CROP TASK**: Crop the image from Head to Waist/Belt.
      - **REMOVE**: Everything below the belt (Legs, Knees, Feet) must be CUT OFF.
      - **FILL**: The Head and Torso must FILL the 16:9 frame.
      - **NEGATIVE PROMPT**: Legs, Pants, Skirt below waist, Shoes, Floor.
      - **POSTURE**: **MAINTAIN ORIGINAL POSE**. If sitting, keep sitting (Zoom in on torso).
    `;case"bs":return`
      [CAMERA: BUST SHOT]
      - **CROP TASK**: Crop the image from Head to Chest/Armpits.
      - **REMOVE**: Everything below the chest (Stomach, Waist, Hands) must be CUT OFF.
      - **FILL**: The Face and Shoulders must DOMINATE the frame.
      - **POSTURE**: **MAINTAIN ORIGINAL POSE**. If sitting, keep sitting (Show only upper body).
    `;case"full":return`
      [CAMERA: FULL SHOT]
      - Show the ENTIRE BODY from Head to Toe.
      - Shoes and Feet MUST be visible on the ground.
      - Show the relationship with the environment.
      - **POSTURE**: Allow Sitting or Standing based on context.
    `;case"cu":return`
      [CAMERA: CLOSE UP]
      - **CROP TASK**: Show ONLY the Face.
      - **REMOVE**: Shoulders, Body, Background details.
      - **FILL**: The Face must fill 80% of the frame.
      - **FOCUS**: Sharp focus on eyes.
      - **POSTURE**: **MAINTAIN ORIGINAL POSE**.
    `;default:return"Cinematic Shot. Best composition for the scene."}},Sw=({onNext:t,isNextLoading:e})=>{const{scenes:n,setScenes:o,characters:r,referenceImages:i,apiKey:s,selectedStyle:u,globalAspectRatio:c,setGlobalAspectRatio:d,showToast:f,openModal:m,globalScenePrompt:h,setGlobalScenePrompt:g,props:x,script:E}=Vt(),[C,y]=V.useState({}),[v,S]=V.useState(!1),[T,I]=V.useState({}),[N,_]=V.useState({}),[k,b]=V.useState(!0),[P,F]=V.useState(!1),[Q,K]=V.useState({}),[W,oe]=V.useState({}),[re,ae]=V.useState([]),G=V.useRef(null),[Y,X]=V.useState(null),ue=w=>w.replace(/[\s\[\]\(\):]/g,"");V.useEffect(()=>{let w=!1;const B=n.map(R=>{if(!R.casting&&r.length>0){const O=ue(R.scriptSegment),M=ue(R.description),H=r.filter(ye=>{const te=ue(ye.name);return O.includes(te)||M.includes(te)}),me=H.slice(0,3).map(ye=>ye.id),se=H.slice(3,6).map(ye=>ye.id),Ce=(x?x.filter(ye=>{const te=ue(ye.name);return O.includes(te)||M.includes(te)}):[]).map(ye=>ye.id);return w=!0,{...R,casting:{mainIds:me,subIds:se,propIds:Ce}}}return R});w&&o(B)},[r.length,x==null?void 0:x.length,n.length]);const ee=()=>{ae(w=>[...w,n])},ve=()=>{if(re.length===0)return;const w=re[re.length-1];o(w),ae(B=>B.slice(0,-1)),f("  .","success")},ie=(w,B)=>{const R=n.find(H=>H.id===w);if(!R)return"";const O=R.casting||{mainIds:[],subIds:[]};let M="";if(M+=`[SCENE INFO]
Location: ${R.location}
Time: ${R.timeOfDay}
Mood/Weather: ${R.description}
`,B==="background")M+=`
[INSTRUCTION]
NO PEOPLE. EMPTY BACKGROUND ONLY.
Focus on architecture and atmosphere.`;else{if(M+=`
[CAMERA]
${yw(B)}
`,(R.location.includes("")||R.location.includes("")||R.location.includes("")||R.location.includes(""))&&(M+=`
[INDOOR ETIQUETTE - SHOES]
`,M+=`- **NO SHOES ALLOWED**: Character is INDOORS. Must be barefoot or wearing white socks (Beoseon).
`,M+=`- **REMOVE SHOES**: Even if reference image has shoes, REMOVE THEM.
`,M+=`- **NEGATIVE PROMPT**: Shoes, Boots, Sandals, Jipsin inside the room.
`,M+=`
[INDOOR ETIQUETTE - HEADWEAR]
`,M+=`- **REMOVE OUTDOOR HATS**: Character is INDOORS. Take off "Gat", "Satgat", "Paeraengi".
`,M+=`- **ALLOWED HEADWEAR**: Headbands (Manggeon), Hairpins (Binyeo), Small Indoor Caps (Tanggeon/Jeongjagwan).
`,M+=`- **NEGATIVE PROMPT**: Wide Brim Hat, Gat, Satgat, Outdoor Hat.
`),O.mainIds.length>0){const me=O.mainIds.map(te=>r.find(U=>U.id===te)).filter(Boolean),se=me.filter(te=>{const U=((te==null?void 0:te.description)||"").toLowerCase();return U.includes("daenggi")||U.includes("half-tied")||U.includes("danbal")||U.includes("deobeok")||U.includes("shaggy")});se.length>0&&(M+=`
[HAIR-BASED HAT RULE]
`,se.forEach(te=>{M+=`- **CHARACTER ${te==null?void 0:te.name}**: Has specific hairstyle (Daenggi/Half-tied/Shaggy). **MUST NOT WEAR A GAT** (Hat). Show the hair clearly.
`}),se.length===me.length&&(M+=`- **NEGATIVE PROMPT**: Gat, Wide Brim Hat, Satgat.
`)),M+=`
[FOCUS SUBJECT - MAIN CHARACTERS]
`,!!R.focusId?M+=`TOTAL CHARACTERS: 1 (Active Speaker) + Blurred Foreground Element (Listener)
`:(M+=`TOTAL CHARACTERS: ${O.mainIds.length} (DO NOT DRAW MORE THAN ${O.mainIds.length})
`,O.mainIds.length===2&&(M+=`[COMPOSITION: TWO SHOT]
- Show both characters in the frame.
- Equal importance/focus on both.
`));let Ce=0;const ye=O.mainIds.map(te=>{const U=r.find(fe=>fe.id===te),Z=U?i.find(fe=>fe.name===U.name):null;return Z!=null&&Z.imageUrl&&Ce++,{id:te,hasRef:!!(Z!=null&&Z.imageUrl),refIndex:Z!=null&&Z.imageUrl?Ce:0}});if(O.mainIds.forEach(te=>{var Z,fe;const U=r.find(Oe=>Oe.id===te);if(U){const Oe=ye.find(us=>us.id===te),Se=i.find(us=>us.name===U.name),ct=Se?Se.description:U.visualGuide||U.description,_n=R.focusId===te,tu=!!R.focusId,sm=Oe!=null&&Oe.hasRef?`(MATCH WITH PROVIDED REFERENCE IMAGE #${Oe.refIndex})`:"(No Reference Image)";M+=`
 CHARACTER: ${U.name} ${_n?"( PRIMARY FOCUS - SPEAKER)":""} ${sm}
`,tu&&!_n?(M+=`  - ROLE: **LISTENER** (Foreground Framing Element)
`,M+=`  - APPEARANCE: ${((Z=Se==null?void 0:Se.design)==null?void 0:Z.clothingColor)||"Dark"} clothing.
`,M+=`  - INSTRUCTION: **PUSH TO THE EDGE**. Show ONLY the back of the shoulder/head on the extreme edge of the frame.
`,M+=`  - **SIZE**: The Listener MUST NOT block the view. They should take up less than 15% of the frame width.
`,M+=`  - **BLUR**: Heavily blur this character (Bokeh).
`):(M+=`  - APPEARANCE: ${ct} (STRICTLY FOLLOW THIS)
`,(fe=Se==null?void 0:Se.design)!=null&&fe.clothingColor&&(M+=`  - CLOTHING: ${Se.design.clothingColor}
`),tu&&_n?M+=`  - ROLE: **ACTIVE SPEAKER** (Camera Focus on this person).
`:M+=`  - ROLE: Main Actor
`)}}),O.mainIds.length===1||R.focusId&&O.mainIds.length>0)if(M+=`
    [SOLO/OTS SHOT & ANGLE INSTRUCTION]
    `,R.focusId){const te=n.findIndex(Z=>Z.id===w);let U=!1;if(te>0){const Z=n[te-1];Z.focusId&&Z.focusId!==R.focusId&&(U=!0)}M+=`
    - **CAMERA FOCUS**: Focus SHARPLY on the Active Speaker.
    - **COMPOSITION**: Dirty Single Shot / Tight Over-the-Shoulder.
    - **LISTENER POSITION**: The Listener is TOO BIG. **MOVE THEM OUT OF THE FRAME**.
    - **VISIBILITY**: Show ONLY a sliver of the Listener's shoulder/head on the edge.
    - **RATIO**: Speaker (85% of frame) vs Listener (15% of frame).
    - **EYE CONTACT**: Speaker looks at the Listener (Not at Camera).
    `,U?M+=`
    [SPATIAL INVERSION RULE - CRITICAL]
    - The camera has rotated 180 degrees.
    - **VISUAL NEGATION**: Any furniture/objects visible behind the characters in the PREVIOUS shot (e.g., Folding Screen, High Chair) MUST BE BEHIND THE CAMERA now.
    - **CURRENT BACKGROUND**: Show the OPPOSITE wall.
      - **STRUCTURE**: If the previous shot showed the Main Seat/Folding Screen, this shot MUST show Doors/Windows/Courtyard View.
      - **ASYMMETRY**: The two sides of the room are NOT symmetrical. One side is solid (wall/screen), the other is open (doors/windows).
    - **LIGHTING/TONE**: Keep the same color palette and lighting atmosphere, but change the geometry/objects completely.
    `:M+=`
    - **NEGATIVE PROMPT**: Third person, extra characters, crowd, listener facing camera, listener blocking view.
    `}else M+=`
    - **DRAW ONLY THE SINGLE CHARACTER LISTED ABOVE**.
    - If the script implies dialogue with another person, **DO NOT DRAW THE LISTENER**.
    - **ANGLE**: The character should look 15-30 degrees to the side (talking to someone off-screen).
    - **EYE CONTACT**: DO NOT look at the camera. Look at the invisible listener.
    - **COMPOSITION**: Place the character slightly off-center (Rule of Thirds) to leave space for the "invisible" listener.
                       `}O.propIds&&O.propIds.length>0&&(M+=`
[IMPORTANT PROPS/OBJECTS]
`,O.propIds.forEach(me=>{const se=x==null?void 0:x.find(ce=>ce.id===me);se&&(M+=` PROP: ${se.name}
`,M+=`  - APPEARANCE: ${se.description}
`,M+=`  - NOTE: Must be visible and look exactly as described.
`)})),O.subIds.length>0&&(M+=`
[BACKGROUND/SUPPORTING CHARACTERS]
`,O.subIds.forEach(me=>{const se=r.find(ce=>ce.id===me);if(se){const ce=i.find(ye=>ye.name===se.name),Ce=ce?ce.description:se.description;M+=`- ${se.name}: ${Ce}
`}})),M+=`
[SCRIPT CONTEXT]
"${R.scriptSegment.substring(0,100)}..."`}return _(H=>({...H,[w]:M})),M},A=(w,B)=>{I(R=>({...R,[w]:B})),ie(w,B)},$=(w,B)=>{o(R=>R.map(O=>{if(O.id===w){const M=O.focusId===B?void 0:B;return{...O,focusId:M}}return O}))},D=(w,B,R,O)=>{o(M=>M.map(H=>{if(H.id!==w)return H;const me=H.casting||{mainIds:[],subIds:[],propIds:[]};let se=[...me.mainIds],ce=[...me.subIds],Ce=[...me.propIds||[]],ye=H.focusId;if(O==="remove")B==="main"&&(se=se.filter(te=>te!==R),ye===R&&(ye=void 0)),B==="sub"&&(ce=ce.filter(te=>te!==R)),B==="prop"&&(Ce=Ce.filter(te=>te!==R));else if(B==="main"){if(se.length>=3)return f("  3.","warning"),H;se.includes(R)||se.push(R),ce=ce.filter(te=>te!==R)}else if(B==="sub"){if(ce.length>=3)return f("  3.","warning"),H;ce.includes(R)||ce.push(R),se=se.filter(te=>te!==R)}else if(B==="prop"){if(Ce.length>=3)return f("  3.","warning"),H;Ce.includes(R)||Ce.push(R)}return{...H,casting:{mainIds:se,subIds:ce,propIds:Ce},focusId:ye}}))},J=(w,B)=>{var R;m({type:"textarea",title:`SCENE ${(R=n.find(O=>O.id===w))==null?void 0:R.sceneNumber}  `,message:`      .
(          .)`,defaultValue:B,confirmText:" ",onConfirm:O=>{_(M=>({...M,[w]:O||""}))}})},j=w=>{var O;const B=(O=w.target.files)==null?void 0:O[0];if(!B||!Y)return;const R=new FileReader;R.onload=M=>{var me;const H=(me=M.target)==null?void 0:me.result;H&&(o(se=>se.map(ce=>ce.id===Y?{...ce,backgroundRefUrl:H}:ce)),f("   .","success"),X(null))},R.readAsDataURL(B)},he=w=>{if(w===0)return f("  .","warning");const B=n[w];let R=null;for(let O=w-1;O>=0;O--)if(n[O].location===B.location&&n[O].generatedImageUrl){R=n[O].generatedImageUrl;break}!R&&n[w-1].generatedImageUrl&&(R=n[w-1].generatedImageUrl),R?(o(O=>O.map((M,H)=>H===w?{...M,backgroundRefUrl:R}:M)),f("   !","success")):f("      .","warning")},be=w=>{m({type:"confirm",title:"   ",message:`     ?
(  .)`,confirmText:"",onConfirm:()=>{o(B=>B.map(R=>{if(R.id===w){const O={...R};return delete O.backgroundRefUrl,O}return R})),f("   .","success")}})},It=async()=>{if(!E)return f("  .","warning");if(!s)return f("API  .","warning");F(!0),f("      ...","success");try{const w=await uw(s,E);g(w),f("  .   .","success")}catch(w){f(w.message,"error")}finally{F(!1)}},De=async w=>{var O,M;let B=N[w];const R=T[w]||"background";if(B||(B=ie(w,R)),!B){f(" ","error");return}y(H=>({...H,[w]:!0}));try{const H=n.find(Oe=>Oe.id===w),me=(H==null?void 0:H.aspectRatio)||c||"16:9";let se=[];R!=="background"&&((O=H==null?void 0:H.casting)!=null&&O.mainIds)&&H.casting.mainIds.length>0&&H.casting.mainIds.forEach(Oe=>{const Se=r.find(ct=>ct.id===Oe);if(Se){const ct=i.find(_n=>_n.name===Se.name);ct!=null&&ct.imageUrl&&se.push(ct.imageUrl)}});const ce=Q[w]||"",Ce=!!(H!=null&&H.focusId),ye=Ce||H==null?void 0:H.backgroundRefUrl;let te=[];(M=H==null?void 0:H.casting)!=null&&M.propIds&&H.casting.propIds.length>0&&H.casting.propIds.forEach(Oe=>{const Se=x==null?void 0:x.find(ct=>ct.id===Oe);Se&&Se.imageUrl&&te.push(Se.imageUrl)});const U=["ws","bs","cu","mls"].includes(R);let Z;R==="full"?Z=void 0:U&&!Ce&&(Z=(H==null?void 0:H.masterFullShotUrl)||(H==null?void 0:H.generatedImageUrl));const fe=await Kl(s,B,u,me,R==="background"?"background":"cinematic",se,ce,ye,te,h,Z);o(Oe=>Oe.map(Se=>{if(Se.id===w){const ct=Se.imageHistory?[fe,...Se.imageHistory]:[fe];!Se.imageHistory&&Se.generatedImageUrl&&ct.push(Se.generatedImageUrl);const _n=R==="full"?fe:Se.masterFullShotUrl;return{...Se,generatedImageUrl:fe,masterFullShotUrl:_n,imageHistory:ct,aspectRatio:me}}return Se})),v||f(" !","success")}catch(H){v||f(H.message,"error")}finally{y(H=>({...H,[w]:!1}))}},Ie=async(w,B)=>{const R=n.find(O=>O.id===w);if(!(!(R!=null&&R.generatedImageUrl)||!B)){y(O=>({...O,[w]:!0})),f("  ...","success");try{const O=await aw(s,R.generatedImageUrl,B);o(M=>M.map(H=>{if(H.id===w){const me=[O,...H.imageHistory||[]];return{...H,generatedImageUrl:O,imageHistory:me}}return H})),f(" !","success")}catch(O){f(O.message,"error")}finally{y(O=>({...O,[w]:!1}))}}},Le=async(w,B)=>{if(!s)return f("API  .","warning");ee();const R=n.findIndex(M=>M.id===w);if(R===-1)return;const O=n[R];oe(M=>({...M,[w]:!0})),f(` ${B}  ... (  )`,"success");try{const M=await ew(s,O,B),H=[...n];H.splice(R,1,...M);const me=H.map((se,ce)=>({...se,sceneNumber:ce+1}));o(me),f(`! ${O.sceneNumber}  ${B} .`,"success")}catch(M){f(M.message,"error")}finally{oe(M=>({...M,[w]:!1}))}},ut=w=>{var me,se,ce,Ce;if(w===0)return;ee();const B=n[w-1],R=n[w],O={mainIds:[...new Set([...((me=B.casting)==null?void 0:me.mainIds)||[],...((se=R.casting)==null?void 0:se.mainIds)||[]])],subIds:[...new Set([...((ce=B.casting)==null?void 0:ce.subIds)||[],...((Ce=R.casting)==null?void 0:Ce.subIds)||[]])]},M={...B,scriptSegment:`${B.scriptSegment}
${R.scriptSegment}`,description:`${B.description} ${R.description}`,casting:O},H=[...n];H.splice(w-1,2,M),o(H.map((ye,te)=>({...ye,sceneNumber:te+1}))),f(`${w+1} ${w}  .`,"success")},In=w=>{w!==n.length-1&&ut(w+1)},wr=async()=>{if(!s)return f("API  .","warning");const w=n.filter(B=>!B.generatedImageUrl);if(w.length===0)return f("    .","warning");m({type:"confirm",title:" ",message:` ${w.length}    ?

:  '  ' '  (${c})' .`,confirmText:" ",onConfirm:async()=>{var R;S(!0),f("  ...","success");let B=0;for(let O=0;O<w.length;O++){const M=w[O];try{const H=T[M.id]||"background",me=ie(M.id,H),se=M.aspectRatio||c||"16:9";let ce=[];H!=="background"&&((R=M==null?void 0:M.casting)!=null&&R.mainIds)&&M.casting.mainIds.length>0&&M.casting.mainIds.forEach(U=>{const Z=r.find(fe=>fe.id===U);if(Z){const fe=i.find(Oe=>Oe.name===Z.name);fe!=null&&fe.imageUrl&&ce.push(fe.imageUrl)}});const Ce=Q[M.id]||"",ye=M.backgroundRefUrl,te=await Kl(s,me||"Scene",u,se,H==="background"?"background":"cinematic",ce,Ce,ye,void 0,h);o(U=>U.map(Z=>{if(Z.id===M.id){const fe=Z.imageHistory?[te,...Z.imageHistory]:[te];return!Z.imageHistory&&Z.generatedImageUrl&&fe.push(Z.generatedImageUrl),{...Z,generatedImageUrl:te,imageHistory:fe,aspectRatio:se}}return Z})),B++}catch(H){console.error(`Failed scene ${M.sceneNumber}`,H)}O<w.length-1&&await new Promise(H=>setTimeout(H,3e3))}S(!1),f(`  ! (${B}/${w.length} )`,"success")}})},Nn=(w,B)=>{const R=document.createElement("a");R.href=w,R.download=B,R.click()},as=(w,B)=>{o(R=>R.map(O=>O.id===w?{...O,generatedImageUrl:B}:O))},om=async w=>{const B=n.find(R=>R.id===w);if(B!=null&&B.generatedImageUrl){if(!s)return f("API  .","warning");m({type:"confirm",title:"  ",message:"   ,  () ?",confirmText:"",onConfirm:async()=>{y(R=>({...R,[w]:!0}));try{const R=await sw(s,B.generatedImageUrl);o(O=>O.map(M=>{if(M.id===w){const H=[R,...M.imageHistory||[]];return{...M,generatedImageUrl:R,imageHistory:H}}return M})),f(" .","success")}catch(R){f(R.message,"error")}finally{y(R=>({...R,[w]:!1}))}}})}},rm=async w=>{const B=n.find(R=>R.id===w);if(B!=null&&B.generatedImageUrl){if(!s)return f("API  .","warning");m({type:"confirm",title:"  ( )",message:`     ?
(    )`,confirmText:" ",onConfirm:async()=>{y(R=>({...R,[w]:!0}));try{const R=await lw(s,B.generatedImageUrl);o(O=>O.map(M=>{if(M.id===w){const H=[R,...M.imageHistory||[]];return{...M,generatedImageUrl:R,imageHistory:H}}return M})),f(" .","success")}catch(R){f(R.message,"error")}finally{y(R=>({...R,[w]:!1}))}}})}},im=(w,B)=>{o(R=>R.map(O=>O.id===w?{...O,aspectRatio:B}:O)),f(`   ${B} .`,"success")};return p.jsxs("div",{className:"space-y-6 animate-fade-in",children:[p.jsx("input",{type:"file",ref:G,onChange:j,accept:"image/*",className:"hidden"}),p.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-center bg-slate-800 p-6 rounded-xl border border-slate-700 gap-4",children:[p.jsxs("div",{children:[p.jsxs("h2",{className:"text-2xl font-bold text-white mb-2",children:["   (",n.length,")"]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-sm text-slate-400",children:"  :"}),p.jsxs("select",{value:c,onChange:w=>d(w.target.value),className:"bg-slate-900 border border-slate-600 rounded px-2 py-1 text-sm font-bold text-indigo-300 focus:ring-2 focus:ring-indigo-500",children:[p.jsx("option",{value:"16:9",children:"16:9 ()"}),p.jsx("option",{value:"9:16",children:"9:16 (/)"}),p.jsx("option",{value:"1:1",children:"1:1 ()"}),p.jsx("option",{value:"4:3",children:"4:3 ()"}),p.jsx("option",{value:"3:4",children:"3:4 ()"})]})]})]}),p.jsxs("div",{className:"flex gap-3 items-center",children:[re.length>0&&p.jsxs("button",{onClick:ve,className:"px-4 py-3 rounded-lg font-bold bg-slate-700 hover:bg-slate-600 text-slate-200 border border-slate-600 flex items-center gap-2",title:" / ",children:[p.jsx("i",{className:"fas fa-undo"}),"  "]}),p.jsxs("button",{onClick:wr,disabled:v||e,className:`px-5 py-3 rounded-lg font-bold shadow-lg flex items-center gap-2 border transition-all ${v?"bg-yellow-700 text-yellow-100 border-yellow-600 animate-pulse":"bg-slate-700 hover:bg-slate-600 text-slate-200 border-slate-600"}`,children:[v?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-layer-group"}),v?" ...":"   "]}),p.jsxs("button",{onClick:t,disabled:e||v,className:"bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-bold shadow-lg flex items-center gap-2",children:[e?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-arrow-right"})," () "]})]})]}),p.jsxs("div",{className:"bg-indigo-900/30 border border-indigo-500/50 rounded-xl p-6 shadow-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4 cursor-pointer",onClick:()=>b(!k),children:[p.jsxs("h3",{className:"text-lg font-bold text-indigo-200 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-globe-asia"})," []  / "]}),p.jsx("i",{className:`fas fa-chevron-${k?"up":"down"} text-indigo-400`})]}),k&&p.jsxs("div",{className:"animate-fade-in",children:[p.jsxs("p",{className:"text-sm text-slate-400 mb-2",children:["  ",p.jsx("strong",{children:"  "}),'. "   ", "  ", "    "  AI     .']}),p.jsx("div",{className:"flex justify-end mb-2",children:p.jsxs("button",{onClick:It,disabled:P,className:"text-xs bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded flex items-center gap-2 border border-indigo-400 shadow-sm",children:[P?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-magic"}),"   /"]})}),p.jsx("textarea",{value:h,onChange:w=>g(w.target.value),placeholder:":      .      .          .",className:"w-full h-32 bg-slate-800 border border-slate-600 rounded-lg p-3 text-sm text-white focus:ring-2 focus:ring-indigo-500 resize-none leading-relaxed"}),p.jsx("div",{className:"flex justify-end mt-2",children:p.jsxs("button",{onClick:()=>{n.forEach(w=>ie(w.id,T[w.id]||"background")),f("     . ( )","success")},className:"text-xs bg-indigo-700 hover:bg-indigo-600 text-white px-3 py-1.5 rounded flex items-center gap-1",children:[p.jsx("i",{className:"fas fa-sync-alt"}),"   "]})})]})]}),p.jsx("div",{className:"space-y-12",children:n.map((w,B)=>{var R,O,M,H,me,se,ce,Ce,ye,te;return p.jsxs("div",{className:"bg-slate-800 rounded-2xl overflow-hidden border border-slate-700 shadow-xl",children:[p.jsxs("div",{className:"bg-slate-900/50 p-6 border-b border-slate-700",children:[p.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("span",{className:"bg-indigo-600 text-white px-3 py-1 rounded text-sm font-bold whitespace-nowrap",children:["SCENE ",w.sceneNumber]}),p.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white truncate max-w-[200px] md:max-w-md",children:w.location}),p.jsx("span",{className:"text-slate-400 text-sm border border-slate-600 px-2 py-0.5 rounded-full whitespace-nowrap",children:w.timeOfDay})]}),p.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-1 bg-slate-800 rounded-lg p-1 border border-slate-600",children:[p.jsxs("span",{className:"text-[10px] text-slate-400 px-2 font-bold uppercase",children:[p.jsx("i",{className:"fas fa-link mr-1"}),""]}),p.jsx("button",{onClick:()=>ut(B),disabled:B===0,className:"text-xs bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded border border-slate-600 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"   (     )",children:p.jsx("i",{className:"fas fa-arrow-up"})}),p.jsx("button",{onClick:()=>In(B),disabled:B===n.length-1,className:"text-xs bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded border border-slate-600 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"   (     )",children:p.jsx("i",{className:"fas fa-arrow-down"})})]}),p.jsxs("div",{className:"flex items-center gap-1 bg-slate-800 rounded-lg p-1 border border-slate-600",children:[p.jsxs("span",{className:"text-[10px] text-slate-400 px-2 font-bold uppercase",children:[p.jsx("i",{className:"fas fa-cut mr-1"}),""]}),p.jsx("button",{onClick:()=>Le(w.id,2),disabled:W[w.id],className:"text-xs bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded border border-slate-600 transition-colors",title:"     2 ",children:"2"}),p.jsx("button",{onClick:()=>Le(w.id,3),disabled:W[w.id],className:"text-xs bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded border border-slate-600 transition-colors",title:"     3 ",children:"3"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-xs text-slate-500",children:":"}),p.jsxs("select",{value:w.aspectRatio||c,onChange:U=>im(w.id,U.target.value),className:"bg-slate-800 text-xs text-slate-300 border border-slate-600 rounded px-1 py-1",children:[p.jsx("option",{value:"16:9",children:"16:9"}),p.jsx("option",{value:"9:16",children:"9:16"}),p.jsx("option",{value:"1:1",children:"1:1"}),p.jsx("option",{value:"4:3",children:"4:3"}),p.jsx("option",{value:"3:4",children:"3:4"})]})]})]})]}),W[w.id]&&p.jsxs("div",{className:"mb-4 bg-indigo-900/30 border border-indigo-500/30 text-indigo-300 px-4 py-2 rounded text-sm flex items-center gap-3 animate-pulse",children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"AI      ..."})]}),p.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-600/50",children:[p.jsxs("p",{className:"text-indigo-300 text-sm font-bold mb-1",children:[p.jsx("i",{className:"fas fa-quote-left mr-2"})," "]}),p.jsx("p",{className:"text-lg text-slate-200",children:w.scriptSegment})]})]}),p.jsx("div",{className:"p-6",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[p.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[p.jsxs("div",{className:"relative w-full bg-black rounded-lg overflow-hidden border border-slate-700 flex items-center justify-center transition-all",style:{width:"100%",aspectRatio:(w.aspectRatio||c).replace(":","/")},children:[w.generatedImageUrl?p.jsx("img",{src:w.generatedImageUrl,alt:"Background",className:"w-full h-full object-contain"}):p.jsxs("div",{className:"text-slate-600 flex flex-col items-center",children:[p.jsx("i",{className:"fas fa-image text-6xl mb-4 opacity-30"}),p.jsx("span",{children:" "})]}),C[w.id]&&p.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center backdrop-blur-sm",children:p.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-indigo-500"})}),T[w.id]&&T[w.id]!=="background"&&p.jsx("div",{className:"absolute top-4 right-4 bg-black/80 text-white text-xs px-2 py-1 rounded border border-white/30 backdrop-blur-md",children:(R=Jd.find(U=>U.value===T[w.id]))==null?void 0:R.label}),w.backgroundRefUrl&&p.jsxs("div",{className:"absolute bottom-4 left-4 bg-blue-900/80 text-white text-xs px-2 py-1 rounded border border-blue-500 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-layer-group"}),"    ( )"]})]}),w.imageHistory&&w.imageHistory.length>0&&p.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:w.imageHistory.map((U,Z)=>p.jsx("div",{onClick:()=>as(w.id,U),className:`flex-shrink-0 w-16 h-16 rounded cursor-pointer border-2 transition-all hover:scale-105 ${w.generatedImageUrl===U?"border-indigo-500 ring-1":"border-slate-700 opacity-60"}`,children:p.jsx("img",{src:U,alt:"History",className:"w-full h-full object-cover"})},Z))}),w.generatedImageUrl&&p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:()=>Nn(w.generatedImageUrl,`scene_${w.sceneNumber}.png`),className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-lg font-bold border border-slate-600 flex items-center justify-center gap-2",children:[p.jsx("i",{className:"fas fa-download"})," "]}),T[w.id]!=="background"&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:()=>om(w.id),className:"flex-1 bg-green-900/50 hover:bg-green-800/80 text-green-300 hover:text-white px-4 py-3 rounded-lg font-bold border border-green-700/50 flex items-center justify-center gap-2",title:"    ",children:[p.jsx("i",{className:"fas fa-magic"}),"  "]}),p.jsxs("button",{onClick:()=>rm(w.id),className:"flex-1 bg-slate-700 hover:bg-red-900/50 text-slate-300 hover:text-red-300 px-4 py-3 rounded-lg font-bold border border-slate-600 hover:border-red-700 flex items-center justify-center gap-2",title:"    ",children:[p.jsx("i",{className:"fas fa-user-slash"}),"  "]})]})]}),w.generatedImageUrl&&p.jsxs("div",{className:"mt-2 bg-purple-900/20 border border-purple-500/30 p-4 rounded-lg",children:[p.jsxs("label",{className:"text-sm font-bold text-purple-300 block mb-2",children:[p.jsx("i",{className:"fas fa-magic mr-2"}),"  (   )"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",id:`fix-input-${w.id}`,placeholder:":   ,   ",className:"flex-1 bg-slate-900 border border-purple-500/50 rounded-lg px-4 py-3 text-white focus:border-purple-400 focus:ring-1 focus:ring-purple-400 placeholder-slate-500",onKeyDown:U=>{if(U.key==="Enter"){const Z=U.currentTarget.value;Z&&Ie(w.id,Z)}}}),p.jsx("button",{onClick:()=>{const U=document.getElementById(`fix-input-${w.id}`);U&&U.value&&Ie(w.id,U.value)},disabled:C[w.id],className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-lg font-bold shadow-lg whitespace-nowrap",children:C[w.id]?p.jsx("i",{className:"fas fa-spinner fa-spin"}):" "})]}),p.jsx("p",{className:"text-xs text-purple-400/70 mt-2 ml-1",children:"* 3     .     ."})]})]}),p.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-4",children:[p.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-700",children:[p.jsxs("label",{className:"text-xs font-bold text-slate-400 mb-2 block uppercase",children:[p.jsx("i",{className:"fas fa-camera mr-1"}),"   ( )"]}),p.jsx("div",{className:"flex gap-2 flex-wrap",children:Jd.map(U=>p.jsx("button",{onClick:()=>A(w.id,U.value),className:`px-3 py-2 rounded text-xs font-bold border transition-all ${T[w.id]===U.value||!T[w.id]&&U.value==="background"?"bg-indigo-600 text-white border-indigo-500":"bg-slate-800 text-slate-400 border-slate-600 hover:bg-slate-700"}`,children:U.label},U.value))})]}),T[w.id]!=="background"&&p.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-700",children:[p.jsxs("h4",{className:"text-sm font-bold text-white mb-3 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-users-cog text-yellow-500"}),"  "]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("label",{className:"text-xs font-bold text-indigo-400",children:"  (Foreground)"}),p.jsxs("select",{className:"bg-slate-800 text-xs text-white border border-slate-600 rounded px-2 py-1 w-24",onChange:U=>{U.target.value&&D(w.id,"main",U.target.value,"add"),U.target.value=""},children:[p.jsx("option",{value:"",children:"+ "}),r.map(U=>p.jsx("option",{value:U.id,children:U.name},U.id))]})]}),p.jsxs("div",{className:"flex flex-col gap-2 min-h-[30px]",children:[(M=(O=w.casting)==null?void 0:O.mainIds)==null?void 0:M.map(U=>{const Z=r.find(Oe=>Oe.id===U),fe=w.focusId===U;return Z?p.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg border ${fe?"bg-indigo-900/80 border-indigo-400":"bg-slate-800 border-slate-700"}`,children:[p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:`text-xs font-bold ${fe?"text-white":"text-slate-300"}`,children:Z.name})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:()=>$(w.id,U),className:`text-[10px] px-2 py-0.5 rounded border ${fe?"bg-indigo-500 text-white border-indigo-400":"bg-slate-700 text-slate-400 border-slate-600 hover:bg-slate-600"}`,title:fe?"   ( )":"    ",children:[p.jsx("i",{className:`fas ${fe?"fa-video":"fa-video-slash"} mr-1`}),fe?"ON":"OFF"]}),p.jsx("button",{onClick:()=>D(w.id,"main",U,"remove"),className:"text-slate-500 hover:text-red-400",children:p.jsx("i",{className:"fas fa-times"})})]})]},U):null}),(!((H=w.casting)!=null&&H.mainIds)||w.casting.mainIds.length===0)&&p.jsx("span",{className:"text-xs text-slate-600",children:" "}),((me=w.casting)==null?void 0:me.mainIds)&&w.casting.mainIds.length>=2&&!w.focusId&&p.jsxs("div",{className:"mt-2 bg-slate-900/50 p-2 rounded border border-slate-600",children:[p.jsxs("p",{className:"text-[10px] text-slate-300 mb-1",children:[p.jsx("i",{className:"fas fa-video mr-1"})," ",p.jsx("strong",{children:"  "})]}),p.jsxs("ul",{className:"text-[10px] text-slate-400 space-y-1 list-disc pl-3",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"():"}),"  [ON]      . (    )"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"/OTS:"}),"   ",p.jsx("span",{className:"text-indigo-400 font-bold",children:"[ON]"}),",     ."]})]})]})]})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("label",{className:"text-xs font-bold text-slate-400",children:" (Background)"}),p.jsxs("select",{className:"bg-slate-800 text-xs text-white border border-slate-600 rounded px-2 py-1 w-24",onChange:U=>{U.target.value&&D(w.id,"sub",U.target.value,"add"),U.target.value=""},children:[p.jsx("option",{value:"",children:"+ "}),r.map(U=>p.jsx("option",{value:U.id,children:U.name},U.id))]})]}),p.jsx("div",{className:"flex gap-2 flex-wrap min-h-[30px]",children:(ce=(se=w.casting)==null?void 0:se.subIds)==null?void 0:ce.map(U=>{const Z=r.find(fe=>fe.id===U);return Z?p.jsxs("div",{className:"bg-slate-700 text-slate-300 text-xs px-2 py-1 rounded-full flex items-center gap-1 border border-slate-600",children:[p.jsx("span",{children:Z.name}),p.jsx("button",{onClick:()=>D(w.id,"sub",U,"remove"),className:"hover:text-red-300",children:p.jsx("i",{className:"fas fa-times"})})]},U):null})})]}),p.jsxs("div",{className:"mt-4 border-t border-slate-800 pt-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("label",{className:"text-xs font-bold text-green-400",children:"   (Props)"}),p.jsxs("select",{className:"bg-slate-800 text-xs text-white border border-slate-600 rounded px-2 py-1 w-24",onChange:U=>{U.target.value&&D(w.id,"prop",U.target.value,"add"),U.target.value=""},children:[p.jsx("option",{value:"",children:"+ "}),x&&x.map(U=>p.jsx("option",{value:U.id,children:U.name},U.id))]})]}),p.jsxs("div",{className:"flex gap-2 flex-wrap min-h-[30px]",children:[(ye=(Ce=w.casting)==null?void 0:Ce.propIds)==null?void 0:ye.map(U=>{const Z=x==null?void 0:x.find(fe=>fe.id===U);return Z?p.jsxs("div",{className:"bg-green-700 text-green-100 text-xs px-2 py-1 rounded-full flex items-center gap-1 shadow-sm",children:[p.jsx("span",{children:Z.name}),p.jsx("button",{onClick:()=>D(w.id,"prop",U,"remove"),className:"hover:text-red-300",children:p.jsx("i",{className:"fas fa-times"})})]},U):null}),(!((te=w.casting)!=null&&te.propIds)||w.casting.propIds.length===0)&&p.jsx("span",{className:"text-xs text-slate-600",children:" "})]})]})]}),p.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-700",children:[p.jsxs("label",{className:"text-xs font-bold text-blue-400 mb-2 block uppercase flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-image"}),"   ( )"]}),w.backgroundRefUrl?p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"w-full h-20 bg-black rounded border border-blue-500 overflow-hidden mb-2 relative",children:[p.jsx("img",{src:w.backgroundRefUrl,alt:"Background Ref",className:"w-full h-full object-cover opacity-70"}),p.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-white bg-black/50 text-center leading-tight",children:["  ",p.jsx("br",{}),"(/ )"]})]}),p.jsxs("button",{onClick:()=>be(w.id),className:"relative z-20 w-full text-xs text-white bg-red-800 hover:bg-red-600 border border-red-500 rounded py-3 transition-colors font-bold cursor-pointer shadow-md",children:[p.jsx("i",{className:"fas fa-trash-alt mr-1"}),"    ()"]})]}):p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("button",{onClick:()=>he(B),className:"bg-slate-800 hover:bg-slate-700 text-slate-300 text-xs py-2 px-1 rounded border border-slate-600 flex flex-col items-center gap-1",title:"    ",children:[p.jsx("i",{className:"fas fa-arrow-left"}),"  "]}),p.jsxs("button",{onClick:()=>{var U;X(w.id),(U=G.current)==null||U.click()},className:"bg-slate-800 hover:bg-slate-700 text-slate-300 text-xs py-2 px-1 rounded border border-slate-600 flex flex-col items-center gap-1",title:"PC  ",children:[p.jsx("i",{className:"fas fa-upload"}),"  "]})]}),p.jsxs("p",{className:"text-[10px] text-slate-500 mt-2 leading-tight",children:["*      ",p.jsx("strong",{children:"()"}),"  ."]})]}),p.jsxs("div",{className:"flex-grow flex flex-col gap-2",children:[p.jsxs("div",{className:"flex justify-between items-end",children:[p.jsxs("label",{className:"text-xs font-bold text-green-400 uppercase",children:[p.jsx("i",{className:"fas fa-terminal mr-1"})," AI  "]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:()=>J(w.id,N[w.id]||""),className:"text-xs bg-indigo-600 hover:bg-indigo-500 text-white px-2 py-1 rounded border border-indigo-500 transition-colors shadow-sm",children:[p.jsx("i",{className:"fas fa-expand-arrows-alt mr-1"}),"  "]}),p.jsx("button",{onClick:()=>{ie(w.id,T[w.id]||"background"),f("   .","success")},className:"text-xs bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded border border-slate-600 transition-colors",title:"    ",children:p.jsx("i",{className:"fas fa-sync-alt"})})]})]}),p.jsx("textarea",{value:N[w.id]||"",onChange:U=>_(Z=>({...Z,[w.id]:U.target.value})),onDoubleClick:()=>J(w.id,N[w.id]||""),placeholder:"       .",className:"w-full h-24 bg-black/30 border border-slate-600 rounded-lg p-3 text-xs text-slate-300 font-mono focus:ring-1 focus:ring-green-500 focus:border-green-500 resize-none leading-relaxed cursor-text"})]}),p.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 p-4 rounded-lg mt-auto",children:[p.jsxs("label",{className:"text-sm font-bold text-red-400 block mb-2",children:[p.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),"    (  )"]}),p.jsx("input",{type:"text",value:Q[w.id]||"",onChange:U=>K(Z=>({...Z,[w.id]:U.target.value})),placeholder:":   ,  ,  ",className:"w-full bg-slate-900 border border-red-500/50 rounded-lg px-4 py-3 text-white focus:border-red-500 focus:ring-1 focus:ring-red-500 placeholder-slate-500"})]}),p.jsxs("button",{onClick:()=>De(w.id),disabled:C[w.id]||v,className:`w-full py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 transition-all ${T[w.id]&&T[w.id]!=="background"?"bg-indigo-600 hover:bg-indigo-500 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-200"}`,children:[C[w.id]?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-magic"}),w.generatedImageUrl?"   ":"  (Generate)"]})]})]})})]},w.id)})})]})},xw=()=>{const{script:t,characters:e,referenceImages:n,apiKey:o,selectedStyle:r,globalAspectRatio:i,showToast:s,props:u,scriptSegments:c,globalScenePrompt:d}=Vt(),[f,m]=V.useState("ALL"),[h,g]=V.useState("auto"),[x,E]=V.useState("auto"),[C,y]=V.useState(!1),[v,S]=V.useState([]),[T,I]=V.useState({}),[N,_]=V.useState([]),[k,b]=V.useState(!1),[P,F]=V.useState(null),[Q,K]=V.useState(!1);V.useEffect(()=>{(async()=>{if(typeof window<"u"){const $=localStorage.getItem("bangtong-opening-sequence");if($)try{const J=JSON.parse($);Array.isArray(J)&&J.length>0&&(await qo("bangtong-opening-sequence",J),S(J)),localStorage.removeItem("bangtong-opening-sequence")}catch{}else{const J=await bl("bangtong-opening-sequence");J&&S(J)}const D=localStorage.getItem("bangtong-hooking-texts");if(D)try{const J=JSON.parse(D);Array.isArray(J)&&J.length>0&&(await qo("bangtong-hooking-texts",J),_(J)),localStorage.removeItem("bangtong-hooking-texts")}catch{}else{const J=await bl("bangtong-hooking-texts");J&&_(J)}}})()},[]),V.useEffect(()=>{v.length>0&&qo("bangtong-opening-sequence",v)},[v]),V.useEffect(()=>{N.length>0&&qo("bangtong-hooking-texts",N)},[N]);const W=async()=>{window.confirm(`   ?
(  .)`)&&(S([]),await sh("bangtong-opening-sequence"),localStorage.removeItem("bangtong-opening-sequence"),s("  .","success"))},oe=(A,$,D)=>{S(J=>J.map(j=>{if(j.id!==A)return j;let he=[...j.propIds||[]];return D==="add"?he.includes($)||he.push($):he=he.filter(be=>be!==$),{...j,propIds:he}}))},re=(A,$,D)=>{S(J=>J.map(j=>{if(j.id!==A)return j;let he=[...j.characterIds||[]];return D==="add"?he.includes($)||he.push($):he=he.filter(be=>be!==$),{...j,characterIds:he}}))},ae=(A,$)=>{S(D=>D.map(J=>J.id===A?{...J,visualPrompt:$}:J))},G=async()=>{if(!t)return s(" .","warning");if(!o)return s("API  .","warning");y(!0);try{let A=t;if(typeof f<"u"&&f!=="ALL"&&typeof c<"u"){const D=c.find(J=>J.id===f);D&&(A=D.content)}const $=await ow(o,A,e,u,d,h);S($),s("/  !","success")}catch(A){s(A.message,"error")}finally{y(!1)}},Y=async A=>{var $,D;I(J=>({...J,[A.id]:!0}));try{const J=(($=A.propIds)==null?void 0:$.map(De=>{var Ie;return(Ie=u.find(Le=>Le.id===De))==null?void 0:Ie.imageUrl}).filter(Boolean))||[],j=((D=A.characterIds)==null?void 0:D.map(De=>{const Ie=e.find(ut=>ut.id===De);if(!Ie||!Ie.referenceImageId)return null;const Le=n.find(ut=>ut.id===Ie.referenceImageId);return Le?{name:Ie.name,imageUrl:Le.imageUrl}:null}).filter(De=>De!==null))||[],he=j.map(De=>De.imageUrl),be=j.map(De=>De.name),It=await Kl(o,A.visualPrompt,r,i,"cinematic",he,void 0,void 0,J,d,void 0,be);S(De=>De.map(Ie=>{if(Ie.id!==A.id)return Ie;const Le=[...Ie.imageHistory||[],It];return{...Ie,generatedImageUrl:It,imageHistory:Le}})),s(`${A.sequenceNumber}   `,"success")}catch(J){s(J.message,"error")}finally{I(J=>({...J,[A.id]:!1}))}},X=(A,$)=>{const D=document.createElement("a");D.href=A,D.download=$,D.click()},ue=async A=>{I($=>({...$,[A.id]:!0}));try{const $=await dw(o,A.title,A.visualPrompt);S(D=>D.map(J=>J.id===A.id?{...J,trailerCaption:$}:J)),s("  !","success")}catch($){s($.message,"error")}finally{I($=>({...$,[A.id]:!1}))}},ee=async()=>{if(!t)return s(" .","warning");if(!o)return s("API  .","warning");b(!0);try{const A=await cw(o,t);_(A),s(`  ${A.length} !`,"success")}catch(A){s(A.message,"error")}finally{b(!1)}},ve=async()=>{if(v.length===0)return s("   .","warning");if(!o)return s("API  .","warning");K(!0);try{const A=await fw(o,v,h,x);F(A),s("Suno  !","success")}catch(A){s(A.message,"error")}finally{K(!1)}},ie=A=>{navigator.clipboard.writeText(A),s("!","success")};return p.jsxs("div",{className:"space-y-8 animate-fade-in pb-20",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-xl relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500"}),p.jsxs("div",{className:"z-10 mb-4 md:mb-0",children:[p.jsxs("h2",{className:"text-3xl font-extrabold text-white mb-2 flex items-center gap-3",children:[p.jsx("i",{className:"fas fa-film text-red-500"}),"  (  )"]}),p.jsxs("p",{className:"text-slate-400 mb-4",children:["   ",p.jsx("span",{className:"text-red-400 font-bold",children:"5 (Hooking) "})," ."]}),p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 p-2 rounded-lg border border-slate-700 w-fit",children:[p.jsx("span",{className:"text-xs font-bold text-slate-400 px-2",children:" :"}),p.jsxs("select",{value:f,onChange:A=>m(A.target.value),className:"bg-slate-800 text-white text-sm border border-slate-600 rounded px-3 py-1.5 focus:ring-2 focus:ring-red-500 outline-none",children:[p.jsx("option",{value:"ALL",children:"  (AI  )"}),c.map((A,$)=>p.jsxs("option",{value:A.id,children:[$+1,". ",A.title]},A.id))]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 p-2 rounded-lg border border-slate-700 w-fit",children:[p.jsx("span",{className:"text-xs font-bold text-slate-400 px-2",children:" :"}),p.jsxs("select",{value:h,onChange:A=>g(A.target.value),className:"bg-slate-800 text-white text-sm border border-slate-600 rounded px-3 py-1.5 focus:ring-2 focus:ring-red-500 outline-none min-w-[150px]",children:[p.jsx("option",{value:"auto",children:" AI  ( )"}),p.jsx("option",{value:"mystery",children:" /"}),p.jsx("option",{value:"comedy",children:" / (B )"}),p.jsx("option",{value:"destiny",children:"   ( )"}),p.jsx("option",{value:"tragedy",children:"  / ()"}),p.jsx("option",{value:"revenge",children:" / ()"}),p.jsx("option",{value:"despair",children:"  /"})]})]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("button",{onClick:W,className:"bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-white px-4 py-4 rounded-full font-bold text-lg shadow-lg transition-all",title:" ",children:p.jsx("i",{className:"fas fa-trash-alt"})}),p.jsxs("button",{onClick:G,disabled:C,className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white px-8 py-4 rounded-full font-bold text-lg shadow-lg shadow-red-900/50 flex items-center gap-3 transition-all transform hover:scale-105",children:[C?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-magic"}),"   (AI)"]})]})]}),v.length>0&&p.jsxs("div",{className:"space-y-0",children:[v.map((A,$)=>{var D,J;return p.jsxs("div",{className:"relative pl-8 md:pl-12 py-6 group",children:[p.jsx("div",{className:"absolute left-4 md:left-6 top-0 bottom-0 w-0.5 bg-slate-700 group-last:bottom-auto group-last:h-1/2"}),p.jsx("div",{className:"absolute left-2 md:left-4 top-12 w-4 h-4 md:w-5 md:h-5 rounded-full bg-slate-900 border-4 border-indigo-500 z-10 shadow-lg shadow-indigo-500/50"}),p.jsx("div",{className:"bg-slate-900 rounded-xl border border-slate-700 overflow-hidden hover:border-indigo-500 transition-colors",children:p.jsxs("div",{className:"flex flex-col md:flex-row",children:[p.jsxs("div",{className:"w-full md:w-2/5 bg-black relative min-h-[250px] flex items-center justify-center border-r border-slate-800",children:[A.generatedImageUrl?p.jsx("img",{src:A.generatedImageUrl,alt:A.title,className:"w-full h-full object-cover"}):p.jsxs("div",{className:"text-center p-6",children:[p.jsx("i",{className:"fas fa-clapperboard text-4xl text-slate-700 mb-3"}),p.jsx("p",{className:"text-slate-500 text-sm",children:"  "})]}),p.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-3",children:[p.jsxs("button",{onClick:()=>Y(A),disabled:T[A.id],className:"bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-2 rounded-full font-bold shadow-lg flex items-center gap-2",children:[T[A.id]?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-paint-brush"}),A.generatedImageUrl?"  ":" "]}),A.generatedImageUrl&&p.jsxs("button",{onClick:()=>X(A.generatedImageUrl,`opening_shot_${A.sequenceNumber}.png`),className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-full font-bold shadow-lg flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-download"})," "]})]})]}),p.jsx("div",{className:"w-full md:w-3/5 p-6 flex flex-col justify-between",children:p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[p.jsxs("span",{className:"text-indigo-400",children:["#",A.sequenceNumber]})," ",A.title]}),$<v.length-1&&p.jsxs("span",{className:"text-xs bg-slate-800 text-slate-400 px-2 py-1 rounded border border-slate-700",children:["   ",p.jsx("i",{className:"fas fa-arrow-down ml-1"})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-700",children:[p.jsxs("p",{className:"text-xs font-bold text-slate-400 mb-1 uppercase",children:[p.jsx("i",{className:"fas fa-image mr-1"}),"    ()"]}),p.jsx("textarea",{value:A.visualPrompt,onChange:j=>ae(A.id,j.target.value),className:"w-full bg-slate-900 text-sm text-slate-300 border border-slate-600 rounded p-2 h-20 focus:ring-2 focus:ring-indigo-500 outline-none resize-none"})]}),p.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-700",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("p",{className:"text-xs font-bold text-green-500 uppercase",children:[p.jsx("i",{className:"fas fa-user mr-1"}),"   (Casting)"]}),p.jsxs("select",{className:"bg-slate-900 text-xs text-slate-300 border border-slate-600 rounded px-2 py-1 max-w-[120px]",onChange:j=>{j.target.value&&re(A.id,j.target.value,"add"),j.target.value=""},children:[p.jsx("option",{value:"",children:"+ "}),e&&e.map(j=>p.jsx("option",{value:j.id,children:j.name},j.id))]})]}),p.jsxs("div",{className:"flex gap-2 flex-wrap min-h-[24px]",children:[(D=A.characterIds)==null?void 0:D.map(j=>{const he=e==null?void 0:e.find(be=>be.id===j);return he?p.jsxs("div",{className:"bg-green-900/50 text-green-200 border border-green-700/50 text-xs px-2 py-1 rounded-full flex items-center gap-1",children:[p.jsx("span",{children:he.name}),p.jsx("button",{onClick:()=>re(A.id,j,"remove"),className:"hover:text-green-100",children:p.jsx("i",{className:"fas fa-times"})})]},j):null}),(!A.characterIds||A.characterIds.length===0)&&p.jsx("span",{className:"text-xs text-slate-600",children:"  "})]})]}),p.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-700",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("p",{className:"text-xs font-bold text-amber-500 uppercase",children:[p.jsx("i",{className:"fas fa-cube mr-1"}),"   (Props)"]}),p.jsxs("select",{className:"bg-slate-900 text-xs text-slate-300 border border-slate-600 rounded px-2 py-1 max-w-[120px]",onChange:j=>{j.target.value&&oe(A.id,j.target.value,"add"),j.target.value=""},children:[p.jsx("option",{value:"",children:"+ "}),u&&u.map(j=>p.jsx("option",{value:j.id,children:j.name},j.id))]})]}),p.jsxs("div",{className:"flex gap-2 flex-wrap min-h-[24px]",children:[(J=A.propIds)==null?void 0:J.map(j=>{const he=u==null?void 0:u.find(be=>be.id===j);return he?p.jsxs("div",{className:"bg-amber-900/50 text-amber-200 border border-amber-700/50 text-xs px-2 py-1 rounded-full flex items-center gap-1",children:[p.jsx("span",{children:he.name}),p.jsx("button",{onClick:()=>oe(A.id,j,"remove"),className:"hover:text-red-300",children:p.jsx("i",{className:"fas fa-times"})})]},j):null}),(!A.propIds||A.propIds.length===0)&&p.jsx("span",{className:"text-xs text-slate-600",children:"  "})]})]}),p.jsxs("div",{className:"bg-indigo-900/20 p-3 rounded-lg border border-indigo-500/30",children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsxs("p",{className:"text-xs font-bold text-indigo-300 uppercase",children:[p.jsx("i",{className:"fas fa-video mr-1"})," Veo   (JSON)"]}),p.jsxs("button",{onClick:()=>{const j=typeof A.videoPrompt=="object"?JSON.stringify(A.videoPrompt,null,2):A.videoPrompt;navigator.clipboard.writeText(j),s("JSON ","success")},className:"text-xs text-indigo-400 hover:text-white",children:[p.jsx("i",{className:"fas fa-copy"})," "]})]}),p.jsx("pre",{className:"text-[10px] text-indigo-200 font-mono bg-black/30 p-2 rounded overflow-x-auto whitespace-pre-wrap max-h-[150px]",children:typeof A.videoPrompt=="object"?JSON.stringify(A.videoPrompt,null,2):A.videoPrompt}),p.jsx("p",{className:"text-[10px] text-indigo-400/70 mt-2",children:"* Veo 'Advanced Mode'  JSON     ."})]}),p.jsxs("div",{className:"bg-purple-900/20 p-3 rounded-lg border border-purple-500/30",children:[p.jsx("div",{className:"flex justify-between items-center mb-2",children:p.jsxs("p",{className:"text-xs font-bold text-purple-300 uppercase",children:[p.jsx("i",{className:"fas fa-closed-captioning mr-1"}),"   (Trailer Caption)"]})}),p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsxs("button",{onClick:()=>ue(A),disabled:T[A.id],className:"bg-purple-600 hover:bg-purple-500 text-white text-xs px-3 py-2 rounded-lg font-bold shadow-lg flex items-center justify-center gap-2 transition-colors w-full",children:[T[A.id]?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-magic"}),"  (AI)"]}),A.trailerCaption&&p.jsxs("div",{className:"bg-slate-900/80 p-2 rounded border border-purple-500/50 flex justify-between items-center gap-2",children:[p.jsxs("span",{className:"text-sm text-white font-serif italic",children:['"',A.trailerCaption,'"']}),p.jsx("button",{onClick:()=>{navigator.clipboard.writeText(A.trailerCaption||""),s("","success")},className:"text-purple-400 hover:text-white shrink-0",title:"",children:p.jsx("i",{className:"fas fa-copy"})})]})]})]})]})]})})]})})]},A.id)}),p.jsx("div",{className:"pl-8 md:pl-12 pb-8",children:p.jsx("div",{className:"bg-slate-800/50 border border-slate-700 border-dashed rounded-xl p-4 text-center",children:p.jsxs("p",{className:"text-slate-400 text-sm",children:[p.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"})," 5   (Cliffhanger).      ."]})})}),p.jsx("div",{className:"pl-8 md:pl-12 pb-8",children:p.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 rounded-xl border border-slate-700 p-6 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500"}),p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[p.jsxs("div",{children:[p.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-music text-blue-400"}),"    (Suno AI)"]}),p.jsxs("p",{className:"text-slate-400 text-sm mt-1 mb-3",children:[" (",h,")    ",p.jsx("span",{className:"text-blue-300",children:"  "})," ."]}),p.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 p-2 rounded-lg border border-slate-700 w-fit",children:[p.jsx("span",{className:"text-xs font-bold text-slate-400 px-2",children:" :"}),p.jsxs("select",{value:x,onChange:A=>E(A.target.value),className:"bg-slate-800 text-white text-sm border border-slate-600 rounded px-3 py-1.5 focus:ring-2 focus:ring-blue-500 outline-none min-w-[150px]",children:[p.jsx("option",{value:"auto",children:"   ()"}),p.jsx("option",{value:"fast_exciting",children:" / ()"}),p.jsx("option",{value:"sad_sorrowful",children:" / ()"}),p.jsx("option",{value:"faint_hazy",children:" / ()"}),p.jsx("option",{value:"slow_mystery",children:" / ()"}),p.jsx("option",{value:"medium_story",children:" / ()"}),p.jsx("option",{value:"grand_epic",children:" / ()"})]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[P&&p.jsx("button",{onClick:()=>{confirm("  ?")&&F(null)},className:"bg-red-900/50 hover:bg-red-800 text-red-200 px-4 py-2.5 rounded-lg font-bold shadow-lg transition-all whitespace-nowrap border border-red-700/50",title:" ",children:p.jsx("i",{className:"fas fa-trash-alt"})}),p.jsxs("button",{onClick:ve,disabled:Q,className:"bg-blue-600 hover:bg-blue-500 text-white px-5 py-2.5 rounded-lg font-bold shadow-lg flex items-center gap-2 transition-all whitespace-nowrap",children:[Q?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-microphone-alt"}),P?"  ":"Suno  "]})]})]}),P&&p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-slate-950/50 rounded-lg p-6 border border-slate-800",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Song Title"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{readOnly:!0,value:P.title,className:"bg-slate-900 text-white text-lg font-bold border border-slate-700 rounded px-3 py-2 w-full focus:ring-1 focus:ring-blue-500 outline-none"}),p.jsx("button",{onClick:()=>ie(P.title),className:"bg-slate-800 hover:bg-slate-700 text-slate-300 p-3 rounded border border-slate-700",children:p.jsx("i",{className:"fas fa-copy"})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Style of Music (English - Recommended)"}),p.jsxs("div",{className:"relative",children:[p.jsx("textarea",{readOnly:!0,value:P.style_en,className:"bg-slate-900 text-blue-300 text-sm border border-slate-700 rounded p-3 w-full h-20 resize-none focus:ring-1 focus:ring-blue-500 outline-none"}),p.jsx("button",{onClick:()=>ie(P.style_en),className:"absolute top-2 right-2 text-slate-500 hover:text-white bg-slate-800/80 p-1.5 rounded",children:p.jsx("i",{className:"fas fa-copy"})})]}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"* Suno    ."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Style of Music (Korean - Experimental)"}),p.jsxs("div",{className:"relative",children:[p.jsx("textarea",{readOnly:!0,value:P.style_ko,className:"bg-slate-900 text-green-300 text-sm border border-slate-700 rounded p-3 w-full h-20 resize-none focus:ring-1 focus:ring-green-500 outline-none"}),p.jsx("button",{onClick:()=>ie(P.style_ko),className:"absolute top-2 right-2 text-slate-500 hover:text-white bg-slate-800/80 p-1.5 rounded",children:p.jsx("i",{className:"fas fa-copy"})})]}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"*  . (     )"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Lyrics (~40s)"}),p.jsxs("div",{className:"relative",children:[p.jsx("textarea",{readOnly:!0,value:P.lyrics,className:"bg-slate-900 text-slate-300 text-sm border border-slate-700 rounded p-3 w-full h-48 resize-none focus:ring-1 focus:ring-blue-500 outline-none font-mono leading-relaxed"}),p.jsx("button",{onClick:()=>ie(P.lyrics),className:"absolute top-2 right-2 text-slate-500 hover:text-white bg-slate-800/80 p-1.5 rounded",children:p.jsx("i",{className:"fas fa-copy"})})]}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:'* Suno "Lyrics"  .'})]})]})]})})]}),v.length===0&&!C&&p.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-600",children:[p.jsx("i",{className:"fas fa-film text-6xl mb-4 opacity-20"}),p.jsx("p",{className:"text-lg",children:"    ."})]}),p.jsxs("div",{className:"border-t border-slate-700 pt-10 mt-10",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[p.jsxs("div",{children:[p.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-bolt text-yellow-400"}),"    "]}),p.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"        50 ."})]}),p.jsxs("div",{className:"flex gap-2",children:[N.length>0&&p.jsx("button",{onClick:()=>{window.confirm("    ?")&&_([])},className:"bg-slate-700 hover:bg-slate-600 text-slate-300 px-4 py-3 rounded-full font-bold shadow-lg transition-all",title:"  ",children:p.jsx("i",{className:"fas fa-trash-alt"})}),p.jsxs("button",{onClick:ee,disabled:k,className:"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white px-6 py-3 rounded-full font-bold shadow-lg flex items-center gap-2 transition-all",children:[k?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-list-ol"}),"  50 "]})]})]}),N.length>0&&p.jsx("div",{className:"bg-slate-900 rounded-xl p-6 border border-slate-700 max-h-[500px] overflow-y-auto",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:N.map((A,$)=>p.jsxs("div",{onClick:()=>ie(A),className:"bg-slate-800 hover:bg-slate-700 p-3 rounded-lg border border-slate-700 hover:border-yellow-500 cursor-pointer transition-all flex justify-between items-center group",children:[p.jsx("span",{className:"text-slate-200 font-medium",children:A}),p.jsx("i",{className:"fas fa-copy text-slate-500 group-hover:text-yellow-400 opacity-0 group-hover:opacity-100 transition-opacity"})]},$))})})]})]})},Ew=()=>{const{toast:t,closeToast:e}=Vt();if(!t)return null;const n={success:"bg-green-600",error:"bg-red-600",warning:"bg-yellow-600"};return p.jsxs("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 ${n[t.type]} text-white px-6 py-3 rounded-full shadow-2xl z-[100] flex items-center gap-3 animate-fade-in-up cursor-pointer`,onClick:e,children:[p.jsx("i",{className:`fas ${t.type==="success"?"fa-check-circle":t.type==="warning"?"fa-exclamation-triangle":"fa-times-circle"}`}),p.jsx("span",{className:"font-medium",children:t.message})]})},Tw=()=>{const{modalConfig:t,closeModal:e}=Vt(),[n,o]=V.useState("");if(V.useEffect(()=>{t&&o(t.defaultValue||"")},[t]),!t)return null;const r=()=>{t.onConfirm(n),e(),o("")},i=()=>{e(),o("")};return p.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:p.jsxs("div",{className:`bg-slate-800 border border-slate-600 rounded-xl shadow-2xl w-full p-6 relative ${t.type==="textarea"?"max-w-4xl":"max-w-lg"}`,children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t.title}),p.jsx("div",{className:"text-slate-300 mb-4 whitespace-pre-wrap leading-relaxed text-sm",children:t.message}),t.type==="prompt"&&p.jsx("input",{autoFocus:!0,type:"text",className:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white mb-6 focus:ring-2 focus:ring-indigo-500 placeholder-slate-500",placeholder:" ",value:n,onChange:s=>o(s.target.value),onKeyDown:s=>{s.key==="Enter"&&r()}}),t.type==="textarea"&&p.jsx("textarea",{autoFocus:!0,className:"w-full h-[60vh] bg-slate-900 border border-slate-700 rounded p-4 text-white mb-6 focus:ring-2 focus:ring-indigo-500 placeholder-slate-500 text-sm leading-relaxed custom-scrollbar font-mono",placeholder:"  ",value:n,onChange:s=>o(s.target.value)}),p.jsxs("div",{className:"flex justify-end gap-3",children:[p.jsx("button",{onClick:i,className:"px-4 py-2 rounded-lg text-slate-300 hover:bg-slate-700 font-medium transition-colors",children:t.cancelText||""}),p.jsx("button",{onClick:r,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-2 rounded-lg font-bold transition-all shadow-lg hover:shadow-indigo-500/30",children:t.confirmText||""})]})]})})},Cw=({onOpenApiKey:t})=>{const{apiKey:e}=Vt();return p.jsxs("header",{className:"bg-slate-900 border-b border-slate-700 p-4 flex items-center justify-between sticky top-0 z-50 shadow-md",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg",children:""}),p.jsxs("h1",{className:"text-2xl font-bold text-white tracking-wide",children:["  ",p.jsx("span",{className:"text-xs text-slate-500 font-normal ml-2",children:"Ver 2.0 (Joseon Ed.)"})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[e&&p.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-slate-800 px-3 py-1.5 rounded-full border border-slate-600 mr-2",children:[p.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"}),p.jsx("span",{className:"text-xs text-slate-300 font-medium",children:""})]}),p.jsxs("button",{onClick:t,className:"bg-slate-800 hover:bg-slate-700 text-slate-200 px-4 py-2 rounded-lg border border-slate-600 flex items-center gap-2 transition-all text-sm font-medium",children:[p.jsx("i",{className:`fas fa-key ${e?"text-green-500":"text-yellow-500"}`}),e?"API  ":"API  "]})]})]})},Gs=({active:t,label:e,icon:n,onClick:o,disabled:r})=>p.jsxs("button",{onClick:o,disabled:r,className:`flex-1 py-4 text-lg font-bold flex items-center justify-center gap-3 transition-all ${t?"bg-indigo-600 text-white shadow-inner border-b-4 border-indigo-800":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white border-b-4 border-slate-900"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[p.jsx("i",{className:`fas ${n} text-xl`}),e]}),ww=({isOpen:t,onClose:e})=>{const{apiKey:n,setApiKey:o,showToast:r}=Vt(),[i,s]=V.useState(n);return t?p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[150] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"bg-slate-800 w-full max-w-md p-8 rounded-2xl border border-slate-600 shadow-2xl relative",children:[p.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:p.jsx("i",{className:"fas fa-times text-xl"})}),p.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-key text-yellow-500"})," API  "]}),p.jsx("p",{className:"text-slate-300 mb-6 text-sm",children:"Google AI Studio  Gemini API Key ."}),p.jsx("input",{type:"password",value:i,onChange:u=>s(u.target.value),placeholder:"AIzaSy...",className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-4 text-white focus:ring-2 focus:ring-indigo-500 mb-6 font-mono"}),p.jsx("button",{onClick:()=>{i?(o(i),e(),r(".","success")):r(" .","warning")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg",children:"  "}),p.jsx("div",{className:"mt-6 pt-4 border-t border-slate-700 text-center",children:p.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-400 text-sm",children:"API  "})})]})}):null},Iw=()=>{const{apiKey:t,script:e,scriptSegments:n,scenes:o,characters:r,setScenes:i,setCharacters:s,isContinuityMode:u,showToast:c,resetProject:d,openModal:f}=Vt(),[m,h]=V.useState("script"),[g,x]=V.useState(!1),[E,C]=V.useState(!1),y=async()=>{if(!t)return x(!0);if(!e.trim()&&n.length===0)return c(" !","warning");C(!0);try{let S=e,T=e;u?n.length>0&&(S=n[n.length-1].content,c(`  :  (${n[n.length-1].title})   .`,"success")):c("  :     .","success"),c("1/2: (Scene)   ...","success");const N=(await tw(t,S,[])).map((b,P)=>({...b,id:`scene-${Date.now()}-${P}`}));c("2/2:     ...","success");const k=await nw(t,T,N,u?r:[]);u?(i(N),s(b=>{const P=[...b];return k.forEach(F=>{P.findIndex(K=>K.name===F.name)===-1&&P.push(F)}),P})):(i(N),s(k)),h("sintong"),c(` !  ${N.length} .`,"success")}catch(S){c(S.message,"error")}finally{C(!1)}},v=()=>{f({type:"confirm",title:" ",message:`     ?
    .`,confirmText:"",cancelText:"",onConfirm:()=>d()})};return p.jsxs("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 font-sans selection:bg-indigo-500 selection:text-white pb-20",children:[p.jsx(Cw,{onOpenApiKey:()=>x(!0)}),p.jsxs("div",{className:"flex border-b border-slate-700 sticky top-[72px] z-40 bg-[#0f172a]",children:[p.jsx(Gs,{active:m==="script",onClick:()=>h("script"),label:"1. /",icon:"fa-file-alt"}),p.jsx(Gs,{active:m==="opening",onClick:()=>h("opening"),label:"2.  ()",icon:"fa-film"}),p.jsx(Gs,{active:m==="sintong",onClick:()=>h("sintong"),label:"3.  ( )",icon:"fa-layer-group"})]}),p.jsxs("main",{className:"max-w-6xl mx-auto p-6 min-h-[calc(100vh-140px)]",children:[m==="script"&&p.jsx(vw,{onAnalyze:y,isAnalyzing:E}),m==="opening"&&p.jsx(xw,{}),m==="sintong"&&p.jsx(Sw,{onNext:()=>{},isNextLoading:!1})]}),p.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:p.jsxs("button",{onClick:v,className:"bg-red-900/80 hover:bg-red-900 text-red-200 px-4 py-2 rounded-full text-xs border border-red-700 backdrop-blur",children:[p.jsx("i",{className:"fas fa-trash mr-1"}),"  "]})}),p.jsx(Tw,{}),p.jsx(Ew,{}),p.jsx(ww,{isOpen:g,onClose:()=>x(!1)})]})},Nw=()=>p.jsx(H0,{children:p.jsx(Iw,{})}),nm=document.getElementById("root");if(!nm)throw new Error("Could not find root element to mount to");const _w=Hs.createRoot(nm);_w.render(p.jsx(Cm.StrictMode,{children:p.jsx(Nw,{})}));
