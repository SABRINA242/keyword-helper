(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function lh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kd={exports:{}},Hi={},Yd={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yr=Symbol.for("react.element"),ah=Symbol.for("react.portal"),uh=Symbol.for("react.fragment"),ch=Symbol.for("react.strict_mode"),dh=Symbol.for("react.profiler"),fh=Symbol.for("react.provider"),ph=Symbol.for("react.context"),mh=Symbol.for("react.forward_ref"),hh=Symbol.for("react.suspense"),gh=Symbol.for("react.memo"),vh=Symbol.for("react.lazy"),ou=Symbol.iterator;function yh(t){return t===null||typeof t!="object"?null:(t=ou&&t[ou]||t["@@iterator"],typeof t=="function"?t:null)}var Xd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qd=Object.assign,jd={};function Co(t,e,n){this.props=t,this.context=e,this.refs=jd,this.updater=n||Xd}Co.prototype.isReactComponent={};Co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zd(){}Zd.prototype=Co.prototype;function Xl(t,e,n){this.props=t,this.context=e,this.refs=jd,this.updater=n||Xd}var Ql=Xl.prototype=new Zd;Ql.constructor=Xl;Qd(Ql,Co.prototype);Ql.isPureReactComponent=!0;var ru=Array.isArray,ef=Object.prototype.hasOwnProperty,jl={current:null},tf={key:!0,ref:!0,__self:!0,__source:!0};function nf(t,e,n){var o,r={},i=null,s=null;if(e!=null)for(o in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)ef.call(e,o)&&!tf.hasOwnProperty(o)&&(r[o]=e[o]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(o in u=t.defaultProps,u)r[o]===void 0&&(r[o]=u[o]);return{$$typeof:yr,type:t,key:i,ref:s,props:r,_owner:jl.current}}function xh(t,e){return{$$typeof:yr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zl(t){return typeof t=="object"&&t!==null&&t.$$typeof===yr}function Sh(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iu=/\/+/g;function ds(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Sh(""+t.key):e.toString(36)}function Yr(t,e,n,o,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case yr:case ah:s=!0}}if(s)return s=t,r=r(s),t=o===""?"."+ds(s,0):o,ru(r)?(n="",t!=null&&(n=t.replace(iu,"$&/")+"/"),Yr(r,e,n,"",function(d){return d})):r!=null&&(Zl(r)&&(r=xh(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(iu,"$&/")+"/")+t)),e.push(r)),1;if(s=0,o=o===""?".":o+":",ru(t))for(var u=0;u<t.length;u++){i=t[u];var c=o+ds(i,u);s+=Yr(i,e,n,c,r)}else if(c=yh(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=o+ds(i,u++),s+=Yr(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ir(t,e,n){if(t==null)return t;var o=[],r=0;return Yr(t,o,"","",function(i){return e.call(n,i,r++)}),o}function Eh(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ke={current:null},Xr={transition:null},Th={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:Xr,ReactCurrentOwner:jl};function of(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Ir,forEach:function(t,e,n){Ir(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ir(t,function(){e++}),e},toArray:function(t){return Ir(t,function(e){return e})||[]},only:function(t){if(!Zl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Co;re.Fragment=uh;re.Profiler=dh;re.PureComponent=Xl;re.StrictMode=ch;re.Suspense=hh;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Th;re.act=of;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=Qd({},t.props),r=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=jl.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)ef.call(e,c)&&!tf.hasOwnProperty(c)&&(o[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:yr,type:t.type,key:r,ref:i,props:o,_owner:s}};re.createContext=function(t){return t={$$typeof:ph,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fh,_context:t},t.Consumer=t};re.createElement=nf;re.createFactory=function(t){var e=nf.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:mh,render:t}};re.isValidElement=Zl;re.lazy=function(t){return{$$typeof:vh,_payload:{_status:-1,_result:t},_init:Eh}};re.memo=function(t,e){return{$$typeof:gh,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Xr.transition;Xr.transition={};try{t()}finally{Xr.transition=e}};re.unstable_act=of;re.useCallback=function(t,e){return Ke.current.useCallback(t,e)};re.useContext=function(t){return Ke.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return Ke.current.useDeferredValue(t)};re.useEffect=function(t,e){return Ke.current.useEffect(t,e)};re.useId=function(){return Ke.current.useId()};re.useImperativeHandle=function(t,e,n){return Ke.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return Ke.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return Ke.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return Ke.current.useMemo(t,e)};re.useReducer=function(t,e,n){return Ke.current.useReducer(t,e,n)};re.useRef=function(t){return Ke.current.useRef(t)};re.useState=function(t){return Ke.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return Ke.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return Ke.current.useTransition()};re.version="18.3.1";Yd.exports=re;var B=Yd.exports;const Ch=lh(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh=B,Ih=Symbol.for("react.element"),Nh=Symbol.for("react.fragment"),_h=Object.prototype.hasOwnProperty,Ah=wh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rh={key:!0,ref:!0,__self:!0,__source:!0};function rf(t,e,n){var o,r={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(o in e)_h.call(e,o)&&!Rh.hasOwnProperty(o)&&(r[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)r[o]===void 0&&(r[o]=e[o]);return{$$typeof:Ih,type:t,key:i,ref:s,props:r,_owner:Ah.current}}Hi.Fragment=Nh;Hi.jsx=rf;Hi.jsxs=rf;Kd.exports=Hi;var p=Kd.exports,Vs={},sf={exports:{}},st={},lf={exports:{}},af={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,Y){var K=D.length;D.push(Y);e:for(;0<K;){var te=K-1>>>1,he=D[te];if(0<r(he,Y))D[te]=Y,D[K]=he,K=te;else break e}}function n(D){return D.length===0?null:D[0]}function o(D){if(D.length===0)return null;var Y=D[0],K=D.pop();if(K!==Y){D[0]=K;e:for(var te=0,he=D.length,Pt=he>>>1;te<Pt;){var ie=2*(te+1)-1,Se=D[ie],ne=ie+1,J=D[ne];if(0>r(Se,K))ne<he&&0>r(J,Se)?(D[te]=J,D[ne]=K,te=ne):(D[te]=Se,D[ie]=K,te=ie);else if(ne<he&&0>r(J,K))D[te]=J,D[ne]=K,te=ne;else break e}}return Y}function r(D,Y){var K=D.sortIndex-Y.sortIndex;return K!==0?K:D.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],d=[],f=1,h=null,m=3,g=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var Y=n(d);Y!==null;){if(Y.callback===null)o(d);else if(Y.startTime<=D)o(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(d)}}function T(D){if(E=!1,x(D),!S)if(n(c)!==null)S=!0,H(I);else{var Y=n(d);Y!==null&&Z(T,Y.startTime-D)}}function I(D,Y){S=!1,E&&(E=!1,y(k),k=-1),g=!0;var K=m;try{for(x(Y),h=n(c);h!==null&&(!(h.expirationTime>Y)||D&&!O());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var he=te(h.expirationTime<=Y);Y=t.unstable_now(),typeof he=="function"?h.callback=he:h===n(c)&&o(c),x(Y)}else o(c);h=n(c)}if(h!==null)var Pt=!0;else{var ie=n(d);ie!==null&&Z(T,ie.startTime-Y),Pt=!1}return Pt}finally{h=null,m=K,g=!1}}var _=!1,A=null,k=-1,M=5,U=-1;function O(){return!(t.unstable_now()-U<M)}function X(){if(A!==null){var D=t.unstable_now();U=D;var Y=!0;try{Y=A(!0,D)}finally{Y?N():(_=!1,A=null)}}else _=!1}var N;if(typeof v=="function")N=function(){v(X)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,$=F.port2;F.port1.onmessage=X,N=function(){$.postMessage(null)}}else N=function(){C(X,0)};function H(D){A=D,_||(_=!0,N())}function Z(D,Y){k=C(function(){D(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){S||g||(S=!0,H(I))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(D){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var K=m;m=Y;try{return D()}finally{m=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,Y){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var K=m;m=D;try{return Y()}finally{m=K}},t.unstable_scheduleCallback=function(D,Y,K){var te=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?te+K:te):K=te,D){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=K+he,D={id:f++,callback:Y,priorityLevel:D,startTime:K,expirationTime:he,sortIndex:-1},K>te?(D.sortIndex=K,e(d,D),n(c)===null&&D===n(d)&&(E?(y(k),k=-1):E=!0,Z(T,K-te))):(D.sortIndex=he,e(c,D),S||g||(S=!0,H(I))),D},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(D){var Y=m;return function(){var K=m;m=Y;try{return D.apply(this,arguments)}finally{m=K}}}})(af);lf.exports=af;var Ph=lf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kh=B,it=Ph;function b(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uf=new Set,er={};function Vn(t,e){ho(t,e),ho(t+"Capture",e)}function ho(t,e){for(er[t]=e,t=0;t<e.length;t++)uf.add(e[t])}var zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bs=Object.prototype.hasOwnProperty,Mh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,su={},lu={};function bh(t){return Bs.call(lu,t)?!0:Bs.call(su,t)?!1:Mh.test(t)?lu[t]=!0:(su[t]=!0,!1)}function Dh(t,e,n,o){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Uh(t,e,n,o){if(e===null||typeof e>"u"||Dh(t,e,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ye(t,e,n,o,r,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Oe[t]=new Ye(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Oe[e]=new Ye(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Oe[t]=new Ye(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Oe[t]=new Ye(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Oe[t]=new Ye(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Oe[t]=new Ye(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Oe[t]=new Ye(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Oe[t]=new Ye(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Oe[t]=new Ye(t,5,!1,t.toLowerCase(),null,!1,!1)});var ea=/[\-:]([a-z])/g;function ta(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ea,ta);Oe[e]=new Ye(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ea,ta);Oe[e]=new Ye(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ea,ta);Oe[e]=new Ye(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Oe[t]=new Ye(t,1,!1,t.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Oe[t]=new Ye(t,1,!1,t.toLowerCase(),null,!0,!0)});function na(t,e,n,o){var r=Oe.hasOwnProperty(e)?Oe[e]:null;(r!==null?r.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Uh(e,n,r,o)&&(n=null),o||r===null?bh(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,o=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,o?t.setAttributeNS(o,e,n):t.setAttribute(e,n))))}var Xt=kh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nr=Symbol.for("react.element"),Jn=Symbol.for("react.portal"),Wn=Symbol.for("react.fragment"),oa=Symbol.for("react.strict_mode"),$s=Symbol.for("react.profiler"),cf=Symbol.for("react.provider"),df=Symbol.for("react.context"),ra=Symbol.for("react.forward_ref"),qs=Symbol.for("react.suspense"),zs=Symbol.for("react.suspense_list"),ia=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),ff=Symbol.for("react.offscreen"),au=Symbol.iterator;function Ro(t){return t===null||typeof t!="object"?null:(t=au&&t[au]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,fs;function Go(t){if(fs===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fs=e&&e[1]||""}return`
`+fs+t}var ps=!1;function ms(t,e){if(!t||ps)return"";ps=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var o=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){o=d}t.call(e.prototype)}else{try{throw Error()}catch(d){o=d}t()}}catch(d){if(d&&o&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=o.stack.split(`
`),s=r.length-1,u=i.length-1;1<=s&&0<=u&&r[s]!==i[u];)u--;for(;1<=s&&0<=u;s--,u--)if(r[s]!==i[u]){if(s!==1||u!==1)do if(s--,u--,0>u||r[s]!==i[u]){var c=`
`+r[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=u);break}}}finally{ps=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Go(t):""}function Lh(t){switch(t.tag){case 5:return Go(t.type);case 16:return Go("Lazy");case 13:return Go("Suspense");case 19:return Go("SuspenseList");case 0:case 2:case 15:return t=ms(t.type,!1),t;case 11:return t=ms(t.type.render,!1),t;case 1:return t=ms(t.type,!0),t;default:return""}}function Js(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wn:return"Fragment";case Jn:return"Portal";case $s:return"Profiler";case oa:return"StrictMode";case qs:return"Suspense";case zs:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case df:return(t.displayName||"Context")+".Consumer";case cf:return(t._context.displayName||"Context")+".Provider";case ra:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ia:return e=t.displayName||null,e!==null?e:Js(t.type)||"Memo";case tn:e=t._payload,t=t._init;try{return Js(t(e))}catch{}}return null}function Fh(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Js(e);case 8:return e===oa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Oh(t){var e=pf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){o=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(s){o=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _r(t){t._valueTracker||(t._valueTracker=Oh(t))}function mf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),o="";return t&&(o=pf(t)?t.checked?"true":"false":t.value),t=o,t!==n?(e.setValue(t),!0):!1}function ui(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ws(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uu(t,e){var n=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;n=vn(e.value!=null?e.value:n),t._wrapperState={initialChecked:o,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hf(t,e){e=e.checked,e!=null&&na(t,"checked",e,!1)}function Ks(t,e){hf(t,e);var n=vn(e.value),o=e.type;if(n!=null)o==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ys(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ys(t,e.type,vn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cu(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ys(t,e,n){(e!=="number"||ui(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ho=Array.isArray;function so(t,e,n,o){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&o&&(t[n].defaultSelected=!0)}else{for(n=""+vn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,o&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Xs(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(b(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function du(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(b(92));if(Ho(n)){if(1<n.length)throw Error(b(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vn(n)}}function gf(t,e){var n=vn(e.value),o=vn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),o!=null&&(t.defaultValue=""+o)}function fu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qs(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ar,yf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,o,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,o,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ar=Ar||document.createElement("div"),Ar.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ar.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gh=["Webkit","ms","Moz","O"];Object.keys(zo).forEach(function(t){Gh.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zo[e]=zo[t]})});function xf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zo.hasOwnProperty(t)&&zo[t]?(""+e).trim():e+"px"}function Sf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var o=n.indexOf("--")===0,r=xf(n,e[n],o);n==="float"&&(n="cssFloat"),o?t.setProperty(n,r):t[n]=r}}var Hh=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function js(t,e){if(e){if(Hh[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(b(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(b(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(b(61))}if(e.style!=null&&typeof e.style!="object")throw Error(b(62))}}function Zs(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var el=null;function sa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tl=null,lo=null,ao=null;function pu(t){if(t=Er(t)){if(typeof tl!="function")throw Error(b(280));var e=t.stateNode;e&&(e=zi(e),tl(t.stateNode,t.type,e))}}function Ef(t){lo?ao?ao.push(t):ao=[t]:lo=t}function Tf(){if(lo){var t=lo,e=ao;if(ao=lo=null,pu(t),e)for(t=0;t<e.length;t++)pu(e[t])}}function Cf(t,e){return t(e)}function wf(){}var hs=!1;function If(t,e,n){if(hs)return t(e,n);hs=!0;try{return Cf(t,e,n)}finally{hs=!1,(lo!==null||ao!==null)&&(wf(),Tf())}}function nr(t,e){var n=t.stateNode;if(n===null)return null;var o=zi(n);if(o===null)return null;n=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(b(231,e,typeof n));return n}var nl=!1;if(zt)try{var Po={};Object.defineProperty(Po,"passive",{get:function(){nl=!0}}),window.addEventListener("test",Po,Po),window.removeEventListener("test",Po,Po)}catch{nl=!1}function Vh(t,e,n,o,r,i,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Jo=!1,ci=null,di=!1,ol=null,Bh={onError:function(t){Jo=!0,ci=t}};function $h(t,e,n,o,r,i,s,u,c){Jo=!1,ci=null,Vh.apply(Bh,arguments)}function qh(t,e,n,o,r,i,s,u,c){if($h.apply(this,arguments),Jo){if(Jo){var d=ci;Jo=!1,ci=null}else throw Error(b(198));di||(di=!0,ol=d)}}function Bn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mu(t){if(Bn(t)!==t)throw Error(b(188))}function zh(t){var e=t.alternate;if(!e){if(e=Bn(t),e===null)throw Error(b(188));return e!==t?null:t}for(var n=t,o=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(o=r.return,o!==null){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return mu(r),t;if(i===o)return mu(r),e;i=i.sibling}throw Error(b(188))}if(n.return!==o.return)n=r,o=i;else{for(var s=!1,u=r.child;u;){if(u===n){s=!0,n=r,o=i;break}if(u===o){s=!0,o=r,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,o=r;break}if(u===o){s=!0,o=i,n=r;break}u=u.sibling}if(!s)throw Error(b(189))}}if(n.alternate!==o)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?t:e}function _f(t){return t=zh(t),t!==null?Af(t):null}function Af(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Af(t);if(e!==null)return e;t=t.sibling}return null}var Rf=it.unstable_scheduleCallback,hu=it.unstable_cancelCallback,Jh=it.unstable_shouldYield,Wh=it.unstable_requestPaint,_e=it.unstable_now,Kh=it.unstable_getCurrentPriorityLevel,la=it.unstable_ImmediatePriority,Pf=it.unstable_UserBlockingPriority,fi=it.unstable_NormalPriority,Yh=it.unstable_LowPriority,kf=it.unstable_IdlePriority,Vi=null,Ut=null;function Xh(t){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Vi,t,void 0,(t.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:Zh,Qh=Math.log,jh=Math.LN2;function Zh(t){return t>>>=0,t===0?32:31-(Qh(t)/jh|0)|0}var Rr=64,Pr=4194304;function Vo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pi(t,e){var n=t.pendingLanes;if(n===0)return 0;var o=0,r=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var u=s&~r;u!==0?o=Vo(u):(i&=s,i!==0&&(o=Vo(i)))}else s=n&~r,s!==0?o=Vo(s):i!==0&&(o=Vo(i));if(o===0)return 0;if(e!==0&&e!==o&&!(e&r)&&(r=o&-o,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(o&4&&(o|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=o;0<e;)n=31-wt(e),r=1<<n,o|=t[n],e&=~r;return o}function eg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tg(t,e){for(var n=t.suspendedLanes,o=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-wt(i),u=1<<s,c=r[s];c===-1?(!(u&n)||u&o)&&(r[s]=eg(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function rl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mf(){var t=Rr;return Rr<<=1,!(Rr&4194240)&&(Rr=64),t}function gs(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xr(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wt(e),t[e]=n}function ng(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-wt(n),i=1<<r;e[r]=0,o[r]=-1,t[r]=-1,n&=~i}}function aa(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var o=31-wt(n),r=1<<o;r&e|t[o]&e&&(t[o]|=e),n&=~r}}var de=0;function bf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Df,ua,Uf,Lf,Ff,il=!1,kr=[],un=null,cn=null,dn=null,or=new Map,rr=new Map,on=[],og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gu(t,e){switch(t){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":or.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rr.delete(e.pointerId)}}function ko(t,e,n,o,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Er(e),e!==null&&ua(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function rg(t,e,n,o,r){switch(e){case"focusin":return un=ko(un,t,e,n,o,r),!0;case"dragenter":return cn=ko(cn,t,e,n,o,r),!0;case"mouseover":return dn=ko(dn,t,e,n,o,r),!0;case"pointerover":var i=r.pointerId;return or.set(i,ko(or.get(i)||null,t,e,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,rr.set(i,ko(rr.get(i)||null,t,e,n,o,r)),!0}return!1}function Of(t){var e=kn(t.target);if(e!==null){var n=Bn(e);if(n!==null){if(e=n.tag,e===13){if(e=Nf(n),e!==null){t.blockedOn=e,Ff(t.priority,function(){Uf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var o=new n.constructor(n.type,n);el=o,n.target.dispatchEvent(o),el=null}else return e=Er(n),e!==null&&ua(e),t.blockedOn=n,!1;e.shift()}return!0}function vu(t,e,n){Qr(t)&&n.delete(e)}function ig(){il=!1,un!==null&&Qr(un)&&(un=null),cn!==null&&Qr(cn)&&(cn=null),dn!==null&&Qr(dn)&&(dn=null),or.forEach(vu),rr.forEach(vu)}function Mo(t,e){t.blockedOn===e&&(t.blockedOn=null,il||(il=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,ig)))}function ir(t){function e(r){return Mo(r,t)}if(0<kr.length){Mo(kr[0],t);for(var n=1;n<kr.length;n++){var o=kr[n];o.blockedOn===t&&(o.blockedOn=null)}}for(un!==null&&Mo(un,t),cn!==null&&Mo(cn,t),dn!==null&&Mo(dn,t),or.forEach(e),rr.forEach(e),n=0;n<on.length;n++)o=on[n],o.blockedOn===t&&(o.blockedOn=null);for(;0<on.length&&(n=on[0],n.blockedOn===null);)Of(n),n.blockedOn===null&&on.shift()}var uo=Xt.ReactCurrentBatchConfig,mi=!0;function sg(t,e,n,o){var r=de,i=uo.transition;uo.transition=null;try{de=1,ca(t,e,n,o)}finally{de=r,uo.transition=i}}function lg(t,e,n,o){var r=de,i=uo.transition;uo.transition=null;try{de=4,ca(t,e,n,o)}finally{de=r,uo.transition=i}}function ca(t,e,n,o){if(mi){var r=sl(t,e,n,o);if(r===null)Ns(t,e,o,hi,n),gu(t,o);else if(rg(r,t,e,n,o))o.stopPropagation();else if(gu(t,o),e&4&&-1<og.indexOf(t)){for(;r!==null;){var i=Er(r);if(i!==null&&Df(i),i=sl(t,e,n,o),i===null&&Ns(t,e,o,hi,n),i===r)break;r=i}r!==null&&o.stopPropagation()}else Ns(t,e,o,null,n)}}var hi=null;function sl(t,e,n,o){if(hi=null,t=sa(o),t=kn(t),t!==null)if(e=Bn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hi=t,null}function Gf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kh()){case la:return 1;case Pf:return 4;case fi:case Yh:return 16;case kf:return 536870912;default:return 16}default:return 16}}var sn=null,da=null,jr=null;function Hf(){if(jr)return jr;var t,e=da,n=e.length,o,r="value"in sn?sn.value:sn.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(o=1;o<=s&&e[n-o]===r[i-o];o++);return jr=r.slice(t,1<o?1-o:void 0)}function Zr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mr(){return!0}function yu(){return!1}function lt(t){function e(n,o,r,i,s){this._reactName=n,this._targetInst=r,this.type=o,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Mr:yu,this.isPropagationStopped=yu,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),e}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=lt(wo),Sr=Ce({},wo,{view:0,detail:0}),ag=lt(Sr),vs,ys,bo,Bi=Ce({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bo&&(bo&&t.type==="mousemove"?(vs=t.screenX-bo.screenX,ys=t.screenY-bo.screenY):ys=vs=0,bo=t),vs)},movementY:function(t){return"movementY"in t?t.movementY:ys}}),xu=lt(Bi),ug=Ce({},Bi,{dataTransfer:0}),cg=lt(ug),dg=Ce({},Sr,{relatedTarget:0}),xs=lt(dg),fg=Ce({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),pg=lt(fg),mg=Ce({},wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hg=lt(mg),gg=Ce({},wo,{data:0}),Su=lt(gg),vg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xg[t])?!!e[t]:!1}function pa(){return Sg}var Eg=Ce({},Sr,{key:function(t){if(t.key){var e=vg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pa,charCode:function(t){return t.type==="keypress"?Zr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tg=lt(Eg),Cg=Ce({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eu=lt(Cg),wg=Ce({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pa}),Ig=lt(wg),Ng=Ce({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_g=lt(Ng),Ag=Ce({},Bi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rg=lt(Ag),Pg=[9,13,27,32],ma=zt&&"CompositionEvent"in window,Wo=null;zt&&"documentMode"in document&&(Wo=document.documentMode);var kg=zt&&"TextEvent"in window&&!Wo,Vf=zt&&(!ma||Wo&&8<Wo&&11>=Wo),Tu=" ",Cu=!1;function Bf(t,e){switch(t){case"keyup":return Pg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $f(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kn=!1;function Mg(t,e){switch(t){case"compositionend":return $f(e);case"keypress":return e.which!==32?null:(Cu=!0,Tu);case"textInput":return t=e.data,t===Tu&&Cu?null:t;default:return null}}function bg(t,e){if(Kn)return t==="compositionend"||!ma&&Bf(t,e)?(t=Hf(),jr=da=sn=null,Kn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Vf&&e.locale!=="ko"?null:e.data;default:return null}}var Dg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dg[t.type]:e==="textarea"}function qf(t,e,n,o){Ef(o),e=gi(e,"onChange"),0<e.length&&(n=new fa("onChange","change",null,n,o),t.push({event:n,listeners:e}))}var Ko=null,sr=null;function Ug(t){tp(t,0)}function $i(t){var e=Qn(t);if(mf(e))return t}function Lg(t,e){if(t==="change")return e}var zf=!1;if(zt){var Ss;if(zt){var Es="oninput"in document;if(!Es){var Iu=document.createElement("div");Iu.setAttribute("oninput","return;"),Es=typeof Iu.oninput=="function"}Ss=Es}else Ss=!1;zf=Ss&&(!document.documentMode||9<document.documentMode)}function Nu(){Ko&&(Ko.detachEvent("onpropertychange",Jf),sr=Ko=null)}function Jf(t){if(t.propertyName==="value"&&$i(sr)){var e=[];qf(e,sr,t,sa(t)),If(Ug,e)}}function Fg(t,e,n){t==="focusin"?(Nu(),Ko=e,sr=n,Ko.attachEvent("onpropertychange",Jf)):t==="focusout"&&Nu()}function Og(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $i(sr)}function Gg(t,e){if(t==="click")return $i(e)}function Hg(t,e){if(t==="input"||t==="change")return $i(e)}function Vg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var At=typeof Object.is=="function"?Object.is:Vg;function lr(t,e){if(At(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!Bs.call(e,r)||!At(t[r],e[r]))return!1}return!0}function _u(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Au(t,e){var n=_u(t);t=0;for(var o;n;){if(n.nodeType===3){if(o=t+n.textContent.length,t<=e&&o>=e)return{node:n,offset:e-t};t=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_u(n)}}function Wf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kf(){for(var t=window,e=ui();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ui(t.document)}return e}function ha(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bg(t){var e=Kf(),n=t.focusedElem,o=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Wf(n.ownerDocument.documentElement,n)){if(o!==null&&ha(n)){if(e=o.start,t=o.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=o.end===void 0?i:Math.min(o.end,r),!t.extend&&i>o&&(r=o,o=i,i=r),r=Au(n,i);var s=Au(n,o);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>o?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $g=zt&&"documentMode"in document&&11>=document.documentMode,Yn=null,ll=null,Yo=null,al=!1;function Ru(t,e,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;al||Yn==null||Yn!==ui(o)||(o=Yn,"selectionStart"in o&&ha(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Yo&&lr(Yo,o)||(Yo=o,o=gi(ll,"onSelect"),0<o.length&&(e=new fa("onSelect","select",null,e,n),t.push({event:e,listeners:o}),e.target=Yn)))}function br(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xn={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Ts={},Yf={};zt&&(Yf=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function qi(t){if(Ts[t])return Ts[t];if(!Xn[t])return t;var e=Xn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yf)return Ts[t]=e[n];return t}var Xf=qi("animationend"),Qf=qi("animationiteration"),jf=qi("animationstart"),Zf=qi("transitionend"),ep=new Map,Pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(t,e){ep.set(t,e),Vn(e,[t])}for(var Cs=0;Cs<Pu.length;Cs++){var ws=Pu[Cs],qg=ws.toLowerCase(),zg=ws[0].toUpperCase()+ws.slice(1);Sn(qg,"on"+zg)}Sn(Xf,"onAnimationEnd");Sn(Qf,"onAnimationIteration");Sn(jf,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(Zf,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function ku(t,e,n){var o=t.type||"unknown-event";t.currentTarget=n,qh(o,e,void 0,t),t.currentTarget=null}function tp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var o=t[n],r=o.event;o=o.listeners;e:{var i=void 0;if(e)for(var s=o.length-1;0<=s;s--){var u=o[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&r.isPropagationStopped())break e;ku(r,u,d),i=c}else for(s=0;s<o.length;s++){if(u=o[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&r.isPropagationStopped())break e;ku(r,u,d),i=c}}}if(di)throw t=ol,di=!1,ol=null,t}function ge(t,e){var n=e[pl];n===void 0&&(n=e[pl]=new Set);var o=t+"__bubble";n.has(o)||(np(e,t,2,!1),n.add(o))}function Is(t,e,n){var o=0;e&&(o|=4),np(n,t,o,e)}var Dr="_reactListening"+Math.random().toString(36).slice(2);function ar(t){if(!t[Dr]){t[Dr]=!0,uf.forEach(function(n){n!=="selectionchange"&&(Jg.has(n)||Is(n,!1,t),Is(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dr]||(e[Dr]=!0,Is("selectionchange",!1,e))}}function np(t,e,n,o){switch(Gf(e)){case 1:var r=sg;break;case 4:r=lg;break;default:r=ca}n=r.bind(null,e,n,t),r=void 0,!nl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),o?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Ns(t,e,n,o,r){var i=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var s=o.tag;if(s===3||s===4){var u=o.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(s===4)for(s=o.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;s=s.return}for(;u!==null;){if(s=kn(u),s===null)return;if(c=s.tag,c===5||c===6){o=i=s;continue e}u=u.parentNode}}o=o.return}If(function(){var d=i,f=sa(n),h=[];e:{var m=ep.get(t);if(m!==void 0){var g=fa,S=t;switch(t){case"keypress":if(Zr(n)===0)break e;case"keydown":case"keyup":g=Tg;break;case"focusin":S="focus",g=xs;break;case"focusout":S="blur",g=xs;break;case"beforeblur":case"afterblur":g=xs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=cg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ig;break;case Xf:case Qf:case jf:g=pg;break;case Zf:g=_g;break;case"scroll":g=ag;break;case"wheel":g=Rg;break;case"copy":case"cut":case"paste":g=hg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Eu}var E=(e&4)!==0,C=!E&&t==="scroll",y=E?m!==null?m+"Capture":null:m;E=[];for(var v=d,x;v!==null;){x=v;var T=x.stateNode;if(x.tag===5&&T!==null&&(x=T,y!==null&&(T=nr(v,y),T!=null&&E.push(ur(v,T,x)))),C)break;v=v.return}0<E.length&&(m=new g(m,S,null,n,f),h.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==el&&(S=n.relatedTarget||n.fromElement)&&(kn(S)||S[Jt]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(S=n.relatedTarget||n.toElement,g=d,S=S?kn(S):null,S!==null&&(C=Bn(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(g=null,S=d),g!==S)){if(E=xu,T="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=Eu,T="onPointerLeave",y="onPointerEnter",v="pointer"),C=g==null?m:Qn(g),x=S==null?m:Qn(S),m=new E(T,v+"leave",g,n,f),m.target=C,m.relatedTarget=x,T=null,kn(f)===d&&(E=new E(y,v+"enter",S,n,f),E.target=x,E.relatedTarget=C,T=E),C=T,g&&S)t:{for(E=g,y=S,v=0,x=E;x;x=qn(x))v++;for(x=0,T=y;T;T=qn(T))x++;for(;0<v-x;)E=qn(E),v--;for(;0<x-v;)y=qn(y),x--;for(;v--;){if(E===y||y!==null&&E===y.alternate)break t;E=qn(E),y=qn(y)}E=null}else E=null;g!==null&&Mu(h,m,g,E,!1),S!==null&&C!==null&&Mu(h,C,S,E,!0)}}e:{if(m=d?Qn(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var I=Lg;else if(wu(m))if(zf)I=Hg;else{I=Og;var _=Fg}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(I=Gg);if(I&&(I=I(t,d))){qf(h,I,n,f);break e}_&&_(t,m,d),t==="focusout"&&(_=m._wrapperState)&&_.controlled&&m.type==="number"&&Ys(m,"number",m.value)}switch(_=d?Qn(d):window,t){case"focusin":(wu(_)||_.contentEditable==="true")&&(Yn=_,ll=d,Yo=null);break;case"focusout":Yo=ll=Yn=null;break;case"mousedown":al=!0;break;case"contextmenu":case"mouseup":case"dragend":al=!1,Ru(h,n,f);break;case"selectionchange":if($g)break;case"keydown":case"keyup":Ru(h,n,f)}var A;if(ma)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Kn?Bf(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Vf&&n.locale!=="ko"&&(Kn||k!=="onCompositionStart"?k==="onCompositionEnd"&&Kn&&(A=Hf()):(sn=f,da="value"in sn?sn.value:sn.textContent,Kn=!0)),_=gi(d,k),0<_.length&&(k=new Su(k,t,null,n,f),h.push({event:k,listeners:_}),A?k.data=A:(A=$f(n),A!==null&&(k.data=A)))),(A=kg?Mg(t,n):bg(t,n))&&(d=gi(d,"onBeforeInput"),0<d.length&&(f=new Su("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:d}),f.data=A))}tp(h,e)})}function ur(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gi(t,e){for(var n=e+"Capture",o=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=nr(t,n),i!=null&&o.unshift(ur(t,i,r)),i=nr(t,e),i!=null&&o.push(ur(t,i,r))),t=t.return}return o}function qn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mu(t,e,n,o,r){for(var i=e._reactName,s=[];n!==null&&n!==o;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===o)break;u.tag===5&&d!==null&&(u=d,r?(c=nr(n,i),c!=null&&s.unshift(ur(n,c,u))):r||(c=nr(n,i),c!=null&&s.push(ur(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Wg=/\r\n?/g,Kg=/\u0000|\uFFFD/g;function bu(t){return(typeof t=="string"?t:""+t).replace(Wg,`
`).replace(Kg,"")}function Ur(t,e,n){if(e=bu(e),bu(t)!==e&&n)throw Error(b(425))}function vi(){}var ul=null,cl=null;function dl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fl=typeof setTimeout=="function"?setTimeout:void 0,Yg=typeof clearTimeout=="function"?clearTimeout:void 0,Du=typeof Promise=="function"?Promise:void 0,Xg=typeof queueMicrotask=="function"?queueMicrotask:typeof Du<"u"?function(t){return Du.resolve(null).then(t).catch(Qg)}:fl;function Qg(t){setTimeout(function(){throw t})}function _s(t,e){var n=e,o=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(o===0){t.removeChild(r),ir(e);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=r}while(n);ir(e)}function fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Uu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Io=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Io,cr="__reactProps$"+Io,Jt="__reactContainer$"+Io,pl="__reactEvents$"+Io,jg="__reactListeners$"+Io,Zg="__reactHandles$"+Io;function kn(t){var e=t[Dt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jt]||n[Dt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Uu(t);t!==null;){if(n=t[Dt])return n;t=Uu(t)}return e}t=n,n=t.parentNode}return null}function Er(t){return t=t[Dt]||t[Jt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(b(33))}function zi(t){return t[cr]||null}var ml=[],jn=-1;function En(t){return{current:t}}function ve(t){0>jn||(t.current=ml[jn],ml[jn]=null,jn--)}function me(t,e){jn++,ml[jn]=t.current,t.current=e}var yn={},$e=En(yn),je=En(!1),Ln=yn;function go(t,e){var n=t.type.contextTypes;if(!n)return yn;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ze(t){return t=t.childContextTypes,t!=null}function yi(){ve(je),ve($e)}function Lu(t,e,n){if($e.current!==yn)throw Error(b(168));me($e,e),me(je,n)}function op(t,e,n){var o=t.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var r in o)if(!(r in e))throw Error(b(108,Fh(t)||"Unknown",r));return Ce({},n,o)}function xi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yn,Ln=$e.current,me($e,t),me(je,je.current),!0}function Fu(t,e,n){var o=t.stateNode;if(!o)throw Error(b(169));n?(t=op(t,e,Ln),o.__reactInternalMemoizedMergedChildContext=t,ve(je),ve($e),me($e,t)):ve(je),me(je,n)}var Vt=null,Ji=!1,As=!1;function rp(t){Vt===null?Vt=[t]:Vt.push(t)}function ev(t){Ji=!0,rp(t)}function Tn(){if(!As&&Vt!==null){As=!0;var t=0,e=de;try{var n=Vt;for(de=1;t<n.length;t++){var o=n[t];do o=o(!0);while(o!==null)}Vt=null,Ji=!1}catch(r){throw Vt!==null&&(Vt=Vt.slice(t+1)),Rf(la,Tn),r}finally{de=e,As=!1}}return null}var Zn=[],eo=0,Si=null,Ei=0,dt=[],ft=0,Fn=null,Bt=1,$t="";function An(t,e){Zn[eo++]=Ei,Zn[eo++]=Si,Si=t,Ei=e}function ip(t,e,n){dt[ft++]=Bt,dt[ft++]=$t,dt[ft++]=Fn,Fn=t;var o=Bt;t=$t;var r=32-wt(o)-1;o&=~(1<<r),n+=1;var i=32-wt(e)+r;if(30<i){var s=r-r%5;i=(o&(1<<s)-1).toString(32),o>>=s,r-=s,Bt=1<<32-wt(e)+r|n<<r|o,$t=i+t}else Bt=1<<i|n<<r|o,$t=t}function ga(t){t.return!==null&&(An(t,1),ip(t,1,0))}function va(t){for(;t===Si;)Si=Zn[--eo],Zn[eo]=null,Ei=Zn[--eo],Zn[eo]=null;for(;t===Fn;)Fn=dt[--ft],dt[ft]=null,$t=dt[--ft],dt[ft]=null,Bt=dt[--ft],dt[ft]=null}var rt=null,ot=null,xe=!1,Ct=null;function sp(t,e){var n=pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ou(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rt=t,ot=fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rt=t,ot=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fn!==null?{id:Bt,overflow:$t}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rt=t,ot=null,!0):!1;default:return!1}}function hl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gl(t){if(xe){var e=ot;if(e){var n=e;if(!Ou(t,e)){if(hl(t))throw Error(b(418));e=fn(n.nextSibling);var o=rt;e&&Ou(t,e)?sp(o,n):(t.flags=t.flags&-4097|2,xe=!1,rt=t)}}else{if(hl(t))throw Error(b(418));t.flags=t.flags&-4097|2,xe=!1,rt=t}}}function Gu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rt=t}function Lr(t){if(t!==rt)return!1;if(!xe)return Gu(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dl(t.type,t.memoizedProps)),e&&(e=ot)){if(hl(t))throw lp(),Error(b(418));for(;e;)sp(t,e),e=fn(e.nextSibling)}if(Gu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(b(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ot=fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ot=null}}else ot=rt?fn(t.stateNode.nextSibling):null;return!0}function lp(){for(var t=ot;t;)t=fn(t.nextSibling)}function vo(){ot=rt=null,xe=!1}function ya(t){Ct===null?Ct=[t]:Ct.push(t)}var tv=Xt.ReactCurrentBatchConfig;function Do(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var o=n.stateNode}if(!o)throw Error(b(147,t));var r=o,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var u=r.refs;s===null?delete u[i]:u[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,t))}return t}function Fr(t,e){throw t=Object.prototype.toString.call(e),Error(b(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hu(t){var e=t._init;return e(t._payload)}function ap(t){function e(y,v){if(t){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function o(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function r(y,v){return y=gn(y,v),y.index=0,y.sibling=null,y}function i(y,v,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function u(y,v,x,T){return v===null||v.tag!==6?(v=Us(x,y.mode,T),v.return=y,v):(v=r(v,x),v.return=y,v)}function c(y,v,x,T){var I=x.type;return I===Wn?f(y,v,x.props.children,T,x.key):v!==null&&(v.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===tn&&Hu(I)===v.type)?(T=r(v,x.props),T.ref=Do(y,v,x),T.return=y,T):(T=si(x.type,x.key,x.props,null,y.mode,T),T.ref=Do(y,v,x),T.return=y,T)}function d(y,v,x,T){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Ls(x,y.mode,T),v.return=y,v):(v=r(v,x.children||[]),v.return=y,v)}function f(y,v,x,T,I){return v===null||v.tag!==7?(v=Un(x,y.mode,T,I),v.return=y,v):(v=r(v,x),v.return=y,v)}function h(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Us(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Nr:return x=si(v.type,v.key,v.props,null,y.mode,x),x.ref=Do(y,null,v),x.return=y,x;case Jn:return v=Ls(v,y.mode,x),v.return=y,v;case tn:var T=v._init;return h(y,T(v._payload),x)}if(Ho(v)||Ro(v))return v=Un(v,y.mode,x,null),v.return=y,v;Fr(y,v)}return null}function m(y,v,x,T){var I=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return I!==null?null:u(y,v,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Nr:return x.key===I?c(y,v,x,T):null;case Jn:return x.key===I?d(y,v,x,T):null;case tn:return I=x._init,m(y,v,I(x._payload),T)}if(Ho(x)||Ro(x))return I!==null?null:f(y,v,x,T,null);Fr(y,x)}return null}function g(y,v,x,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return y=y.get(x)||null,u(v,y,""+T,I);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Nr:return y=y.get(T.key===null?x:T.key)||null,c(v,y,T,I);case Jn:return y=y.get(T.key===null?x:T.key)||null,d(v,y,T,I);case tn:var _=T._init;return g(y,v,x,_(T._payload),I)}if(Ho(T)||Ro(T))return y=y.get(x)||null,f(v,y,T,I,null);Fr(v,T)}return null}function S(y,v,x,T){for(var I=null,_=null,A=v,k=v=0,M=null;A!==null&&k<x.length;k++){A.index>k?(M=A,A=null):M=A.sibling;var U=m(y,A,x[k],T);if(U===null){A===null&&(A=M);break}t&&A&&U.alternate===null&&e(y,A),v=i(U,v,k),_===null?I=U:_.sibling=U,_=U,A=M}if(k===x.length)return n(y,A),xe&&An(y,k),I;if(A===null){for(;k<x.length;k++)A=h(y,x[k],T),A!==null&&(v=i(A,v,k),_===null?I=A:_.sibling=A,_=A);return xe&&An(y,k),I}for(A=o(y,A);k<x.length;k++)M=g(A,y,k,x[k],T),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?k:M.key),v=i(M,v,k),_===null?I=M:_.sibling=M,_=M);return t&&A.forEach(function(O){return e(y,O)}),xe&&An(y,k),I}function E(y,v,x,T){var I=Ro(x);if(typeof I!="function")throw Error(b(150));if(x=I.call(x),x==null)throw Error(b(151));for(var _=I=null,A=v,k=v=0,M=null,U=x.next();A!==null&&!U.done;k++,U=x.next()){A.index>k?(M=A,A=null):M=A.sibling;var O=m(y,A,U.value,T);if(O===null){A===null&&(A=M);break}t&&A&&O.alternate===null&&e(y,A),v=i(O,v,k),_===null?I=O:_.sibling=O,_=O,A=M}if(U.done)return n(y,A),xe&&An(y,k),I;if(A===null){for(;!U.done;k++,U=x.next())U=h(y,U.value,T),U!==null&&(v=i(U,v,k),_===null?I=U:_.sibling=U,_=U);return xe&&An(y,k),I}for(A=o(y,A);!U.done;k++,U=x.next())U=g(A,y,k,U.value,T),U!==null&&(t&&U.alternate!==null&&A.delete(U.key===null?k:U.key),v=i(U,v,k),_===null?I=U:_.sibling=U,_=U);return t&&A.forEach(function(X){return e(y,X)}),xe&&An(y,k),I}function C(y,v,x,T){if(typeof x=="object"&&x!==null&&x.type===Wn&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Nr:e:{for(var I=x.key,_=v;_!==null;){if(_.key===I){if(I=x.type,I===Wn){if(_.tag===7){n(y,_.sibling),v=r(_,x.props.children),v.return=y,y=v;break e}}else if(_.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===tn&&Hu(I)===_.type){n(y,_.sibling),v=r(_,x.props),v.ref=Do(y,_,x),v.return=y,y=v;break e}n(y,_);break}else e(y,_);_=_.sibling}x.type===Wn?(v=Un(x.props.children,y.mode,T,x.key),v.return=y,y=v):(T=si(x.type,x.key,x.props,null,y.mode,T),T.ref=Do(y,v,x),T.return=y,y=T)}return s(y);case Jn:e:{for(_=x.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=r(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=Ls(x,y.mode,T),v.return=y,y=v}return s(y);case tn:return _=x._init,C(y,v,_(x._payload),T)}if(Ho(x))return S(y,v,x,T);if(Ro(x))return E(y,v,x,T);Fr(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=r(v,x),v.return=y,y=v):(n(y,v),v=Us(x,y.mode,T),v.return=y,y=v),s(y)):n(y,v)}return C}var yo=ap(!0),up=ap(!1),Ti=En(null),Ci=null,to=null,xa=null;function Sa(){xa=to=Ci=null}function Ea(t){var e=Ti.current;ve(Ti),t._currentValue=e}function vl(t,e,n){for(;t!==null;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===n)break;t=t.return}}function co(t,e){Ci=t,xa=to=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qe=!0),t.firstContext=null)}function gt(t){var e=t._currentValue;if(xa!==t)if(t={context:t,memoizedValue:e,next:null},to===null){if(Ci===null)throw Error(b(308));to=t,Ci.dependencies={lanes:0,firstContext:t}}else to=to.next=t;return e}var Mn=null;function Ta(t){Mn===null?Mn=[t]:Mn.push(t)}function cp(t,e,n,o){var r=e.interleaved;return r===null?(n.next=n,Ta(e)):(n.next=r.next,r.next=n),e.interleaved=n,Wt(t,o)}function Wt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nn=!1;function Ca(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pn(t,e,n){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,le&2){var r=o.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),o.pending=e,Wt(t,n)}return r=o.interleaved,r===null?(e.next=e,Ta(o)):(e.next=r.next,r.next=e),o.interleaved=e,Wt(t,n)}function ei(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,aa(t,n)}}function Vu(t,e){var n=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wi(t,e,n,o){var r=t.updateQueue;nn=!1;var i=r.firstBaseUpdate,s=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?i=d:s.next=d,s=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;s=0,f=d=c=null,u=i;do{var m=u.lane,g=u.eventTime;if((o&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var S=t,E=u;switch(m=e,g=n,E.tag){case 1:if(S=E.payload,typeof S=="function"){h=S.call(g,h,m);break e}h=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=E.payload,m=typeof S=="function"?S.call(g,h,m):S,m==null)break e;h=Ce({},h,m);break e;case 2:nn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,m=r.effects,m===null?r.effects=[u]:m.push(u))}else g={eventTime:g,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=g,c=h):f=f.next=g,s|=m;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;m=u,u=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(f===null&&(c=h),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Gn|=s,t.lanes=s,t.memoizedState=h}}function Bu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var o=t[e],r=o.callback;if(r!==null){if(o.callback=null,o=n,typeof r!="function")throw Error(b(191,r));r.call(o)}}}var Tr={},Lt=En(Tr),dr=En(Tr),fr=En(Tr);function bn(t){if(t===Tr)throw Error(b(174));return t}function wa(t,e){switch(me(fr,e),me(dr,t),me(Lt,Tr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qs(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qs(e,t)}ve(Lt),me(Lt,e)}function xo(){ve(Lt),ve(dr),ve(fr)}function fp(t){bn(fr.current);var e=bn(Lt.current),n=Qs(e,t.type);e!==n&&(me(dr,t),me(Lt,n))}function Ia(t){dr.current===t&&(ve(Lt),ve(dr))}var Ee=En(0);function Ii(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rs=[];function Na(){for(var t=0;t<Rs.length;t++)Rs[t]._workInProgressVersionPrimary=null;Rs.length=0}var ti=Xt.ReactCurrentDispatcher,Ps=Xt.ReactCurrentBatchConfig,On=0,Te=null,Re=null,Me=null,Ni=!1,Xo=!1,pr=0,nv=0;function Ge(){throw Error(b(321))}function _a(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!At(t[n],e[n]))return!1;return!0}function Aa(t,e,n,o,r,i){if(On=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ti.current=t===null||t.memoizedState===null?sv:lv,t=n(o,r),Xo){i=0;do{if(Xo=!1,pr=0,25<=i)throw Error(b(301));i+=1,Me=Re=null,e.updateQueue=null,ti.current=av,t=n(o,r)}while(Xo)}if(ti.current=_i,e=Re!==null&&Re.next!==null,On=0,Me=Re=Te=null,Ni=!1,e)throw Error(b(300));return t}function Ra(){var t=pr!==0;return pr=0,t}function bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?Te.memoizedState=Me=t:Me=Me.next=t,Me}function vt(){if(Re===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Re.next;var e=Me===null?Te.memoizedState:Me.next;if(e!==null)Me=e,Re=t;else{if(t===null)throw Error(b(310));Re=t,t={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Me===null?Te.memoizedState=Me=t:Me=Me.next=t}return Me}function mr(t,e){return typeof e=="function"?e(t):e}function ks(t){var e=vt(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var o=Re,r=o.baseQueue,i=n.pending;if(i!==null){if(r!==null){var s=r.next;r.next=i.next,i.next=s}o.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,o=o.baseState;var u=s=null,c=null,d=i;do{var f=d.lane;if((On&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),o=d.hasEagerState?d.eagerState:t(o,d.action);else{var h={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=h,s=o):c=c.next=h,Te.lanes|=f,Gn|=f}d=d.next}while(d!==null&&d!==i);c===null?s=o:c.next=u,At(o,e.memoizedState)||(Qe=!0),e.memoizedState=o,e.baseState=s,e.baseQueue=c,n.lastRenderedState=o}if(t=n.interleaved,t!==null){r=t;do i=r.lane,Te.lanes|=i,Gn|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ms(t){var e=vt(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var o=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do i=t(i,s.action),s=s.next;while(s!==r);At(i,e.memoizedState)||(Qe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,o]}function pp(){}function mp(t,e){var n=Te,o=vt(),r=e(),i=!At(o.memoizedState,r);if(i&&(o.memoizedState=r,Qe=!0),o=o.queue,Pa(vp.bind(null,n,o,t),[t]),o.getSnapshot!==e||i||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,hr(9,gp.bind(null,n,o,r,e),void 0,null),be===null)throw Error(b(349));On&30||hp(n,e,r)}return r}function hp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gp(t,e,n,o){e.value=n,e.getSnapshot=o,yp(e)&&xp(t)}function vp(t,e,n){return n(function(){yp(e)&&xp(t)})}function yp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!At(t,n)}catch{return!0}}function xp(t){var e=Wt(t,1);e!==null&&It(e,t,1,-1)}function $u(t){var e=bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:t},e.queue=t,t=t.dispatch=iv.bind(null,Te,t),[e.memoizedState,t]}function hr(t,e,n,o){return t={tag:t,create:e,destroy:n,deps:o,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(o=n.next,n.next=t,t.next=o,e.lastEffect=t)),t}function Sp(){return vt().memoizedState}function ni(t,e,n,o){var r=bt();Te.flags|=t,r.memoizedState=hr(1|e,n,void 0,o===void 0?null:o)}function Wi(t,e,n,o){var r=vt();o=o===void 0?null:o;var i=void 0;if(Re!==null){var s=Re.memoizedState;if(i=s.destroy,o!==null&&_a(o,s.deps)){r.memoizedState=hr(e,n,i,o);return}}Te.flags|=t,r.memoizedState=hr(1|e,n,i,o)}function qu(t,e){return ni(8390656,8,t,e)}function Pa(t,e){return Wi(2048,8,t,e)}function Ep(t,e){return Wi(4,2,t,e)}function Tp(t,e){return Wi(4,4,t,e)}function Cp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wp(t,e,n){return n=n!=null?n.concat([t]):null,Wi(4,4,Cp.bind(null,e,t),n)}function ka(){}function Ip(t,e){var n=vt();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&_a(e,o[1])?o[0]:(n.memoizedState=[t,e],t)}function Np(t,e){var n=vt();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&_a(e,o[1])?o[0]:(t=t(),n.memoizedState=[t,e],t)}function _p(t,e,n){return On&21?(At(n,e)||(n=Mf(),Te.lanes|=n,Gn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qe=!0),t.memoizedState=n)}function ov(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var o=Ps.transition;Ps.transition={};try{t(!1),e()}finally{de=n,Ps.transition=o}}function Ap(){return vt().memoizedState}function rv(t,e,n){var o=hn(t);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},Rp(t))Pp(e,n);else if(n=cp(t,e,n,o),n!==null){var r=Je();It(n,t,o,r),kp(n,e,o)}}function iv(t,e,n){var o=hn(t),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rp(t))Pp(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,u=i(s,n);if(r.hasEagerState=!0,r.eagerState=u,At(u,s)){var c=e.interleaved;c===null?(r.next=r,Ta(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=cp(t,e,r,o),n!==null&&(r=Je(),It(n,t,o,r),kp(n,e,o))}}function Rp(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function Pp(t,e){Xo=Ni=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kp(t,e,n){if(n&4194240){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,aa(t,n)}}var _i={readContext:gt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},sv={readContext:gt,useCallback:function(t,e){return bt().memoizedState=[t,e===void 0?null:e],t},useContext:gt,useEffect:qu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ni(4194308,4,Cp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ni(4194308,4,t,e)},useInsertionEffect:function(t,e){return ni(4,2,t,e)},useMemo:function(t,e){var n=bt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var o=bt();return e=n!==void 0?n(e):e,o.memoizedState=o.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},o.queue=t,t=t.dispatch=rv.bind(null,Te,t),[o.memoizedState,t]},useRef:function(t){var e=bt();return t={current:t},e.memoizedState=t},useState:$u,useDebugValue:ka,useDeferredValue:function(t){return bt().memoizedState=t},useTransition:function(){var t=$u(!1),e=t[0];return t=ov.bind(null,t[1]),bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var o=Te,r=bt();if(xe){if(n===void 0)throw Error(b(407));n=n()}else{if(n=e(),be===null)throw Error(b(349));On&30||hp(o,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,qu(vp.bind(null,o,i,t),[t]),o.flags|=2048,hr(9,gp.bind(null,o,i,n,e),void 0,null),n},useId:function(){var t=bt(),e=be.identifierPrefix;if(xe){var n=$t,o=Bt;n=(o&~(1<<32-wt(o)-1)).toString(32)+n,e=":"+e+"R"+n,n=pr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lv={readContext:gt,useCallback:Ip,useContext:gt,useEffect:Pa,useImperativeHandle:wp,useInsertionEffect:Ep,useLayoutEffect:Tp,useMemo:Np,useReducer:ks,useRef:Sp,useState:function(){return ks(mr)},useDebugValue:ka,useDeferredValue:function(t){var e=vt();return _p(e,Re.memoizedState,t)},useTransition:function(){var t=ks(mr)[0],e=vt().memoizedState;return[t,e]},useMutableSource:pp,useSyncExternalStore:mp,useId:Ap,unstable_isNewReconciler:!1},av={readContext:gt,useCallback:Ip,useContext:gt,useEffect:Pa,useImperativeHandle:wp,useInsertionEffect:Ep,useLayoutEffect:Tp,useMemo:Np,useReducer:Ms,useRef:Sp,useState:function(){return Ms(mr)},useDebugValue:ka,useDeferredValue:function(t){var e=vt();return Re===null?e.memoizedState=t:_p(e,Re.memoizedState,t)},useTransition:function(){var t=Ms(mr)[0],e=vt().memoizedState;return[t,e]},useMutableSource:pp,useSyncExternalStore:mp,useId:Ap,unstable_isNewReconciler:!1};function Et(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yl(t,e,n,o){e=t.memoizedState,n=n(o,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ki={isMounted:function(t){return(t=t._reactInternals)?Bn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var o=Je(),r=hn(t),i=qt(o,r);i.payload=e,n!=null&&(i.callback=n),e=pn(t,i,r),e!==null&&(It(e,t,r,o),ei(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var o=Je(),r=hn(t),i=qt(o,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=pn(t,i,r),e!==null&&(It(e,t,r,o),ei(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Je(),o=hn(t),r=qt(n,o);r.tag=2,e!=null&&(r.callback=e),e=pn(t,r,o),e!==null&&(It(e,t,o,n),ei(e,t,o))}};function zu(t,e,n,o,r,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,i,s):e.prototype&&e.prototype.isPureReactComponent?!lr(n,o)||!lr(r,i):!0}function Mp(t,e,n){var o=!1,r=yn,i=e.contextType;return typeof i=="object"&&i!==null?i=gt(i):(r=Ze(e)?Ln:$e.current,o=e.contextTypes,i=(o=o!=null)?go(t,r):yn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ki,t.stateNode=e,e._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ju(t,e,n,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,o),e.state!==t&&Ki.enqueueReplaceState(e,e.state,null)}function xl(t,e,n,o){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ca(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=gt(i):(i=Ze(e)?Ln:$e.current,r.context=go(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(yl(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Ki.enqueueReplaceState(r,r.state,null),wi(t,n,r,o),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function So(t,e){try{var n="",o=e;do n+=Lh(o),o=o.return;while(o);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function bs(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uv=typeof WeakMap=="function"?WeakMap:Map;function bp(t,e,n){n=qt(-1,n),n.tag=3,n.payload={element:null};var o=e.value;return n.callback=function(){Ri||(Ri=!0,Pl=o),Sl(t,e)},n}function Dp(t,e,n){n=qt(-1,n),n.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var r=e.value;n.payload=function(){return o(r)},n.callback=function(){Sl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Sl(t,e),typeof o!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Wu(t,e,n){var o=t.pingCache;if(o===null){o=t.pingCache=new uv;var r=new Set;o.set(e,r)}else r=o.get(e),r===void 0&&(r=new Set,o.set(e,r));r.has(n)||(r.add(n),t=Cv.bind(null,t,e,n),e.then(t,t))}function Ku(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yu(t,e,n,o,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qt(-1,1),e.tag=2,pn(n,e,1))),n.lanes|=1),t)}var cv=Xt.ReactCurrentOwner,Qe=!1;function ze(t,e,n,o){e.child=t===null?up(e,null,n,o):yo(e,t.child,n,o)}function Xu(t,e,n,o,r){n=n.render;var i=e.ref;return co(e,r),o=Aa(t,e,n,o,i,r),n=Ra(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Kt(t,e,r)):(xe&&n&&ga(e),e.flags|=1,ze(t,e,o,r),e.child)}function Qu(t,e,n,o,r){if(t===null){var i=n.type;return typeof i=="function"&&!Ga(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Up(t,e,i,o,r)):(t=si(n.type,null,o,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:lr,n(s,o)&&t.ref===e.ref)return Kt(t,e,r)}return e.flags|=1,t=gn(i,o),t.ref=e.ref,t.return=e,e.child=t}function Up(t,e,n,o,r){if(t!==null){var i=t.memoizedProps;if(lr(i,o)&&t.ref===e.ref)if(Qe=!1,e.pendingProps=o=i,(t.lanes&r)!==0)t.flags&131072&&(Qe=!0);else return e.lanes=t.lanes,Kt(t,e,r)}return El(t,e,n,o,r)}function Lp(t,e,n){var o=e.pendingProps,r=o.children,i=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(oo,nt),nt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(oo,nt),nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=i!==null?i.baseLanes:n,me(oo,nt),nt|=o}else i!==null?(o=i.baseLanes|n,e.memoizedState=null):o=n,me(oo,nt),nt|=o;return ze(t,e,r,n),e.child}function Fp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function El(t,e,n,o,r){var i=Ze(n)?Ln:$e.current;return i=go(e,i),co(e,r),n=Aa(t,e,n,o,i,r),o=Ra(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Kt(t,e,r)):(xe&&o&&ga(e),e.flags|=1,ze(t,e,n,r),e.child)}function ju(t,e,n,o,r){if(Ze(n)){var i=!0;xi(e)}else i=!1;if(co(e,r),e.stateNode===null)oi(t,e),Mp(e,n,o),xl(e,n,o,r),o=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=gt(d):(d=Ze(n)?Ln:$e.current,d=go(e,d));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==o||c!==d)&&Ju(e,s,o,d),nn=!1;var m=e.memoizedState;s.state=m,wi(e,o,s,r),c=e.memoizedState,u!==o||m!==c||je.current||nn?(typeof f=="function"&&(yl(e,n,f,o),c=e.memoizedState),(u=nn||zu(e,n,u,o,m,c,d))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=c),s.props=o,s.state=c,s.context=d,o=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{s=e.stateNode,dp(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:Et(e.type,u),s.props=d,h=e.pendingProps,m=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=gt(c):(c=Ze(n)?Ln:$e.current,c=go(e,c));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==h||m!==c)&&Ju(e,s,o,c),nn=!1,m=e.memoizedState,s.state=m,wi(e,o,s,r);var S=e.memoizedState;u!==h||m!==S||je.current||nn?(typeof g=="function"&&(yl(e,n,g,o),S=e.memoizedState),(d=nn||zu(e,n,d,o,m,S,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(o,S,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(o,S,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=S),s.props=o,s.state=S,s.context=c,o=d):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),o=!1)}return Tl(t,e,n,o,i,r)}function Tl(t,e,n,o,r,i){Fp(t,e);var s=(e.flags&128)!==0;if(!o&&!s)return r&&Fu(e,n,!1),Kt(t,e,i);o=e.stateNode,cv.current=e;var u=s&&typeof n.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,t!==null&&s?(e.child=yo(e,t.child,null,i),e.child=yo(e,null,u,i)):ze(t,e,u,i),e.memoizedState=o.state,r&&Fu(e,n,!0),e.child}function Op(t){var e=t.stateNode;e.pendingContext?Lu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lu(t,e.context,!1),wa(t,e.containerInfo)}function Zu(t,e,n,o,r){return vo(),ya(r),e.flags|=256,ze(t,e,n,o),e.child}var Cl={dehydrated:null,treeContext:null,retryLane:0};function wl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gp(t,e,n){var o=e.pendingProps,r=Ee.current,i=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),me(Ee,r&1),t===null)return gl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=o.children,t=o.fallback,i?(o=e.mode,i=e.child,s={mode:"hidden",children:s},!(o&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Qi(s,o,0,null),t=Un(t,o,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wl(n),e.memoizedState=Cl,t):Ma(e,s));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return dv(t,e,s,o,u,r,n);if(i){i=o.fallback,s=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:o.children};return!(s&1)&&e.child!==r?(o=e.child,o.childLanes=0,o.pendingProps=c,e.deletions=null):(o=gn(r,c),o.subtreeFlags=r.subtreeFlags&14680064),u!==null?i=gn(u,i):(i=Un(i,s,n,null),i.flags|=2),i.return=e,o.return=e,o.sibling=i,e.child=o,o=i,i=e.child,s=t.child.memoizedState,s=s===null?wl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=Cl,o}return i=t.child,t=i.sibling,o=gn(i,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=n),o.return=e,o.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=o,e.memoizedState=null,o}function Ma(t,e){return e=Qi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Or(t,e,n,o){return o!==null&&ya(o),yo(e,t.child,null,n),t=Ma(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dv(t,e,n,o,r,i,s){if(n)return e.flags&256?(e.flags&=-257,o=bs(Error(b(422))),Or(t,e,s,o)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=o.fallback,r=e.mode,o=Qi({mode:"visible",children:o.children},r,0,null),i=Un(i,r,s,null),i.flags|=2,o.return=e,i.return=e,o.sibling=i,e.child=o,e.mode&1&&yo(e,t.child,null,s),e.child.memoizedState=wl(s),e.memoizedState=Cl,i);if(!(e.mode&1))return Or(t,e,s,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var u=o.dgst;return o=u,i=Error(b(419)),o=bs(i,o,void 0),Or(t,e,s,o)}if(u=(s&t.childLanes)!==0,Qe||u){if(o=be,o!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|s)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Wt(t,r),It(o,t,r,-1))}return Oa(),o=bs(Error(b(421))),Or(t,e,s,o)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=wv.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,ot=fn(r.nextSibling),rt=e,xe=!0,Ct=null,t!==null&&(dt[ft++]=Bt,dt[ft++]=$t,dt[ft++]=Fn,Bt=t.id,$t=t.overflow,Fn=e),e=Ma(e,o.children),e.flags|=4096,e)}function ec(t,e,n){t.lanes|=e;var o=t.alternate;o!==null&&(o.lanes|=e),vl(t.return,e,n)}function Ds(t,e,n,o,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function Hp(t,e,n){var o=e.pendingProps,r=o.revealOrder,i=o.tail;if(ze(t,e,o.children,n),o=Ee.current,o&2)o=o&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ec(t,n,e);else if(t.tag===19)ec(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(me(Ee,o),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ii(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ds(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ii(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ds(e,!0,n,null,i);break;case"together":Ds(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(b(153));if(e.child!==null){for(t=e.child,n=gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fv(t,e,n){switch(e.tag){case 3:Op(e),vo();break;case 5:fp(e);break;case 1:Ze(e.type)&&xi(e);break;case 4:wa(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,r=e.memoizedProps.value;me(Ti,o._currentValue),o._currentValue=r;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(me(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?Gp(t,e,n):(me(Ee,Ee.current&1),t=Kt(t,e,n),t!==null?t.sibling:null);me(Ee,Ee.current&1);break;case 19:if(o=(n&e.childLanes)!==0,t.flags&128){if(o)return Hp(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),me(Ee,Ee.current),o)break;return null;case 22:case 23:return e.lanes=0,Lp(t,e,n)}return Kt(t,e,n)}var Vp,Il,Bp,$p;Vp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Il=function(){};Bp=function(t,e,n,o){var r=t.memoizedProps;if(r!==o){t=e.stateNode,bn(Lt.current);var i=null;switch(n){case"input":r=Ws(t,r),o=Ws(t,o),i=[];break;case"select":r=Ce({},r,{value:void 0}),o=Ce({},o,{value:void 0}),i=[];break;case"textarea":r=Xs(t,r),o=Xs(t,o),i=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=vi)}js(n,o);var s;n=null;for(d in r)if(!o.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var u=r[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(er.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in o){var c=o[d];if(u=r!=null?r[d]:void 0,o.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(er.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ge("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};$p=function(t,e,n,o){n!==o&&(e.flags|=4)};function Uo(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function He(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,o=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=o,t.childLanes=n,e}function pv(t,e,n){var o=e.pendingProps;switch(va(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(e),null;case 1:return Ze(e.type)&&yi(),He(e),null;case 3:return o=e.stateNode,xo(),ve(je),ve($e),Na(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Lr(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ct!==null&&(bl(Ct),Ct=null))),Il(t,e),He(e),null;case 5:Ia(e);var r=bn(fr.current);if(n=e.type,t!==null&&e.stateNode!=null)Bp(t,e,n,o,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(b(166));return He(e),null}if(t=bn(Lt.current),Lr(e)){o=e.stateNode,n=e.type;var i=e.memoizedProps;switch(o[Dt]=e,o[cr]=i,t=(e.mode&1)!==0,n){case"dialog":ge("cancel",o),ge("close",o);break;case"iframe":case"object":case"embed":ge("load",o);break;case"video":case"audio":for(r=0;r<Bo.length;r++)ge(Bo[r],o);break;case"source":ge("error",o);break;case"img":case"image":case"link":ge("error",o),ge("load",o);break;case"details":ge("toggle",o);break;case"input":uu(o,i),ge("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},ge("invalid",o);break;case"textarea":du(o,i),ge("invalid",o)}js(n,i),r=null;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="children"?typeof u=="string"?o.textContent!==u&&(i.suppressHydrationWarning!==!0&&Ur(o.textContent,u,t),r=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Ur(o.textContent,u,t),r=["children",""+u]):er.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&ge("scroll",o)}switch(n){case"input":_r(o),cu(o,i,!0);break;case"textarea":_r(o),fu(o);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(o.onclick=vi)}o=r,e.updateQueue=o,o!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=s.createElement(n,{is:o.is}):(t=s.createElement(n),n==="select"&&(s=t,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):t=s.createElementNS(t,n),t[Dt]=e,t[cr]=o,Vp(t,e,!1,!1),e.stateNode=t;e:{switch(s=Zs(n,o),n){case"dialog":ge("cancel",t),ge("close",t),r=o;break;case"iframe":case"object":case"embed":ge("load",t),r=o;break;case"video":case"audio":for(r=0;r<Bo.length;r++)ge(Bo[r],t);r=o;break;case"source":ge("error",t),r=o;break;case"img":case"image":case"link":ge("error",t),ge("load",t),r=o;break;case"details":ge("toggle",t),r=o;break;case"input":uu(t,o),r=Ws(t,o),ge("invalid",t);break;case"option":r=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},r=Ce({},o,{value:void 0}),ge("invalid",t);break;case"textarea":du(t,o),r=Xs(t,o),ge("invalid",t);break;default:r=o}js(n,r),u=r;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?Sf(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&yf(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&tr(t,c):typeof c=="number"&&tr(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(er.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ge("scroll",t):c!=null&&na(t,i,c,s))}switch(n){case"input":_r(t),cu(t,o,!1);break;case"textarea":_r(t),fu(t);break;case"option":o.value!=null&&t.setAttribute("value",""+vn(o.value));break;case"select":t.multiple=!!o.multiple,i=o.value,i!=null?so(t,!!o.multiple,i,!1):o.defaultValue!=null&&so(t,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=vi)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return He(e),null;case 6:if(t&&e.stateNode!=null)$p(t,e,t.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(b(166));if(n=bn(fr.current),bn(Lt.current),Lr(e)){if(o=e.stateNode,n=e.memoizedProps,o[Dt]=e,(i=o.nodeValue!==n)&&(t=rt,t!==null))switch(t.tag){case 3:Ur(o.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ur(o.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[Dt]=e,e.stateNode=o}return He(e),null;case 13:if(ve(Ee),o=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&ot!==null&&e.mode&1&&!(e.flags&128))lp(),vo(),e.flags|=98560,i=!1;else if(i=Lr(e),o!==null&&o.dehydrated!==null){if(t===null){if(!i)throw Error(b(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(b(317));i[Dt]=e}else vo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),i=!1}else Ct!==null&&(bl(Ct),Ct=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Pe===0&&(Pe=3):Oa())),e.updateQueue!==null&&(e.flags|=4),He(e),null);case 4:return xo(),Il(t,e),t===null&&ar(e.stateNode.containerInfo),He(e),null;case 10:return Ea(e.type._context),He(e),null;case 17:return Ze(e.type)&&yi(),He(e),null;case 19:if(ve(Ee),i=e.memoizedState,i===null)return He(e),null;if(o=(e.flags&128)!==0,s=i.rendering,s===null)if(o)Uo(i,!1);else{if(Pe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Ii(t),s!==null){for(e.flags|=128,Uo(i,!1),o=s.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=n,n=e.child;n!==null;)i=n,t=o,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(Ee,Ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&_e()>Eo&&(e.flags|=128,o=!0,Uo(i,!1),e.lanes=4194304)}else{if(!o)if(t=Ii(s),t!==null){if(e.flags|=128,o=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Uo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!xe)return He(e),null}else 2*_e()-i.renderingStartTime>Eo&&n!==1073741824&&(e.flags|=128,o=!0,Uo(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=_e(),e.sibling=null,n=Ee.current,me(Ee,o?n&1|2:n&1),e):(He(e),null);case 22:case 23:return Fa(),o=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?nt&1073741824&&(He(e),e.subtreeFlags&6&&(e.flags|=8192)):He(e),null;case 24:return null;case 25:return null}throw Error(b(156,e.tag))}function mv(t,e){switch(va(e),e.tag){case 1:return Ze(e.type)&&yi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xo(),ve(je),ve($e),Na(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ia(e),null;case 13:if(ve(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(b(340));vo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ve(Ee),null;case 4:return xo(),null;case 10:return Ea(e.type._context),null;case 22:case 23:return Fa(),null;case 24:return null;default:return null}}var Gr=!1,Ve=!1,hv=typeof WeakSet=="function"?WeakSet:Set,W=null;function no(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){Ne(t,e,o)}else n.current=null}function Nl(t,e,n){try{n()}catch(o){Ne(t,e,o)}}var tc=!1;function gv(t,e){if(ul=mi,t=Kf(),ha(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var r=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,f=0,h=t,m=null;t:for(;;){for(var g;h!==n||r!==0&&h.nodeType!==3||(u=s+r),h!==i||o!==0&&h.nodeType!==3||(c=s+o),h.nodeType===3&&(s+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===n&&++d===r&&(u=s),m===i&&++f===o&&(c=s),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(cl={focusedElem:t,selectionRange:n},mi=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var E=S.memoizedProps,C=S.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?E:Et(e.type,E),C);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(T){Ne(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return S=tc,tc=!1,S}function Qo(t,e,n){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Nl(e,n,i)}r=r.next}while(r!==o)}}function Yi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var o=n.create;n.destroy=o()}n=n.next}while(n!==e)}}function _l(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qp(t){var e=t.alternate;e!==null&&(t.alternate=null,qp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dt],delete e[cr],delete e[pl],delete e[jg],delete e[Zg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zp(t){return t.tag===5||t.tag===3||t.tag===4}function nc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Al(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vi));else if(o!==4&&(t=t.child,t!==null))for(Al(t,e,n),t=t.sibling;t!==null;)Al(t,e,n),t=t.sibling}function Rl(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(Rl(t,e,n),t=t.sibling;t!==null;)Rl(t,e,n),t=t.sibling}var Le=null,Tt=!1;function en(t,e,n){for(n=n.child;n!==null;)Jp(t,e,n),n=n.sibling}function Jp(t,e,n){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Vi,n)}catch{}switch(n.tag){case 5:Ve||no(n,e);case 6:var o=Le,r=Tt;Le=null,en(t,e,n),Le=o,Tt=r,Le!==null&&(Tt?(t=Le,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Le.removeChild(n.stateNode));break;case 18:Le!==null&&(Tt?(t=Le,n=n.stateNode,t.nodeType===8?_s(t.parentNode,n):t.nodeType===1&&_s(t,n),ir(t)):_s(Le,n.stateNode));break;case 4:o=Le,r=Tt,Le=n.stateNode.containerInfo,Tt=!0,en(t,e,n),Le=o,Tt=r;break;case 0:case 11:case 14:case 15:if(!Ve&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var i=r,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Nl(n,e,s),r=r.next}while(r!==o)}en(t,e,n);break;case 1:if(!Ve&&(no(n,e),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){Ne(n,e,u)}en(t,e,n);break;case 21:en(t,e,n);break;case 22:n.mode&1?(Ve=(o=Ve)||n.memoizedState!==null,en(t,e,n),Ve=o):en(t,e,n);break;default:en(t,e,n)}}function oc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hv),e.forEach(function(o){var r=Iv.bind(null,t,o);n.has(o)||(n.add(o),o.then(r,r))})}}function St(t,e){var n=e.deletions;if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];try{var i=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:Le=u.stateNode,Tt=!1;break e;case 3:Le=u.stateNode.containerInfo,Tt=!0;break e;case 4:Le=u.stateNode.containerInfo,Tt=!0;break e}u=u.return}if(Le===null)throw Error(b(160));Jp(i,s,r),Le=null,Tt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ne(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wp(e,t),e=e.sibling}function Wp(t,e){var n=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(St(e,t),Mt(t),o&4){try{Qo(3,t,t.return),Yi(3,t)}catch(E){Ne(t,t.return,E)}try{Qo(5,t,t.return)}catch(E){Ne(t,t.return,E)}}break;case 1:St(e,t),Mt(t),o&512&&n!==null&&no(n,n.return);break;case 5:if(St(e,t),Mt(t),o&512&&n!==null&&no(n,n.return),t.flags&32){var r=t.stateNode;try{tr(r,"")}catch(E){Ne(t,t.return,E)}}if(o&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&hf(r,i),Zs(u,s);var d=Zs(u,i);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];f==="style"?Sf(r,h):f==="dangerouslySetInnerHTML"?yf(r,h):f==="children"?tr(r,h):na(r,f,h,d)}switch(u){case"input":Ks(r,i);break;case"textarea":gf(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?so(r,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?so(r,!!i.multiple,i.defaultValue,!0):so(r,!!i.multiple,i.multiple?[]:"",!1))}r[cr]=i}catch(E){Ne(t,t.return,E)}}break;case 6:if(St(e,t),Mt(t),o&4){if(t.stateNode===null)throw Error(b(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(E){Ne(t,t.return,E)}}break;case 3:if(St(e,t),Mt(t),o&4&&n!==null&&n.memoizedState.isDehydrated)try{ir(e.containerInfo)}catch(E){Ne(t,t.return,E)}break;case 4:St(e,t),Mt(t);break;case 13:St(e,t),Mt(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Ua=_e())),o&4&&oc(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ve=(d=Ve)||f,St(e,t),Ve=d):St(e,t),Mt(t),o&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(h=W=f;W!==null;){switch(m=W,g=m.child,m.tag){case 0:case 11:case 14:case 15:Qo(4,m,m.return);break;case 1:no(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){o=m,n=m.return;try{e=o,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(E){Ne(o,n,E)}}break;case 5:no(m,m.return);break;case 22:if(m.memoizedState!==null){ic(h);continue}}g!==null?(g.return=m,W=g):ic(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{r=h.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=xf("display",s))}catch(E){Ne(t,t.return,E)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(E){Ne(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:St(e,t),Mt(t),o&4&&oc(t);break;case 21:break;default:St(e,t),Mt(t)}}function Mt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zp(n)){var o=n;break e}n=n.return}throw Error(b(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(tr(r,""),o.flags&=-33);var i=nc(t);Rl(t,i,r);break;case 3:case 4:var s=o.stateNode.containerInfo,u=nc(t);Al(t,u,s);break;default:throw Error(b(161))}}catch(c){Ne(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vv(t,e,n){W=t,Kp(t)}function Kp(t,e,n){for(var o=(t.mode&1)!==0;W!==null;){var r=W,i=r.child;if(r.tag===22&&o){var s=r.memoizedState!==null||Gr;if(!s){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Ve;u=Gr;var d=Ve;if(Gr=s,(Ve=c)&&!d)for(W=r;W!==null;)s=W,c=s.child,s.tag===22&&s.memoizedState!==null?sc(r):c!==null?(c.return=s,W=c):sc(r);for(;i!==null;)W=i,Kp(i),i=i.sibling;W=r,Gr=u,Ve=d}rc(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,W=i):rc(t)}}function rc(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ve||Yi(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!Ve)if(n===null)o.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Et(e.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Bu(e,i,o);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bu(e,s,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&ir(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}Ve||e.flags&512&&_l(e)}catch(m){Ne(e,e.return,m)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function ic(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function sc(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yi(4,e)}catch(c){Ne(e,n,c)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var r=e.return;try{o.componentDidMount()}catch(c){Ne(e,r,c)}}var i=e.return;try{_l(e)}catch(c){Ne(e,i,c)}break;case 5:var s=e.return;try{_l(e)}catch(c){Ne(e,s,c)}}}catch(c){Ne(e,e.return,c)}if(e===t){W=null;break}var u=e.sibling;if(u!==null){u.return=e.return,W=u;break}W=e.return}}var yv=Math.ceil,Ai=Xt.ReactCurrentDispatcher,ba=Xt.ReactCurrentOwner,mt=Xt.ReactCurrentBatchConfig,le=0,be=null,Ae=null,Fe=0,nt=0,oo=En(0),Pe=0,gr=null,Gn=0,Xi=0,Da=0,jo=null,Xe=null,Ua=0,Eo=1/0,Ht=null,Ri=!1,Pl=null,mn=null,Hr=!1,ln=null,Pi=0,Zo=0,kl=null,ri=-1,ii=0;function Je(){return le&6?_e():ri!==-1?ri:ri=_e()}function hn(t){return t.mode&1?le&2&&Fe!==0?Fe&-Fe:tv.transition!==null?(ii===0&&(ii=Mf()),ii):(t=de,t!==0||(t=window.event,t=t===void 0?16:Gf(t.type)),t):1}function It(t,e,n,o){if(50<Zo)throw Zo=0,kl=null,Error(b(185));xr(t,n,o),(!(le&2)||t!==be)&&(t===be&&(!(le&2)&&(Xi|=n),Pe===4&&rn(t,Fe)),et(t,o),n===1&&le===0&&!(e.mode&1)&&(Eo=_e()+500,Ji&&Tn()))}function et(t,e){var n=t.callbackNode;tg(t,e);var o=pi(t,t===be?Fe:0);if(o===0)n!==null&&hu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=o&-o,t.callbackPriority!==e){if(n!=null&&hu(n),e===1)t.tag===0?ev(lc.bind(null,t)):rp(lc.bind(null,t)),Xg(function(){!(le&6)&&Tn()}),n=null;else{switch(bf(o)){case 1:n=la;break;case 4:n=Pf;break;case 16:n=fi;break;case 536870912:n=kf;break;default:n=fi}n=nm(n,Yp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Yp(t,e){if(ri=-1,ii=0,le&6)throw Error(b(327));var n=t.callbackNode;if(fo()&&t.callbackNode!==n)return null;var o=pi(t,t===be?Fe:0);if(o===0)return null;if(o&30||o&t.expiredLanes||e)e=ki(t,o);else{e=o;var r=le;le|=2;var i=Qp();(be!==t||Fe!==e)&&(Ht=null,Eo=_e()+500,Dn(t,e));do try{Ev();break}catch(u){Xp(t,u)}while(!0);Sa(),Ai.current=i,le=r,Ae!==null?e=0:(be=null,Fe=0,e=Pe)}if(e!==0){if(e===2&&(r=rl(t),r!==0&&(o=r,e=Ml(t,r))),e===1)throw n=gr,Dn(t,0),rn(t,o),et(t,_e()),n;if(e===6)rn(t,o);else{if(r=t.current.alternate,!(o&30)&&!xv(r)&&(e=ki(t,o),e===2&&(i=rl(t),i!==0&&(o=i,e=Ml(t,i))),e===1))throw n=gr,Dn(t,0),rn(t,o),et(t,_e()),n;switch(t.finishedWork=r,t.finishedLanes=o,e){case 0:case 1:throw Error(b(345));case 2:Rn(t,Xe,Ht);break;case 3:if(rn(t,o),(o&130023424)===o&&(e=Ua+500-_e(),10<e)){if(pi(t,0)!==0)break;if(r=t.suspendedLanes,(r&o)!==o){Je(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=fl(Rn.bind(null,t,Xe,Ht),e);break}Rn(t,Xe,Ht);break;case 4:if(rn(t,o),(o&4194240)===o)break;for(e=t.eventTimes,r=-1;0<o;){var s=31-wt(o);i=1<<s,s=e[s],s>r&&(r=s),o&=~i}if(o=r,o=_e()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*yv(o/1960))-o,10<o){t.timeoutHandle=fl(Rn.bind(null,t,Xe,Ht),o);break}Rn(t,Xe,Ht);break;case 5:Rn(t,Xe,Ht);break;default:throw Error(b(329))}}}return et(t,_e()),t.callbackNode===n?Yp.bind(null,t):null}function Ml(t,e){var n=jo;return t.current.memoizedState.isDehydrated&&(Dn(t,e).flags|=256),t=ki(t,e),t!==2&&(e=Xe,Xe=n,e!==null&&bl(e)),t}function bl(t){Xe===null?Xe=t:Xe.push.apply(Xe,t)}function xv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!At(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rn(t,e){for(e&=~Da,e&=~Xi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wt(e),o=1<<n;t[n]=-1,e&=~o}}function lc(t){if(le&6)throw Error(b(327));fo();var e=pi(t,0);if(!(e&1))return et(t,_e()),null;var n=ki(t,e);if(t.tag!==0&&n===2){var o=rl(t);o!==0&&(e=o,n=Ml(t,o))}if(n===1)throw n=gr,Dn(t,0),rn(t,e),et(t,_e()),n;if(n===6)throw Error(b(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rn(t,Xe,Ht),et(t,_e()),null}function La(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Eo=_e()+500,Ji&&Tn())}}function Hn(t){ln!==null&&ln.tag===0&&!(le&6)&&fo();var e=le;le|=1;var n=mt.transition,o=de;try{if(mt.transition=null,de=1,t)return t()}finally{de=o,mt.transition=n,le=e,!(le&6)&&Tn()}}function Fa(){nt=oo.current,ve(oo)}function Dn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yg(n)),Ae!==null)for(n=Ae.return;n!==null;){var o=n;switch(va(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&yi();break;case 3:xo(),ve(je),ve($e),Na();break;case 5:Ia(o);break;case 4:xo();break;case 13:ve(Ee);break;case 19:ve(Ee);break;case 10:Ea(o.type._context);break;case 22:case 23:Fa()}n=n.return}if(be=t,Ae=t=gn(t.current,null),Fe=nt=e,Pe=0,gr=null,Da=Xi=Gn=0,Xe=jo=null,Mn!==null){for(e=0;e<Mn.length;e++)if(n=Mn[e],o=n.interleaved,o!==null){n.interleaved=null;var r=o.next,i=n.pending;if(i!==null){var s=i.next;i.next=r,o.next=s}n.pending=o}Mn=null}return t}function Xp(t,e){do{var n=Ae;try{if(Sa(),ti.current=_i,Ni){for(var o=Te.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}Ni=!1}if(On=0,Me=Re=Te=null,Xo=!1,pr=0,ba.current=null,n===null||n.return===null){Pe=1,gr=e,Ae=null;break}e:{var i=t,s=n.return,u=n,c=e;if(e=Fe,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=Ku(s);if(g!==null){g.flags&=-257,Yu(g,s,u,i,e),g.mode&1&&Wu(i,d,e),e=g,c=d;var S=e.updateQueue;if(S===null){var E=new Set;E.add(c),e.updateQueue=E}else S.add(c);break e}else{if(!(e&1)){Wu(i,d,e),Oa();break e}c=Error(b(426))}}else if(xe&&u.mode&1){var C=Ku(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Yu(C,s,u,i,e),ya(So(c,u));break e}}i=c=So(c,u),Pe!==4&&(Pe=2),jo===null?jo=[i]:jo.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=bp(i,c,e);Vu(i,y);break e;case 1:u=c;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(mn===null||!mn.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=Dp(i,u,e);Vu(i,T);break e}}i=i.return}while(i!==null)}Zp(n)}catch(I){e=I,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(!0)}function Qp(){var t=Ai.current;return Ai.current=_i,t===null?_i:t}function Oa(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),be===null||!(Gn&268435455)&&!(Xi&268435455)||rn(be,Fe)}function ki(t,e){var n=le;le|=2;var o=Qp();(be!==t||Fe!==e)&&(Ht=null,Dn(t,e));do try{Sv();break}catch(r){Xp(t,r)}while(!0);if(Sa(),le=n,Ai.current=o,Ae!==null)throw Error(b(261));return be=null,Fe=0,Pe}function Sv(){for(;Ae!==null;)jp(Ae)}function Ev(){for(;Ae!==null&&!Jh();)jp(Ae)}function jp(t){var e=tm(t.alternate,t,nt);t.memoizedProps=t.pendingProps,e===null?Zp(t):Ae=e,ba.current=null}function Zp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mv(n,e),n!==null){n.flags&=32767,Ae=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pe=6,Ae=null;return}}else if(n=pv(n,e,nt),n!==null){Ae=n;return}if(e=e.sibling,e!==null){Ae=e;return}Ae=e=t}while(e!==null);Pe===0&&(Pe=5)}function Rn(t,e,n){var o=de,r=mt.transition;try{mt.transition=null,de=1,Tv(t,e,n,o)}finally{mt.transition=r,de=o}return null}function Tv(t,e,n,o){do fo();while(ln!==null);if(le&6)throw Error(b(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(b(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ng(t,i),t===be&&(Ae=be=null,Fe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hr||(Hr=!0,nm(fi,function(){return fo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mt.transition,mt.transition=null;var s=de;de=1;var u=le;le|=4,ba.current=null,gv(t,n),Wp(n,t),Bg(cl),mi=!!ul,cl=ul=null,t.current=n,vv(n),Wh(),le=u,de=s,mt.transition=i}else t.current=n;if(Hr&&(Hr=!1,ln=t,Pi=r),i=t.pendingLanes,i===0&&(mn=null),Xh(n.stateNode),et(t,_e()),e!==null)for(o=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(Ri)throw Ri=!1,t=Pl,Pl=null,t;return Pi&1&&t.tag!==0&&fo(),i=t.pendingLanes,i&1?t===kl?Zo++:(Zo=0,kl=t):Zo=0,Tn(),null}function fo(){if(ln!==null){var t=bf(Pi),e=mt.transition,n=de;try{if(mt.transition=null,de=16>t?16:t,ln===null)var o=!1;else{if(t=ln,ln=null,Pi=0,le&6)throw Error(b(331));var r=le;for(le|=4,W=t.current;W!==null;){var i=W,s=i.child;if(W.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(W=d;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:Qo(8,f,i)}var h=f.child;if(h!==null)h.return=f,W=h;else for(;W!==null;){f=W;var m=f.sibling,g=f.return;if(qp(f),f===d){W=null;break}if(m!==null){m.return=g,W=m;break}W=g}}}var S=i.alternate;if(S!==null){var E=S.child;if(E!==null){S.child=null;do{var C=E.sibling;E.sibling=null,E=C}while(E!==null)}}W=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,W=s;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qo(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,W=y;break e}W=i.return}}var v=t.current;for(W=v;W!==null;){s=W;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,W=x;else e:for(s=v;W!==null;){if(u=W,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Yi(9,u)}}catch(I){Ne(u,u.return,I)}if(u===s){W=null;break e}var T=u.sibling;if(T!==null){T.return=u.return,W=T;break e}W=u.return}}if(le=r,Tn(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Vi,t)}catch{}o=!0}return o}finally{de=n,mt.transition=e}}return!1}function ac(t,e,n){e=So(n,e),e=bp(t,e,1),t=pn(t,e,1),e=Je(),t!==null&&(xr(t,1,e),et(t,e))}function Ne(t,e,n){if(t.tag===3)ac(t,t,n);else for(;e!==null;){if(e.tag===3){ac(e,t,n);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(mn===null||!mn.has(o))){t=So(n,t),t=Dp(e,t,1),e=pn(e,t,1),t=Je(),e!==null&&(xr(e,1,t),et(e,t));break}}e=e.return}}function Cv(t,e,n){var o=t.pingCache;o!==null&&o.delete(e),e=Je(),t.pingedLanes|=t.suspendedLanes&n,be===t&&(Fe&n)===n&&(Pe===4||Pe===3&&(Fe&130023424)===Fe&&500>_e()-Ua?Dn(t,0):Da|=n),et(t,e)}function em(t,e){e===0&&(t.mode&1?(e=Pr,Pr<<=1,!(Pr&130023424)&&(Pr=4194304)):e=1);var n=Je();t=Wt(t,e),t!==null&&(xr(t,e,n),et(t,n))}function wv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),em(t,n)}function Iv(t,e){var n=0;switch(t.tag){case 13:var o=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(b(314))}o!==null&&o.delete(e),em(t,n)}var tm;tm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||je.current)Qe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qe=!1,fv(t,e,n);Qe=!!(t.flags&131072)}else Qe=!1,xe&&e.flags&1048576&&ip(e,Ei,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;oi(t,e),t=e.pendingProps;var r=go(e,$e.current);co(e,n),r=Aa(null,e,o,t,r,n);var i=Ra();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ze(o)?(i=!0,xi(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ca(e),r.updater=Ki,e.stateNode=r,r._reactInternals=e,xl(e,o,t,n),e=Tl(null,e,o,!0,i,n)):(e.tag=0,xe&&i&&ga(e),ze(null,e,r,n),e=e.child),e;case 16:o=e.elementType;e:{switch(oi(t,e),t=e.pendingProps,r=o._init,o=r(o._payload),e.type=o,r=e.tag=_v(o),t=Et(o,t),r){case 0:e=El(null,e,o,t,n);break e;case 1:e=ju(null,e,o,t,n);break e;case 11:e=Xu(null,e,o,t,n);break e;case 14:e=Qu(null,e,o,Et(o.type,t),n);break e}throw Error(b(306,o,""))}return e;case 0:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Et(o,r),El(t,e,o,r,n);case 1:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Et(o,r),ju(t,e,o,r,n);case 3:e:{if(Op(e),t===null)throw Error(b(387));o=e.pendingProps,i=e.memoizedState,r=i.element,dp(t,e),wi(e,o,null,n);var s=e.memoizedState;if(o=s.element,i.isDehydrated)if(i={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=So(Error(b(423)),e),e=Zu(t,e,o,n,r);break e}else if(o!==r){r=So(Error(b(424)),e),e=Zu(t,e,o,n,r);break e}else for(ot=fn(e.stateNode.containerInfo.firstChild),rt=e,xe=!0,Ct=null,n=up(e,null,o,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vo(),o===r){e=Kt(t,e,n);break e}ze(t,e,o,n)}e=e.child}return e;case 5:return fp(e),t===null&&gl(e),o=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,s=r.children,dl(o,r)?s=null:i!==null&&dl(o,i)&&(e.flags|=32),Fp(t,e),ze(t,e,s,n),e.child;case 6:return t===null&&gl(e),null;case 13:return Gp(t,e,n);case 4:return wa(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=yo(e,null,o,n):ze(t,e,o,n),e.child;case 11:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Et(o,r),Xu(t,e,o,r,n);case 7:return ze(t,e,e.pendingProps,n),e.child;case 8:return ze(t,e,e.pendingProps.children,n),e.child;case 12:return ze(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(o=e.type._context,r=e.pendingProps,i=e.memoizedProps,s=r.value,me(Ti,o._currentValue),o._currentValue=s,i!==null)if(At(i.value,s)){if(i.children===r.children&&!je.current){e=Kt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){s=i.child;for(var c=u.firstContext;c!==null;){if(c.context===o){if(i.tag===1){c=qt(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),vl(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(b(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),vl(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}ze(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,o=e.pendingProps.children,co(e,n),r=gt(r),o=o(r),e.flags|=1,ze(t,e,o,n),e.child;case 14:return o=e.type,r=Et(o,e.pendingProps),r=Et(o.type,r),Qu(t,e,o,r,n);case 15:return Up(t,e,e.type,e.pendingProps,n);case 17:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Et(o,r),oi(t,e),e.tag=1,Ze(o)?(t=!0,xi(e)):t=!1,co(e,n),Mp(e,o,r),xl(e,o,r,n),Tl(null,e,o,!0,t,n);case 19:return Hp(t,e,n);case 22:return Lp(t,e,n)}throw Error(b(156,e.tag))};function nm(t,e){return Rf(t,e)}function Nv(t,e,n,o){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(t,e,n,o){return new Nv(t,e,n,o)}function Ga(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _v(t){if(typeof t=="function")return Ga(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ra)return 11;if(t===ia)return 14}return 2}function gn(t,e){var n=t.alternate;return n===null?(n=pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function si(t,e,n,o,r,i){var s=2;if(o=t,typeof t=="function")Ga(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Wn:return Un(n.children,r,i,e);case oa:s=8,r|=8;break;case $s:return t=pt(12,n,e,r|2),t.elementType=$s,t.lanes=i,t;case qs:return t=pt(13,n,e,r),t.elementType=qs,t.lanes=i,t;case zs:return t=pt(19,n,e,r),t.elementType=zs,t.lanes=i,t;case ff:return Qi(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cf:s=10;break e;case df:s=9;break e;case ra:s=11;break e;case ia:s=14;break e;case tn:s=16,o=null;break e}throw Error(b(130,t==null?t:typeof t,""))}return e=pt(s,n,e,r),e.elementType=t,e.type=o,e.lanes=i,e}function Un(t,e,n,o){return t=pt(7,t,o,e),t.lanes=n,t}function Qi(t,e,n,o){return t=pt(22,t,o,e),t.elementType=ff,t.lanes=n,t.stateNode={isHidden:!1},t}function Us(t,e,n){return t=pt(6,t,null,e),t.lanes=n,t}function Ls(t,e,n){return e=pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Av(t,e,n,o,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gs(0),this.expirationTimes=gs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gs(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ha(t,e,n,o,r,i,s,u,c){return t=new Av(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=pt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ca(i),t}function Rv(t,e,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jn,key:o==null?null:""+o,children:t,containerInfo:e,implementation:n}}function om(t){if(!t)return yn;t=t._reactInternals;e:{if(Bn(t)!==t||t.tag!==1)throw Error(b(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ze(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(b(171))}if(t.tag===1){var n=t.type;if(Ze(n))return op(t,n,e)}return e}function rm(t,e,n,o,r,i,s,u,c){return t=Ha(n,o,!0,t,r,i,s,u,c),t.context=om(null),n=t.current,o=Je(),r=hn(n),i=qt(o,r),i.callback=e??null,pn(n,i,r),t.current.lanes=r,xr(t,r,o),et(t,o),t}function ji(t,e,n,o){var r=e.current,i=Je(),s=hn(r);return n=om(n),e.context===null?e.context=n:e.pendingContext=n,e=qt(i,s),e.payload={element:t},o=o===void 0?null:o,o!==null&&(e.callback=o),t=pn(r,e,s),t!==null&&(It(t,r,s,i),ei(t,r,s)),s}function Mi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Va(t,e){uc(t,e),(t=t.alternate)&&uc(t,e)}function Pv(){return null}var im=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ba(t){this._internalRoot=t}Zi.prototype.render=Ba.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(b(409));ji(t,e,null,null)};Zi.prototype.unmount=Ba.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hn(function(){ji(null,t,null,null)}),e[Jt]=null}};function Zi(t){this._internalRoot=t}Zi.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<on.length&&e!==0&&e<on[n].priority;n++);on.splice(n,0,t),n===0&&Of(t)}};function $a(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function es(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cc(){}function kv(t,e,n,o,r){if(r){if(typeof o=="function"){var i=o;o=function(){var d=Mi(s);i.call(d)}}var s=rm(e,o,t,0,null,!1,!1,"",cc);return t._reactRootContainer=s,t[Jt]=s.current,ar(t.nodeType===8?t.parentNode:t),Hn(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof o=="function"){var u=o;o=function(){var d=Mi(c);u.call(d)}}var c=Ha(t,0,!1,null,null,!1,!1,"",cc);return t._reactRootContainer=c,t[Jt]=c.current,ar(t.nodeType===8?t.parentNode:t),Hn(function(){ji(e,c,n,o)}),c}function ts(t,e,n,o,r){var i=n._reactRootContainer;if(i){var s=i;if(typeof r=="function"){var u=r;r=function(){var c=Mi(s);u.call(c)}}ji(e,s,t,r)}else s=kv(n,e,t,r,o);return Mi(s)}Df=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vo(e.pendingLanes);n!==0&&(aa(e,n|1),et(e,_e()),!(le&6)&&(Eo=_e()+500,Tn()))}break;case 13:Hn(function(){var o=Wt(t,1);if(o!==null){var r=Je();It(o,t,1,r)}}),Va(t,1)}};ua=function(t){if(t.tag===13){var e=Wt(t,134217728);if(e!==null){var n=Je();It(e,t,134217728,n)}Va(t,134217728)}};Uf=function(t){if(t.tag===13){var e=hn(t),n=Wt(t,e);if(n!==null){var o=Je();It(n,t,e,o)}Va(t,e)}};Lf=function(){return de};Ff=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};tl=function(t,e,n){switch(e){case"input":if(Ks(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var o=n[e];if(o!==t&&o.form===t.form){var r=zi(o);if(!r)throw Error(b(90));mf(o),Ks(o,r)}}}break;case"textarea":gf(t,n);break;case"select":e=n.value,e!=null&&so(t,!!n.multiple,e,!1)}};Cf=La;wf=Hn;var Mv={usingClientEntryPoint:!1,Events:[Er,Qn,zi,Ef,Tf,La]},Lo={findFiberByHostInstance:kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bv={bundleType:Lo.bundleType,version:Lo.version,rendererPackageName:Lo.rendererPackageName,rendererConfig:Lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_f(t),t===null?null:t.stateNode},findFiberByHostInstance:Lo.findFiberByHostInstance||Pv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vr.isDisabled&&Vr.supportsFiber)try{Vi=Vr.inject(bv),Ut=Vr}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mv;st.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$a(e))throw Error(b(200));return Rv(t,e,null,n)};st.createRoot=function(t,e){if(!$a(t))throw Error(b(299));var n=!1,o="",r=im;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Ha(t,1,!1,null,null,n,!1,o,r),t[Jt]=e.current,ar(t.nodeType===8?t.parentNode:t),new Ba(e)};st.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(b(188)):(t=Object.keys(t).join(","),Error(b(268,t)));return t=_f(e),t=t===null?null:t.stateNode,t};st.flushSync=function(t){return Hn(t)};st.hydrate=function(t,e,n){if(!es(e))throw Error(b(200));return ts(null,t,e,!0,n)};st.hydrateRoot=function(t,e,n){if(!$a(t))throw Error(b(405));var o=n!=null&&n.hydratedSources||null,r=!1,i="",s=im;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=rm(e,null,t,1,n??null,r,!1,i,s),t[Jt]=e.current,ar(t),o)for(t=0;t<o.length;t++)n=o[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Zi(e)};st.render=function(t,e,n){if(!es(e))throw Error(b(200));return ts(null,t,e,!1,n)};st.unmountComponentAtNode=function(t){if(!es(t))throw Error(b(40));return t._reactRootContainer?(Hn(function(){ts(null,null,t,!1,function(){t._reactRootContainer=null,t[Jt]=null})}),!0):!1};st.unstable_batchedUpdates=La;st.unstable_renderSubtreeIntoContainer=function(t,e,n,o){if(!es(n))throw Error(b(200));if(t==null||t._reactInternals===void 0)throw Error(b(38));return ts(t,e,n,!1,o)};st.version="18.3.1-next-f1338f8080-20240426";function sm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sm)}catch(t){console.error(t)}}sm(),sf.exports=st;var Dv=sf.exports,dc=Dv;Vs.createRoot=dc.createRoot,Vs.hydrateRoot=dc.hydrateRoot;let Br;const Uv=new Uint8Array(16);function Lv(){if(!Br&&(Br=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Br))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Br(Uv)}const Ue=[];for(let t=0;t<256;++t)Ue.push((t+256).toString(16).slice(1));function Fv(t,e=0){return Ue[t[e+0]]+Ue[t[e+1]]+Ue[t[e+2]]+Ue[t[e+3]]+"-"+Ue[t[e+4]]+Ue[t[e+5]]+"-"+Ue[t[e+6]]+Ue[t[e+7]]+"-"+Ue[t[e+8]]+Ue[t[e+9]]+"-"+Ue[t[e+10]]+Ue[t[e+11]]+Ue[t[e+12]]+Ue[t[e+13]]+Ue[t[e+14]]+Ue[t[e+15]]}const Ov=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fc={randomUUID:Ov};function Fs(t,e,n){if(fc.randomUUID&&!t)return fc.randomUUID();t=t||{};const o=t.random||(t.rng||Lv)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,Fv(o)}const Gv="SintongBangtongDB",xn="projects",qa=()=>new Promise((t,e)=>{if(typeof window>"u"||!window.indexedDB){e(new Error("IndexedDB is not supported"));return}const n=indexedDB.open(Gv,1);n.onupgradeneeded=o=>{const r=o.target.result;r.objectStoreNames.contains(xn)||r.createObjectStore(xn)},n.onsuccess=()=>t(n.result),n.onerror=()=>e(n.error)}),$o=async(t,e)=>{try{const n=await qa();return new Promise((o,r)=>{const u=n.transaction(xn,"readwrite").objectStore(xn).put(e,t);u.onsuccess=()=>o(),u.onerror=()=>r(u.error)})}catch(n){console.error("IndexedDB Save Error:",n)}},Dl=async t=>{try{const e=await qa();return new Promise((n,o)=>{const s=e.transaction(xn,"readonly").objectStore(xn).get(t);s.onsuccess=()=>n(s.result),s.onerror=()=>o(s.error)})}catch(e){return console.error("IndexedDB Load Error:",e),null}},Ul=async t=>{try{const e=await qa();return new Promise((n,o)=>{const s=e.transaction(xn,"readwrite").objectStore(xn).delete(t);s.onsuccess=()=>n(),s.onerror=()=>o(s.error)})}catch(e){console.error("IndexedDB Delete Error:",e)}},lm=B.createContext(void 0),pc=`[  ]
1. :    . (  ,      )
2.   ():
   -   **()  ** . (     ).
   -       .
   -  :  ** **. (   ).
   -  : , ,   .
3.   ():
   -    .   .
   -  :  (),   /, , ,  .
   -   .`,Hv=({children:t})=>{const[e,n]=B.useState(""),[o,r]=B.useState(""),[i,s]=B.useState([]),[u,c]=B.useState("webtoon"),[d,f]=B.useState("16:9"),[h,m]=B.useState([]),[g,S]=B.useState([]),[E,C]=B.useState([]),[y,v]=B.useState([]),[x,T]=B.useState(!0),[I,_]=B.useState(pc),[A,k]=B.useState(!1),[M,U]=B.useState(null),[O,X]=B.useState(null);B.useEffect(()=>{if(i.length>0){const ie=i.map(Se=>`[${Se.title}]
${Se.content}`).join(`

`);r(ie)}},[i]),B.useEffect(()=>{(async()=>{const Se=localStorage.getItem("sb_api_key");Se&&n(Se);try{let ne=await Dl("currentProject");if(!ne){const J=localStorage.getItem("sb_project_data");if(J)try{ne=JSON.parse(J)}catch(we){console.error("Failed to parse LocalStorage data",we)}}ne&&(r(ne.script||""),ne.scriptSegments&&ne.scriptSegments.length>0?s(ne.scriptSegments):ne.script&&!ne.scriptSegments&&s([{id:Fs(),title:" ",content:ne.script}]),c(ne.selectedStyle||"webtoon"),m(ne.scenes||[]),S(ne.characters||[]),C(ne.referenceImages||[]),v(ne.props||[]),ne.globalAspectRatio&&f(ne.globalAspectRatio),ne.globalScenePrompt&&_(ne.globalScenePrompt))}catch(ne){console.error("Load failed",ne)}finally{k(!0)}})()},[]);const N=ie=>{r(ie),i.length===0&&s([{id:Fs(),title:" ",content:ie}])},F=(ie,Se)=>{const ne={id:Fs(),title:ie,content:Se};s(J=>[...J,ne])},$=ie=>{s(Se=>Se.filter(ne=>ne.id!==ie))},H=(ie,Se)=>{s(ne=>ne.map(J=>J.id===ie?{...J,content:Se}:J))},Z=()=>{s([]),r("")},D=()=>{$o("currentProject",{script:o,scriptSegments:i,selectedStyle:u,scenes:h,characters:g,referenceImages:E,props:y,globalAspectRatio:d,globalScenePrompt:I}).catch(Se=>{console.warn("Failed to save to IndexedDB",Se),K("   (   )","error")})};B.useEffect(()=>{if(!A)return;const ie=setTimeout(D,2e3);return()=>clearTimeout(ie)},[o,i,u,h,g,E,y,d,I,A]),B.useEffect(()=>{e&&localStorage.setItem("sb_api_key",e)},[e]);const Y=async()=>{r(""),s([]),m([]),S([]),C([]),v([]),_(pc),localStorage.removeItem("sb_project_data"),await Ul("currentProject"),K(" . (  )","success")},K=(ie,Se="success")=>{U({message:ie,type:Se})},te=()=>U(null),he=ie=>X(ie),Pt=()=>X(null);return p.jsx(lm.Provider,{value:{apiKey:e,setApiKey:n,script:o,setScript:N,scriptSegments:i,addScriptSegment:F,removeScriptSegment:$,updateScriptSegment:H,clearScriptSegments:Z,selectedStyle:u,setSelectedStyle:c,globalAspectRatio:d,setGlobalAspectRatio:f,scenes:h,setScenes:m,characters:g,setCharacters:S,referenceImages:E,setReferenceImages:C,props:y,setProps:v,isContinuityMode:x,setIsContinuityMode:T,globalScenePrompt:I,setGlobalScenePrompt:_,saveProject:D,resetProject:Y,toast:M,showToast:K,closeToast:te,modalConfig:O,openModal:he,closeModal:Pt},children:t})},Ft=()=>{const t=B.useContext(lm);if(!t)throw new Error("useProject must be used within a ProjectProvider");return t};var Vv={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Bv,$v;function qv(){return{geminiUrl:Bv,vertexUrl:$v}}function zv(t,e,n,o){var r,i;if(!(t!=null&&t.baseUrl)){const s=qv();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(i=s.geminiUrl)!==null&&i!==void 0?i:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qt{}function z(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function a(t,e,n){for(let i=0;i<e.length-1;i++){const s=e[i];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];a(f,e.slice(i+1),n[d])}else for(const d of c)a(d,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];a(c[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(u=>l(u,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function Jv(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),i=o.split("."),s=new Set;let u=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){u=c;break}if(u!==-1&&i.length>u)for(let c=u;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Ll(t,r,i,0,s)}}function Ll(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const i=e[o];if(i.endsWith("[]")){const s=i.slice(0,-2),u=t;if(s in u&&Array.isArray(u[s]))for(const c of u[s])Ll(c,e,n,o+1,r)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,u=Object.keys(s).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(const d of u)c[d]=s[d];for(const[d,f]of Object.entries(c)){const h=[];for(const m of n.slice(o))m==="*"?h.push(d):h.push(m);a(s,h,f)}for(const d of u)delete s[d]}}else{const s=t;i in s&&Ll(s[i],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function za(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wv(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["operationName"],n);const o=l(t,["resourceName"]);return o!=null&&a(e,["_url","resourceName"],o),e}function Kv(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],Xv(s)),e}function Yv(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],Qv(s)),e}function Xv(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>jv(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function Qv(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Zv(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function jv(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],i0(n)),e}function Zv(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],s0(n)),e}function e0(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function t0(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function n0(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],o0(s)),e}function o0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function am(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],r0(s)),e}function r0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function i0(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],za(o));const r=l(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function s0(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],za(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mc;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(mc||(mc={}));var hc;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(hc||(hc={}));var gc;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(gc||(gc={}));var an;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(an||(an={}));var vc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(vc||(vc={}));var yc;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(yc||(yc={}));var xc;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(xc||(xc={}));var Sc;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Sc||(Sc={}));var Ec;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ec||(Ec={}));var Tc;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Tc||(Tc={}));var Cc;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Cc||(Cc={}));var wc;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(wc||(wc={}));var Ic;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Ic||(Ic={}));var Nc;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Nc||(Nc={}));var _c;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(_c||(_c={}));var Ac;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ac||(Ac={}));var Rc;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Rc||(Rc={}));var Pc;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Pc||(Pc={}));var kc;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(kc||(kc={}));var bi;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(bi||(bi={}));var Mc;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mc||(Mc={}));var bc;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(bc||(bc={}));var Dc;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Dc||(Dc={}));var Fl;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Fl||(Fl={}));var Uc;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Uc||(Uc={}));var Lc;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Lc||(Lc={}));var Fc;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Fc||(Fc={}));var Oc;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Oc||(Oc={}));var Gc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gc||(Gc={}));var Hc;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Hc||(Hc={}));var Vc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Vc||(Vc={}));var Bc;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Bc||(Bc={}));var $c;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})($c||($c={}));var qc;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(qc||(qc={}));var zc;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zc||(zc={}));var Jc;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Jc||(Jc={}));var Wc;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Wc||(Wc={}));var Kc;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Kc||(Kc={}));var Yc;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Yc||(Yc={}));var Xc;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Xc||(Xc={}));var Qc;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Qc||(Qc={}));var jc;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(jc||(jc={}));var Zc;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Zc||(Zc={}));var ed;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(ed||(ed={}));var td;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(td||(td={}));var nd;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(nd||(nd={}));var od;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(od||(od={}));var rd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(rd||(rd={}));var id;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(id||(id={}));var sd;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(sd||(sd={}));var ld;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ld||(ld={}));var ad;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ad||(ad={}));var ud;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ud||(ud={}));var cd;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(cd||(cd={}));var dd;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(dd||(dd={}));var ro;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ro||(ro={}));class Ol{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fo{get text(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const h=[];for(const m of(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[g,S]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(S!==null||S!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,d+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const h of(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&f.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,o,r,i,s,u,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,o,r,i,s,u,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class fd{}class pd{}class l0{}class a0{}class u0{}class c0{}class md{}class hd{}class gd{}class d0{}class Di{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Di;let r;const i=e;return n?r=Yv(i):r=Kv(i),Object.assign(o,r),o}}class vd{}class yd{}class xd{}class Sd{}class f0{}class p0{}class m0{}class Ja{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Ja,i=n0(e);return Object.assign(o,i),o}}class h0{}class g0{}class v0{}class Ed{}class y0{get text(){var e,n,o;let r="",i=!1;const s=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,r+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,n,o;let r="";const i=[];for(const s of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&i.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class x0{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Wa{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Wa,i=am(e);return Object.assign(o,i),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ue(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function um(t,e){const n=ue(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function cm(t){return Array.isArray(t)?t.map(e=>Ui(e)):[Ui(t)]}function Ui(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function dm(t){const e=Ui(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fm(t){const e=Ui(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Td(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function pm(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Td(e)):[Td(t)]}function Gl(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Cd(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function wd(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Be(t){if(t==null)throw new Error("ContentUnion is required");return Gl(t)?t:{role:"user",parts:pm(t)}}function Ka(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=Be(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=Be(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Be(n)):[Be(e)]}function ht(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Cd(t)||wd(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Be(t)]}const e=[],n=[],o=Gl(t[0]);for(const r of t){const i=Gl(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(r);else{if(Cd(r)||wd(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:pm(n)}),e}function S0(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(an).includes(n[0].toUpperCase())?n[0].toUpperCase():an.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(an).includes(o.toUpperCase())?o.toUpperCase():an.TYPE_UNSPECIFIED})}}function po(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&S0(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(an).includes(u.toUpperCase())?u.toUpperCase():an.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=po(u);else if(o.includes(s)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(po(d))}e[s]=c}else if(r.includes(s)){const c={};for(const[d,f]of Object.entries(u))c[d]=po(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function Ya(t){return po(t)}function Xa(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Qa(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function No(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=po(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=po(e.response));return t}function _o(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function E0(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function jt(t,e){if(typeof e!="string")throw new Error("name must be a string");return E0(t,e,"cachedContents")}function mm(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Cn(t){return za(t)}function T0(t){return t!=null&&typeof t=="object"&&"name"in t}function C0(t){return t!=null&&typeof t=="object"&&"video"in t}function w0(t){return t!=null&&typeof t=="object"&&"uri"in t}function hm(t){var e;let n;if(T0(t)&&(n=t.name),!(w0(t)&&(n=t.uri,n===void 0))&&!(C0(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function gm(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function vm(t){for(const e of["models","tunedModels","publisherModels"])if(I0(t,e))return t[e];return[]}function I0(t,e){return t!==null&&typeof t=="object"&&e in t}function N0(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function _0(t,e={}){const n=[],o=new Set;for(const r of t){const i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const s=N0(r,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function ym(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function A0(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function xm(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let i=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ao(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Sm(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R0(t){const e={},n=l(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);const o=l(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>uy(s))),a(e,["inlinedResponses"],i)}const r=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["inlinedEmbedContentResponses"],i)}return e}function P0(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);const o=l(t,["gcsDestination","outputUriPrefix"]);o!=null&&a(e,["gcsUri"],o);const r=l(t,["bigqueryDestination","outputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function k0(t){const e={},n=l(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);const o=l(t,["gcsUri"]);o!=null&&a(e,["gcsDestination","outputUriPrefix"],o);const r=l(t,["bigqueryUri"]);if(r!=null&&a(e,["bigqueryDestination","outputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function li(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata","displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["metadata","state"]);r!=null&&a(e,["state"],Sm(r));const i=l(t,["metadata","createTime"]);i!=null&&a(e,["createTime"],i);const s=l(t,["metadata","endTime"]);s!=null&&a(e,["endTime"],s);const u=l(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const c=l(t,["metadata","model"]);c!=null&&a(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&a(e,["dest"],R0(xm(d))),e}function Hl(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["state"]);r!=null&&a(e,["state"],Sm(r));const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(e,["startTime"],u);const c=l(t,["endTime"]);c!=null&&a(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(e,["updateTime"],d);const f=l(t,["model"]);f!=null&&a(e,["model"],f);const h=l(t,["inputConfig"]);h!=null&&a(e,["src"],M0(h));const m=l(t,["outputConfig"]);m!=null&&a(e,["dest"],P0(xm(m)));const g=l(t,["completionStats"]);return g!=null&&a(e,["completionStats"],g),e}function M0(t){const e={},n=l(t,["instancesFormat"]);n!=null&&a(e,["format"],n);const o=l(t,["gcsSource","uris"]);o!=null&&a(e,["gcsUri"],o);const r=l(t,["bigquerySource","inputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function b0(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=l(e,["fileName"]);o!=null&&a(n,["fileName"],o);const r=l(e,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>ay(t,s))),a(n,["requests","requests"],i)}return n}function D0(t){const e={},n=l(t,["format"]);n!=null&&a(e,["instancesFormat"],n);const o=l(t,["gcsUri"]);o!=null&&a(e,["gcsSource","uris"],o);const r=l(t,["bigqueryUri"]);if(r!=null&&a(e,["bigquerySource","inputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function U0(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function L0(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function F0(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function O0(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const o=l(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],G0(o));const r=l(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=l(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&a(e,["avgLogprobs"],s);const u=l(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=l(t,["index"]);c!=null&&a(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["safetyRatings"],m)}const h=l(t,["urlContextMetadata"]);return h!=null&&a(e,["urlContextMetadata"],h),e}function G0(t){const e={},n=l(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function Em(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>gy(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function H0(t,e){const n={},o=l(t,["displayName"]);if(e!==void 0&&o!=null&&a(e,["batch","displayName"],o),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function V0(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["dest"]);return e!==void 0&&r!=null&&a(e,["outputConfig"],k0(A0(r))),n}function Id(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["src"]);r!=null&&a(n,["batch","inputConfig"],b0(t,ym(t,r)));const i=l(e,["config"]);return i!=null&&H0(i,n),n}function B0(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],ue(t,o));const r=l(e,["src"]);r!=null&&a(n,["inputConfig"],D0(ym(t,r)));const i=l(e,["config"]);return i!=null&&V0(i,n),n}function $0(t,e){const n={},o=l(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["batch","displayName"],o),n}function q0(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["src"]);r!=null&&a(n,["batch","inputConfig"],Q0(t,r));const i=l(e,["config"]);return i!=null&&$0(i,n),n}function z0(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function J0(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function W0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);return i!=null&&a(e,["error"],i),e}function K0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);return i!=null&&a(e,["error"],i),e}function Y0(t,e){const n={},o=l(e,["contents"]);if(o!=null){let i=Ka(t,o);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["requests[]","request","content"],i)}const r=l(e,["config"]);return r!=null&&(a(n,["_self"],X0(r,n)),Jv(n,{"requests[].*":"requests[].request.*"})),n}function X0(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Q0(t,e){const n={},o=l(e,["fileName"]);o!=null&&a(n,["file_name"],o);const r=l(e,["inlinedRequests"]);return r!=null&&a(n,["requests"],Y0(t,r)),n}function j0(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Z0(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ey(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const o=l(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ty(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Em(Be(r)));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&a(o,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const S=l(e,["frequencyPenalty"]);S!=null&&a(o,["frequencyPenalty"],S);const E=l(e,["seed"]);E!=null&&a(o,["seed"],E);const C=l(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&a(o,["responseSchema"],Ya(y));const v=l(e,["responseJsonSchema"]);if(v!=null&&a(o,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=l(e,["safetySettings"]);if(n!==void 0&&x!=null){let N=x;Array.isArray(N)&&(N=N.map(F=>vy(F))),a(n,["safetySettings"],N)}const T=l(e,["tools"]);if(n!==void 0&&T!=null){let N=_o(T);Array.isArray(N)&&(N=N.map(F=>xy(No(F)))),a(n,["tools"],N)}const I=l(e,["toolConfig"]);if(n!==void 0&&I!=null&&a(n,["toolConfig"],yy(I)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=l(e,["cachedContent"]);n!==void 0&&_!=null&&a(n,["cachedContent"],jt(t,_));const A=l(e,["responseModalities"]);A!=null&&a(o,["responseModalities"],A);const k=l(e,["mediaResolution"]);k!=null&&a(o,["mediaResolution"],k);const M=l(e,["speechConfig"]);if(M!=null&&a(o,["speechConfig"],Xa(M)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=l(e,["thinkingConfig"]);U!=null&&a(o,["thinkingConfig"],U);const O=l(e,["imageConfig"]);O!=null&&a(o,["imageConfig"],ly(O));const X=l(e,["enableEnhancedCivicAnswers"]);return X!=null&&a(o,["enableEnhancedCivicAnswers"],X),o}function ny(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>O0(d))),a(e,["candidates"],c)}const r=l(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=l(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function oy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function ry(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ao(t,o)),n}function iy(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function sy(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function ly(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ay(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["request","model"],ue(t,o));const r=l(e,["contents"]);if(r!=null){let u=ht(r);Array.isArray(u)&&(u=u.map(c=>Em(c))),a(n,["request","contents"],u)}const i=l(e,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(e,["config"]);return s!=null&&a(n,["request","generationConfig"],ty(t,s,l(n,["request"],{}))),n}function uy(t){const e={},n=l(t,["response"]);n!=null&&a(e,["response"],ny(n));const o=l(t,["error"]);return o!=null&&a(e,["error"],o),e}function cy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);if(e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function dy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const i=l(t,["filter"]);return e!==void 0&&i!=null&&a(e,["_query","filter"],i),n}function fy(t){const e={},n=l(t,["config"]);return n!=null&&cy(n,e),e}function py(t){const e={},n=l(t,["config"]);return n!=null&&dy(n,e),e}function my(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>li(s))),a(e,["batchJobs"],i)}return e}function hy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Hl(s))),a(e,["batchJobs"],i)}return e}function gy(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],j0(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],Z0(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],U0(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function vy(t){const e={},n=l(t,["category"]);if(n!=null&&a(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=l(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function yy(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],ey(n));const o=l(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function xy(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],iy(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],sy(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Yt;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Yt||(Yt={}));class $n{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sy extends Qt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $n(Yt.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Id(this.apiClient,e),o=n._url,r=z("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const h=Object.assign({},f);if(h.systemInstruction){const m=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=m,h.request=g}d.push(h)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(s)o.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=B0(this.apiClient,e);return u=z("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Hl(f))}else{const d=Id(this.apiClient,e);return u=z("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>li(f))}}async createEmbeddingsInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=q0(this.apiClient,e);return i=z("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>li(c))}}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=ry(this.apiClient,e);return u=z("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Hl(f))}else{const d=oy(this.apiClient,e);return u=z("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>li(f))}}async cancel(e){var n,o,r,i;let s="",u={};if(this.apiClient.isVertexAI()){const c=F0(this.apiClient,e);s=z("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=L0(this.apiClient,e);s=z("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=py(e);return u=z("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=hy(f),m=new Ed;return Object.assign(m,h),m})}else{const d=fy(e);return u=z("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=my(f),m=new Ed;return Object.assign(m,h),m})}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=J0(this.apiClient,e);return u=z("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>K0(f))}else{const d=z0(this.apiClient,e);return u=z("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>W0(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ey(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Nd(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>qy(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function Ty(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let f=ht(s);Array.isArray(f)&&(f=f.map(h=>Nd(h))),a(e,["contents"],f)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Nd(Be(u)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>Jy(h))),a(e,["tools"],f)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&a(e,["toolConfig"],zy(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Cy(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let h=ht(s);Array.isArray(h)&&(h=h.map(m=>m)),a(e,["contents"],h)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Be(u));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(m=>Wy(m))),a(e,["tools"],h)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&a(e,["toolConfig"],d);const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&a(e,["encryption_spec","kmsKeyName"],f),n}function wy(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],um(t,o));const r=l(e,["config"]);return r!=null&&Ty(r,n),n}function Iy(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],um(t,o));const r=l(e,["config"]);return r!=null&&Cy(r,n),n}function Ny(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],jt(t,o)),n}function _y(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],jt(t,o)),n}function Ay(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Ry(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Py(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function ky(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function My(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const o=l(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function by(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function Dy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],jt(t,o)),n}function Uy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],jt(t,o)),n}function Ly(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Fy(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function Oy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function Gy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function Hy(t){const e={},n=l(t,["config"]);return n!=null&&Oy(n,e),e}function Vy(t){const e={},n=l(t,["config"]);return n!=null&&Gy(n,e),e}function By(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["cachedContents"],i)}return e}function $y(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["cachedContents"],i)}return e}function qy(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],Py(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],ky(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],Ey(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function zy(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],My(n));const o=l(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function Jy(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],Ly(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],Fy(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function Wy(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>by(m))),a(e,["functionDeclarations"],h)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function Ky(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function Yy(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function Xy(t,e){const n={},o=l(e,["name"]);o!=null&&a(n,["_url","name"],jt(t,o));const r=l(e,["config"]);return r!=null&&Ky(r,n),n}function Qy(t,e){const n={},o=l(e,["name"]);o!=null&&a(n,["_url","name"],jt(t,o));const r=l(e,["config"]);return r!=null&&Yy(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jy extends Qt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $n(Yt.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Iy(this.apiClient,e);return u=z("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=wy(this.apiClient,e);return u=z("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Uy(this.apiClient,e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=Dy(this.apiClient,e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=_y(this.apiClient,e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Ry(f),m=new xd;return Object.assign(m,h),m})}else{const d=Ny(this.apiClient,e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Ay(f),m=new xd;return Object.assign(m,h),m})}}async update(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Qy(this.apiClient,e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=Xy(this.apiClient,e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Vy(e);return u=z("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=$y(f),m=new Sd;return Object.assign(m,h),m})}else{const d=Hy(e);return u=z("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=By(f),m=new Sd;return Object.assign(m,h),m})}}}function Li(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function _d(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ee(t){return this instanceof ee?(this.v=t,this):new ee(t)}function Nt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(S){return Promise.resolve(S).then(g,h)}}function u(g,S){o[g]&&(r[g]=function(E){return new Promise(function(C,y){i.push([g,E,C,y])>1||c(g,E)})},S&&(r[g]=S(r[g])))}function c(g,S){try{d(o[g](S))}catch(E){m(i[0][3],E)}}function d(g){g.value instanceof ee?Promise.resolve(g.value.v).then(f,h):m(i[0][2],g)}function f(g){c("next",g)}function h(g){c("throw",g)}function m(g,S){g(S),i.shift(),i.length&&c(i[0][0],i[0][1])}}function _t(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof _d=="function"?_d(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=t[i]&&function(s){return new Promise(function(u,c){s=t[i](s),r(u,c,s.done,s.value)})}}function r(i,s,u,c){Promise.resolve(c).then(function(d){i({value:d,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zy(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Tm(n)}function Tm(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ex(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ad(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let i=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),i&&!Tm(t[o])&&(i=!1),o++;i?e.push(...r):e.pop()}return e}class tx{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new nx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class nx{constructor(e,n,o,r={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),ex(i)}async sendMessage(e){var n;await this.sendPromise;const o=Be(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,u;const c=await r,d=(s=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(h))!==null&&u!==void 0?u:[]);const g=d?[d]:[];this.recordHistory(o,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=Be(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,o)}getHistory(e=!1){const n=e?Ad(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Nt(this,arguments,function*(){var r,i,s,u,c,d;const f=[];try{for(var h=!0,m=_t(e),g;g=yield ee(m.next()),r=g.done,!r;h=!0){u=g.value,h=!1;const S=u;if(Zy(S)){const E=(d=(c=S.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;E!==void 0&&f.push(E)}yield yield ee(S)}}catch(S){i={error:S}}finally{try{!h&&!r&&(s=m.return)&&(yield ee(s.call(m)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Ad(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ns extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ns.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ox(t){const e={},n=l(t,["file"]);return n!=null&&a(e,["file"],n),e}function rx(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function ix(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],hm(n)),e}function sx(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function lx(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],hm(n)),e}function ax(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function ux(t){const e={},n=l(t,["config"]);return n!=null&&ax(n,e),e}function cx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dx extends Qt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $n(Yt.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ux(e);return i=z("files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=cx(c),f=new h0;return Object.assign(f,d),f})}}async createInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ox(e);return i=z("upload/v1beta/files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=rx(c),f=new g0;return Object.assign(f,d),f})}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lx(e);return i=z("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ix(e);return i=z("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=sx(c),f=new v0;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ai(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function fx(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Ax(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function px(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function mx(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hx(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function gx(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=l(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const r=l(t,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const i=l(t,["candidateCount"]);i!=null&&a(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&a(e,["enableAffectiveDialog"],s);const u=l(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=l(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const h=l(t,["presencePenalty"]);h!=null&&a(e,["presencePenalty"],h);const m=l(t,["responseLogprobs"]);m!=null&&a(e,["responseLogprobs"],m);const g=l(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const S=l(t,["responseModalities"]);S!=null&&a(e,["responseModalities"],S);const E=l(t,["responseSchema"]);E!=null&&a(e,["responseSchema"],E);const C=l(t,["routingConfig"]);C!=null&&a(e,["routingConfig"],C);const y=l(t,["seed"]);y!=null&&a(e,["seed"],y);const v=l(t,["speechConfig"]);v!=null&&a(e,["speechConfig"],v);const x=l(t,["stopSequences"]);x!=null&&a(e,["stopSequences"],x);const T=l(t,["temperature"]);T!=null&&a(e,["temperature"],T);const I=l(t,["thinkingConfig"]);I!=null&&a(e,["thinkingConfig"],I);const _=l(t,["topK"]);_!=null&&a(e,["topK"],_);const A=l(t,["topP"]);if(A!=null&&a(e,["topP"],A),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vx(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function yx(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function xx(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","speechConfig"],Qa(h));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=l(t,["systemInstruction"]);e!==void 0&&S!=null&&a(e,["setup","systemInstruction"],fx(Be(S)));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let _=_o(E);Array.isArray(_)&&(_=_.map(A=>Px(No(A)))),a(e,["setup","tools"],_)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],Rx(C));const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","inputAudioTranscription"],y);const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","outputAudioTranscription"],v);const x=l(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&a(e,["setup","realtimeInputConfig"],x);const T=l(t,["contextWindowCompression"]);e!==void 0&&T!=null&&a(e,["setup","contextWindowCompression"],T);const I=l(t,["proactivity"]);if(e!==void 0&&I!=null&&a(e,["setup","proactivity"],I),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Sx(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],gx(o));const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","speechConfig"],Qa(h));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=l(t,["systemInstruction"]);e!==void 0&&S!=null&&a(e,["setup","systemInstruction"],Be(S));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let A=_o(E);Array.isArray(A)&&(A=A.map(k=>kx(No(k)))),a(e,["setup","tools"],A)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],C);const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","inputAudioTranscription"],y);const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","outputAudioTranscription"],v);const x=l(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&a(e,["setup","realtimeInputConfig"],x);const T=l(t,["contextWindowCompression"]);e!==void 0&&T!=null&&a(e,["setup","contextWindowCompression"],T);const I=l(t,["proactivity"]);e!==void 0&&I!=null&&a(e,["setup","proactivity"],I);const _=l(t,["explicitVadSignal"]);return e!==void 0&&_!=null&&a(e,["setup","explicitVadSignal"],_),n}function Ex(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],ue(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],xx(r,n)),n}function Tx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],ue(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],Sx(r,n)),n}function Cx(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],n),e}function wx(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["weightedPrompts"],o)}return e}function Ix(t){const e={},n=l(t,["media"]);if(n!=null){let d=cm(n);Array.isArray(d)&&(d=d.map(f=>ai(f))),a(e,["mediaChunks"],d)}const o=l(t,["audio"]);o!=null&&a(e,["audio"],ai(fm(o)));const r=l(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=l(t,["video"]);i!=null&&a(e,["video"],ai(dm(i)));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=l(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function Nx(t){const e={},n=l(t,["media"]);if(n!=null){let d=cm(n);Array.isArray(d)&&(d=d.map(f=>f)),a(e,["mediaChunks"],d)}const o=l(t,["audio"]);o!=null&&a(e,["audio"],fm(o));const r=l(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=l(t,["video"]);i!=null&&a(e,["video"],dm(i));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=l(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function _x(t){const e={},n=l(t,["setupComplete"]);n!=null&&a(e,["setupComplete"],n);const o=l(t,["serverContent"]);o!=null&&a(e,["serverContent"],o);const r=l(t,["toolCall"]);r!=null&&a(e,["toolCall"],r);const i=l(t,["toolCallCancellation"]);i!=null&&a(e,["toolCallCancellation"],i);const s=l(t,["usageMetadata"]);s!=null&&a(e,["usageMetadata"],Mx(s));const u=l(t,["goAway"]);u!=null&&a(e,["goAway"],u);const c=l(t,["sessionResumptionUpdate"]);c!=null&&a(e,["sessionResumptionUpdate"],c);const d=l(t,["voiceActivityDetectionSignal"]);return d!=null&&a(e,["voiceActivityDetectionSignal"],d),e}function Ax(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],px(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],mx(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],ai(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function Rx(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Px(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],vx(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],yx(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function kx(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>hx(m))),a(e,["functionDeclarations"],h)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function Mx(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const o=l(t,["cachedContentTokenCount"]);o!=null&&a(e,["cachedContentTokenCount"],o);const r=l(t,["candidatesTokenCount"]);r!=null&&a(e,["responseTokenCount"],r);const i=l(t,["toolUsePromptTokenCount"]);i!=null&&a(e,["toolUsePromptTokenCount"],i);const s=l(t,["thoughtsTokenCount"]);s!=null&&a(e,["thoughtsTokenCount"],s);const u=l(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const c=l(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["promptTokensDetails"],g)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["cacheTokensDetails"],g)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["responseTokensDetails"],g)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["toolUsePromptTokensDetails"],g)}const m=l(t,["trafficType"]);return m!=null&&a(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bx(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Dx(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const o=l(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],Ux(o));const r=l(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=l(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&a(e,["avgLogprobs"],s);const u=l(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=l(t,["index"]);c!=null&&a(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["safetyRatings"],m)}const h=l(t,["urlContextMetadata"]);return h!=null&&a(e,["urlContextMetadata"],h),e}function Ux(t){const e={},n=l(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function Lx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["contents"]);if(r!=null){let i=ht(r);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["contents"],i)}return n}function Fx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["tokensInfo"],r)}return e}function Ox(t){const e={},n=l(t,["values"]);n!=null&&a(e,["values"],n);const o=l(t,["statistics"]);return o!=null&&a(e,["statistics"],Gx(o)),e}function Gx(t){const e={},n=l(t,["truncated"]);n!=null&&a(e,["truncated"],n);const o=l(t,["token_count"]);return o!=null&&a(e,["tokenCount"],o),e}function os(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>KS(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function Hx(t){const e={},n=l(t,["controlType"]);n!=null&&a(e,["controlType"],n);const o=l(t,["enableControlImageComputation"]);return o!=null&&a(e,["computeControl"],o),e}function Vx(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Bx(t,e){const n={},o=l(t,["systemInstruction"]);e!==void 0&&o!=null&&a(e,["systemInstruction"],Be(o));const r=l(t,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>Nm(u))),a(e,["tools"],s)}const i=l(t,["generationConfig"]);return e!==void 0&&i!=null&&a(e,["generationConfig"],bS(i)),n}function $x(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["contents"]);if(r!=null){let s=ht(r);Array.isArray(s)&&(s=s.map(u=>os(u))),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&Vx(i),n}function qx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["contents"]);if(r!=null){let s=ht(r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&Bx(i,n),n}function zx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["totalTokens"]);o!=null&&a(e,["totalTokens"],o);const r=l(t,["cachedContentTokenCount"]);return r!=null&&a(e,["cachedContentTokenCount"],r),e}function Jx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["totalTokens"]);return o!=null&&a(e,["totalTokens"],o),e}function Wx(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],ue(t,o)),n}function Kx(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],ue(t,o)),n}function Yx(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Xx(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Qx(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&a(e,["parameters","includeSafetyAttributes"],h);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&a(e,["parameters","includeRaiReason"],m);const g=l(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const S=l(t,["outputMimeType"]);e!==void 0&&S!=null&&a(e,["parameters","outputOptions","mimeType"],S);const E=l(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&a(e,["parameters","outputOptions","compressionQuality"],E);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&a(e,["parameters","addWatermark"],C);const y=l(t,["labels"]);e!==void 0&&y!=null&&a(e,["labels"],y);const v=l(t,["editMode"]);e!==void 0&&v!=null&&a(e,["parameters","editMode"],v);const x=l(t,["baseSteps"]);return e!==void 0&&x!=null&&a(e,["parameters","editConfig","baseSteps"],x),n}function jx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["referenceImages"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>eE(c))),a(n,["instances[0]","referenceImages"],u)}const s=l(e,["config"]);return s!=null&&Qx(s,n),n}function Zx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>rs(i))),a(e,["generatedImages"],r)}return e}function eS(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function tS(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["instances[]","task_type"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["instances[]","title"],r);const i=l(t,["outputDimensionality"]);e!==void 0&&i!=null&&a(e,["parameters","outputDimensionality"],i);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&a(e,["instances[]","mimeType"],s);const u=l(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function nS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["contents"]);if(r!=null){let u=Ka(t,r);Array.isArray(u)&&(u=u.map(c=>c)),a(n,["requests[]","content"],u)}const i=l(e,["config"]);i!=null&&eS(i,n);const s=l(e,["model"]);return s!==void 0&&a(n,["requests[]","model"],ue(t,s)),n}function oS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["contents"]);if(r!=null){let s=Ka(t,r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["instances[]","content"],s)}const i=l(e,["config"]);return i!=null&&tS(i,n),n}function rS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["embeddings"],i)}const r=l(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function iS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions[]","embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Ox(s))),a(e,["embeddings"],i)}const r=l(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function sS(t){const e={},n=l(t,["endpoint"]);n!=null&&a(e,["name"],n);const o=l(t,["deployedModelId"]);return o!=null&&a(e,["deployedModelId"],o),e}function lS(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function aS(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uS(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const o=l(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cS(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function dS(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],os(Be(r)));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&a(o,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const S=l(e,["frequencyPenalty"]);S!=null&&a(o,["frequencyPenalty"],S);const E=l(e,["seed"]);E!=null&&a(o,["seed"],E);const C=l(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&a(o,["responseSchema"],Ya(y));const v=l(e,["responseJsonSchema"]);if(v!=null&&a(o,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=l(e,["safetySettings"]);if(n!==void 0&&x!=null){let N=x;Array.isArray(N)&&(N=N.map(F=>tE(F))),a(n,["safetySettings"],N)}const T=l(e,["tools"]);if(n!==void 0&&T!=null){let N=_o(T);Array.isArray(N)&&(N=N.map(F=>aE(No(F)))),a(n,["tools"],N)}const I=l(e,["toolConfig"]);if(n!==void 0&&I!=null&&a(n,["toolConfig"],lE(I)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=l(e,["cachedContent"]);n!==void 0&&_!=null&&a(n,["cachedContent"],jt(t,_));const A=l(e,["responseModalities"]);A!=null&&a(o,["responseModalities"],A);const k=l(e,["mediaResolution"]);k!=null&&a(o,["mediaResolution"],k);const M=l(e,["speechConfig"]);if(M!=null&&a(o,["speechConfig"],Xa(M)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=l(e,["thinkingConfig"]);U!=null&&a(o,["thinkingConfig"],U);const O=l(e,["imageConfig"]);O!=null&&a(o,["imageConfig"],OS(O));const X=l(e,["enableEnhancedCivicAnswers"]);return X!=null&&a(o,["enableEnhancedCivicAnswers"],X),o}function fS(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Be(r));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&a(o,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const S=l(e,["frequencyPenalty"]);S!=null&&a(o,["frequencyPenalty"],S);const E=l(e,["seed"]);E!=null&&a(o,["seed"],E);const C=l(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&a(o,["responseSchema"],Ya(y));const v=l(e,["responseJsonSchema"]);v!=null&&a(o,["responseJsonSchema"],v);const x=l(e,["routingConfig"]);x!=null&&a(o,["routingConfig"],x);const T=l(e,["modelSelectionConfig"]);T!=null&&a(o,["modelConfig"],T);const I=l(e,["safetySettings"]);if(n!==void 0&&I!=null){let H=I;Array.isArray(H)&&(H=H.map(Z=>Z)),a(n,["safetySettings"],H)}const _=l(e,["tools"]);if(n!==void 0&&_!=null){let H=_o(_);Array.isArray(H)&&(H=H.map(Z=>Nm(No(Z)))),a(n,["tools"],H)}const A=l(e,["toolConfig"]);n!==void 0&&A!=null&&a(n,["toolConfig"],A);const k=l(e,["labels"]);n!==void 0&&k!=null&&a(n,["labels"],k);const M=l(e,["cachedContent"]);n!==void 0&&M!=null&&a(n,["cachedContent"],jt(t,M));const U=l(e,["responseModalities"]);U!=null&&a(o,["responseModalities"],U);const O=l(e,["mediaResolution"]);O!=null&&a(o,["mediaResolution"],O);const X=l(e,["speechConfig"]);X!=null&&a(o,["speechConfig"],Xa(X));const N=l(e,["audioTimestamp"]);N!=null&&a(o,["audioTimestamp"],N);const F=l(e,["thinkingConfig"]);F!=null&&a(o,["thinkingConfig"],F);const $=l(e,["imageConfig"]);if($!=null&&a(o,["imageConfig"],GS($)),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function Rd(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["contents"]);if(r!=null){let s=ht(r);Array.isArray(s)&&(s=s.map(u=>os(u))),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&a(n,["generationConfig"],dS(t,i,n)),n}function Pd(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["contents"]);if(r!=null){let s=ht(r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&a(n,["generationConfig"],fS(t,i,n)),n}function kd(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>Dx(d))),a(e,["candidates"],c)}const r=l(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=l(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function Md(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["candidates"],d)}const r=l(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=l(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const s=l(t,["promptFeedback"]);s!=null&&a(e,["promptFeedback"],s);const u=l(t,["responseId"]);u!=null&&a(e,["responseId"],u);const c=l(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function pS(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["aspectRatio"]);e!==void 0&&r!=null&&a(e,["parameters","aspectRatio"],r);const i=l(t,["guidanceScale"]);if(e!==void 0&&i!=null&&a(e,["parameters","guidanceScale"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&a(e,["parameters","safetySetting"],s);const u=l(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&a(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&a(e,["parameters","includeRaiReason"],d);const f=l(t,["language"]);e!==void 0&&f!=null&&a(e,["parameters","language"],f);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&a(e,["parameters","outputOptions","mimeType"],h);const m=l(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&a(e,["parameters","outputOptions","compressionQuality"],m),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=l(t,["imageSize"]);if(e!==void 0&&g!=null&&a(e,["parameters","sampleImageSize"],g),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function mS(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&a(e,["parameters","includeSafetyAttributes"],h);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&a(e,["parameters","includeRaiReason"],m);const g=l(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const S=l(t,["outputMimeType"]);e!==void 0&&S!=null&&a(e,["parameters","outputOptions","mimeType"],S);const E=l(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&a(e,["parameters","outputOptions","compressionQuality"],E);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&a(e,["parameters","addWatermark"],C);const y=l(t,["labels"]);e!==void 0&&y!=null&&a(e,["labels"],y);const v=l(t,["imageSize"]);e!==void 0&&v!=null&&a(e,["parameters","sampleImageSize"],v);const x=l(t,["enhancePrompt"]);return e!==void 0&&x!=null&&a(e,["parameters","enhancePrompt"],x),n}function hS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["config"]);return i!=null&&pS(i,n),n}function gS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["config"]);return i!=null&&mS(i,n),n}function vS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>RS(s))),a(e,["generatedImages"],i)}const r=l(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],wm(r)),e}function yS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>rs(s))),a(e,["generatedImages"],i)}const r=l(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],Im(r)),e}function xS(t,e){const n={},o=l(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=l(t,["durationSeconds"]);if(e!==void 0&&r!=null&&a(e,["parameters","durationSeconds"],r),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&a(e,["parameters","aspectRatio"],i);const s=l(t,["resolution"]);e!==void 0&&s!=null&&a(e,["parameters","resolution"],s);const u=l(t,["personGeneration"]);if(e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&a(e,["parameters","negativePrompt"],c);const d=l(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&a(e,["parameters","enhancePrompt"],d),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=l(t,["lastFrame"]);e!==void 0&&f!=null&&a(e,["instances[0]","lastFrame"],is(f));const h=l(t,["referenceImages"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>EE(g))),a(e,["instances[0]","referenceImages"],m)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function SS(t,e){const n={},o=l(t,["numberOfVideos"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["fps"]);e!==void 0&&i!=null&&a(e,["parameters","fps"],i);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&a(e,["parameters","durationSeconds"],s);const u=l(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&a(e,["parameters","resolution"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const h=l(t,["pubsubTopic"]);e!==void 0&&h!=null&&a(e,["parameters","pubsubTopic"],h);const m=l(t,["negativePrompt"]);e!==void 0&&m!=null&&a(e,["parameters","negativePrompt"],m);const g=l(t,["enhancePrompt"]);e!==void 0&&g!=null&&a(e,["parameters","enhancePrompt"],g);const S=l(t,["generateAudio"]);e!==void 0&&S!=null&&a(e,["parameters","generateAudio"],S);const E=l(t,["lastFrame"]);e!==void 0&&E!=null&&a(e,["instances[0]","lastFrame"],Rt(E));const C=l(t,["referenceImages"]);if(e!==void 0&&C!=null){let x=C;Array.isArray(x)&&(x=x.map(T=>TE(T))),a(e,["instances[0]","referenceImages"],x)}const y=l(t,["mask"]);e!==void 0&&y!=null&&a(e,["instances[0]","mask"],SE(y));const v=l(t,["compressionQuality"]);return e!==void 0&&v!=null&&a(e,["parameters","compressionQuality"],v),n}function ES(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],IS(s)),e}function TS(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],NS(s)),e}function CS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],is(i));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],_m(s));const u=l(e,["source"]);u!=null&&_S(u,n);const c=l(e,["config"]);return c!=null&&xS(c,n),n}function wS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],Rt(i));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],Am(s));const u=l(e,["source"]);u!=null&&AS(u,n);const c=l(e,["config"]);return c!=null&&SS(c,n),n}function IS(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>kS(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function NS(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>MS(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function _S(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],is(r));const i=l(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],_m(i)),n}function AS(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],Rt(r));const i=l(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],Am(i)),n}function RS(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],HS(n));const o=l(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=l(t,["_self"]);return r!=null&&a(e,["safetyAttributes"],wm(r)),e}function rs(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],Cm(n));const o=l(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=l(t,["_self"]);r!=null&&a(e,["safetyAttributes"],Im(r));const i=l(t,["prompt"]);return i!=null&&a(e,["enhancedPrompt"],i),e}function PS(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["mask"],Cm(n));const o=l(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["labels"],r)}return e}function kS(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],yE(n)),e}function MS(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],xE(n)),e}function bS(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=l(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const r=l(t,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const i=l(t,["candidateCount"]);i!=null&&a(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&a(e,["enableAffectiveDialog"],s);const u=l(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=l(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const h=l(t,["presencePenalty"]);h!=null&&a(e,["presencePenalty"],h);const m=l(t,["responseLogprobs"]);m!=null&&a(e,["responseLogprobs"],m);const g=l(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const S=l(t,["responseModalities"]);S!=null&&a(e,["responseModalities"],S);const E=l(t,["responseSchema"]);E!=null&&a(e,["responseSchema"],E);const C=l(t,["routingConfig"]);C!=null&&a(e,["routingConfig"],C);const y=l(t,["seed"]);y!=null&&a(e,["seed"],y);const v=l(t,["speechConfig"]);v!=null&&a(e,["speechConfig"],v);const x=l(t,["stopSequences"]);x!=null&&a(e,["stopSequences"],x);const T=l(t,["temperature"]);T!=null&&a(e,["temperature"],T);const I=l(t,["thinkingConfig"]);I!=null&&a(e,["thinkingConfig"],I);const _=l(t,["topK"]);_!=null&&a(e,["topK"],_);const A=l(t,["topP"]);if(A!=null&&a(e,["topP"],A),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function DS(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],ue(t,o)),n}function US(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],ue(t,o)),n}function LS(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function FS(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function OS(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function GS(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);o!=null&&a(e,["imageSize"],o);const r=l(t,["outputMimeType"]);r!=null&&a(e,["imageOutputOptions","mimeType"],r);const i=l(t,["outputCompressionQuality"]);return i!=null&&a(e,["imageOutputOptions","compressionQuality"],i),e}function HS(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],Cn(n));const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Cm(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["imageBytes"],Cn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function is(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],Cn(n));const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Rt(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["imageBytes"]);o!=null&&a(e,["bytesBase64Encoded"],Cn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function VS(t,e,n){const o={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],gm(t,u)),o}function BS(t,e,n){const o={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],gm(t,u)),o}function $S(t,e){const n={},o=l(e,["config"]);return o!=null&&VS(t,o,n),n}function qS(t,e){const n={},o=l(e,["config"]);return o!=null&&BS(t,o,n),n}function zS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["_self"]);if(r!=null){let i=vm(r);Array.isArray(i)&&(i=i.map(s=>Vl(s))),a(e,["models"],i)}return e}function JS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["_self"]);if(r!=null){let i=vm(r);Array.isArray(i)&&(i=i.map(s=>Bl(s))),a(e,["models"],i)}return e}function WS(t){const e={},n=l(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);const o=l(t,["segmentationClasses"]);o!=null&&a(e,["maskClasses"],o);const r=l(t,["maskDilation"]);return r!=null&&a(e,["dilation"],r),e}function Vl(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["version"]);i!=null&&a(e,["version"],i);const s=l(t,["_self"]);s!=null&&a(e,["tunedModelInfo"],uE(s));const u=l(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const c=l(t,["outputTokenLimit"]);c!=null&&a(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);d!=null&&a(e,["supportedActions"],d);const f=l(t,["temperature"]);f!=null&&a(e,["temperature"],f);const h=l(t,["maxTemperature"]);h!=null&&a(e,["maxTemperature"],h);const m=l(t,["topP"]);m!=null&&a(e,["topP"],m);const g=l(t,["topK"]);g!=null&&a(e,["topK"],g);const S=l(t,["thinking"]);return S!=null&&a(e,["thinking"],S),e}function Bl(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["versionId"]);i!=null&&a(e,["version"],i);const s=l(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>sS(m))),a(e,["endpoints"],h)}const u=l(t,["labels"]);u!=null&&a(e,["labels"],u);const c=l(t,["_self"]);c!=null&&a(e,["tunedModelInfo"],cE(c));const d=l(t,["defaultCheckpointId"]);d!=null&&a(e,["defaultCheckpointId"],d);const f=l(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),a(e,["checkpoints"],h)}return e}function KS(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],lS(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],aS(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],bx(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function YS(t){const e={},n=l(t,["productImage"]);return n!=null&&a(e,["image"],Rt(n)),e}function XS(t,e){const n={},o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["baseSteps"]);e!==void 0&&r!=null&&a(e,["parameters","baseSteps"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const s=l(t,["seed"]);e!==void 0&&s!=null&&a(e,["parameters","seed"],s);const u=l(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&a(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&a(e,["parameters","addWatermark"],d);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&a(e,["parameters","outputOptions","mimeType"],f);const h=l(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&a(e,["parameters","outputOptions","compressionQuality"],h);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&a(e,["parameters","enhancePrompt"],m);const g=l(t,["labels"]);return e!==void 0&&g!=null&&a(e,["labels"],g),n}function QS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["source"]);r!=null&&ZS(r,n);const i=l(e,["config"]);return i!=null&&XS(i,n),n}function jS(t){const e={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>rs(r))),a(e,["generatedImages"],o)}return e}function ZS(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["personImage"]);e!==void 0&&r!=null&&a(e,["instances[0]","personImage","image"],Rt(r));const i=l(t,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>YS(u))),a(e,["instances[0]","productImages"],s)}return n}function eE(t){const e={},n=l(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],Rt(n));const o=l(t,["referenceId"]);o!=null&&a(e,["referenceId"],o);const r=l(t,["referenceType"]);r!=null&&a(e,["referenceType"],r);const i=l(t,["maskImageConfig"]);i!=null&&a(e,["maskImageConfig"],WS(i));const s=l(t,["controlImageConfig"]);s!=null&&a(e,["controlImageConfig"],Hx(s));const u=l(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],u);const c=l(t,["subjectImageConfig"]);return c!=null&&a(e,["subjectImageConfig"],c),e}function wm(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=l(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=l(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function Im(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=l(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=l(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function tE(t){const e={},n=l(t,["category"]);if(n!=null&&a(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=l(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function nE(t){const e={},n=l(t,["image"]);return n!=null&&a(e,["image"],Rt(n)),e}function oE(t,e){const n={},o=l(t,["mode"]);e!==void 0&&o!=null&&a(e,["parameters","mode"],o);const r=l(t,["maxPredictions"]);e!==void 0&&r!=null&&a(e,["parameters","maxPredictions"],r);const i=l(t,["confidenceThreshold"]);e!==void 0&&i!=null&&a(e,["parameters","confidenceThreshold"],i);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&a(e,["parameters","maskDilation"],s);const u=l(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u);const c=l(t,["labels"]);return e!==void 0&&c!=null&&a(e,["labels"],c),n}function rE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["source"]);r!=null&&sE(r,n);const i=l(e,["config"]);return i!=null&&oE(i,n),n}function iE(t){const e={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>PS(r))),a(e,["generatedMasks"],o)}return e}function sE(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],Rt(r));const i=l(t,["scribbleImage"]);return e!==void 0&&i!=null&&a(e,["instances[0]","scribble"],nE(i)),n}function lE(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],uS(n));const o=l(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function aE(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],LS(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],FS(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function Nm(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>cS(m))),a(e,["functionDeclarations"],h)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function uE(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=l(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function cE(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=l(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function dE(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function fE(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function pE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","name"],ue(t,o));const r=l(e,["config"]);return r!=null&&dE(r,n),n}function mE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["config"]);return r!=null&&fE(r,n),n}function hE(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&a(e,["parameters","safetySetting"],r);const i=l(t,["personGeneration"]);e!==void 0&&i!=null&&a(e,["parameters","personGeneration"],i);const s=l(t,["includeRaiReason"]);e!==void 0&&s!=null&&a(e,["parameters","includeRaiReason"],s);const u=l(t,["outputMimeType"]);e!==void 0&&u!=null&&a(e,["parameters","outputOptions","mimeType"],u);const c=l(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&a(e,["parameters","outputOptions","compressionQuality"],c);const d=l(t,["enhanceInputImage"]);e!==void 0&&d!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=l(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const h=l(t,["labels"]);e!==void 0&&h!=null&&a(e,["labels"],h);const m=l(t,["numberOfImages"]);e!==void 0&&m!=null&&a(e,["parameters","sampleCount"],m);const g=l(t,["mode"]);return e!==void 0&&g!=null&&a(e,["parameters","mode"],g),n}function gE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],ue(t,o));const r=l(e,["image"]);r!=null&&a(n,["instances[0]","image"],Rt(r));const i=l(e,["upscaleFactor"]);i!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=l(e,["config"]);return s!=null&&hE(s,n),n}function vE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>rs(i))),a(e,["generatedImages"],r)}return e}function yE(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],Cn(o));const r=l(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function xE(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],Cn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function SE(t){const e={},n=l(t,["image"]);n!=null&&a(e,["_self"],Rt(n));const o=l(t,["maskMode"]);return o!=null&&a(e,["maskMode"],o),e}function EE(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],is(n));const o=l(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function TE(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],Rt(n));const o=l(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function _m(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["videoBytes"]);o!=null&&a(e,["encodedVideo"],Cn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["encoding"],r),e}function Am(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["videoBytes"]);o!=null&&a(e,["bytesBase64Encoded"],Cn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CE(t,e){const n={},o=l(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["displayName"],o),n}function wE(t){const e={},n=l(t,["config"]);return n!=null&&CE(n,e),e}function IE(t,e){const n={},o=l(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function NE(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=l(t,["config"]);return o!=null&&IE(o,e),e}function _E(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function AE(t,e){const n={},o=l(t,["customMetadata"]);if(e!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["customMetadata"],i)}const r=l(t,["chunkingConfig"]);return e!==void 0&&r!=null&&a(e,["chunkingConfig"],r),n}function RE(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],kE(s)),e}function PE(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=l(t,["fileName"]);o!=null&&a(e,["fileName"],o);const r=l(t,["config"]);return r!=null&&AE(r,e),e}function kE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function ME(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function bE(t){const e={},n=l(t,["config"]);return n!=null&&ME(n,e),e}function DE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["fileSearchStores"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["fileSearchStores"],i)}return e}function Rm(t,e){const n={},o=l(t,["mimeType"]);e!==void 0&&o!=null&&a(e,["mimeType"],o);const r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["customMetadata"]);if(e!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>c)),a(e,["customMetadata"],u)}const s=l(t,["chunkingConfig"]);return e!==void 0&&s!=null&&a(e,["chunkingConfig"],s),n}function UE(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=l(t,["config"]);return o!=null&&Rm(o,e),e}function LE(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FE="Content-Type",OE="X-Server-Timeout",GE="User-Agent",$l="x-goog-api-client",HE="1.34.0",VE=`google-genai-sdk/${HE}`,BE="v1beta1",$E="v1beta";class qE{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:BE,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:$E,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))r.searchParams.append(s,String(u));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>i.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&zE(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await bd(r),new Ol(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await bd(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Nt(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield ee(r.read());if(d){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=i.decode(f,{stream:!0});try{const S=JSON.parse(h);if("error"in S){const E=JSON.parse(JSON.stringify(S.error)),C=E.status,y=E.code,v=`got status: ${C}. ${JSON.stringify(S)}`;if(y>=400&&y<600)throw new ns({message:v,status:y})}}catch(S){if(S.name==="ApiError")throw S}s+=h;let m=-1,g=0;for(;;){m=-1,g=0;for(const C of c){const y=s.indexOf(C);y!==-1&&(m===-1||y<m)&&(m=y,g=C.length)}if(m===-1)break;const S=s.substring(0,m);s=s.substring(m+g);const E=S.trim();if(E.startsWith(u)){const C=E.substring(u.length).trim();try{const y=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ee(new Ol(y))}catch(y){throw new Error(`exception parsing stream chunk ${C}. ${y}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=VE+" "+this.clientOptions.userAgentExtra;return e[GE]=n,e[$l]=n,e[FE]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))o.append(r,i);e.timeout&&e.timeout>0&&o.append(OE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,s=await i.stat(e);r.sizeBytes=String(s.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const c={file:r},d=this.getFileName(e),f=z("upload/v1beta/files",c._url),h=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,n==null?void 0:n.httpOptions);return i.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,o){var r;const i=this.clientOptions.uploader,s=await i.stat(n),u=String(s.size),c=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),h={};o!=null&&Rm(o,h);const m=await this.fetchUploadUrl(d,u,c,f,h,o==null?void 0:o.httpOptions);return i.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,i,s){var u;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function bd(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new ns({message:r,status:n}):new Error(r)}}function zE(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,s){const u=Object.assign({},i);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=o(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JE="mcp_used/unknown";let WE=!1;function Pm(t){for(const e of t)if(KE(e)||typeof e=="object"&&"inputSchema"in e)return!0;return WE}function km(t){var e;const n=(e=t[$l])!==null&&e!==void 0?e:"";t[$l]=(n+` ${JE}`).trimStart()}function KE(t){return t!==null&&typeof t=="object"&&t instanceof ja}function YE(t){return Nt(this,arguments,function*(n,o=100){let r,i=0;for(;i<o;){const s=yield ee(n.listTools({cursor:r}));for(const u of s.tools)yield yield ee(u),i++;if(!s.nextCursor)break;r=s.nextCursor}})}class ja{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new ja(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var u=!0,c=(n=void 0,_t(YE(f))),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const h=r;s.push(h);const m=h.name;if(i[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);i[m]=f}}catch(h){n={error:h}}finally{try{!u&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),_0(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function XE(t,e,n){const o=new x0;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class QE{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=eT(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(x=>{d=x}),h=e.callbacks,m=function(){d({})},g=this.apiClient,S={onopen:m,onmessage:x=>{XE(g,h.onmessage,x)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(x){},onclose:(o=h==null?void 0:h.onclose)!==null&&o!==void 0?o:function(x){}},E=this.webSocketFactory.create(c,ZE(s),S);E.connect(),await f;const v={setup:{model:ue(this.apiClient,e.model)}};return E.send(JSON.stringify(v)),new jE(E,this.apiClient)}}class jE{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=wx(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Cx(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ro.PLAY)}pause(){this.sendPlaybackControl(ro.PAUSE)}stop(){this.sendPlaybackControl(ro.STOP)}resetContext(){this.sendPlaybackControl(ro.RESET_CONTEXT)}close(){this.conn.close()}}function ZE(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function eT(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tT="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function nT(t,e,n){const o=new y0;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const i=JSON.parse(r);if(t.isVertexAI()){const s=_x(i);Object.assign(o,s)}else Object.assign(o,i);e(o)}class oT{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new QE(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,i,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&Pm(e.config.tools)&&km(h);const m=lT(h);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,f);else{const M=this.apiClient.getApiKey();let U="BidiGenerateContent",O="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",O="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${U}?${O}=${M}`}let g=()=>{};const S=new Promise(M=>{g=M}),E=e.callbacks,C=function(){var M;(M=E==null?void 0:E.onopen)===null||M===void 0||M.call(E),g({})},y=this.apiClient,v={onopen:C,onmessage:M=>{nT(y,E.onmessage,M)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(M){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(M){}},x=this.webSocketFactory.create(f,sT(m),v);x.connect(),await S;let T=ue(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const M=this.apiClient.getProject(),U=this.apiClient.getLocation();T=`projects/${M}/locations/${U}/`+T}let I={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[bi.AUDIO]}:e.config.responseModalities=[bi.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],A=[];for(const M of _)if(this.isCallableTool(M)){const U=M;A.push(await U.tool())}else A.push(M);A.length>0&&(e.config.tools=A);const k={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=Tx(this.apiClient,k):I=Ex(this.apiClient,k),delete I.config,x.send(JSON.stringify(I)),new iT(x,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const rT={turnComplete:!0};class iT{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=ht(n.turns),e.isVertexAI()||(o=o.map(r=>os(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(tT)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},rT),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Nx(e)}:n={realtimeInput:Ix(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function sT(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function lT(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dd=10;function Ud(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(mo(s)){r=!0;break}if(!r)return!0;const i=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function mo(t){return"callTool"in t&&typeof t.callTool=="function"}function aT(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>mo(r)))!==null&&o!==void 0?o:!1}function Ld(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(mo(o))return;const i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(r)}),n}function Fd(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uT extends Qt{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,i,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!aT(n)||Ud(n.config))return await this.generateContentInternal(c);const d=Ld(n);if(d.length>0){const E=d.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let f,h;const m=ht(c.contents),g=(i=(r=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Dd;let S=0;for(;S<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const E=f.candidates[0].content,C=[];for(const y of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(mo(y)){const x=await y.callTool(f.functionCalls);C.push(...x)}S++,h={role:"user",parts:C},c.contents=ht(c.contents),c.contents.push(E),c.contents.push(h),Fd(c.config)&&(m.push(E),m.push(h))}return Fd(c.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async n=>{var o,r,i,s,u;if(this.maybeMoveToResponseJsonSchem(n),Ud(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const c=Ld(n);if(c.length>0){const h=c.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(u=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i;const s=[];if(o!=null&&o.generatedImages)for(const c of o.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:s.push(c);let u;return i?u={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new $n(Yt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,s,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const s=await Promise.all(i.map(async c=>mo(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&Pm(e.config.tools)){const c=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),km(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,o,r;const i=new Map;for(const s of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(mo(s)){const u=s,c=await u.tool();for(const d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,u)}}return i}async processAfcStream(e){var n,o,r;const i=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Dd;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return function(d,f,h){return Nt(this,arguments,function*(){for(var m,g,S,E,C,y;u<i;){s&&(u++,s=!1);const I=yield ee(d.processParamsMaybeAddMcpUsage(h)),_=yield ee(d.generateContentStreamInternal(I)),A=[],k=[];try{for(var v=!0,x=(g=void 0,_t(_)),T;T=yield ee(x.next()),m=T.done,!m;v=!0){E=T.value,v=!1;const M=E;if(yield yield ee(M),M.candidates&&(!((C=M.candidates[0])===null||C===void 0)&&C.content)){k.push(M.candidates[0].content);for(const U of(y=M.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(u<i&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(U.functionCall.name)){const O=yield ee(f.get(U.functionCall.name).callTool([U.functionCall]));A.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(M){g={error:M}}finally{try{!v&&!m&&(S=x.return)&&(yield ee(S.call(x)))}finally{if(g)throw g.error}}if(A.length>0){s=!0;const M=new Fo;M.candidates=[{content:{role:"user",parts:A}}],yield yield ee(M);const U=[];U.push(...k),U.push({role:"user",parts:A});const O=ht(h.contents).concat(U);h.contents=O}else break}})}(this,c,e)}async generateContentInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Pd(this.apiClient,e);return u=z("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Md(f),m=new Fo;return Object.assign(m,h),m})}else{const d=Rd(this.apiClient,e);return u=z("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=kd(f),m=new Fo;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Pd(this.apiClient,e);return u=z("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return Nt(this,arguments,function*(){var m,g,S,E;try{for(var C=!0,y=_t(h),v;v=yield ee(y.next()),m=v.done,!m;C=!0){E=v.value,C=!1;const x=E,T=Md(yield ee(x.json()));T.sdkHttpResponse={headers:x.headers};const I=new Fo;Object.assign(I,T),yield yield ee(I)}}catch(x){g={error:x}}finally{try{!C&&!m&&(S=y.return)&&(yield ee(S.call(y)))}finally{if(g)throw g.error}}})})}else{const d=Rd(this.apiClient,e);return u=z("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(h){return Nt(this,arguments,function*(){var m,g,S,E;try{for(var C=!0,y=_t(h),v;v=yield ee(y.next()),m=v.done,!m;C=!0){E=v.value,C=!1;const x=E,T=kd(yield ee(x.json()));T.sdkHttpResponse={headers:x.headers};const I=new Fo;Object.assign(I,T),yield yield ee(I)}}catch(x){g={error:x}}finally{try{!C&&!m&&(S=y.return)&&(yield ee(S.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=oS(this.apiClient,e);return u=z("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=iS(f),m=new fd;return Object.assign(m,h),m})}else{const d=nS(this.apiClient,e);return u=z("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=rS(f),m=new fd;return Object.assign(m,h),m})}}async generateImagesInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=gS(this.apiClient,e);return u=z("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=yS(f),m=new pd;return Object.assign(m,h),m})}else{const d=hS(this.apiClient,e);return u=z("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=vS(f),m=new pd;return Object.assign(m,h),m})}}async editImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=jx(this.apiClient,e);return i=z("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Zx(c),f=new l0;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=gE(this.apiClient,e);return i=z("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=vE(c),f=new a0;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=QS(this.apiClient,e);return i=z("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=jS(c),f=new u0;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=rE(this.apiClient,e);return i=z("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=iE(c),f=new c0;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=US(this.apiClient,e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Bl(f))}else{const d=DS(this.apiClient,e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Vl(f))}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=qS(this.apiClient,e);return u=z("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=JS(f),m=new md;return Object.assign(m,h),m})}else{const d=$S(this.apiClient,e);return u=z("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=zS(f),m=new md;return Object.assign(m,h),m})}}async update(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=mE(this.apiClient,e);return u=z("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Bl(f))}else{const d=pE(this.apiClient,e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Vl(f))}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Kx(this.apiClient,e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Xx(f),m=new hd;return Object.assign(m,h),m})}else{const d=Wx(this.apiClient,e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Yx(f),m=new hd;return Object.assign(m,h),m})}}async countTokens(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=qx(this.apiClient,e);return u=z("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Jx(f),m=new gd;return Object.assign(m,h),m})}else{const d=$x(this.apiClient,e);return u=z("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=zx(f),m=new gd;return Object.assign(m,h),m})}}async computeTokens(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=Lx(this.apiClient,e);return i=z("{model}:computeTokens",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Fx(c),f=new d0;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=wS(this.apiClient,e);return u=z("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=TS(f),m=new Di;return Object.assign(m,h),m})}else{const d=CS(this.apiClient,e);return u=z("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=ES(f),m=new Di;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cT extends Qt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=t0(e);return u=z("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}else{const d=e0(e);return u=z("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=Wv(e);return i=z("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dT(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function fT(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ET(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function pT(t,e,n){const o={},r=l(e,["expireTime"]);n!==void 0&&r!=null&&a(n,["expireTime"],r);const i=l(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&a(n,["newSessionExpireTime"],i);const s=l(e,["uses"]);n!==void 0&&s!=null&&a(n,["uses"],s);const u=l(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],ST(t,u));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),o}function mT(t,e){const n={},o=l(e,["config"]);return o!=null&&a(n,["config"],pT(t,o,n)),n}function hT(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function gT(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vT(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function yT(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function xT(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","speechConfig"],Qa(h));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=l(t,["systemInstruction"]);e!==void 0&&S!=null&&a(e,["setup","systemInstruction"],fT(Be(S)));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let _=_o(E);Array.isArray(_)&&(_=_.map(A=>CT(No(A)))),a(e,["setup","tools"],_)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],TT(C));const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","inputAudioTranscription"],y);const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","outputAudioTranscription"],v);const x=l(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&a(e,["setup","realtimeInputConfig"],x);const T=l(t,["contextWindowCompression"]);e!==void 0&&T!=null&&a(e,["setup","contextWindowCompression"],T);const I=l(t,["proactivity"]);if(e!==void 0&&I!=null&&a(e,["setup","proactivity"],I),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ST(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],ue(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],xT(r,n)),n}function ET(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],hT(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],gT(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],dT(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function TT(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],vT(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],yT(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wT(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(i=>`${n}.${i}`);e.push(...r)}else e.push(n)}return e.join(",")}function IT(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const i=o.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const i=wT(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class NT extends Qt{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=mT(this.apiClient,e);i=z("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=IT(u,e.config);return r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _T(t,e){const n={},o=l(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function AT(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=l(t,["config"]);return o!=null&&_T(o,e),e}function RT(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function PT(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function kT(t){const e={},n=l(t,["parent"]);n!=null&&a(e,["_url","parent"],n);const o=l(t,["config"]);return o!=null&&PT(o,e),e}function MT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["documents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bT extends Qt{constructor(e){super(),this.apiClient=e,this.list=async n=>new $n(Yt.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=RT(e);return i=z("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=AT(e);r=z("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kT(e);return i=z("{parent}/documents",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=MT(c),f=new f0;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DT extends Qt{constructor(e,n=new bT(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new $n(Yt.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wE(e);return i=z("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_E(e);return i=z("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=NE(e);r=z("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bE(e);return i=z("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=DE(c),f=new p0;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=UE(e);return i=z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=LE(c),f=new m0;return Object.assign(f,d),f})}}async importFile(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=PE(e);return i=z("{file_search_store_name}:importFile",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=RE(c),f=new Ja;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Mm=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Mm=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const UT=()=>Mm();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ql(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const zl=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yt extends Error{}class We extends yt{constructor(e,n,o,r){super(`${We.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new ss({message:o,cause:zl(n)});const i=n;return e===400?new Dm(e,i,o,r):e===401?new Um(e,i,o,r):e===403?new Lm(e,i,o,r):e===404?new Fm(e,i,o,r):e===409?new Om(e,i,o,r):e===422?new Gm(e,i,o,r):e===429?new Hm(e,i,o,r):e>=500?new Vm(e,i,o,r):new We(e,i,o,r)}}class Jl extends We{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ss extends We{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class bm extends ss{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Dm extends We{}class Um extends We{}class Lm extends We{}class Fm extends We{}class Om extends We{}class Gm extends We{}class Hm extends We{}class Vm extends We{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LT=/^[a-z][a-z0-9+.-]*:/i,FT=t=>LT.test(t);let Wl=t=>(Wl=Array.isArray,Wl(t));const OT=Wl;let GT=OT;const Od=GT;function HT(t){if(!t)return!0;for(const e in t)return!1;return!0}function VT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const BT=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new yt(`${t} must be an integer`);if(e<0)throw new yt(`${t} must be a positive integer`);return e},$T=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qT=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zn="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zT(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const JT=()=>{var t,e,n,o,r;const i=zT();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zn,"X-Stainless-OS":Hd(Deno.build.os),"X-Stainless-Arch":Gd(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zn,"X-Stainless-OS":Hd((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Gd((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const s=WT();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function WT(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,i=o[2]||0,s=o[3]||0;return{browser:e,version:`${r}.${i}.${s}`}}}return null}const Gd=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Hd=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let $r;const KT=()=>$r??($r=JT());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YT(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Bm(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function XT(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Bm({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function $m(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function QT(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jT=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qm=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Os(t,e,n){return qm(),new File(t,e??"unknown_file",n)}function ZT(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const eC=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zm=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",tC=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&zm(t),nC=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function oC(t,e,n){if(qm(),t=await t,tC(t))return t instanceof File?t:Os([await t.arrayBuffer()],t.name);if(nC(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Os(await Kl(r),e,n)}const o=await Kl(t);if(e||(e=ZT(t)),!(n!=null&&n.type)){const r=o.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Os(o,e,n)}async function Kl(t){var e,n,o,r,i;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(zm(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(eC(t))try{for(var u=!0,c=_t(t),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const f=r;s.push(...await Kl(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}else{const f=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${rC(t)}`)}return s}function rC(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jm{constructor(e){this._client=e}}Jm._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wm(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Vd=Object.freeze(Object.create(null)),iC=(t=Wm)=>function(n,...o){if(n.length===1)return n[0];let r=!1;const i=[],s=n.reduce((f,h,m)=>{var g,S,E;/[?#]/.test(h)&&(r=!0);const C=o[m];let y=(r?encodeURIComponent:t)(""+C);return m!==o.length&&(C==null||typeof C=="object"&&C.toString===((E=Object.getPrototypeOf((S=Object.getPrototypeOf((g=C.hasOwnProperty)!==null&&g!==void 0?g:Vd))!==null&&S!==void 0?S:Vd))===null||E===void 0?void 0:E.toString))&&(y=C+"",i.push({start:f.length+h.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),f+h+(m===o.length?"":y)},""),u=s.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(u))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,h)=>f.start-h.start),i.length>0){let f=0;const h=i.reduce((m,g)=>{const S=" ".repeat(g.start-f),E="^".repeat(g.length);return f=g.start+g.length,m+S+E},"");throw new yt(`Path parameters result in path with invalid segments:
${i.map(m=>m.error).join(`
`)}
${s}
${h}`)}return s},qr=iC(Wm);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Km extends Jm{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,i=Li(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new yt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new yt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(qr`/${r}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(qr`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(qr`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const i=n??{},{api_version:s=this._client.apiVersion}=i,u=Li(i,["api_version"]);return this._client.get(qr`/${s}/interactions/${e}`,Object.assign(Object.assign({query:u},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}Km._key=Object.freeze(["interactions"]);class Ym extends Km{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sC(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let zr;function Za(t){let e;return(zr??(e=new globalThis.TextEncoder,zr=e.encode.bind(e)))(t)}let Jr;function Bd(t){let e;return(Jr??(e=new globalThis.TextDecoder,Jr=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ls{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Za(e):e;this.buffer=sC([this.buffer,n]);const o=[];let r;for(;(r=lC(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(Bd(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=Bd(this.buffer.subarray(0,i));o.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}ls.NEWLINE_CHARS=new Set([`
`,"\r"]);ls.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lC(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function aC(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fi={off:0,error:200,warn:300,info:400,debug:500},$d=(t,e,n)=>{if(t){if(VT(Fi,t))return t;qe(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Fi))}`)}};function qo(){}function Wr(t,e,n){return!e||Fi[t]>Fi[n]?qo:e[t].bind(e)}const uC={error:qo,warn:qo,info:qo,debug:qo};let qd=new WeakMap;function qe(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return uC;const r=qd.get(n);if(r&&r[0]===o)return r[1];const i={error:Wr("error",n,o),warn:Wr("warn",n,o),info:Wr("info",n,o),debug:Wr("debug",n,o)};return qd.set(n,[o,i]),i}const Pn=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class io{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const i=o?qe(o):console;function s(){return Nt(this,arguments,function*(){var c,d,f,h;if(r)throw new yt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let m=!1;try{try{for(var g=!0,S=_t(cC(e,n)),E;E=yield ee(S.next()),c=E.done,!c;g=!0){h=E.value,g=!1;const C=h;if(!m)if(C.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield ee(JSON.parse(C.data))}catch(y){throw i.error("Could not parse message into JSON:",C.data),i.error("From chunk:",C.raw),y}}}catch(C){d={error:C}}finally{try{!g&&!c&&(f=S.return)&&(yield ee(f.call(S)))}finally{if(d)throw d.error}}m=!0}catch(C){if(ql(C))return yield ee(void 0);throw C}finally{m||n.abort()}})}return new io(s,n,o)}static fromReadableStream(e,n,o){let r=!1;function i(){return Nt(this,arguments,function*(){var c,d,f,h;const m=new ls,g=$m(e);try{for(var S=!0,E=_t(g),C;C=yield ee(E.next()),c=C.done,!c;S=!0){h=C.value,S=!1;const y=h;for(const v of m.decode(y))yield yield ee(v)}}catch(y){d={error:y}}finally{try{!S&&!c&&(f=E.return)&&(yield ee(f.call(E)))}finally{if(d)throw d.error}}for(const y of m.flush())yield yield ee(y)})}function s(){return Nt(this,arguments,function*(){var c,d,f,h;if(r)throw new yt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let m=!1;try{try{for(var g=!0,S=_t(i()),E;E=yield ee(S.next()),c=E.done,!c;g=!0){h=E.value,g=!1;const C=h;m||C&&(yield yield ee(JSON.parse(C)))}}catch(C){d={error:C}}finally{try{!g&&!c&&(f=S.return)&&(yield ee(f.call(S)))}finally{if(d)throw d.error}}m=!0}catch(C){if(ql(C))return yield ee(void 0);throw C}finally{m||n.abort()}})}return new io(s,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=i=>({next:()=>{if(i.length===0){const s=o.next();e.push(s),n.push(s)}return i.shift()}});return[new io(()=>r(e),this.controller,this.client),new io(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Bm({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:i}=await n.next();if(i)return o.close();const s=Za(JSON.stringify(r)+`
`);o.enqueue(s)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function cC(t,e){return Nt(this,arguments,function*(){var o,r,i,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new yt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new yt("Attempted to iterate over a response with no body");const u=new fC,c=new ls,d=$m(t.body);try{for(var f=!0,h=_t(dC(d)),m;m=yield ee(h.next()),o=m.done,!o;f=!0){s=m.value,f=!1;const g=s;for(const S of c.decode(g)){const E=u.decode(S);E&&(yield yield ee(E))}}}catch(g){r={error:g}}finally{try{!f&&!o&&(i=h.return)&&(yield ee(i.call(h)))}finally{if(r)throw r.error}}for(const g of c.flush()){const S=u.decode(g);S&&(yield yield ee(S))}})}function dC(t){return Nt(this,arguments,function*(){var n,o,r,i;let s=new Uint8Array;try{for(var u=!0,c=_t(t),d;d=yield ee(c.next()),n=d.done,!n;u=!0){i=d.value,u=!1;const f=i;if(f==null)continue;const h=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?Za(f):f;let m=new Uint8Array(s.length+h.length);m.set(s),m.set(h,s.length),s=m;let g;for(;(g=aC(s))!==-1;)yield yield ee(s.slice(0,g)),s=s.slice(g)}}catch(f){o={error:f}}finally{try{!u&&!n&&(r=c.return)&&(yield ee(r.call(c)))}finally{if(o)throw o.error}}s.length>0&&(yield yield ee(s))})}class fC{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=pC(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function pC(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mC(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:i}=e,s=await(async()=>{var u;if(e.options.stream)return qe(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):io.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(u=c==null?void 0:c.split(";")[0])===null||u===void 0?void 0:u.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return qe(t).debug(`[${o}] response parsed`,Pn({retryOfRequestLogID:r,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eu extends Promise{constructor(e,n,o=mC){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new eu(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xm=Symbol("brand.privateNullableHeaders");function*hC(t){if(!t)return;if(Xm in t){const{values:o,nulls:r}=t;yield*o.entries();for(const i of r)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Od(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const i=Od(o[1])?o[1]:[o[1]];let s=!1;for(const u of i)u!==void 0&&(e&&!s&&(s=!0,yield[r,null]),yield[r,u])}}const Oo=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[i,s]of hC(o)){const u=i.toLowerCase();r.has(u)||(e.delete(i),r.add(u)),s===null?(e.delete(i),n.add(u)):(e.append(i,s),n.delete(u))}}return{[Xm]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gs=t=>{var e,n,o,r,i,s;if(typeof globalThis.process<"u")return(o=(n=(e=Vv)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||i===void 0?void 0:i.call(r,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Qm;class as{constructor(e){var n,o,r,i,s,u,c,{baseURL:d=Gs("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Gs("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,m=Li(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:f,apiVersion:h},m),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(o=g.timeout)!==null&&o!==void 0?o:as.DEFAULT_TIMEOUT,this.logger=(r=g.logger)!==null&&r!==void 0?r:console;const S="warn";this.logLevel=S,this.logLevel=(s=(i=$d(g.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:$d(Gs("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:S,this.fetchOptions=g.fetchOptions,this.maxRetries=(u=g.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(c=g.fetch)!==null&&c!==void 0?c:YT(),this.encoder=jT,this._options=g,this.apiKey=f,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Oo([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Oo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Oo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new yt(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${zn}`}defaultIdempotencyKey(){return`stainless-node-retry-${UT()}`}makeStatusError(e,n,o,r){return We.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,i=FT(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return HT(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new eu(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,i,s;const u=await e,c=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=c),await this.prepareOptions(u);const{req:d,url:f,timeout:h}=await this.buildRequest(u,{retryCount:c-n});await this.prepareRequest(d,{url:f,options:u});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=o===void 0?"":`, retryOf: ${o}`,S=Date.now();if(qe(this).debug(`[${m}] sending request`,Pn({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:d.headers})),!((i=u.signal)===null||i===void 0)&&i.aborted)throw new Jl;const E=new AbortController,C=await this.fetchWithTimeout(f,d,h,E).catch(zl),y=Date.now();if(C instanceof globalThis.Error){const x=`retrying, ${n} attempts remaining`;if(!((s=u.signal)===null||s===void 0)&&s.aborted)throw new Jl;const T=ql(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(n)return qe(this).info(`[${m}] connection ${T?"timed out":"failed"} - ${x}`),qe(this).debug(`[${m}] connection ${T?"timed out":"failed"} (${x})`,Pn({retryOfRequestLogID:o,url:f,durationMs:y-S,message:C.message})),this.retryRequest(u,n,o??m);throw qe(this).info(`[${m}] connection ${T?"timed out":"failed"} - error; no more retries left`),qe(this).debug(`[${m}] connection ${T?"timed out":"failed"} (error; no more retries left)`,Pn({retryOfRequestLogID:o,url:f,durationMs:y-S,message:C.message})),T?new bm:new ss({cause:C})}const v=`[${m}${g}] ${d.method} ${f} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${y-S}ms`;if(!C.ok){const x=await this.shouldRetry(C);if(n&&x){const M=`retrying, ${n} attempts remaining`;return await QT(C.body),qe(this).info(`${v} - ${M}`),qe(this).debug(`[${m}] response error (${M})`,Pn({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:y-S})),this.retryRequest(u,n,o??m,C.headers)}const T=x?"error; no more retries left":"error; not retryable";qe(this).info(`${v} - ${T}`);const I=await C.text().catch(M=>zl(M).message),_=$T(I),A=_?void 0:I;throw qe(this).debug(`[${m}] response error (${T})`,Pn({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,message:A,durationMs:Date.now()-S})),this.makeStatusError(C.status,_,A,C.headers)}return qe(this).info(v),qe(this).debug(`[${m}] response start`,Pn({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:y-S})),{response:C,options:u,controller:E,requestLogID:m,retryOfRequestLogID:o,startTime:S}}async fetchWithTimeout(e,n,o,r){const i=n||{},{signal:s,method:u}=i,c=Li(i,["signal","method"]);s&&s.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),o),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,h=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);u&&(h.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var i;let s;const u=r==null?void 0:r.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(s=d)}const c=r==null?void 0:r.get("retry-after");if(c&&!s){const d=parseFloat(c);Number.isNaN(d)?s=Date.parse(c)-Date.now():s=d*1e3}if(!(s&&0<=s&&s<60*1e3)){const d=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,d)}return await qT(s),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,s=Math.min(.5*Math.pow(2,i),8),u=1-Math.random()*.25;return s*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,i;const s=Object.assign({},e),{method:u,path:c,query:d,defaultBaseURL:f}=s,h=this.buildURL(c,d,f);"timeout"in s&&BT("timeout",s.timeout),s.timeout=(o=s.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:s}),S=await this.buildHeaders({options:e,method:u,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:S},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(i=s.fetchOptions)!==null&&i!==void 0?i:{}),url:h,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let u=Oo([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),KT()),this._options.defaultHeaders,o,e.headers,s]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Oo([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:XT(e)}:this.encoder({body:e,headers:o})}}as.DEFAULT_TIMEOUT=6e4;class De extends as{constructor(){super(...arguments),this.interactions=new Ym(this)}}Qm=De;De.GeminiNextGenAPIClient=Qm;De.GeminiNextGenAPIClientError=yt;De.APIError=We;De.APIConnectionError=ss;De.APIConnectionTimeoutError=bm;De.APIUserAbortError=Jl;De.NotFoundError=Fm;De.ConflictError=Om;De.RateLimitError=Hm;De.BadRequestError=Dm;De.AuthenticationError=Um;De.InternalServerError=Vm;De.PermissionDeniedError=Lm;De.UnprocessableEntityError=Gm;De.toFile=oC;De.Interactions=Ym;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gC(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function vC(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function yC(t,e){const n={},o=l(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function xC(t,e){const n={},o=l(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function SC(t,e,n){const o={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&a(e,["displayName"],r),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&a(e,["tuningTask","hyperparameters","epochCount"],i);const s=l(t,["learningRateMultiplier"]);if(s!=null&&a(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=l(t,["batchSize"]);e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","batchSize"],u);const c=l(t,["learningRate"]);if(e!==void 0&&c!=null&&a(e,["tuningTask","hyperparameters","learningRate"],c),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function EC(t,e,n){const o={};let r=l(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec"],zd(g))}else if(r==="PREFERENCE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec"],zd(g))}const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&a(e,["tunedModelDisplayName"],i);const s=l(t,["description"]);e!==void 0&&s!=null&&a(e,["description"],s);let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=l(t,["labels"]);e!==void 0&&h!=null&&a(e,["labels"],h);const m=l(t,["beta"]);return e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),o}function TC(t,e){const n={},o=l(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=l(t,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&bC(i);const s=l(t,["config"]);return s!=null&&SC(s,n),n}function CC(t,e){const n={},o=l(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=l(t,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&DC(i,n,e);const s=l(t,["config"]);return s!=null&&EC(s,n,e),n}function wC(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function IC(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function NC(t,e,n){const o={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&a(e,["_query","filter"],s),o}function _C(t,e,n){const o={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&a(e,["_query","filter"],s),o}function AC(t,e){const n={},o=l(t,["config"]);return o!=null&&NC(o,n),n}function RC(t,e){const n={},o=l(t,["config"]);return o!=null&&_C(o,n),n}function PC(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>jm(u))),a(n,["tuningJobs"],s)}return n}function kC(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>Yl(u))),a(n,["tuningJobs"],s)}return n}function MC(t,e){const n={},o=l(t,["name"]);o!=null&&a(n,["model"],o);const r=l(t,["name"]);return r!=null&&a(n,["endpoint"],r),n}function bC(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=l(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(n,["examples","examples"],r)}return n}function DC(t,e,n){const o={};let r=l(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function jm(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["state"]);i!=null&&a(n,["state"],mm(i));const s=l(t,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(t,["tuningTask","startTime"]);u!=null&&a(n,["startTime"],u);const c=l(t,["tuningTask","completeTime"]);c!=null&&a(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=l(t,["description"]);f!=null&&a(n,["description"],f);const h=l(t,["baseModel"]);h!=null&&a(n,["baseModel"],h);const m=l(t,["_self"]);return m!=null&&a(n,["tunedModel"],MC(m)),n}function Yl(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["state"]);i!=null&&a(n,["state"],mm(i));const s=l(t,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(n,["startTime"],u);const c=l(t,["endTime"]);c!=null&&a(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=l(t,["error"]);f!=null&&a(n,["error"],f);const h=l(t,["description"]);h!=null&&a(n,["description"],h);const m=l(t,["baseModel"]);m!=null&&a(n,["baseModel"],m);const g=l(t,["tunedModel"]);g!=null&&a(n,["tunedModel"],g);const S=l(t,["preTunedModel"]);S!=null&&a(n,["preTunedModel"],S);const E=l(t,["supervisedTuningSpec"]);E!=null&&a(n,["supervisedTuningSpec"],E);const C=l(t,["preferenceOptimizationSpec"]);C!=null&&a(n,["preferenceOptimizationSpec"],C);const y=l(t,["tuningDataStats"]);y!=null&&a(n,["tuningDataStats"],y);const v=l(t,["encryptionSpec"]);v!=null&&a(n,["encryptionSpec"],v);const x=l(t,["partnerModelTuningSpec"]);x!=null&&a(n,["partnerModelTuningSpec"],x);const T=l(t,["customBaseModel"]);T!=null&&a(n,["customBaseModel"],T);const I=l(t,["experiment"]);I!=null&&a(n,["experiment"],I);const _=l(t,["labels"]);_!=null&&a(n,["labels"],_);const A=l(t,["outputUri"]);A!=null&&a(n,["outputUri"],A);const k=l(t,["pipelineJob"]);k!=null&&a(n,["pipelineJob"],k);const M=l(t,["serviceAccount"]);M!=null&&a(n,["serviceAccount"],M);const U=l(t,["tunedModelDisplayName"]);U!=null&&a(n,["tunedModelDisplayName"],U);const O=l(t,["veoTuningSpec"]);return O!=null&&a(n,["veoTuningSpec"],O),n}function UC(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(t,["done"]);s!=null&&a(n,["done"],s);const u=l(t,["error"]);return u!=null&&a(n,["error"],u),n}function zd(t,e){const n={},o=l(t,["gcsUri"]);o!=null&&a(n,["validationDatasetUri"],o);const r=l(t,["vertexDatasetResource"]);return r!=null&&a(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LC extends Qt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $n(Yt.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:Fl.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=IC(e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>Yl(f))}else{const d=wC(e);return u=z("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>jm(f))}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=RC(e);return u=z("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=kC(f),m=new vd;return Object.assign(m,h),m})}else{const d=AC(e);return u=z("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=PC(f),m=new vd;return Object.assign(m,h),m})}}async cancel(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=vC(e);return u=z("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=xC(f),m=new yd;return Object.assign(m,h),m})}else{const d=gC(e);return u=z("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=yC(f),m=new yd;return Object.assign(m,h),m})}}async tuneInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=CC(e,e);return i=z("tuningJobs",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>Yl(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=TC(e);return i=z("tunedModels",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>UC(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FC{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const OC=1024*1024*8,GC=3,HC=1e3,VC=2,Oi="x-goog-upload-status";async function BC(t,e,n){var o;const r=await Zm(t,e,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Oi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function $C(t,e,n){var o;const r=await Zm(t,e,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Oi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=am(i),u=new Wa;return Object.assign(u,s),u}async function Zm(t,e,n){var o,r;let i=0,s=0,u=new Ol(new Response),c="upload";for(i=t.size;s<i;){const d=Math.min(OC,i-s),f=t.slice(s,s+d);s+d>=i&&(c+=", finalize");let h=0,m=HC;for(;h<GC&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[Oi]));)h++,await zC(m),m=m*VC;if(s+=d,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[Oi])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function qC(t){return{size:t.size,type:t.type}}function zC(t){return new Promise(e=>setTimeout(e,t))}class JC{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await BC(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $C(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qC(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WC{create(e,n,o){return new KC(e,n,o)}}class KC{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jd="x-goog-api-key";class YC{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Jd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Jd,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XC="gl-node/";class QC{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new De({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=zv(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new YC(this.apiKey);this.apiClient=new qE({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:XC+"web",uploader:new JC,downloader:new FC}),this.models=new uT(this.apiClient),this.live=new oT(this.apiClient,r,new WC),this.batches=new Sy(this.apiClient),this.chats=new tx(this.models,this.apiClient),this.caches=new jy(this.apiClient),this.files=new dx(this.apiClient),this.operations=new cT(this.apiClient),this.authTokens=new NT(this.apiClient),this.tunings=new LC(this.apiClient),this.fileSearchStores=new DT(this.apiClient)}}const vr={webtoon:{name:"  ",desc:"   +    ( )",prompt:"Premium Korean Historical Webtoon Style, High Quality 2D Digital Art, Crisp Line Art (Outlines), Cel Shading, Smooth Coloring, Beautiful Characters (Sparkling eyes, delicate features, pale skin, soft blush), Fusion Hanbok, Vibrant and Pastel tones, Webtoon Cover Art aesthetic, Sharp focus, No photorealism, Manhwa style"},animation:{name:"  ",desc:" ,  ",prompt:"2D cell animation style, Korean folklore atmosphere, flat shading, clean lines, Studio Ghibli inspired but Korean Joseon aesthetics"},inkwash:{name:"  (Modern)",desc:"   +   ",prompt:"Modern Korean emotional watercolor illustration, beautiful and handsome characters with modern aesthetic faces (sharp jawline, large expressive eyes, delicate features), soft transparent watercolor texture, ink spreading effect, dreamy and romantic atmosphere, detailed character design, NOT old traditional folk art style, NOT round ugly faces, pastel tones, artistic masterpiece"},fantasy:{name:"  ()",desc:"    ",prompt:"Korean Romance Fantasy Webnovel Cover Art Style, Semi-realistic Digital Illustration, Beautiful and Aesthetic, Highly Detailed Masterpiece, Soft Cinematic Lighting, 8k resolution, vibrant colors, dreamy atmosphere, detailed hair and eyes, no photorealistic skin texture, 2D rendering"}},at=t=>{if(!t)throw new Error("API   .   'API  '    .");return new QC({apiKey:t})},Cr=t=>{try{let e=t.replace(/```json\s*/g,"").replace(/```\s*/g,"");return e=e.trim(),JSON.parse(e)}catch(e){throw console.error("JSON Parse Error:",e,"Raw Text:",t),new Error("AI    . (JSON  )")}},jC=`
  [STRICT ARCHITECTURAL RULES - JOSEON DYNASTY]
  1. ONDOL STRUCTURE (CRITICAL): 
     - Kitchen (Bu-eok) MUST be attached to the Main Room (An-bang). NO OUTDOOR ISLAND KITCHENS.
     - Kitchen floor is LOWER (dirt). Room floor is RAISED (wood/stone).
  2. DOORS & WINDOWS:
     - ROOM DOORS: White rice paper (Changhoji) on wooden lattice.
     - KITCHEN DOORS: Rough solid wood planks. NO PAPER.
  3. ROOF & WALLS:
     - Commoner: Mud walls + Rounded Straw Roof (Choga).
     - Noble: Plaster walls + Black Tile Roof (Giwa).
`,eh=`
  [STRICT COSTUME RULES - DO NOT HALLUCINATE]
  1. SHOES:
     - Jipsin (Straw shoes): COVERS TOES. No flip-flops.
     - Indoors: NO SHOES. White socks (Beoseon) only.
  2. CLOTHING:
     - Hanbok Skirt (Chima): **MUST BE ANKLE LENGTH**. Show the shoes. Never drag on floor like a western dress.
     - Sleeves: Curved (Baerae).
  3. HAIR:
     - Men (Married): Sangtu (Topknot) + Headband (Manggeon).
     - Men (Unmarried): Long braided hair (Daenggi).
     - Women (Married): Low Bun (Jjok-jin) with Binyeo (Hairpin).
     - Women (Unmarried): Long braided hair.
     - **NO MODERN HAIRSTYLES**. No bangs unless specified.
  
  4. **[CRITICAL] UNDRESSED STATE (SEE-THROUGH RAMIE)**:
     - When prompt says "Remove Jeogori", "Undressed", "Sleeping", "Transparent":
       - **ITEM**: **"Moshi-Jeoksam" (White Ramie Summer Shirt)**.
       - **TRANSPARENCY**: The fabric is **EXTREMELY SHEER / SEE-THROUGH**.
       - **VISUAL EFFECT**:
         1. **SKIN TONE**: The **flesh tone** of Shoulders, Arms, and **Upper Chest (Cleavage)** MUST be clearly visible through the white fabric.
         2. **UNDER-LAYER**: The **White Chest Band (Mal-gi)** wrapping the breasts is visible **BENEATH** the sheer shirt.
         3. **RIBBON (Goreum)**: Even the chest ribbon is **TRANSPARENT WHITE RAMIE**.
       - **SILHOUETTE**: A white misty veil over the skin. Not opaque.
`,th=`
  NEGATIVE PROMPT: **LOOKING AT CAMERA**, **EYE CONTACT**, posing for photo, selfie, modern items, electricity, cars, concrete, western clothes, beds, chairs, glass windows, paved roads, Japanese style shoes (Geta/Zori), Chinese queues, text, watermark, speech bubble, dirty face (unless specified), messy hair (unless specified), short skirt, showing legs, modernized hanbok, 3d render, plastic skin, western lingerie, nipples, genitals, modern bra, thick clothes, winter clothes.
`,tu=`
  CONTEXT: Korea, Joseon Dynasty (19th Century).
  ${jC}
  ${eh}
  ${th}
`,ZC=async(t,e)=>{const n=at(t),o=e.match(/^data:(.+);base64,(.+)$/);if(!o)return"Imported image";const r=`
    Analyze this character image for a CONTINUITY SHEET.
    
    [CRITICAL INSTRUCTION]
    Describe specific visual traits that MUST be preserved in future drawings.
    
    1. **HEADWEAR**: Exact type (Gat, Nambawi, None) and color.
    2. **HAIR**: Exact style (Topknot, Braid, Bun) and hairline.
    3. **CLOTHING**: 
       - Top (Jeogori) Color & Pattern.
       - Bottom (Baji/Chima) Color.
       - Outer (Dopo/Jangot) Color.
    4. **FACE**: Eye shape, facial hair (beard/mustache), distinct features.
    
    Output a single paragraph. Be extremely precise about COLORS.
  `;try{return(await n.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:o[1],data:o[2]}},{text:r}]}})).text||"Imported Character Reference"}catch(i){return console.error("Vision Analysis Failed",i),"Imported Character Reference (Analysis Failed)"}},ew=async(t,e,n)=>{const o=at(t),r=`
      You are a storyboard director. SPLIT this scene into ${n} sequential cuts.
      ORIGINAL: "${e.scriptSegment}" (${e.location})
      
      RULES:
      1. Break the action/dialogue logically.
      2. Keep the same Location/Time.
      3. Create specific visual descriptions for each cut.
      
      OUTPUT JSON:
      [ { "location": "Location (Keep Korean)", "timeOfDay": "Time (Keep Korean)", "scriptSegment": "Script Content (Keep Korean)", "description": "Visual Description (English)" }, ... ]

      [LANGUAGE RULES]
      1. **scriptSegment**: MUST BE KOREAN. Copy the exact lines from the original script. DO NOT TRANSLATE.
      2. **location** & **timeOfDay**: MUST BE KOREAN (e.g., "", "").
      3. **description**: MUST BE ENGLISH (Visual instructions for Image AI).
    `;try{const i=await o.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json"}});if(i.text){const s=Cr(i.text);if(Array.isArray(s))return s.map((u,c)=>({id:`${e.id}-split-${Date.now()}-${c}`,sceneNumber:0,location:u.location||e.location,timeOfDay:u.timeOfDay||e.timeOfDay,scriptSegment:u.scriptSegment,description:u.description,aspectRatio:e.aspectRatio,casting:e.casting}))}return[e]}catch(i){throw console.error(i),new Error("  ")}},tw=async(t,e,n=[])=>{const o=at(t),r=n.length>0?`EXISTING LOCATIONS: ${n.map(s=>`${s.location} (${s.description})`).join("; ")}`:"",i=`
    Analyze this Korean script for a Webtoon/Animation storyboard.
    ${tu}
    ${r}
    
    TASK: Break down the script into SCENES based on NARRATIVE BEATS.
    Target Count: ~20-30 scenes for 3000 chars.
    
    OUTPUT JSON:
    [{ "sceneNumber": 1, "location": "Location (KOREAN)", "scriptSegment": "Original Script Text (KOREAN)", "description": "Visual Description for AI Prompt (ENGLISH)", "timeOfDay": "Day/Night (KOREAN)" }]
    
    [IMPORTANT LANGUAGE RULES]
    1. **scriptSegment**: MUST BE KOREAN. Copy exact lines from script. DO NOT TRANSLATE.
    2. **location**: MUST BE KOREAN (e.g., "", "", "").
    3. **timeOfDay**: MUST BE KOREAN (e.g., "", "", "", "").
    4. **description**: MUST BE ENGLISH (This is for the AI Image Generator).
    
    SCRIPT:
    ${e.substring(0,3e4)}
  `;try{const s=await o.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json"}});if(s.text){const u=Cr(s.text);if(Array.isArray(u))return u.map((c,d)=>({id:`scene-${Date.now()}-${d}`,...c}))}return[]}catch(s){throw console.error(s),new Error("  .  .")}},nw=async(t,e,n,o=[])=>{const r=at(t),i=`
    You are a Casting Director. Extract characters from the script.
    OUTPUT JSON:
    [{ "name": "Name (KOREAN)", "visualGuide": "Korean Desc", "age": "20", "gender": "Male", "description": "English visual prompt" }]

    [LANGUAGE RULES]
    1. **name**: Keep in KOREAN (e.g., "").
    2. **visualGuide**: Korean description for the user.
    3. **description**: English visual description for AI.

    SCRIPT:
    ${e.substring(0,15e3)}...
  `;try{const s=await r.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json"}});if(s.text){const u=Cr(s.text);if(Array.isArray(u))return u.map((c,d)=>({id:`char-${Date.now()}-${d}`,...c,hasDialogue:!0,chromaKeyColor:"green",actions:[]}))}return[]}catch(s){return console.error(s),[]}},ow=async(t,e,n,o,r)=>{const i=at(t),s=n.map(f=>`[CHARACTER: ${f.name}] ${f.description}`).join(`
`),u=o?o.map(f=>`[PROP: ${f.name}] ${f.description}`).join(`
`):"",c=r?`[GLOBAL RULES] ${r}`:"",d=`
    Act as a PD for a viral 'Mystery/Folktale' YouTube channel.
    Create a 5-shot "HOOKING TEASER" sequence to grab attention immediately.

    [VISUAL CONSISTENCY BIBLE]
    You MUST adhere to these character and prop designs strictly.
    ${s}
    ${u}
    ${c}
    ${tu}

    [CRITICAL INSTRUCTION]
    1. Analyze the **SOURCE TEXT** to find the single **Most Dramatic / Shocking / Emotional Conflict** or **Turning Point**.
    2. Do NOT summarize the story. Do NOT just show the beginning.
    3. Focus on the "Incident" that makes viewers ask: "Why is this happening?" or "What happens next?"
    
    [EXAMPLES OF HOOKING LOGIC]
    - If the story is about revenge: Show the cruel moment the protagonist is kicked out in the rain, crying blood tears.
    - If the story is about a slave: Show the pain/torture of the slave market, then end with the rich man saying "I will buy him."
    - **Goal**: Show the SUFFERING, CONFLICT, or SHOCKING REVEAL.
    
    [VEO VIDEO PROMPT RULES - CRITICAL]
    Structure the 'videoPrompt' for seamless Image-to-Video Morphing:
    1. **Context**: You are generating a prompt for Veo where User will input [Start Image] and [End Image].
    2. **0~5s (Action)**: Describe the action starting from the [Start Image]. (e.g., "The woman looks up with tears.")
    3. **6~8s (Morphing)**: Describe the transition **INTO the next scene's visual** (End Image).
    4. **NO BLACK/BLUR**: Do NOT fade to black. The video must end by **transforming** into the next shot's composition.
    5. **Syntax**: "Start with [Action A]. Then slowly morph/transform into [Description of Next Shot] at the end."
    
    [OUTPUT FORMAT]
    OUTPUT JSON: [{ "sequenceNumber": 1, "title": "Dramatic Title (15-25 chars)", "visualPrompt": "Detailed visual description including Character/Prop details", "videoPrompt": "Veo Prompt with Morphing Logic" }]
    
    [CONSTRAINT]
    - "title" must be concise and impactful, between 15 and 25 Korean characters.
    
    SOURCE TEXT:
    ${e.substring(0,5e4)}
  `;try{const f=await i.models.generateContent({model:"gemini-3-pro-preview",contents:d,config:{responseMimeType:"application/json"}});if(f.text){const h=Cr(f.text);if(Array.isArray(h))return h.map(m=>({id:`open-${Date.now()}-${m.sequenceNumber}`,...m}))}return[]}catch(f){throw console.error(f),new Error("  ")}},Gi=async(t,e,n,o="16:9",r="background",i,s,u,c,d,f)=>{var H,Z,D,Y;const h=at(t),m=vr[n].prompt;let S={aspectRatio:o||"16:9"},E=s||"";s&&/[-]/.test(s)&&(E=await To(h,s));let C=d||"";d&&/[-]/.test(d)&&(C=await To(h,d));const y=`
    [ROLE] You are the "Continuity Supervisor" for a high-budget Korean Historical Drama.
    [ABSOLUTE CASTING RULE]
    - **DRAW ONLY** the characters explicitly listed in the "[FOCUS SUBJECT]" section of the prompt.
    - If the script mentions other characters (talking/listening) but they are NOT in "[FOCUS SUBJECT]", **DO NOT DRAW THEM**.
    - If only ONE character is listed, it must be a **SOLO SHOT**.
    
    [YOUR MISSION]
    1. **CONSISTENCY IS GOD**: 
       - If a Character Reference is provided, the character MUST look exactly like it.
       - If a Background Reference is provided, the room/environment MUST look exactly like it.
    2. **ACTING DIRECTOR**: Natural acting, candid shots.
    3. **HISTORICAL POLICE**: Enforce Joseon Dynasty rules.
  `,v=C?`
    [MANDATORY GLOBAL PRODUCTION DESIGN GUIDELINES]
    (These rules apply to ALL scenes unless specifically overridden)
    ${C}
  `:"",x=E?`
    [USER COMMAND - ABSOLUTE PRIORITY - OVERRIDES REFERENCE]
    The user wants to CHANGE specific details from the reference image.
    User says: "${E}".
    
    [EXECUTION RULES]
    1. If the user asks to change clothing/hair (e.g., "Remove Hat", "Wear Indoor Clothes"), YOU MUST OBEY.
    2. Ignore the "Reference Image" constraint for that specific item.
    3. Keep the FACE and IDENTITY the same, but change the requested item.
  `:"";let T="";const I=Array.isArray(i)?i:i?[i]:[];I.length>0&&(r==="character"||r==="cinematic")&&(T=`
        [VISUAL ANCHOR - CHARACTERS]
        The provided images (tagged as Character Refs) are the **MASTER REFERENCES**.
        
        - **MATCHING RULE**: The prompt explicitly tags characters with "(MATCH WITH PROVIDED REFERENCE IMAGE #N)".
        - **EXECUTION**: You MUST map the Nth provided image to that specific character.
          (e.g., "Reference Image #1" -> First image in the list, "Reference Image #2" -> Second image).
        
        - **HAIR**: Copy the reference hairstyles EXACTLY.
        - **CLOTHES**: Copy colors, layers, and patterns EXACTLY.
        - **FACE**: Copy facial features.
        - **BACKGROUND EXCLUSION**: IGNORE any background elements (walls, furniture, landscapes) visible in the Character Reference Images. Use them ONLY for Character Design.
      `);let _="";u&&(_=`
        [VISUAL MASTER - BACKGROUND & STYLE]
        The provided image is the **BACKGROUND REFERENCE**.
        1. **ARCHITECTURE & ATMOSPHERE**: Copy the room structure, furniture, lighting, and textures EXACTLY.
        2. **ADAPT FRAMING**: 
           - IF a specific Camera Shot (e.g., Waist Shot) is requested in the prompt, YOU MUST ZOOM IN/OUT within this environment.
           - DO NOT just copy the reference's framing if it conflicts with the [CAMERA] instruction.
           - Example: If Reference is Wide Room but Prompt is "Waist Shot", draw the character from waist up with the blurred room background behind them.
      `);let A="";c&&c.length>0&&(A=`
        [VISUAL ANCHOR - PROPS/OBJECTS]
        The provided additional images are IMPORTANT OBJECTS (Props) that must appear in the scene.
        1. **INTEGRATION**: Include these objects in the scene naturally as described in the script.
        2. **APPEARANCE**: Maintain their visual appearance (color, shape, details) as shown in the reference images.
        3. **INTERACTION**: If the character is interacting with them (holding, looking at), ensure realistic interaction.
      `);const k=`
    [ACTING & CAMERA]
    - **DO NOT LOOK AT CAMERA**. (Unless 'Close Up Face' is requested).
    - Eyes should follow the action.
    - Candid Shot. Natural Movement.
  `,M=`
    [POSTURE & POSE RULES]
    1. **DEFAULT POSE**:
       - IF Location is OUTDOOR (Yard, Street, Forest): **MUST BE STANDING** unless script explicitly says "Sitting".
       - IF Location is INDOOR: Follow script context.
    2. **FRAMING VS POSE**:
       - **DO NOT CHANGE THE POSE** to fit the camera frame.
       - If "Waist Shot" is requested, **CROP THE IMAGE**. DO NOT make the character sit to hide their legs.
       - If the character is Standing, keep them Standing and just show the upper body.
  `,U=`
    [SPATIAL REALISM & LENS]
    1. **DO NOT SHRINK THE ROOM**: The room must remain spacious. Do not make the walls close in on the characters.
    2. **DEPTH**: Use "Depth of Field" or "Bokeh" for Close-ups/Waist Shots to separate character from background.
    3. **LENS**:
       - For Waist/Bust Shots: Use **85mm or 100mm Telephoto Lens**. (Flattens features, blurs background, keeps room scale natural).
       - Avoid Wide Angle (distorts face, makes room look small/curved) unless "Full Shot" is requested.
  `,O=`
    [HANBOK LAYERING & TRANSPARENCY]
    - If the user/script asks to "Remove Jeogori", "Undress", "Sleeping", or "Summer":
      1. **DRAW "MOSHI-JEOKSAM" (SHEER WHITE RAMIE SHIRT)**.
      2. **ABSOLUTE TRANSPARENCY**: The white fabric is translucent like a mist.
      3. **VISIBLE LAYERS (SEE-THROUGH)**: 
         - **SKIN**: The skin tone of Shoulders, Arms, and **Upper Chest (Cleavage)** is **CLEARLY VISIBLE** through the fabric.
         - **UNDERGARMENT**: The **White Chest Band (Mal-gi)** of the skirt is visible **UNDER** the sheer shirt.
         - **RIBBON**: The chest ribbon (Goreum) is also **TRANSPARENT white ramie**.
  `;let X="",N="";e.includes("[CAMERA]")&&(e.includes("Waist Shot")||e.includes("ws")?N=`
            [ABSOLUTE FRAMING RULE: WAIST SHOT] 
            1. **ZOOM / CROP**: The framing MUST be a **CLOSE-UP from Head to Waist**.
            2. **FILL THE SCREEN**: The Character's Head and Torso MUST FILL the vertical space of the 16:9 frame.
            3. **CUT OFF**: The bottom of the frame MUST CUT OFF at the Belt/Waist line. **DO NOT SHOW LEGS**.
            4. **POSTURE**: **SITTING IS ALLOWED**. If sitting, the camera zooms in to the upper body only.
            5. **NEGATIVE PROMPT**: Full body, Distant shot, Small character, Showing legs, Showing shoes.
          `:e.includes("Bust Shot")||e.includes("bs")||e.includes("Close Up")||e.includes("cu")?N=`
            [ABSOLUTE FRAMING RULE: BUST SHOT / CLOSE UP] 
            1. **EXTREME ZOOM**: The framing is TIGHT on the Face and Shoulders.
            2. **FILL THE SCREEN**: The Face and Shoulders MUST DOMINATE the frame (80% of screen).
            3. **CUT OFF**: The bottom of the frame MUST CUT OFF at the Chest/Armpits. **DO NOT SHOW WAIST**.
            4. **POSTURE**: **SITTING IS ALLOWED**. Even if sitting, we only see the face.
            5. **NEGATIVE PROMPT**: Waist, Stomach, Belt, Hands (unless gesture), Full body, Distant shot.
          `:e.includes("Knee Shot")||e.includes("mls")?N=`
            [ABSOLUTE FRAMING RULE: KNEE SHOT (Medium Long)] 
            1. **ZOOM**: The framing is from Head to Knees.
            2. **FILL THE SCREEN**: The Character (Head to Knees) MUST FILL the vertical space.
            3. **CUT OFF**: The bottom of the frame MUST CUT OFF at the Knees/Thighs. **DO NOT SHOW FEET**.
            4. **POSTURE**: **SITTING IS ALLOWED**. If sitting, show the character from Head to Knees.
            5. **NEGATIVE PROMPT**: Feet, Shoes, Ground at feet, Full body, Distant shot.
          `:(e.includes("Full Shot")||e.includes("full"))&&(N=`
            [ABSOLUTE FRAMING RULE: FULL SHOT]
            1. **WIDE ANGLE**: Show the ENTIRE BODY from Head to Toe.
            2. **FEET VISIBLE**: You MUST show the shoes/feet on the ground.
            3. **SPACE**: Leave some space above the head and below the feet.
            4. **POSTURE**: **SITTING IS ALLOWED**. If sitting, show the full sitting pose including legs/knees on floor.
          `));let F="";f&&(F=`
        [VISUAL ANCHOR - MASTER SCENE LOCATION]
        The provided first image is the **ACTUAL FILM SET** we are shooting in.
        
        [CRITICAL SPATIAL RULES - 3D WORLD EXTENSION]
        1. **IMMUTABLE WORLD**: The walls, floor, furniture, lighting, and atmosphere are **FIXED REALITY**.
        2. **CAMERA WORK ONLY**: You are a cameraman inside this specific room. You can ONLY change the Camera Angle, Lens, and Distance.
        3. **EXTEND THE SPACE**: 
           - Treat the image as a viewport into a full 3D room.
           - If the camera rotates to show a part NOT visible in the reference, **INFER** the environment based on the visible parts.
           - **CONTINUITY**: The unseen wall must match the style of the seen wall. The floor pattern must continue.
           - **DO NOT** invent a completely different style for the unseen areas.
        4. **PERSPECTIVE SHIFT**:
           - If prompt says "Side View", show THIS SAME ROOM from the side.
           - If prompt says "Reverse Shot", show the other side of THIS SAME ROOM.
      `),X=`
    [SYSTEM INSTRUCTION: IMAGE EDITING & FRAMING MODE]
    ${F}
    ${N}
    
    [ORIGINAL SCENE CONTEXT]
    ${y}
    ${m}
    ${v}
    ${tu}
    ${O}
    ${T}
    ${_}
    ${A}
    ${x}
    ${k}
    ${M}
    
    [SCENE GENERATION PROMPT]
    ${e}
    
    ${U}
    
    [FINAL CHECK]
    - DID YOU CROP THE IMAGE AS REQUESTED?
    - Is the framing correct (Waist/Bust/CloseUp)?
    - Is the background consistent with the Master Image?
  `;const $=[];if(u&&!f){const K=u.match(/^data:(.+);base64,(.+)$/);K&&$.push({inlineData:{mimeType:K[1],data:K[2]}})}if(f){const K=f.match(/^data:(.+);base64,(.+)$/);K&&$.push({inlineData:{mimeType:K[1],data:K[2]}})}I.length>0&&(r==="character"||r==="cinematic")&&I.forEach(K=>{const te=K.match(/^data:(.+);base64,(.+)$/);te&&$.push({inlineData:{mimeType:te[1],data:te[2]}})}),c&&c.length>0&&c.forEach(K=>{const te=K.match(/^data:(.+);base64,(.+)$/);te&&$.push({inlineData:{mimeType:te[1],data:te[2]}})}),$.push({text:X});try{const K=await h.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:$},config:{imageConfig:S}});for(const te of((D=(Z=(H=K.candidates)==null?void 0:H[0])==null?void 0:Z.content)==null?void 0:D.parts)||[])if(te.inlineData)return`data:${te.inlineData.mimeType};base64,${te.inlineData.data}`;throw new Error("  .")}catch(K){throw console.error(K),(Y=K.message)!=null&&Y.includes("SAFETY")?new Error("  :   ."):new Error("    .")}},To=async(t,e)=>{var n;if(!e||!/[-]/.test(e))return e;try{return((n=(await t.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:`Translate the following Korean text to English for an image generation prompt. Keep it concise and descriptive. Text: "${e}"`}]}})).text)==null?void 0:n.trim())||e}catch(o){return console.error("Translation failed, using original text:",o),e}},rw=async(t,e,n,o,r)=>{var d,f,h,m;const i=at(t),s=await To(i,n);let c=`
    ${vr[o].prompt}
    CONTEXT: Korea, Joseon Dynasty.
    TASK: Generate a high-quality visual reference for a specific OBJECT/PROP.
    
    OBJECT NAME: ${e}
    VISUAL DESCRIPTION: ${s}
    
    [RULES]
    1. Single Object isolated on a clean, simple background (or solid color).
    2. Focus on the object details.
    3. Historical accuracy for Joseon Dynasty.
    4. NO text, NO watermarks, NO user interface elements.
    5. High resolution, clear definition.
  `;r&&(c+=`
      [REFERENCE IMAGE PROVIDED]
      - Use the provided image as a strict visual reference for SHAPE, COLOR, and MATERIAL.
      - Copy the structure and design of the object in the reference image.
      - Apply the Joseon Dynasty context if necessary, but keep the core look from the reference.
      `);try{const g=[];if(r){const E=r.match(/^data:(.+);base64,(.+)$/);E&&g.push({inlineData:{mimeType:E[1],data:E[2]}})}g.push({text:c});const S=await i.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:g},config:{imageConfig:{aspectRatio:"1:1"}}});for(const E of((h=(f=(d=S.candidates)==null?void 0:d[0])==null?void 0:f.content)==null?void 0:h.parts)||[])if(E.inlineData)return`data:${E.inlineData.mimeType};base64,${E.inlineData.data}`;throw new Error("  .")}catch(g){throw console.error(g),(m=g.message)!=null&&m.includes("SAFETY")?new Error("  :   ."):new Error("     .")}},iw=async(t,e,n,o,r)=>{var E,C,y,v,x,T;const i=at(t),s={...e};for(const I in s)typeof s[I]=="string"&&(s[I]=await To(i,s[I]));const u=await To(i,o||""),c=vr[n].prompt,d=Object.entries(s).map(([I,_])=>_?`${I}: ${_}`:"").filter(Boolean).join(`
- `),f=(E=e.backgroundColor)!=null&&E.includes("Green")?"Solid Green Screen (#00FF00)":"Solid Background",h=u?`
  [USER RESTRICTIONS - ABSOLUTE PRIORITY]
  DO NOT DRAW: ${u}.
  If the user says "No Hairpin", REMOVE ALL HAIRPINS.
  If the user says "No Hat", REMOVE ALL HATS.
  `:"";let m="";const g=(C=s.gender)==null?void 0:C.match(/(\d+)\s*year\s*old/i);if(g){const I=parseInt(g[1]);m=`
     [AGE CONTROL: ${I} YEARS OLD]
     - The character MUST look exactly ${I} years old.
     `,I<12?m+=`- VISUALS: Childlike proportions, round face, soft features, short stature.
`:I<20?m+=`- VISUALS: Youthful teenager, fresh skin, no wrinkles.
`:I>=60?m+=`- VISUALS: Visible WRINKLES, aged skin texture, grey/white hair (unless dyed), wise/tired eyes.
- DO NOT make them look like a young K-pop star with grey hair. They must have OLD SKIN.
`:I>=40&&(m+=`- VISUALS: Mature adult, slight laugh lines, confident bearing. Not a 20-year-old.
`)}let S=`
    ${c}
    CONTEXT: Korea, Joseon Dynasty.
    ${eh} 
    ${th}
    ${h}
    ${m}

    TASK: Generate Character Reference Sheet.
    [DETAILS] - ${d}
    [RULES] Full Body, Feet Visible, ${f}, Neutral Pose.
  `;r&&(S+=`
      [VISUAL REFERENCE - SOURCE MATERIAL]
      The provided image is the **SOURCE ACTOR/DESIGN**.
      
      [CRITICAL INSTRUCTION]
      1. **FACE & IDENTITY**: Copy the facial features, eye shape, and expression from the reference image EXACTLY.
      2. **CLOTHING**: Maintain the style and structure of the clothing from the reference.
      3. **ADAPTATION**: Apply the Joseon Dynasty style ONLY to the texture/materials if necessary, but KEEP THE FORM.
      4. **GOAL**: The result must look like the SAME PERSON wearing the SAME CLOTHES (or Joseon version of them).
      `);try{const I=[];if(r){const A=r.match(/^data:(.+);base64,(.+)$/);A&&I.push({inlineData:{mimeType:A[1],data:A[2]}})}I.push({text:S});const _=await i.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:I},config:{imageConfig:{aspectRatio:"9:16"}}});for(const A of((x=(v=(y=_.candidates)==null?void 0:y[0])==null?void 0:v.content)==null?void 0:x.parts)||[])if(A.inlineData)return`data:${A.inlineData.mimeType};base64,${A.inlineData.data}`;throw new Error("  .")}catch(I){throw(T=I.message)!=null&&T.includes("SAFETY")?new Error("  ."):new Error("  .")}},sw=async(t,e,n="green")=>{var c,d,f;const o=at(t),r=e.match(/^data:(.+);base64,(.+)$/);if(!r)throw new Error("Invalid image format");const u=`
    Change the background of this image to a solid flat ${n==="green"?"Green Screen":"Solid White"} (${n==="green"?"#00FF00":"#FFFFFF"}).
    [CRITICAL RULES]
    1. **KEEP FOREGROUND EXACTLY THE SAME**: Do not change the character's face, clothes, or pose. Only change the environment behind them.
    2. The background must be a single solid color for chroma keying.
    3. High quality edges.
  `;try{const h=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:r[1],data:r[2]}},{text:u}]}});for(const m of((f=(d=(c=h.candidates)==null?void 0:c[0])==null?void 0:d.content)==null?void 0:f.parts)||[])if(m.inlineData)return`data:${m.inlineData.mimeType};base64,${m.inlineData.data}`;throw new Error("  .")}catch(h){throw console.error("Bg Edit Failed",h),new Error("    .")}},lw=async(t,e)=>{var i,s,u;const n=at(t),o=e.match(/^data:(.+);base64,(.+)$/);if(!o)throw new Error("Invalid image format");const r=`
    Remove the person/character from this image completely.
    [TASK]
    1. Identify the character in the foreground.
    2. Erase the character.
    3. Inpaint (Fill) the empty space with the background texture and objects to match the surrounding environment perfectly.
    4. The result should be an empty room/landscape with NO PEOPLE.
    5. Maintain the original lighting, style, and camera angle.
  `;try{const c=await n.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:o[1],data:o[2]}},{text:r}]}});for(const d of((u=(s=(i=c.candidates)==null?void 0:i[0])==null?void 0:s.content)==null?void 0:u.parts)||[])if(d.inlineData)return`data:${d.inlineData.mimeType};base64,${d.inlineData.data}`;throw new Error("  .")}catch(c){throw console.error("Remove Char Failed",c),new Error("    .")}},aw=async(t,e,n)=>{var u,c,d;const o=at(t),r=await To(o,n),i=e.match(/^data:(.+);base64,(.+)$/);if(!i)throw new Error("Invalid image format");const s=`
    Modify this image based on the user's instruction.
    USER INSTRUCTION: "${r}"
    
    [RULES]
    1. Apply the change STRICTLY to the requested area.
    2. Keep the rest of the image (Face, Identity, Pose, Background) EXACTLY THE SAME unless the instruction asks to change it.
    3. High quality inpainting. Seamless blending.
    
    Example: 
    - If instruction is "Remove the hairpin", remove only the hairpin and reconstruct the hair.
    - If instruction is "Close eyes", change only the eyes.
  `;try{const f=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:i[1],data:i[2]}},{text:s}]}});for(const h of((d=(c=(u=f.candidates)==null?void 0:u[0])==null?void 0:c.content)==null?void 0:d.parts)||[])if(h.inlineData)return`data:${h.inlineData.mimeType};base64,${h.inlineData.data}`;throw new Error(" .")}catch(f){throw console.error("Magic Edit Failed",f),new Error("   .")}},uw=async(t,e)=>{var r;const n=at(t),o=`
          .
       ,      "   "  .
     
     [ ]
         " ", " ", "" , AI        .
     
     [ ]
     1. ** / **: (: (99 ), (), ,  )
     2. **   **: (:   -  ,  /   -  )
     3. **  /**: (:    ,    )
     4. **  **: (: , ,      )

     [ ]
     - **  .** (     .)
     -   ( ,  ) "  "   .
     -    .
     
     SCRIPT:
     ${e.substring(0,3e4)}
   `;try{return((r=(await n.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:o}]}})).text)==null?void 0:r.trim())||""}catch(i){throw console.error("Global context analysis failed",i),new Error("  ")}},cw=async(t,e,n,o)=>{try{return await Gi(t,`YouTube Thumbnail. Overlay text: "${n}". High contrast, big bold Korean font.`,o,"16:9","cinematic",[e],`Overlay the text "${n}" on this image. Make it look like a YouTube thumbnail.`,void 0,void 0,void 0,e)}catch(r){throw console.error("Thumbnail generation failed",r),new Error("  : "+r.message)}},dw=async(t,e)=>{const n=at(t),o=`
       1000  **   **.
      ,          **   50** .

    [ ]
    ${e.substring(0,5e4)}

    [  - " "]
    1. ** 50**: 50    . (  )
    2. **  - "   " ()**:
        - **    .**          .
        - **   '  '   .**

        - ** A (  /  )**:      ?  "  OO , ..."
        - ** B ( /)**:       ?  "OO   , ..."
        - ** C ( /)**:        ?  "   ,   "
        - ** D ( )**:       ?  "  ,    "
        - ** E ( )**:     ?  "  ,    "

    [   (  )]
     - "   5    " (     )
     - "    , ..." (    )
     - "   ,     " ( )
     - "    ,    " ( )
     - "  ,    " (/ )
     - "   ,    ..." (/)
     - "   ,    !" (   /)
     - "  ,   ..." ( /)

    3. **  **:
       - /: "...", " "
       - : "  ?", " ?"
       - /: "  ", "  "
    4. ** **:    15 .
    5. ** **:           .

    [ ]
    **JSON   .**
    : ["1", "2", ..., "50"]
  `;try{const i=(await n.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{text:o}]},config:{responseMimeType:"application/json"}})).text||"[]",s=Cr(i);return Array.isArray(s)?s:typeof s=="object"&&Array.isArray(s.titles)?s.titles:[]}catch(r){throw console.error("Massive hooking title generation failed",r),new Error("  : "+r.message)}},Ie={gender:[{label:"",value:"Male"},{label:"",value:"Female"}],class:[{label:" ()",value:"Seonbi (Joseon Scholar), noble, silk robes"},{label:"/",value:"Bandit, rough appearance, wild, animal skins"},{label:"/",value:"King of Joseon, Red Royal Robe (Gonryongpo)"},{label:"/",value:"Queen of Joseon, Royal ceremonial dress"},{label:"/",value:"General, Warrior, Military uniform (Cheollik)"},{label:"/",value:"Merchant, Peddler, carrying bundle on back"},{label:"",value:"Buddhist Monk, grey robes"},{label:"/",value:"Peasant, Commoner, White hemp clothes"},{label:"",value:"Gisaeng, colorful Hanbok, artistic"},{label:"",value:"Shaman (Mudang), colorful ritual clothing"},{label:"/",value:"Magistrate (Sato), Official uniform"},{label:"",value:"Grim Reaper (Jeoseung Saja), Black Hanbok, Black Gat"},{label:"/",value:"Mother figure, modest Hanbok"},{label:"/",value:"Father figure, traditional Hanbok"}],race:[{label:"",value:"Human"},{label:"",value:"Dokkaebi (Korean Goblin), holding club"},{label:"",value:"Gumiho (Nine-tailed Fox)"},{label:"",value:"Virgin Ghost (Cheonyeo Gwishin), white Sobok, messy hair"},{label:" ()",value:"Tiger Spirit, anthropomorphic"},{label:" (/)",value:"Dragon King (Turtle spirit)"}],hair:[{label:" ( )",value:"Sangtu (Topknot) with Manggeon headband"},{label:" ()",value:"Daenggi-meori (Long Braid)"},{label:"  ()",value:"Half-tied hair with Manggeon ( )"},{label:" (/)",value:"Half-tied hair (No Manggeon), wild style"},{label:"  (/)",value:"Short Bob Hair (Danbal), rough cut"},{label:" (/)",value:"Shaggy Dog Hair (Deobeok-meori), messy and unkempt"},{label:"   ()",value:"Binyeo Bun (Low bun with silver hairpin)"},{label:"  ()",value:"Grey hair Sangtu (Topknot)"},{label:"   ()",value:"Grey hair Binyeo Bun"},{label:"  ()",value:"Gisaeng Gache (Large ornate wig)"},{label:"/ ",value:"Court Lady Gache (Rounded wig)"},{label:" ()",value:"Daesu-meori (Royal ceremonial wig with gold)"},{label:"  (/)",value:"Loose long black hair"},{label:" ()",value:"Wild messy hair"}],headwear:[{label:" ",value:"None"},{label:" (  )",value:"Gat (Black translucent horsehair hat)"},{label:" ()",value:"Jeongjagwan (Indoor scholar hat)"},{label:" ()",value:"Paeraengi (Bamboo hat)"},{label:" ()",value:"Jeonrip (Military hat with peacock feather)"},{label:" ()",value:"Ikseongwan (King black cap)"},{label:" ()",value:"Samo (Official black cap with wings)"},{label:" ( )",value:"Jokduri (Wedding headpiece)"},{label:" ()",value:"Jeonmo (Wide hat with butterfly decorations)"},{label:" ()",value:"Satgat (Conical straw hat)"},{label:" ()",value:"Nambawi (Winter cap)"}],outer:[{label:"  ()",value:"None"},{label:" ()",value:"Dopo (Scholar Robe with wide sleeves)"},{label:"",value:"Durumagi (Overcoat)"},{label:" ()",value:"Cheollik (Military Robe with pleated skirt)"},{label:"/",value:"Kwaeja (Long Vest)"},{label:" ( )",value:"Jangot (Coat worn over head)"},{label:"/ ()",value:"Hwarot/Wonsam (Ceremonial Robe)"},{label:" ()",value:"Sobok (White mourning clothes)"}],top:[{label:" ",value:"Jeogori (Traditional Jacket, curved sleeves)"},{label:" ",value:"Samhwejang Jeogori (Colorful cuffs and collar)"},{label:" ",value:"Saekdong Jeogori (Striped sleeves)"},{label:" ( )",value:"Jeoksam (Hemp shirt)"}],bottom:[{label:"  ()",value:"Baji (Wide trousers tied at ankles)"},{label:"  ()",value:"Chima (Full volume Ankle-length skirt, showing shoes)"},{label:" ()",value:"Seuran-chima (Ankle-length Skirt with gold leaf pattern, showing shoes)"},{label:" ( )",value:"Short Chima (Working class)"}],shoes:[{label:" ( )",value:"Jipsin (Straw shoes, covering toes like loafers)"},{label:" ()",value:"Taasahye (Leather shoes with patterns)"},{label:" ( )",value:"Mokhwa (Black velvet boots)"},{label:" ()",value:"Kkot-sin (Flower embroidered shoes)"},{label:"",value:"Barefoot"}],accessories:[{label:"",value:"None"},{label:" ()",value:"Gombangdae (Long pipe)"},{label:"",value:"Foldable Fan"},{label:" ()",value:"Hwando (Korean Sword)"},{label:" ()",value:"Cloth Bundle/Backpack (Bojim)"},{label:"",value:"Bokjumeoni (Lucky pouch)"},{label:"",value:"Norigae (Pendant)"},{label:"",value:"Eunjangdo (Silver knife)"},{label:"",value:"Wooden Walking Stick"}],bg:[{label:"  (Green)",value:"Green Screen"},{label:"  (Blue)",value:"Blue Screen"},{label:" ",value:"Solid White"},{label:" ",value:"Solid Black"}]},fw=({onClose:t,initialName:e="",initialDesign:n,initialAge:o="30"})=>{const{apiKey:r,selectedStyle:i,setReferenceImages:s,setCharacters:u,showToast:c}=Ft(),[d,f]=B.useState(e),[h,m]=B.useState(o),[g,S]=B.useState(""),[E,C]=B.useState({gender:(n==null?void 0:n.gender)||Ie.gender[0].value,class:(n==null?void 0:n.class)||Ie.class[0].value,race:(n==null?void 0:n.race)||Ie.race[0].value,hair:(n==null?void 0:n.hair)||Ie.hair[0].value,headwear:(n==null?void 0:n.headwear)||Ie.headwear[0].value,outer:(n==null?void 0:n.outer)||Ie.outer[0].value,top:(n==null?void 0:n.top)||Ie.top[0].value,bottom:(n==null?void 0:n.bottom)||Ie.bottom[0].value,shoes:(n==null?void 0:n.shoes)||Ie.shoes[0].value,accessories:(n==null?void 0:n.accessories)||Ie.accessories[0].value,clothingColor:(n==null?void 0:n.clothingColor)||"",backgroundColor:Ie.bg[0].value,extraDetails:(n==null?void 0:n.extraDetails)||""}),[y,v]=B.useState(!1),[x,T]=B.useState(null),[I,_]=B.useState(null),[A,k]=B.useState([]);B.useEffect(()=>{},[E.gender,h]);const M=(F,$)=>{C(H=>({...H,[F]:$}))},U=F=>{var Z;const $=(Z=F.target.files)==null?void 0:Z[0];if(!$)return;if($.size>5*1024*1024){c("  5MB  .","warning");return}const H=new FileReader;H.onloadend=()=>{_(H.result)},H.readAsDataURL($)},O=async()=>{if(!d.trim())return c("  ","warning");if(!h.trim())return c(" ","warning");if(!r)return c("API  ","warning");v(!0);try{const F={...E,gender:`${h} year old ${E.gender}`},$=await iw(r,F,i,g,I||void 0);T($),k(H=>[$,...H]),c(" .   .","success")}catch(F){c(F.message,"error")}finally{v(!1)}},X=()=>{if(!x||!d)return;const F=`${h} ${E.class}. ${E.hair}, ${E.headwear}. ${E.facialFeatures?`(: ${E.facialFeatures}) `:""}${E.extraDetails}`;s($=>[...$.filter(Z=>Z.name!==d),{id:`ref-${Date.now()}`,name:d,imageUrl:x,description:F,design:{...E,gender:`${h} year old ${E.gender}`}}]),u($=>$.some(H=>H.name===d)?$:[...$,{id:`char-builder-${Date.now()}`,name:d,description:F,visualGuide:"AI    ",age:h,gender:E.gender,hasDialogue:!0,chromaKeyColor:"green",actions:[]}]),c(`'${d}'  . (   )`,"success"),t()},N=(F,$,H)=>p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold",children:F}),p.jsx("select",{value:E[$],onChange:Z=>M($,Z.target.value),className:"bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-indigo-500",children:H.map((Z,D)=>p.jsx("option",{value:Z.value,children:Z.label},D))})]});return p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in overflow-hidden",children:p.jsxs("div",{className:"bg-slate-800 w-full max-w-6xl h-[90vh] rounded-2xl border border-slate-600 shadow-2xl flex flex-col md:flex-row overflow-hidden",children:[p.jsxs("div",{className:"w-full md:w-1/2 p-6 overflow-y-auto border-r border-slate-700 custom-scrollbar bg-slate-800 z-10",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-user-edit text-indigo-400"}),"   "]}),p.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:p.jsx("i",{className:"fas fa-times text-xl"})})]}),n&&p.jsxs("div",{className:"mb-4 bg-indigo-900/40 border border-indigo-500/50 p-3 rounded-lg flex items-center gap-3",children:[p.jsx("i",{className:"fas fa-robot text-indigo-300 text-xl"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-indigo-200 text-sm font-bold",children:"AI   "}),p.jsx("p",{className:"text-xs text-indigo-400",children:"   , ,   ."})]})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-bold text-slate-300 block mb-2",children:"  ( )"}),p.jsx("input",{type:"text",value:d,onChange:F=>f(F.target.value),placeholder:": , ",className:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white focus:ring-indigo-500 font-bold text-lg"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"col-span-2 flex gap-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:"1. "}),p.jsx("select",{value:E.gender,onChange:F=>M("gender",F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white",children:Ie.gender.map((F,$)=>p.jsx("option",{value:F.value,children:F.label},$))})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:" ( )"}),p.jsx("input",{type:"number",value:h,onChange:F=>m(F.target.value),placeholder:": 60",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white"})]})]}),N("2. /","class",Ie.class),N("3. ","race",Ie.race),N("4.  ","hair",Ie.hair),N("5. /","headwear",Ie.headwear),N("6. ","outer",Ie.outer),N("7. ","top",Ie.top),N("8. ","bottom",Ie.bottom),N("9. ","shoes",Ie.shoes),N("10. /","accessories",Ie.accessories)]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold",children:"11.   ( )"}),p.jsx("input",{type:"text",value:E.clothingColor,onChange:F=>M("clothingColor",F.target.value),placeholder:":    ,  ",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold",children:"12.   (:  )"}),p.jsx("input",{type:"text",value:E.facialFeatures||"",onChange:F=>M("facialFeatures",F.target.value),placeholder:":  , , ,  , ...",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-yellow-500"})]}),p.jsxs("div",{className:"space-y-2 bg-indigo-900/20 p-3 rounded border border-indigo-500/30",children:[p.jsxs("label",{className:"text-xs text-indigo-300 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-plus-circle"}),"   /  ()"]}),p.jsx("textarea",{value:E.extraDetails,onChange:F=>M("extraDetails",F.target.value),placeholder:":    ,  ,  ,  ...",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white h-16 focus:ring-indigo-500 resize-none"})]}),p.jsxs("div",{className:"space-y-2 bg-red-900/10 p-3 rounded border border-red-500/30",children:[p.jsxs("label",{className:"text-xs text-red-400 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-ban"}),"  /  (  )"]}),p.jsx("input",{type:"text",value:g,onChange:F=>S(F.target.value),placeholder:": , ,  , , , ",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-red-500 placeholder-slate-500"}),p.jsxs("p",{className:"text-[10px] text-slate-400",children:["    AI ",p.jsx("strong",{children:'"   !"'}),"  ."]})]}),p.jsxs("div",{className:"space-y-2 bg-indigo-900/20 p-3 rounded border border-indigo-500/30",children:[p.jsxs("label",{className:"text-xs text-indigo-300 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-image"}),"    (/ )"]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("label",{className:"cursor-pointer bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded border border-slate-600 flex items-center gap-2 text-sm",children:[p.jsx("i",{className:"fas fa-upload"}),"  ",p.jsx("input",{type:"file",accept:"image/*",onChange:U,className:"hidden"})]}),I&&p.jsxs("div",{className:"relative h-16 w-16 bg-black rounded border border-slate-600 overflow-hidden group",children:[p.jsx("img",{src:I,alt:"Reference",className:"h-full w-full object-cover"}),p.jsx("button",{onClick:()=>_(null),className:"absolute inset-0 bg-black/50 hidden group-hover:flex items-center justify-center text-red-400",children:p.jsx("i",{className:"fas fa-trash"})})]})]}),p.jsx("p",{className:"text-[10px] text-slate-400",children:" , ,     AI   ."})]}),N("13.  ()","backgroundColor",Ie.bg),p.jsxs("button",{onClick:O,disabled:y,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 mt-4",children:[y?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-paint-brush"}),"  "]})]})]}),p.jsxs("div",{className:"w-full md:w-1/2 bg-black flex flex-col relative h-full",children:[p.jsxs("div",{className:"p-4 flex-grow flex flex-col items-center justify-center overflow-hidden",children:[p.jsx("h3",{className:"text-slate-500 font-bold mb-4 absolute top-6 left-6",children:""}),p.jsxs("div",{className:"w-full max-w-sm aspect-[9/16] bg-slate-900 rounded-lg overflow-hidden border border-slate-700 flex items-center justify-center mb-4 relative shadow-2xl",children:[x?p.jsx("img",{src:x,alt:"Preview",className:"w-full h-full object-contain"}):p.jsxs("div",{className:"text-center text-slate-600",children:[p.jsx("i",{className:"fas fa-user-circle text-6xl mb-4 opacity-50"}),p.jsxs("p",{children:["  ",p.jsx("br",{}),"  ."]})]}),y&&p.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center backdrop-blur-sm",children:p.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-indigo-500"})})]}),x&&p.jsxs("div",{className:"flex gap-4 w-full max-w-sm",children:[p.jsxs("button",{onClick:X,className:"flex-1 bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold shadow-lg transform hover:scale-105 transition-all",children:[p.jsx("i",{className:"fas fa-check-circle mr-2"}),"    ()"]}),p.jsx("a",{href:x,download:`${d}_reference.png`,className:"bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-lg border border-slate-600",children:p.jsx("i",{className:"fas fa-download"})})]})]}),p.jsxs("div",{className:"bg-slate-900 border-t border-slate-700 p-4 h-48 flex-shrink-0 flex flex-col",children:[p.jsxs("p",{className:"text-xs text-slate-400 mb-2 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-history text-indigo-400"}),"     (",A.length,")",p.jsx("span",{className:"text-[10px] font-normal text-slate-500 ml-auto",children:" "})]}),A.length===0?p.jsx("div",{className:"flex-grow flex items-center justify-center text-slate-600 text-xs border border-dashed border-slate-700 rounded-lg",children:"   ."}):p.jsx("div",{className:"flex gap-3 overflow-x-auto overflow-y-hidden pb-2 custom-scrollbar px-1 h-full items-center",children:A.map((F,$)=>p.jsx("div",{onClick:()=>T(F),className:`flex-shrink-0 w-20 h-28 rounded-lg overflow-hidden cursor-pointer border-2 transition-all hover:scale-105 shadow-lg ${x===F?"border-indigo-500 ring-2 ring-indigo-500/50 scale-105":"border-slate-700 hover:border-slate-500 opacity-70 hover:opacity-100"}`,children:p.jsx("img",{src:F,alt:`History ${$}`,className:"w-full h-full object-cover"})},$))})]})]})]})})},Kr={types:[{label:" ",value:"Object"},{label:"/ ",value:"Evidence"},{label:" (/ )",value:"Weapon"},{label:" (/ )",value:"Accessory"},{label:"/ ",value:"Furniture"}],materials:[{label:" (Wood)",value:"Wooden"},{label:"/ (Metal)",value:"Metal, Iron, Steel"},{label:" (Gold)",value:"Gold"},{label:" (Silver)",value:"Silver"},{label:" (Jade)",value:"Jade"},{label:"/ (Fabric)",value:"Fabric, Silk, Cotton"},{label:" (Paper)",value:"Paper"},{label:" (Ceramic)",value:"Ceramic, Porcelain"},{label:" (Stone)",value:"Stone"}],colors:[{label:"/",value:"Natural"},{label:" (Red)",value:"Red"},{label:" (Blue)",value:"Blue"},{label:" (Black)",value:"Black"},{label:" (White)",value:"White"},{label:" (Gold)",value:"Gold"},{label:" (Silver)",value:"Silver"},{label:" (Green)",value:"Green"}]},pw=({onClose:t,initialName:e=""})=>{const{apiKey:n,selectedStyle:o,setProps:r,showToast:i}=Ft(),[s,u]=B.useState(e),[c,d]=B.useState(Kr.types[0].value),[f,h]=B.useState(""),[m,g]=B.useState(""),[S,E]=B.useState(""),[C,y]=B.useState(!1),[v,x]=B.useState(null),[T,I]=B.useState(null),[_,A]=B.useState([]),k=O=>{var F;const X=(F=O.target.files)==null?void 0:F[0];if(!X)return;if(X.size>5*1024*1024){i("  5MB  .","warning");return}const N=new FileReader;N.onloadend=()=>{I(N.result)},N.readAsDataURL(X)},M=async()=>{if(!s.trim())return i("  ","warning");if(!S.trim()&&!T)return i("     .","warning");if(!n)return i("API  ","warning");y(!0);try{let O=`Type: ${c}.
`;m&&(O+=`Color: ${m}.
`),f&&(O+=`Material: ${f}.
`),O+=`Details: ${S}`;const X=await rw(n,s,O,o,T||void 0);x(X),A(N=>[X,...N]),i(" .   .","success")}catch(O){i(O.message,"error")}finally{y(!1)}},U=()=>{if(!v||!s)return;const O=`${m} ${f} ${s}. ${S}`;r(X=>[...X,{id:`prop-builder-${Date.now()}`,name:s,imageUrl:v,description:O,type:"object"}]),i(`'${s}'  !`,"success"),t()};return p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in overflow-hidden",children:p.jsxs("div",{className:"bg-slate-800 w-full max-w-6xl h-[90vh] rounded-2xl border border-slate-600 shadow-2xl flex flex-col md:flex-row overflow-hidden",children:[p.jsxs("div",{className:"w-full md:w-1/2 p-6 overflow-y-auto border-r border-slate-700 custom-scrollbar bg-slate-800 z-10",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-cube text-amber-500"}),"   "]}),p.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:p.jsx("i",{className:"fas fa-times text-xl"})})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-bold text-slate-300 block mb-2",children:" "}),p.jsx("input",{type:"text",value:s,onChange:O=>u(O.target.value),placeholder:": , , ",className:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white focus:ring-amber-500 font-bold text-lg"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:"1.  "}),p.jsx("select",{value:c,onChange:O=>d(O.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-amber-500",children:Kr.types.map((O,X)=>p.jsx("option",{value:O.value,children:O.label},X))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:"2.  (Color)"}),p.jsx("input",{type:"text",value:m,onChange:O=>g(O.target.value),placeholder:": , ",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-amber-500",list:"color-options"}),p.jsx("datalist",{id:"color-options",children:Kr.colors.map((O,X)=>p.jsx("option",{value:O.label},X))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:"3.  (Material)"}),p.jsx("input",{type:"text",value:f,onChange:O=>h(O.target.value),placeholder:": , , ",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-amber-500",list:"material-options"}),p.jsx("datalist",{id:"material-options",children:Kr.materials.map((O,X)=>p.jsx("option",{value:O.label},X))})]})]}),p.jsxs("div",{className:"space-y-2 bg-slate-900/50 p-3 rounded border border-slate-700",children:[p.jsxs("label",{className:"text-xs text-amber-400 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-pen"}),"    (, )"]}),p.jsx("textarea",{value:S,onChange:O=>E(O.target.value),placeholder:":     ,     .   .",className:"w-full bg-slate-800 border border-slate-600 rounded p-2 text-sm text-white h-24 focus:ring-amber-500 resize-none"})]}),p.jsxs("div",{className:"space-y-2 bg-amber-900/20 p-3 rounded border border-amber-500/30",children:[p.jsxs("label",{className:"text-xs text-amber-300 font-bold flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-image"}),"    (/ )"]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("label",{className:"cursor-pointer bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded border border-slate-600 flex items-center gap-2 text-sm transition-colors",children:[p.jsx("i",{className:"fas fa-upload"}),"  ",p.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"hidden"})]}),T&&p.jsxs("div",{className:"relative h-16 w-16 bg-black rounded border border-slate-600 overflow-hidden group",children:[p.jsx("img",{src:T,alt:"Reference",className:"h-full w-full object-cover"}),p.jsx("button",{onClick:()=>I(null),className:"absolute inset-0 bg-black/50 hidden group-hover:flex items-center justify-center text-red-400",children:p.jsx("i",{className:"fas fa-trash"})})]})]}),p.jsx("p",{className:"text-[10px] text-slate-400",children:"   AI       ."})]}),p.jsxs("button",{onClick:M,disabled:C,className:"w-full bg-amber-600 hover:bg-amber-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 mt-4 transition-all hover:shadow-amber-500/20",children:[C?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-paint-brush"})," "]})]})]}),p.jsxs("div",{className:"w-full md:w-1/2 bg-black/50 p-6 flex flex-col relative",children:[p.jsx("div",{className:"flex-grow flex items-center justify-center relative bg-[url('/grid.png')]",children:v?p.jsxs("div",{className:"relative w-full max-w-md aspect-square shadow-2xl rounded-lg overflow-hidden border-2 border-slate-700 group",children:[p.jsx("img",{src:v,alt:"Preview",className:"w-full h-full object-contain bg-[#202020]"}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 p-4 transform translate-y-full group-hover:translate-y-0 transition-transform",children:p.jsxs("button",{onClick:U,className:"w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold shadow-lg",children:[p.jsx("i",{className:"fas fa-check mr-2"}),"   "]})})]}):p.jsxs("div",{className:"text-center text-slate-500",children:[p.jsx("i",{className:"fas fa-cube text-6xl mb-4 opacity-20"}),p.jsx("p",{className:"text-lg",children:"  '' ."})]})}),_.length>0&&p.jsx("div",{className:"h-24 border-t border-slate-700 bg-slate-900/80 p-2 flex gap-2 overflow-x-auto custom-scrollbar mt-4",children:_.map((O,X)=>p.jsx("div",{onClick:()=>x(O),className:`aspect-square h-full rounded cursor-pointer border-2 overflow-hidden flex-shrink-0 ${v===O?"border-amber-500":"border-transparent opacity-50 hover:opacity-100"}`,children:p.jsx("img",{src:O,alt:`History ${X}`,className:"w-full h-full object-cover"})},X))})]})]})})},mw=({id:t,style:e,selected:n,onSelect:o})=>p.jsxs("div",{onClick:()=>o(t),className:`cursor-pointer rounded-xl p-4 border-2 transition-all h-full flex flex-col gap-2 relative overflow-hidden ${n?"border-indigo-500 bg-indigo-900/30 ring-2 ring-indigo-500/50":"border-slate-700 bg-slate-800 hover:border-slate-500"}`,children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:`text-lg font-bold ${n?"text-indigo-300":"text-slate-200"}`,children:e.name}),n&&p.jsx("i",{className:"fas fa-check-circle text-indigo-400 text-xl"})]}),p.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:e.desc})]}),hw=({selected:t,onChange:e})=>{const n=[{id:"16:9",label:" (16:9)",icon:"fa-tv"},{id:"9:16",label:" (9:16)",icon:"fa-mobile-alt"},{id:"1:1",label:" (1:1)",icon:"fa-square"}];return p.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(o=>p.jsxs("button",{onClick:()=>e(o.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium flex items-center gap-2 border transition-all ${t===o.id?"bg-indigo-600 text-white border-indigo-500 shadow-md":"bg-slate-800 text-slate-400 border-slate-700 hover:bg-slate-700"}`,children:[p.jsx("i",{className:`fas ${o.icon}`}),o.label]},o.id))})},gw=({onAnalyze:t,isAnalyzing:e})=>{const{apiKey:n,script:o,scriptSegments:r,addScriptSegment:i,removeScriptSegment:s,clearScriptSegments:u,selectedStyle:c,setSelectedStyle:d,globalAspectRatio:f,setGlobalAspectRatio:h,isContinuityMode:m,setIsContinuityMode:g,referenceImages:S,setReferenceImages:E,characters:C,setCharacters:y,props:v,setProps:x,showToast:T,openModal:I}=Ft(),[_,A]=B.useState(!1),[k,M]=B.useState(!1),[U,O]=B.useState(null),[X,N]=B.useState(""),[F,$]=B.useState(""),H=B.useRef(null),Z=B.useRef(null),D=(J,we,ut)=>{J.preventDefault(),J.stopPropagation(),I({type:"confirm",title:"  ",message:`'${ut}'    ?
(   .)`,onConfirm:()=>{E(xt=>xt.filter(Ot=>Ot.id!==we)),T(".","success")}})},Y=()=>{H.current&&(H.current.value="",H.current.click())},K=J=>{var xt;const we=(xt=J.target.files)==null?void 0:xt[0];if(!we)return;if(we.size>5*1024*1024){T("   5MB  .","warning");return}const ut=new FileReader;ut.onload=async Ot=>{var wn;const Zt=(wn=Ot.target)==null?void 0:wn.result;Zt&&I({type:"prompt",title:"  ",message:"    (: )",confirmText:": AI ",onConfirm:async kt=>{if(kt&&kt.trim()){const ct=kt.trim();let Gt="Imported external character. (Auto-analysis failed)";if(n){T("AI    ...","success");try{Gt=await ZC(n,Zt)}catch(In){console.error(In),T(" .  .","error"),Gt=" .       ."}}I({type:"textarea",title:`${ct} /  ()`,message:`AI  . 
      ** **. 
 , ,     !`,defaultValue:Gt,confirmText:"  (  )",onConfirm:In=>{const wr=In||Gt;E(Nn=>[...Nn,{id:`ref-upload-${Date.now()}`,name:ct,imageUrl:Zt,description:wr}]),y(Nn=>Nn.some(us=>us.name===ct)?Nn:[...Nn,{id:`char-manual-${Date.now()}`,name:ct,description:wr,visualGuide:"   ( )",age:"",gender:"",hasDialogue:!0,chromaKeyColor:"green",actions:[]}]),T(`'${ct}'  ! (   )`,"success")}})}}})},ut.onerror=()=>{T("   .","error")},ut.readAsDataURL(we)},te=()=>{Z.current&&(Z.current.value="",Z.current.click())},he=J=>{var xt;const we=(xt=J.target.files)==null?void 0:xt[0];if(!we)return;if(we.size>5*1024*1024){T("   5MB  .","warning");return}const ut=new FileReader;ut.onload=async Ot=>{var wn;const Zt=(wn=Ot.target)==null?void 0:wn.result;Zt&&I({type:"prompt",title:"/  ",message:"    (: ,   )",confirmText:"",onConfirm:kt=>{if(kt&&kt.trim()){const ct=kt.trim();I({type:"textarea",title:`${ct}  `,message:`     .
(AI      .)`,defaultValue:"  , ,  ...",confirmText:"",onConfirm:Gt=>{x(In=>[...In,{id:`prop-upload-${Date.now()}`,name:ct,imageUrl:Zt,description:Gt||" ",type:"object"}]),T(`'${ct}'  !`,"success")}})}}})},ut.readAsDataURL(we)},Pt=()=>{if(!n){T("API  .","warning");return}M(!0)},ie=(J,we,ut)=>{J.preventDefault(),J.stopPropagation(),I({type:"confirm",title:" ",message:`'${ut}'  ?`,onConfirm:()=>{x(xt=>xt.filter(Ot=>Ot.id!==we)),T(".","success")}})},Se=()=>{I({type:"confirm",title:"  ",message:"  () ?",confirmText:"",onConfirm:()=>u()})},ne=()=>{if(!X.trim()){T(" .","warning");return}const J=F.trim()||`Chapter ${r.length+1}`;i(J,X),N(""),$(""),T(`${J} !`,"success")};return p.jsxs("div",{className:"space-y-10 animate-fade-in",children:[p.jsxs("section",{className:"space-y-4",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"1"}),"  ( )"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"file",ref:H,onChange:K,accept:"image/*",className:"hidden"}),p.jsxs("button",{onClick:Y,className:"bg-slate-700 hover:bg-slate-600 text-slate-200 px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 border border-slate-600",children:[p.jsx("i",{className:"fas fa-upload"}),"   "]}),p.jsxs("button",{onClick:()=>A(!0),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 shadow-lg",children:[p.jsx("i",{className:"fas fa-plus"}),"  "]})]})]}),S.length===0?p.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 border-dashed rounded-xl p-6 text-center text-slate-500",children:[p.jsx("i",{className:"fas fa-users text-4xl mb-3 opacity-30"}),p.jsx("p",{children:"   ."})]}):p.jsx("div",{className:"flex gap-4 overflow-x-auto pt-2 pb-4 custom-scrollbar px-1",children:S.map(J=>p.jsxs("div",{className:"min-w-[150px] w-40 bg-slate-800 rounded-lg border border-slate-700 p-3 relative group hover:border-indigo-500 transition-colors",children:[p.jsxs("div",{className:"aspect-[9/16] bg-black rounded overflow-hidden mb-2 relative cursor-zoom-in",onClick:()=>O({url:J.imageUrl,title:J.name}),children:[p.jsx("img",{src:J.imageUrl,alt:J.name,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"}),p.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:p.jsx("i",{className:"fas fa-search-plus text-white opacity-0 group-hover:opacity-100 text-2xl drop-shadow-lg transform scale-50 group-hover:scale-100 transition-all"})})]}),p.jsx("p",{className:"font-bold text-center text-white text-base truncate",children:J.name}),p.jsx("button",{onClick:we=>D(we,J.id,J.name),className:"absolute top-2 right-2 bg-red-600 hover:bg-red-500 text-white w-7 h-7 rounded-full flex items-center justify-center shadow-lg z-20 transition-transform active:scale-95",title:"",children:p.jsx("i",{className:"fas fa-times text-sm"})})]},J.id))})]}),p.jsxs("section",{className:"space-y-4",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("span",{className:"w-8 h-8 rounded-full bg-amber-600 flex items-center justify-center text-sm",children:"1.5"}),"  ( /)"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"file",ref:Z,onChange:he,accept:"image/*",className:"hidden"}),p.jsxs("button",{onClick:te,className:"bg-slate-700 hover:bg-slate-600 text-slate-200 px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 border border-slate-600",children:[p.jsx("i",{className:"fas fa-upload"}),"   "]}),p.jsxs("button",{onClick:Pt,className:"bg-amber-600 hover:bg-amber-500 text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 shadow-lg",children:[p.jsx("i",{className:"fas fa-cube"}),"  "]})]})]}),v.length===0?p.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 border-dashed rounded-xl p-6 text-center text-slate-500",children:[p.jsx("i",{className:"fas fa-box-open text-4xl mb-3 opacity-30"}),p.jsx("p",{children:"   . (: , ,   )"})]}):p.jsx("div",{className:"flex gap-4 overflow-x-auto pt-2 pb-4 custom-scrollbar px-1",children:v.map(J=>p.jsxs("div",{className:"min-w-[100px] w-28 bg-slate-800 rounded-lg border border-slate-700 p-2 relative group hover:border-amber-500 transition-colors",children:[p.jsxs("div",{className:"aspect-square bg-black rounded overflow-hidden mb-2 relative cursor-zoom-in",onClick:()=>O({url:J.imageUrl,title:J.name}),children:[p.jsx("img",{src:J.imageUrl,alt:J.name,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"}),p.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:p.jsx("i",{className:"fas fa-search-plus text-white opacity-0 group-hover:opacity-100 text-lg drop-shadow-lg transform scale-50 group-hover:scale-100 transition-all"})})]}),p.jsx("p",{className:"font-bold text-center text-white text-xs truncate",children:J.name}),p.jsx("button",{onClick:we=>ie(we,J.id,J.name),className:"absolute top-1 right-1 bg-red-600 hover:bg-red-500 text-white w-6 h-6 rounded-full flex items-center justify-center shadow-lg z-20 transition-transform active:scale-95",title:"",children:p.jsx("i",{className:"fas fa-times text-xs"})})]},J.id))})]}),p.jsxs("section",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"2"}),"  ( )"]}),p.jsxs("div",{className:"text-slate-400 text-sm",children:["  : ",p.jsx("span",{className:"text-indigo-400 font-bold",children:o.length}),"  / ",r.length," "]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 p-5 rounded-xl border border-slate-700 shadow-lg flex flex-col h-full",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"text-xs text-slate-400 font-bold block mb-1",children:"  ()"}),p.jsx("input",{type:"text",value:F,onChange:J=>$(J.target.value),placeholder:`Chapter ${r.length+1}`,className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-white focus:ring-indigo-500 text-sm"})]}),p.jsx("label",{className:"text-xs text-slate-400 font-bold block mb-1",children:" "}),p.jsx("textarea",{value:X,onChange:J=>N(J.target.value),placeholder:"    . (:    ...)",className:"w-full flex-grow min-h-[200px] bg-slate-900 text-base p-4 rounded-lg border border-slate-700 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-slate-100 placeholder-slate-500 resize-none mb-4"}),p.jsxs("button",{onClick:ne,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-lg font-bold shadow-lg flex items-center justify-center gap-2 transition-all",children:[p.jsx("i",{className:"fas fa-plus-circle"}),"  "]})]}),p.jsxs("div",{className:"bg-slate-900/50 p-5 rounded-xl border border-slate-700 h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("h3",{className:"text-lg font-bold text-slate-200",children:[p.jsx("i",{className:"fas fa-list-ol mr-2 text-indigo-400"}),"  "]}),r.length>0&&p.jsx("button",{onClick:Se,className:"text-xs text-red-400 hover:text-red-300 underline",children:" "})]}),p.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-3 pr-2",style:{maxHeight:"400px"},children:r.length===0?p.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600 opacity-50",children:[p.jsx("i",{className:"fas fa-book-open text-5xl mb-3"}),p.jsxs("p",{children:["  ",p.jsx("br",{}),"'' ."]})]}):r.map((J,we)=>p.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-600 relative group hover:border-indigo-500 transition-colors",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-bold text-indigo-300 bg-indigo-900/50 px-2 py-0.5 rounded uppercase",children:J.title||`Chapter ${we+1}`}),p.jsx("button",{onClick:()=>s(J.id),className:"text-slate-500 hover:text-red-500 p-1",children:p.jsx("i",{className:"fas fa-trash-alt"})})]}),p.jsx("p",{className:"text-sm text-slate-300 line-clamp-3",children:J.content})]},J.id))})]})]})]}),p.jsxs("section",{className:"space-y-4",children:[p.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"3"}),""]}),p.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 mb-4",children:[p.jsxs("div",{className:"mb-2 font-bold text-slate-300 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-crop-alt"}),"  "]}),p.jsx(hw,{selected:f,onChange:h})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.keys(vr).map(J=>p.jsx(mw,{id:J,style:vr[J],selected:c===J,onSelect:d},J))})]}),p.jsxs("div",{className:"flex flex-col items-center gap-4 pt-8",children:[p.jsxs("label",{className:"flex items-center gap-3 bg-slate-800 px-6 py-3 rounded-full border border-slate-600 cursor-pointer hover:bg-slate-750 select-none",children:[p.jsx("input",{type:"checkbox",checked:m,onChange:J=>g(J.target.checked),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500 border-gray-300"}),p.jsx("span",{className:"text-lg font-bold text-indigo-300",children:"  "}),p.jsx("span",{className:"text-xs text-slate-400 border-l border-slate-600 pl-3",children:"      ."})]}),r.length===0&&p.jsx("p",{className:"text-red-400 text-sm font-bold animate-pulse",children:"   !"}),p.jsxs("button",{onClick:t,disabled:e||r.length===0,className:"bg-indigo-600 hover:bg-indigo-500 text-white text-xl font-bold px-12 py-5 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-3 w-full max-w-lg justify-center",children:[e?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-magic"}),e?" ...":"   /  "]})]}),U&&p.jsx("div",{className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>O(null),children:p.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] flex flex-col items-center",children:[p.jsx("img",{src:U.url,alt:U.title,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl border border-slate-700",onClick:J=>J.stopPropagation()}),p.jsx("p",{className:"text-white font-bold text-xl mt-4 drop-shadow-md",children:U.title}),p.jsx("button",{onClick:()=>O(null),className:"absolute -top-12 right-0 text-slate-400 hover:text-white transition-colors",children:p.jsx("i",{className:"fas fa-times text-4xl"})})]})}),_&&p.jsx(fw,{onClose:()=>A(!1)}),k&&p.jsx(pw,{onClose:()=>M(!1)})]})},Wd=[{value:"background",label:"  ( )"},{value:"full",label:"  ()"},{value:"mls",label:"  ( )"},{value:"ws",label:"  ( , )"},{value:"bs",label:"  ( )"},{value:"cu",label:" ()"}],vw=t=>{switch(t){case"mls":return`
      [CAMERA: KNEE SHOT]
      - **CROP TASK**: Crop the image from Head to Knees.
      - **REMOVE**: Feet and Shoes must be CUT OFF.
      - **FILL**: The character (Head to Knees) must FILL the vertical space.
      - **POSTURE**: **MAINTAIN ORIGINAL POSE**. If sitting, keep sitting.
    `;case"ws":return`
      [CAMERA: WAIST SHOT]
      - **CROP TASK**: Crop the image from Head to Waist/Belt.
      - **REMOVE**: Everything below the belt (Legs, Knees, Feet) must be CUT OFF.
      - **FILL**: The Head and Torso must FILL the 16:9 frame.
      - **NEGATIVE PROMPT**: Legs, Pants, Skirt below waist, Shoes, Floor.
      - **POSTURE**: **MAINTAIN ORIGINAL POSE**. If sitting, keep sitting (Zoom in on torso).
    `;case"bs":return`
      [CAMERA: BUST SHOT]
      - **CROP TASK**: Crop the image from Head to Chest/Armpits.
      - **REMOVE**: Everything below the chest (Stomach, Waist, Hands) must be CUT OFF.
      - **FILL**: The Face and Shoulders must DOMINATE the frame.
      - **POSTURE**: **MAINTAIN ORIGINAL POSE**. If sitting, keep sitting (Show only upper body).
    `;case"full":return`
      [CAMERA: FULL SHOT]
      - Show the ENTIRE BODY from Head to Toe.
      - Shoes and Feet MUST be visible on the ground.
      - Show the relationship with the environment.
      - **POSTURE**: Allow Sitting or Standing based on context.
    `;case"cu":return`
      [CAMERA: CLOSE UP]
      - **CROP TASK**: Show ONLY the Face.
      - **REMOVE**: Shoulders, Body, Background details.
      - **FILL**: The Face must fill 80% of the frame.
      - **FOCUS**: Sharp focus on eyes.
      - **POSTURE**: **MAINTAIN ORIGINAL POSE**.
    `;default:return"Cinematic Shot. Best composition for the scene."}},yw=({onNext:t,isNextLoading:e})=>{const{scenes:n,setScenes:o,characters:r,referenceImages:i,apiKey:s,selectedStyle:u,globalAspectRatio:c,setGlobalAspectRatio:d,showToast:f,openModal:h,globalScenePrompt:m,setGlobalScenePrompt:g,props:S,script:E}=Ft(),[C,y]=B.useState({}),[v,x]=B.useState(!1),[T,I]=B.useState({}),[_,A]=B.useState({}),[k,M]=B.useState(!0),[U,O]=B.useState(!1),[X,N]=B.useState({}),[F,$]=B.useState({}),[H,Z]=B.useState([]),D=B.useRef(null),[Y,K]=B.useState(null),te=w=>w.replace(/[\s\[\]\(\):]/g,"");B.useEffect(()=>{let w=!1;const q=n.map(R=>{if(!R.casting&&r.length>0){const G=te(R.scriptSegment),P=te(R.description),V=r.filter(fe=>{const j=te(fe.name);return G.includes(j)||P.includes(j)}),ce=V.slice(0,3).map(fe=>fe.id),oe=V.slice(3,6).map(fe=>fe.id),ye=(S?S.filter(fe=>{const j=te(fe.name);return G.includes(j)||P.includes(j)}):[]).map(fe=>fe.id);return w=!0,{...R,casting:{mainIds:ce,subIds:oe,propIds:ye}}}return R});w&&o(q)},[r.length,S==null?void 0:S.length,n.length]);const he=()=>{Z(w=>[...w,n])},Pt=()=>{if(H.length===0)return;const w=H[H.length-1];o(w),Z(q=>q.slice(0,-1)),f("  .","success")},ie=(w,q)=>{const R=n.find(V=>V.id===w);if(!R)return"";const G=R.casting||{mainIds:[],subIds:[]};let P="";if(P+=`[SCENE INFO]
Location: ${R.location}
Time: ${R.timeOfDay}
Mood/Weather: ${R.description}
`,q==="background")P+=`
[INSTRUCTION]
NO PEOPLE. EMPTY BACKGROUND ONLY.
Focus on architecture and atmosphere.`;else{if(P+=`
[CAMERA]
${vw(q)}
`,(R.location.includes("")||R.location.includes("")||R.location.includes("")||R.location.includes(""))&&(P+=`
[INDOOR ETIQUETTE - SHOES]
`,P+=`- **NO SHOES ALLOWED**: Character is INDOORS. Must be barefoot or wearing white socks (Beoseon).
`,P+=`- **REMOVE SHOES**: Even if reference image has shoes, REMOVE THEM.
`,P+=`- **NEGATIVE PROMPT**: Shoes, Boots, Sandals, Jipsin inside the room.
`,P+=`
[INDOOR ETIQUETTE - HEADWEAR]
`,P+=`- **REMOVE OUTDOOR HATS**: Character is INDOORS. Take off "Gat", "Satgat", "Paeraengi".
`,P+=`- **ALLOWED HEADWEAR**: Headbands (Manggeon), Hairpins (Binyeo), Small Indoor Caps (Tanggeon/Jeongjagwan).
`,P+=`- **NEGATIVE PROMPT**: Wide Brim Hat, Gat, Satgat, Outdoor Hat.
`),G.mainIds.length>0){const ce=G.mainIds.map(j=>r.find(L=>L.id===j)).filter(Boolean),oe=ce.filter(j=>{const L=((j==null?void 0:j.description)||"").toLowerCase();return L.includes("daenggi")||L.includes("half-tied")||L.includes("danbal")||L.includes("deobeok")||L.includes("shaggy")});oe.length>0&&(P+=`
[HAIR-BASED HAT RULE]
`,oe.forEach(j=>{P+=`- **CHARACTER ${j==null?void 0:j.name}**: Has specific hairstyle (Daenggi/Half-tied/Shaggy). **MUST NOT WEAR A GAT** (Hat). Show the hair clearly.
`}),oe.length===ce.length&&(P+=`- **NEGATIVE PROMPT**: Gat, Wide Brim Hat, Satgat.
`)),P+=`
[FOCUS SUBJECT - MAIN CHARACTERS]
`,!!R.focusId?P+=`TOTAL CHARACTERS: 1 (Active Speaker) + Blurred Foreground Element (Listener)
`:(P+=`TOTAL CHARACTERS: ${G.mainIds.length} (DO NOT DRAW MORE THAN ${G.mainIds.length})
`,G.mainIds.length===2&&(P+=`[COMPOSITION: TWO SHOT]
- Show both characters in the frame.
- Equal importance/focus on both.
`));let ye=0;const fe=G.mainIds.map(j=>{const L=r.find(ae=>ae.id===j),Q=L?i.find(ae=>ae.name===L.name):null;return Q!=null&&Q.imageUrl&&ye++,{id:j,hasRef:!!(Q!=null&&Q.imageUrl),refIndex:Q!=null&&Q.imageUrl?ye:0}});if(G.mainIds.forEach(j=>{var Q,ae;const L=r.find(ke=>ke.id===j);if(L){const ke=fe.find(cs=>cs.id===j),pe=i.find(cs=>cs.name===L.name),tt=pe?pe.description:L.visualGuide||L.description,_n=R.focusId===j,nu=!!R.focusId,sh=ke!=null&&ke.hasRef?`(MATCH WITH PROVIDED REFERENCE IMAGE #${ke.refIndex})`:"(No Reference Image)";P+=`
 CHARACTER: ${L.name} ${_n?"( PRIMARY FOCUS - SPEAKER)":""} ${sh}
`,nu&&!_n?(P+=`  - ROLE: **LISTENER** (Foreground Framing Element)
`,P+=`  - APPEARANCE: ${((Q=pe==null?void 0:pe.design)==null?void 0:Q.clothingColor)||"Dark"} clothing.
`,P+=`  - INSTRUCTION: **PUSH TO THE EDGE**. Show ONLY the back of the shoulder/head on the extreme edge of the frame.
`,P+=`  - **SIZE**: The Listener MUST NOT block the view. They should take up less than 15% of the frame width.
`,P+=`  - **BLUR**: Heavily blur this character (Bokeh).
`):(P+=`  - APPEARANCE: ${tt} (STRICTLY FOLLOW THIS)
`,(ae=pe==null?void 0:pe.design)!=null&&ae.clothingColor&&(P+=`  - CLOTHING: ${pe.design.clothingColor}
`),nu&&_n?P+=`  - ROLE: **ACTIVE SPEAKER** (Camera Focus on this person).
`:P+=`  - ROLE: Main Actor
`)}}),G.mainIds.length===1||R.focusId&&G.mainIds.length>0)if(P+=`
    [SOLO/OTS SHOT & ANGLE INSTRUCTION]
    `,R.focusId){const j=n.findIndex(Q=>Q.id===w);let L=!1;if(j>0){const Q=n[j-1];Q.focusId&&Q.focusId!==R.focusId&&(L=!0)}P+=`
    - **CAMERA FOCUS**: Focus SHARPLY on the Active Speaker.
    - **COMPOSITION**: Dirty Single Shot / Tight Over-the-Shoulder.
    - **LISTENER POSITION**: The Listener is TOO BIG. **MOVE THEM OUT OF THE FRAME**.
    - **VISIBILITY**: Show ONLY a sliver of the Listener's shoulder/head on the edge.
    - **RATIO**: Speaker (85% of frame) vs Listener (15% of frame).
    - **EYE CONTACT**: Speaker looks at the Listener (Not at Camera).
    `,L?P+=`
    [SPATIAL INVERSION RULE - CRITICAL]
    - The camera has rotated 180 degrees.
    - **VISUAL NEGATION**: Any furniture/objects visible behind the characters in the PREVIOUS shot (e.g., Folding Screen, High Chair) MUST BE BEHIND THE CAMERA now.
    - **CURRENT BACKGROUND**: Show the OPPOSITE wall.
      - **STRUCTURE**: If the previous shot showed the Main Seat/Folding Screen, this shot MUST show Doors/Windows/Courtyard View.
      - **ASYMMETRY**: The two sides of the room are NOT symmetrical. One side is solid (wall/screen), the other is open (doors/windows).
    - **LIGHTING/TONE**: Keep the same color palette and lighting atmosphere, but change the geometry/objects completely.
    `:P+=`
    - **NEGATIVE PROMPT**: Third person, extra characters, crowd, listener facing camera, listener blocking view.
    `}else P+=`
    - **DRAW ONLY THE SINGLE CHARACTER LISTED ABOVE**.
    - If the script implies dialogue with another person, **DO NOT DRAW THE LISTENER**.
    - **ANGLE**: The character should look 15-30 degrees to the side (talking to someone off-screen).
    - **EYE CONTACT**: DO NOT look at the camera. Look at the invisible listener.
    - **COMPOSITION**: Place the character slightly off-center (Rule of Thirds) to leave space for the "invisible" listener.
                       `}G.propIds&&G.propIds.length>0&&(P+=`
[IMPORTANT PROPS/OBJECTS]
`,G.propIds.forEach(ce=>{const oe=S==null?void 0:S.find(se=>se.id===ce);oe&&(P+=` PROP: ${oe.name}
`,P+=`  - APPEARANCE: ${oe.description}
`,P+=`  - NOTE: Must be visible and look exactly as described.
`)})),G.subIds.length>0&&(P+=`
[BACKGROUND/SUPPORTING CHARACTERS]
`,G.subIds.forEach(ce=>{const oe=r.find(se=>se.id===ce);if(oe){const se=i.find(fe=>fe.name===oe.name),ye=se?se.description:oe.description;P+=`- ${oe.name}: ${ye}
`}})),P+=`
[SCRIPT CONTEXT]
"${R.scriptSegment.substring(0,100)}..."`}return A(V=>({...V,[w]:P})),P},Se=(w,q)=>{I(R=>({...R,[w]:q})),ie(w,q)},ne=(w,q)=>{o(R=>R.map(G=>{if(G.id===w){const P=G.focusId===q?void 0:q;return{...G,focusId:P}}return G}))},J=(w,q,R,G)=>{o(P=>P.map(V=>{if(V.id!==w)return V;const ce=V.casting||{mainIds:[],subIds:[],propIds:[]};let oe=[...ce.mainIds],se=[...ce.subIds],ye=[...ce.propIds||[]],fe=V.focusId;if(G==="remove")q==="main"&&(oe=oe.filter(j=>j!==R),fe===R&&(fe=void 0)),q==="sub"&&(se=se.filter(j=>j!==R)),q==="prop"&&(ye=ye.filter(j=>j!==R));else if(q==="main"){if(oe.length>=3)return f("  3.","warning"),V;oe.includes(R)||oe.push(R),se=se.filter(j=>j!==R)}else if(q==="sub"){if(se.length>=3)return f("  3.","warning"),V;se.includes(R)||se.push(R),oe=oe.filter(j=>j!==R)}else if(q==="prop"){if(ye.length>=3)return f("  3.","warning"),V;ye.includes(R)||ye.push(R)}return{...V,casting:{mainIds:oe,subIds:se,propIds:ye},focusId:fe}}))},we=(w,q)=>{var R;h({type:"textarea",title:`SCENE ${(R=n.find(G=>G.id===w))==null?void 0:R.sceneNumber}  `,message:`      .
(          .)`,defaultValue:q,confirmText:" ",onConfirm:G=>{A(P=>({...P,[w]:G||""}))}})},ut=w=>{var G;const q=(G=w.target.files)==null?void 0:G[0];if(!q||!Y)return;const R=new FileReader;R.onload=P=>{var ce;const V=(ce=P.target)==null?void 0:ce.result;V&&(o(oe=>oe.map(se=>se.id===Y?{...se,backgroundRefUrl:V}:se)),f("   .","success"),K(null))},R.readAsDataURL(q)},xt=w=>{if(w===0)return f("  .","warning");const q=n[w];let R=null;for(let G=w-1;G>=0;G--)if(n[G].location===q.location&&n[G].generatedImageUrl){R=n[G].generatedImageUrl;break}!R&&n[w-1].generatedImageUrl&&(R=n[w-1].generatedImageUrl),R?(o(G=>G.map((P,V)=>V===w?{...P,backgroundRefUrl:R}:P)),f("   !","success")):f("      .","warning")},Ot=w=>{h({type:"confirm",title:"   ",message:`     ?
(  .)`,confirmText:"",onConfirm:()=>{o(q=>q.map(R=>{if(R.id===w){const G={...R};return delete G.backgroundRefUrl,G}return R})),f("   .","success")}})},Zt=async()=>{if(!E)return f("  .","warning");if(!s)return f("API  .","warning");O(!0),f("      ...","success");try{const w=await uw(s,E);g(w),f("  .   .","success")}catch(w){f(w.message,"error")}finally{O(!1)}},wn=async w=>{var G,P;let q=_[w];const R=T[w]||"background";if(q||(q=ie(w,R)),!q){f(" ","error");return}y(V=>({...V,[w]:!0}));try{const V=n.find(ke=>ke.id===w),ce=(V==null?void 0:V.aspectRatio)||c||"16:9";let oe=[];R!=="background"&&((G=V==null?void 0:V.casting)!=null&&G.mainIds)&&V.casting.mainIds.length>0&&V.casting.mainIds.forEach(ke=>{const pe=r.find(tt=>tt.id===ke);if(pe){const tt=i.find(_n=>_n.name===pe.name);tt!=null&&tt.imageUrl&&oe.push(tt.imageUrl)}});const se=X[w]||"",ye=!!(V!=null&&V.focusId),fe=ye||V==null?void 0:V.backgroundRefUrl;let j=[];(P=V==null?void 0:V.casting)!=null&&P.propIds&&V.casting.propIds.length>0&&V.casting.propIds.forEach(ke=>{const pe=S==null?void 0:S.find(tt=>tt.id===ke);pe&&pe.imageUrl&&j.push(pe.imageUrl)});const L=["ws","bs","cu","mls"].includes(R);let Q;R==="full"?Q=void 0:L&&!ye&&(Q=(V==null?void 0:V.masterFullShotUrl)||(V==null?void 0:V.generatedImageUrl));const ae=await Gi(s,q,u,ce,R==="background"?"background":"cinematic",oe,se,fe,j,m,Q);o(ke=>ke.map(pe=>{if(pe.id===w){const tt=pe.imageHistory?[ae,...pe.imageHistory]:[ae];!pe.imageHistory&&pe.generatedImageUrl&&tt.push(pe.generatedImageUrl);const _n=R==="full"?ae:pe.masterFullShotUrl;return{...pe,generatedImageUrl:ae,masterFullShotUrl:_n,imageHistory:tt,aspectRatio:ce}}return pe})),v||f(" !","success")}catch(V){v||f(V.message,"error")}finally{y(V=>({...V,[w]:!1}))}},kt=async(w,q)=>{const R=n.find(G=>G.id===w);if(!(!(R!=null&&R.generatedImageUrl)||!q)){y(G=>({...G,[w]:!0})),f("  ...","success");try{const G=await aw(s,R.generatedImageUrl,q);o(P=>P.map(V=>{if(V.id===w){const ce=[G,...V.imageHistory||[]];return{...V,generatedImageUrl:G,imageHistory:ce}}return V})),f(" !","success")}catch(G){f(G.message,"error")}finally{y(G=>({...G,[w]:!1}))}}},ct=async(w,q)=>{if(!s)return f("API  .","warning");he();const R=n.findIndex(P=>P.id===w);if(R===-1)return;const G=n[R];$(P=>({...P,[w]:!0})),f(` ${q}  ... (  )`,"success");try{const P=await ew(s,G,q),V=[...n];V.splice(R,1,...P);const ce=V.map((oe,se)=>({...oe,sceneNumber:se+1}));o(ce),f(`! ${G.sceneNumber}  ${q} .`,"success")}catch(P){f(P.message,"error")}finally{$(P=>({...P,[w]:!1}))}},Gt=w=>{var ce,oe,se,ye;if(w===0)return;he();const q=n[w-1],R=n[w],G={mainIds:[...new Set([...((ce=q.casting)==null?void 0:ce.mainIds)||[],...((oe=R.casting)==null?void 0:oe.mainIds)||[]])],subIds:[...new Set([...((se=q.casting)==null?void 0:se.subIds)||[],...((ye=R.casting)==null?void 0:ye.subIds)||[]])]},P={...q,scriptSegment:`${q.scriptSegment}
${R.scriptSegment}`,description:`${q.description} ${R.description}`,casting:G},V=[...n];V.splice(w-1,2,P),o(V.map((fe,j)=>({...fe,sceneNumber:j+1}))),f(`${w+1} ${w}  .`,"success")},In=w=>{w!==n.length-1&&Gt(w+1)},wr=async()=>{if(!s)return f("API  .","warning");const w=n.filter(q=>!q.generatedImageUrl);if(w.length===0)return f("    .","warning");h({type:"confirm",title:" ",message:` ${w.length}    ?

:  '  ' '  (${c})' .`,confirmText:" ",onConfirm:async()=>{var R;x(!0),f("  ...","success");let q=0;for(let G=0;G<w.length;G++){const P=w[G];try{const V=T[P.id]||"background",ce=ie(P.id,V),oe=P.aspectRatio||c||"16:9";let se=[];V!=="background"&&((R=P==null?void 0:P.casting)!=null&&R.mainIds)&&P.casting.mainIds.length>0&&P.casting.mainIds.forEach(L=>{const Q=r.find(ae=>ae.id===L);if(Q){const ae=i.find(ke=>ke.name===Q.name);ae!=null&&ae.imageUrl&&se.push(ae.imageUrl)}});const ye=X[P.id]||"",fe=P.backgroundRefUrl,j=await Gi(s,ce||"Scene",u,oe,V==="background"?"background":"cinematic",se,ye,fe,void 0,m);o(L=>L.map(Q=>{if(Q.id===P.id){const ae=Q.imageHistory?[j,...Q.imageHistory]:[j];return!Q.imageHistory&&Q.generatedImageUrl&&ae.push(Q.generatedImageUrl),{...Q,generatedImageUrl:j,imageHistory:ae,aspectRatio:oe}}return Q})),q++}catch(V){console.error(`Failed scene ${P.sceneNumber}`,V)}G<w.length-1&&await new Promise(V=>setTimeout(V,3e3))}x(!1),f(`  ! (${q}/${w.length} )`,"success")}})},Nn=(w,q)=>{const R=document.createElement("a");R.href=w,R.download=q,R.click()},us=(w,q)=>{o(R=>R.map(G=>G.id===w?{...G,generatedImageUrl:q}:G))},oh=async w=>{const q=n.find(R=>R.id===w);if(q!=null&&q.generatedImageUrl){if(!s)return f("API  .","warning");h({type:"confirm",title:"  ",message:"   ,  () ?",confirmText:"",onConfirm:async()=>{y(R=>({...R,[w]:!0}));try{const R=await sw(s,q.generatedImageUrl);o(G=>G.map(P=>{if(P.id===w){const V=[R,...P.imageHistory||[]];return{...P,generatedImageUrl:R,imageHistory:V}}return P})),f(" .","success")}catch(R){f(R.message,"error")}finally{y(R=>({...R,[w]:!1}))}}})}},rh=async w=>{const q=n.find(R=>R.id===w);if(q!=null&&q.generatedImageUrl){if(!s)return f("API  .","warning");h({type:"confirm",title:"  ( )",message:`     ?
(    )`,confirmText:" ",onConfirm:async()=>{y(R=>({...R,[w]:!0}));try{const R=await lw(s,q.generatedImageUrl);o(G=>G.map(P=>{if(P.id===w){const V=[R,...P.imageHistory||[]];return{...P,generatedImageUrl:R,imageHistory:V}}return P})),f(" .","success")}catch(R){f(R.message,"error")}finally{y(R=>({...R,[w]:!1}))}}})}},ih=(w,q)=>{o(R=>R.map(G=>G.id===w?{...G,aspectRatio:q}:G)),f(`   ${q} .`,"success")};return p.jsxs("div",{className:"space-y-6 animate-fade-in",children:[p.jsx("input",{type:"file",ref:D,onChange:ut,accept:"image/*",className:"hidden"}),p.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-center bg-slate-800 p-6 rounded-xl border border-slate-700 gap-4",children:[p.jsxs("div",{children:[p.jsxs("h2",{className:"text-2xl font-bold text-white mb-2",children:["   (",n.length,")"]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-sm text-slate-400",children:"  :"}),p.jsxs("select",{value:c,onChange:w=>d(w.target.value),className:"bg-slate-900 border border-slate-600 rounded px-2 py-1 text-sm font-bold text-indigo-300 focus:ring-2 focus:ring-indigo-500",children:[p.jsx("option",{value:"16:9",children:"16:9 ()"}),p.jsx("option",{value:"9:16",children:"9:16 (/)"}),p.jsx("option",{value:"1:1",children:"1:1 ()"}),p.jsx("option",{value:"4:3",children:"4:3 ()"}),p.jsx("option",{value:"3:4",children:"3:4 ()"})]})]})]}),p.jsxs("div",{className:"flex gap-3 items-center",children:[H.length>0&&p.jsxs("button",{onClick:Pt,className:"px-4 py-3 rounded-lg font-bold bg-slate-700 hover:bg-slate-600 text-slate-200 border border-slate-600 flex items-center gap-2",title:" / ",children:[p.jsx("i",{className:"fas fa-undo"}),"  "]}),p.jsxs("button",{onClick:wr,disabled:v||e,className:`px-5 py-3 rounded-lg font-bold shadow-lg flex items-center gap-2 border transition-all ${v?"bg-yellow-700 text-yellow-100 border-yellow-600 animate-pulse":"bg-slate-700 hover:bg-slate-600 text-slate-200 border-slate-600"}`,children:[v?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-layer-group"}),v?" ...":"   "]}),p.jsxs("button",{onClick:t,disabled:e||v,className:"bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-bold shadow-lg flex items-center gap-2",children:[e?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-arrow-right"})," () "]})]})]}),p.jsxs("div",{className:"bg-indigo-900/30 border border-indigo-500/50 rounded-xl p-6 shadow-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4 cursor-pointer",onClick:()=>M(!k),children:[p.jsxs("h3",{className:"text-lg font-bold text-indigo-200 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-globe-asia"})," []  / "]}),p.jsx("i",{className:`fas fa-chevron-${k?"up":"down"} text-indigo-400`})]}),k&&p.jsxs("div",{className:"animate-fade-in",children:[p.jsxs("p",{className:"text-sm text-slate-400 mb-2",children:["  ",p.jsx("strong",{children:"  "}),'. "   ", "  ", "    "  AI     .']}),p.jsx("div",{className:"flex justify-end mb-2",children:p.jsxs("button",{onClick:Zt,disabled:U,className:"text-xs bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded flex items-center gap-2 border border-indigo-400 shadow-sm",children:[U?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-magic"}),"   /"]})}),p.jsx("textarea",{value:m,onChange:w=>g(w.target.value),placeholder:":      .      .          .",className:"w-full h-32 bg-slate-800 border border-slate-600 rounded-lg p-3 text-sm text-white focus:ring-2 focus:ring-indigo-500 resize-none leading-relaxed"}),p.jsx("div",{className:"flex justify-end mt-2",children:p.jsxs("button",{onClick:()=>{n.forEach(w=>ie(w.id,T[w.id]||"background")),f("     . ( )","success")},className:"text-xs bg-indigo-700 hover:bg-indigo-600 text-white px-3 py-1.5 rounded flex items-center gap-1",children:[p.jsx("i",{className:"fas fa-sync-alt"}),"   "]})})]})]}),p.jsx("div",{className:"space-y-12",children:n.map((w,q)=>{var R,G,P,V,ce,oe,se,ye,fe,j;return p.jsxs("div",{className:"bg-slate-800 rounded-2xl overflow-hidden border border-slate-700 shadow-xl",children:[p.jsxs("div",{className:"bg-slate-900/50 p-6 border-b border-slate-700",children:[p.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("span",{className:"bg-indigo-600 text-white px-3 py-1 rounded text-sm font-bold whitespace-nowrap",children:["SCENE ",w.sceneNumber]}),p.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white truncate max-w-[200px] md:max-w-md",children:w.location}),p.jsx("span",{className:"text-slate-400 text-sm border border-slate-600 px-2 py-0.5 rounded-full whitespace-nowrap",children:w.timeOfDay})]}),p.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-1 bg-slate-800 rounded-lg p-1 border border-slate-600",children:[p.jsxs("span",{className:"text-[10px] text-slate-400 px-2 font-bold uppercase",children:[p.jsx("i",{className:"fas fa-link mr-1"}),""]}),p.jsx("button",{onClick:()=>Gt(q),disabled:q===0,className:"text-xs bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded border border-slate-600 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"   (     )",children:p.jsx("i",{className:"fas fa-arrow-up"})}),p.jsx("button",{onClick:()=>In(q),disabled:q===n.length-1,className:"text-xs bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded border border-slate-600 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"   (     )",children:p.jsx("i",{className:"fas fa-arrow-down"})})]}),p.jsxs("div",{className:"flex items-center gap-1 bg-slate-800 rounded-lg p-1 border border-slate-600",children:[p.jsxs("span",{className:"text-[10px] text-slate-400 px-2 font-bold uppercase",children:[p.jsx("i",{className:"fas fa-cut mr-1"}),""]}),p.jsx("button",{onClick:()=>ct(w.id,2),disabled:F[w.id],className:"text-xs bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded border border-slate-600 transition-colors",title:"     2 ",children:"2"}),p.jsx("button",{onClick:()=>ct(w.id,3),disabled:F[w.id],className:"text-xs bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded border border-slate-600 transition-colors",title:"     3 ",children:"3"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-xs text-slate-500",children:":"}),p.jsxs("select",{value:w.aspectRatio||c,onChange:L=>ih(w.id,L.target.value),className:"bg-slate-800 text-xs text-slate-300 border border-slate-600 rounded px-1 py-1",children:[p.jsx("option",{value:"16:9",children:"16:9"}),p.jsx("option",{value:"9:16",children:"9:16"}),p.jsx("option",{value:"1:1",children:"1:1"}),p.jsx("option",{value:"4:3",children:"4:3"}),p.jsx("option",{value:"3:4",children:"3:4"})]})]})]})]}),F[w.id]&&p.jsxs("div",{className:"mb-4 bg-indigo-900/30 border border-indigo-500/30 text-indigo-300 px-4 py-2 rounded text-sm flex items-center gap-3 animate-pulse",children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"AI      ..."})]}),p.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-600/50",children:[p.jsxs("p",{className:"text-indigo-300 text-sm font-bold mb-1",children:[p.jsx("i",{className:"fas fa-quote-left mr-2"})," "]}),p.jsx("p",{className:"text-lg text-slate-200",children:w.scriptSegment})]})]}),p.jsx("div",{className:"p-6",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[p.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[p.jsxs("div",{className:"relative w-full bg-black rounded-lg overflow-hidden border border-slate-700 flex items-center justify-center transition-all",style:{width:"100%",aspectRatio:(w.aspectRatio||c).replace(":","/")},children:[w.generatedImageUrl?p.jsx("img",{src:w.generatedImageUrl,alt:"Background",className:"w-full h-full object-contain"}):p.jsxs("div",{className:"text-slate-600 flex flex-col items-center",children:[p.jsx("i",{className:"fas fa-image text-6xl mb-4 opacity-30"}),p.jsx("span",{children:" "})]}),C[w.id]&&p.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center backdrop-blur-sm",children:p.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-indigo-500"})}),T[w.id]&&T[w.id]!=="background"&&p.jsx("div",{className:"absolute top-4 right-4 bg-black/80 text-white text-xs px-2 py-1 rounded border border-white/30 backdrop-blur-md",children:(R=Wd.find(L=>L.value===T[w.id]))==null?void 0:R.label}),w.backgroundRefUrl&&p.jsxs("div",{className:"absolute bottom-4 left-4 bg-blue-900/80 text-white text-xs px-2 py-1 rounded border border-blue-500 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-layer-group"}),"    ( )"]})]}),w.imageHistory&&w.imageHistory.length>0&&p.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:w.imageHistory.map((L,Q)=>p.jsx("div",{onClick:()=>us(w.id,L),className:`flex-shrink-0 w-16 h-16 rounded cursor-pointer border-2 transition-all hover:scale-105 ${w.generatedImageUrl===L?"border-indigo-500 ring-1":"border-slate-700 opacity-60"}`,children:p.jsx("img",{src:L,alt:"History",className:"w-full h-full object-cover"})},Q))}),w.generatedImageUrl&&p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:()=>Nn(w.generatedImageUrl,`scene_${w.sceneNumber}.png`),className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-lg font-bold border border-slate-600 flex items-center justify-center gap-2",children:[p.jsx("i",{className:"fas fa-download"})," "]}),T[w.id]!=="background"&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:()=>oh(w.id),className:"flex-1 bg-green-900/50 hover:bg-green-800/80 text-green-300 hover:text-white px-4 py-3 rounded-lg font-bold border border-green-700/50 flex items-center justify-center gap-2",title:"    ",children:[p.jsx("i",{className:"fas fa-magic"}),"  "]}),p.jsxs("button",{onClick:()=>rh(w.id),className:"flex-1 bg-slate-700 hover:bg-red-900/50 text-slate-300 hover:text-red-300 px-4 py-3 rounded-lg font-bold border border-slate-600 hover:border-red-700 flex items-center justify-center gap-2",title:"    ",children:[p.jsx("i",{className:"fas fa-user-slash"}),"  "]})]})]}),w.generatedImageUrl&&p.jsxs("div",{className:"mt-2 bg-purple-900/20 border border-purple-500/30 p-4 rounded-lg",children:[p.jsxs("label",{className:"text-sm font-bold text-purple-300 block mb-2",children:[p.jsx("i",{className:"fas fa-magic mr-2"}),"  (   )"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",id:`fix-input-${w.id}`,placeholder:":   ,   ",className:"flex-1 bg-slate-900 border border-purple-500/50 rounded-lg px-4 py-3 text-white focus:border-purple-400 focus:ring-1 focus:ring-purple-400 placeholder-slate-500",onKeyDown:L=>{if(L.key==="Enter"){const Q=L.currentTarget.value;Q&&kt(w.id,Q)}}}),p.jsx("button",{onClick:()=>{const L=document.getElementById(`fix-input-${w.id}`);L&&L.value&&kt(w.id,L.value)},disabled:C[w.id],className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-lg font-bold shadow-lg whitespace-nowrap",children:C[w.id]?p.jsx("i",{className:"fas fa-spinner fa-spin"}):" "})]}),p.jsx("p",{className:"text-xs text-purple-400/70 mt-2 ml-1",children:"* 3     .     ."})]})]}),p.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-4",children:[p.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-700",children:[p.jsxs("label",{className:"text-xs font-bold text-slate-400 mb-2 block uppercase",children:[p.jsx("i",{className:"fas fa-camera mr-1"}),"   ( )"]}),p.jsx("div",{className:"flex gap-2 flex-wrap",children:Wd.map(L=>p.jsx("button",{onClick:()=>Se(w.id,L.value),className:`px-3 py-2 rounded text-xs font-bold border transition-all ${T[w.id]===L.value||!T[w.id]&&L.value==="background"?"bg-indigo-600 text-white border-indigo-500":"bg-slate-800 text-slate-400 border-slate-600 hover:bg-slate-700"}`,children:L.label},L.value))})]}),T[w.id]!=="background"&&p.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-700",children:[p.jsxs("h4",{className:"text-sm font-bold text-white mb-3 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-users-cog text-yellow-500"}),"  "]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("label",{className:"text-xs font-bold text-indigo-400",children:"  (Foreground)"}),p.jsxs("select",{className:"bg-slate-800 text-xs text-white border border-slate-600 rounded px-2 py-1 w-24",onChange:L=>{L.target.value&&J(w.id,"main",L.target.value,"add"),L.target.value=""},children:[p.jsx("option",{value:"",children:"+ "}),r.map(L=>p.jsx("option",{value:L.id,children:L.name},L.id))]})]}),p.jsxs("div",{className:"flex flex-col gap-2 min-h-[30px]",children:[(P=(G=w.casting)==null?void 0:G.mainIds)==null?void 0:P.map(L=>{const Q=r.find(ke=>ke.id===L),ae=w.focusId===L;return Q?p.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg border ${ae?"bg-indigo-900/80 border-indigo-400":"bg-slate-800 border-slate-700"}`,children:[p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:`text-xs font-bold ${ae?"text-white":"text-slate-300"}`,children:Q.name})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:()=>ne(w.id,L),className:`text-[10px] px-2 py-0.5 rounded border ${ae?"bg-indigo-500 text-white border-indigo-400":"bg-slate-700 text-slate-400 border-slate-600 hover:bg-slate-600"}`,title:ae?"   ( )":"    ",children:[p.jsx("i",{className:`fas ${ae?"fa-video":"fa-video-slash"} mr-1`}),ae?"ON":"OFF"]}),p.jsx("button",{onClick:()=>J(w.id,"main",L,"remove"),className:"text-slate-500 hover:text-red-400",children:p.jsx("i",{className:"fas fa-times"})})]})]},L):null}),(!((V=w.casting)!=null&&V.mainIds)||w.casting.mainIds.length===0)&&p.jsx("span",{className:"text-xs text-slate-600",children:" "}),((ce=w.casting)==null?void 0:ce.mainIds)&&w.casting.mainIds.length>=2&&!w.focusId&&p.jsxs("div",{className:"mt-2 bg-slate-900/50 p-2 rounded border border-slate-600",children:[p.jsxs("p",{className:"text-[10px] text-slate-300 mb-1",children:[p.jsx("i",{className:"fas fa-video mr-1"})," ",p.jsx("strong",{children:"  "})]}),p.jsxs("ul",{className:"text-[10px] text-slate-400 space-y-1 list-disc pl-3",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"():"}),"  [ON]      . (    )"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"/OTS:"}),"   ",p.jsx("span",{className:"text-indigo-400 font-bold",children:"[ON]"}),",     ."]})]})]})]})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("label",{className:"text-xs font-bold text-slate-400",children:" (Background)"}),p.jsxs("select",{className:"bg-slate-800 text-xs text-white border border-slate-600 rounded px-2 py-1 w-24",onChange:L=>{L.target.value&&J(w.id,"sub",L.target.value,"add"),L.target.value=""},children:[p.jsx("option",{value:"",children:"+ "}),r.map(L=>p.jsx("option",{value:L.id,children:L.name},L.id))]})]}),p.jsx("div",{className:"flex gap-2 flex-wrap min-h-[30px]",children:(se=(oe=w.casting)==null?void 0:oe.subIds)==null?void 0:se.map(L=>{const Q=r.find(ae=>ae.id===L);return Q?p.jsxs("div",{className:"bg-slate-700 text-slate-300 text-xs px-2 py-1 rounded-full flex items-center gap-1 border border-slate-600",children:[p.jsx("span",{children:Q.name}),p.jsx("button",{onClick:()=>J(w.id,"sub",L,"remove"),className:"hover:text-red-300",children:p.jsx("i",{className:"fas fa-times"})})]},L):null})})]}),p.jsxs("div",{className:"mt-4 border-t border-slate-800 pt-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("label",{className:"text-xs font-bold text-green-400",children:"   (Props)"}),p.jsxs("select",{className:"bg-slate-800 text-xs text-white border border-slate-600 rounded px-2 py-1 w-24",onChange:L=>{L.target.value&&J(w.id,"prop",L.target.value,"add"),L.target.value=""},children:[p.jsx("option",{value:"",children:"+ "}),S&&S.map(L=>p.jsx("option",{value:L.id,children:L.name},L.id))]})]}),p.jsxs("div",{className:"flex gap-2 flex-wrap min-h-[30px]",children:[(fe=(ye=w.casting)==null?void 0:ye.propIds)==null?void 0:fe.map(L=>{const Q=S==null?void 0:S.find(ae=>ae.id===L);return Q?p.jsxs("div",{className:"bg-green-700 text-green-100 text-xs px-2 py-1 rounded-full flex items-center gap-1 shadow-sm",children:[p.jsx("span",{children:Q.name}),p.jsx("button",{onClick:()=>J(w.id,"prop",L,"remove"),className:"hover:text-red-300",children:p.jsx("i",{className:"fas fa-times"})})]},L):null}),(!((j=w.casting)!=null&&j.propIds)||w.casting.propIds.length===0)&&p.jsx("span",{className:"text-xs text-slate-600",children:" "})]})]})]}),p.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-700",children:[p.jsxs("label",{className:"text-xs font-bold text-blue-400 mb-2 block uppercase flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-image"}),"   ( )"]}),w.backgroundRefUrl?p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"w-full h-20 bg-black rounded border border-blue-500 overflow-hidden mb-2 relative",children:[p.jsx("img",{src:w.backgroundRefUrl,alt:"Background Ref",className:"w-full h-full object-cover opacity-70"}),p.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-white bg-black/50 text-center leading-tight",children:["  ",p.jsx("br",{}),"(/ )"]})]}),p.jsxs("button",{onClick:()=>Ot(w.id),className:"relative z-20 w-full text-xs text-white bg-red-800 hover:bg-red-600 border border-red-500 rounded py-3 transition-colors font-bold cursor-pointer shadow-md",children:[p.jsx("i",{className:"fas fa-trash-alt mr-1"}),"    ()"]})]}):p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("button",{onClick:()=>xt(q),className:"bg-slate-800 hover:bg-slate-700 text-slate-300 text-xs py-2 px-1 rounded border border-slate-600 flex flex-col items-center gap-1",title:"    ",children:[p.jsx("i",{className:"fas fa-arrow-left"}),"  "]}),p.jsxs("button",{onClick:()=>{var L;K(w.id),(L=D.current)==null||L.click()},className:"bg-slate-800 hover:bg-slate-700 text-slate-300 text-xs py-2 px-1 rounded border border-slate-600 flex flex-col items-center gap-1",title:"PC  ",children:[p.jsx("i",{className:"fas fa-upload"}),"  "]})]}),p.jsxs("p",{className:"text-[10px] text-slate-500 mt-2 leading-tight",children:["*      ",p.jsx("strong",{children:"()"}),"  ."]})]}),p.jsxs("div",{className:"flex-grow flex flex-col gap-2",children:[p.jsxs("div",{className:"flex justify-between items-end",children:[p.jsxs("label",{className:"text-xs font-bold text-green-400 uppercase",children:[p.jsx("i",{className:"fas fa-terminal mr-1"})," AI  "]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:()=>we(w.id,_[w.id]||""),className:"text-xs bg-indigo-600 hover:bg-indigo-500 text-white px-2 py-1 rounded border border-indigo-500 transition-colors shadow-sm",children:[p.jsx("i",{className:"fas fa-expand-arrows-alt mr-1"}),"  "]}),p.jsx("button",{onClick:()=>{ie(w.id,T[w.id]||"background"),f("   .","success")},className:"text-xs bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded border border-slate-600 transition-colors",title:"    ",children:p.jsx("i",{className:"fas fa-sync-alt"})})]})]}),p.jsx("textarea",{value:_[w.id]||"",onChange:L=>A(Q=>({...Q,[w.id]:L.target.value})),onDoubleClick:()=>we(w.id,_[w.id]||""),placeholder:"       .",className:"w-full h-24 bg-black/30 border border-slate-600 rounded-lg p-3 text-xs text-slate-300 font-mono focus:ring-1 focus:ring-green-500 focus:border-green-500 resize-none leading-relaxed cursor-text"})]}),p.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 p-4 rounded-lg mt-auto",children:[p.jsxs("label",{className:"text-sm font-bold text-red-400 block mb-2",children:[p.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),"    (  )"]}),p.jsx("input",{type:"text",value:X[w.id]||"",onChange:L=>N(Q=>({...Q,[w.id]:L.target.value})),placeholder:":   ,  ,  ",className:"w-full bg-slate-900 border border-red-500/50 rounded-lg px-4 py-3 text-white focus:border-red-500 focus:ring-1 focus:ring-red-500 placeholder-slate-500"})]}),p.jsxs("button",{onClick:()=>wn(w.id),disabled:C[w.id]||v,className:`w-full py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 transition-all ${T[w.id]&&T[w.id]!=="background"?"bg-indigo-600 hover:bg-indigo-500 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-200"}`,children:[C[w.id]?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-magic"}),w.generatedImageUrl?"   ":"  (Generate)"]})]})]})})]},w.id)})})]})},xw=()=>{const{script:t,characters:e,apiKey:n,selectedStyle:o,globalAspectRatio:r,showToast:i,props:s,scriptSegments:u,globalScenePrompt:c}=Ft(),[d,f]=B.useState("ALL"),[h,m]=B.useState(!1),[g,S]=B.useState([]),[E,C]=B.useState({}),[y,v]=B.useState([]),[x,T]=B.useState(!1);B.useEffect(()=>{(async()=>{if(typeof window<"u"){const F=localStorage.getItem("bangtong-opening-sequence");if(F)try{const H=JSON.parse(F);Array.isArray(H)&&H.length>0&&(await $o("bangtong-opening-sequence",H),S(H)),localStorage.removeItem("bangtong-opening-sequence")}catch{}else{const H=await Dl("bangtong-opening-sequence");H&&S(H)}const $=localStorage.getItem("bangtong-hooking-texts");if($)try{const H=JSON.parse($);Array.isArray(H)&&H.length>0&&(await $o("bangtong-hooking-texts",H),v(H)),localStorage.removeItem("bangtong-hooking-texts")}catch{}else{const H=await Dl("bangtong-hooking-texts");H&&v(H)}}})()},[]),B.useEffect(()=>{g.length>0&&$o("bangtong-opening-sequence",g)},[g]),B.useEffect(()=>{y.length>0&&$o("bangtong-hooking-texts",y)},[y]);const I=async()=>{window.confirm(` (   ) ?
   .`)&&(S([]),v([]),await Ul("bangtong-opening-sequence"),await Ul("bangtong-hooking-texts"),localStorage.removeItem("bangtong-opening-sequence"),localStorage.removeItem("bangtong-hooking-texts"),i("  .","success"))},_=(N,F,$)=>{S(H=>H.map(Z=>{if(Z.id!==N)return Z;let D=[...Z.propIds||[]];return $==="add"?D.includes(F)||D.push(F):D=D.filter(Y=>Y!==F),{...Z,propIds:D}}))},A=async()=>{if(!t)return i(" .","warning");if(!n)return i("API  .","warning");m(!0);try{let N=t;if(typeof d<"u"&&d!=="ALL"&&typeof u<"u"){const $=u.find(H=>H.id===d);$&&(N=$.content)}const F=await ow(n,N,e,s,c);S(F),i("/  !","success")}catch(N){i(N.message,"error")}finally{m(!1)}},k=async N=>{var F;C($=>({...$,[N.id]:!0}));try{const $=((F=N.propIds)==null?void 0:F.map(Z=>{var D;return(D=s.find(Y=>Y.id===Z))==null?void 0:D.imageUrl}).filter(Boolean))||[],H=await Gi(n,N.visualPrompt,o,r,"cinematic",void 0,void 0,void 0,$,c);S(Z=>Z.map(D=>D.id===N.id?{...D,generatedImageUrl:H}:D)),i(`${N.sequenceNumber}   `,"success")}catch($){i($.message,"error")}finally{C($=>({...$,[N.id]:!1}))}},M=(N,F)=>{const $=document.createElement("a");$.href=N,$.download=F,$.click()},U=async N=>{if(!N.generatedImageUrl)return i("  .","warning");const F=window.prompt("   . (  )",N.title);if(F!==null){C($=>({...$,[N.id]:!0}));try{const $=await cw(n,N.generatedImageUrl,F||N.title,o);S(H=>H.map(Z=>Z.id===N.id?{...Z,thumbnailUrl:$}:Z)),window.open($,"_blank"),i(" ! (  )","success")}catch($){i($.message,"error")}finally{C($=>({...$,[N.id]:!1}))}}},O=async()=>{if(!t)return i(" .","warning");if(!n)return i("API  .","warning");T(!0);try{const N=await dw(n,t);v(N),i(`  ${N.length} !`,"success")}catch(N){i(N.message,"error")}finally{T(!1)}},X=N=>{navigator.clipboard.writeText(N),i("!","success")};return p.jsxs("div",{className:"space-y-8 animate-fade-in pb-20",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-xl relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500"}),p.jsxs("div",{className:"z-10 mb-4 md:mb-0",children:[p.jsxs("h2",{className:"text-3xl font-extrabold text-white mb-2 flex items-center gap-3",children:[p.jsx("i",{className:"fas fa-film text-red-500"}),"  (  )"]}),p.jsxs("p",{className:"text-slate-400 mb-4",children:["   ",p.jsx("span",{className:"text-red-400 font-bold",children:"5 (Hooking) "})," ."]}),p.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 p-2 rounded-lg border border-slate-700 w-fit",children:[p.jsx("span",{className:"text-xs font-bold text-slate-400 px-2",children:" :"}),p.jsxs("select",{value:d,onChange:N=>f(N.target.value),className:"bg-slate-800 text-white text-sm border border-slate-600 rounded px-3 py-1.5 focus:ring-2 focus:ring-red-500 outline-none",children:[p.jsx("option",{value:"ALL",children:"  (AI  )"}),u.map((N,F)=>p.jsxs("option",{value:N.id,children:[F+1,". ",N.title]},N.id))]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("button",{onClick:I,className:"bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-white px-4 py-4 rounded-full font-bold text-lg shadow-lg transition-all",title:" ",children:p.jsx("i",{className:"fas fa-trash-alt"})}),p.jsxs("button",{onClick:A,disabled:h,className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white px-8 py-4 rounded-full font-bold text-lg shadow-lg shadow-red-900/50 flex items-center gap-3 transition-all transform hover:scale-105",children:[h?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-magic"}),"   (AI)"]})]})]}),g.length>0&&p.jsxs("div",{className:"space-y-0",children:[g.map((N,F)=>{var $;return p.jsxs("div",{className:"relative pl-8 md:pl-12 py-6 group",children:[p.jsx("div",{className:"absolute left-4 md:left-6 top-0 bottom-0 w-0.5 bg-slate-700 group-last:bottom-auto group-last:h-1/2"}),p.jsx("div",{className:"absolute left-2 md:left-4 top-12 w-4 h-4 md:w-5 md:h-5 rounded-full bg-slate-900 border-4 border-indigo-500 z-10 shadow-lg shadow-indigo-500/50"}),p.jsx("div",{className:"bg-slate-900 rounded-xl border border-slate-700 overflow-hidden hover:border-indigo-500 transition-colors",children:p.jsxs("div",{className:"flex flex-col md:flex-row",children:[p.jsxs("div",{className:"w-full md:w-2/5 bg-black relative min-h-[250px] flex items-center justify-center border-r border-slate-800",children:[N.generatedImageUrl?p.jsx("img",{src:N.generatedImageUrl,alt:N.title,className:"w-full h-full object-cover"}):p.jsxs("div",{className:"text-center p-6",children:[p.jsx("i",{className:"fas fa-clapperboard text-4xl text-slate-700 mb-3"}),p.jsx("p",{className:"text-slate-500 text-sm",children:"  "})]}),p.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-3",children:[p.jsxs("button",{onClick:()=>k(N),disabled:E[N.id],className:"bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-2 rounded-full font-bold shadow-lg flex items-center gap-2",children:[E[N.id]?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-paint-brush"}),N.generatedImageUrl?"  ":" "]}),N.generatedImageUrl&&p.jsxs("button",{onClick:()=>M(N.generatedImageUrl,`opening_shot_${N.sequenceNumber}.png`),className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-full font-bold shadow-lg flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-download"})," "]}),N.generatedImageUrl&&p.jsxs("button",{onClick:()=>U(N),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-full font-bold shadow-lg flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-heading"}),"  "]}),N.thumbnailUrl&&p.jsxs("button",{onClick:()=>window.open(N.thumbnailUrl,"_blank"),className:"bg-yellow-500 hover:bg-yellow-400 text-black px-6 py-2 rounded-full font-bold shadow-lg flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-eye"}),"  "]})]})]}),p.jsx("div",{className:"w-full md:w-3/5 p-6 flex flex-col justify-between",children:p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[p.jsxs("span",{className:"text-indigo-400",children:["#",N.sequenceNumber]})," ",N.title]}),F<g.length-1&&p.jsxs("span",{className:"text-xs bg-slate-800 text-slate-400 px-2 py-1 rounded border border-slate-700",children:["   ",p.jsx("i",{className:"fas fa-arrow-down ml-1"})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-700",children:[p.jsxs("p",{className:"text-xs font-bold text-slate-400 mb-1 uppercase",children:[p.jsx("i",{className:"fas fa-image mr-1"}),"   "]}),p.jsx("p",{className:"text-sm text-slate-300 line-clamp-3 hover:line-clamp-none transition-all cursor-help",children:N.visualPrompt})]}),p.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-700",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("p",{className:"text-xs font-bold text-amber-500 uppercase",children:[p.jsx("i",{className:"fas fa-cube mr-1"}),"   (Props)"]}),p.jsxs("select",{className:"bg-slate-900 text-xs text-slate-300 border border-slate-600 rounded px-2 py-1 max-w-[120px]",onChange:H=>{H.target.value&&_(N.id,H.target.value,"add"),H.target.value=""},children:[p.jsx("option",{value:"",children:"+ "}),s&&s.map(H=>p.jsx("option",{value:H.id,children:H.name},H.id))]})]}),p.jsxs("div",{className:"flex gap-2 flex-wrap min-h-[24px]",children:[($=N.propIds)==null?void 0:$.map(H=>{const Z=s==null?void 0:s.find(D=>D.id===H);return Z?p.jsxs("div",{className:"bg-amber-900/50 text-amber-200 border border-amber-700/50 text-xs px-2 py-1 rounded-full flex items-center gap-1",children:[p.jsx("span",{children:Z.name}),p.jsx("button",{onClick:()=>_(N.id,H,"remove"),className:"hover:text-red-300",children:p.jsx("i",{className:"fas fa-times"})})]},H):null}),(!N.propIds||N.propIds.length===0)&&p.jsx("span",{className:"text-xs text-slate-600",children:"  "})]})]}),p.jsxs("div",{className:"bg-indigo-900/20 p-3 rounded-lg border border-indigo-500/30",children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsxs("p",{className:"text-xs font-bold text-indigo-300 uppercase",children:[p.jsx("i",{className:"fas fa-video mr-1"})," Veo  "]}),p.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(N.videoPrompt),i(" ","success")},className:"text-xs text-indigo-400 hover:text-white",children:[p.jsx("i",{className:"fas fa-copy"})," "]})]}),p.jsx("p",{className:"text-sm text-indigo-200 font-mono",children:N.videoPrompt}),p.jsx("p",{className:"text-[10px] text-indigo-400/70 mt-2",children:"* Veo  (Start)   (End)    ."})]}),p.jsxs("div",{className:"bg-purple-900/20 p-3 rounded-lg border border-purple-500/30",children:[p.jsx("div",{className:"flex justify-between items-center mb-2",children:p.jsxs("p",{className:"text-xs font-bold text-purple-300 uppercase",children:[p.jsx("i",{className:"fas fa-heading mr-1"}),"   "]})}),p.jsx("div",{className:"flex flex-wrap gap-2",children:N.generatedImageUrl?p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:()=>U(N),disabled:E[N.id],className:"bg-purple-600 hover:bg-purple-500 text-white text-xs px-3 py-2 rounded-lg font-bold shadow-lg flex items-center gap-2 transition-colors",children:[E[N.id]?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-magic"}),"  ( )"]}),N.thumbnailUrl&&p.jsxs("button",{onClick:()=>window.open(N.thumbnailUrl,"_blank"),className:"bg-slate-700 hover:bg-slate-600 text-purple-300 text-xs px-3 py-2 rounded-lg font-bold shadow-lg flex items-center gap-2 transition-colors border border-purple-500/30",children:[p.jsx("i",{className:"fas fa-external-link-alt"}),"  "]})]}):p.jsx("span",{className:"text-xs text-slate-500",children:"  ."})})]})]})]})})]})})]},N.id)}),p.jsx("div",{className:"pl-8 md:pl-12 pb-8",children:p.jsx("div",{className:"bg-slate-800/50 border border-slate-700 border-dashed rounded-xl p-4 text-center",children:p.jsxs("p",{className:"text-slate-400 text-sm",children:[p.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"})," 5   (Cliffhanger).      ."]})})})]}),g.length===0&&!h&&p.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-600",children:[p.jsx("i",{className:"fas fa-film text-6xl mb-4 opacity-20"}),p.jsx("p",{className:"text-lg",children:"    ."})]}),p.jsxs("div",{className:"border-t border-slate-700 pt-10 mt-10",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[p.jsxs("div",{children:[p.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-bolt text-yellow-400"}),"    "]}),p.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"        50 ."})]}),p.jsxs("div",{className:"flex gap-2",children:[y.length>0&&p.jsx("button",{onClick:()=>{window.confirm("    ?")&&v([])},className:"bg-slate-700 hover:bg-slate-600 text-slate-300 px-4 py-3 rounded-full font-bold shadow-lg transition-all",title:"  ",children:p.jsx("i",{className:"fas fa-trash-alt"})}),p.jsxs("button",{onClick:O,disabled:x,className:"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white px-6 py-3 rounded-full font-bold shadow-lg flex items-center gap-2 transition-all",children:[x?p.jsx("i",{className:"fas fa-spinner fa-spin"}):p.jsx("i",{className:"fas fa-list-ol"}),"  50 "]})]})]}),y.length>0&&p.jsx("div",{className:"bg-slate-900 rounded-xl p-6 border border-slate-700 max-h-[500px] overflow-y-auto",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:y.map((N,F)=>p.jsxs("div",{onClick:()=>X(N),className:"bg-slate-800 hover:bg-slate-700 p-3 rounded-lg border border-slate-700 hover:border-yellow-500 cursor-pointer transition-all flex justify-between items-center group",children:[p.jsx("span",{className:"text-slate-200 font-medium",children:N}),p.jsx("i",{className:"fas fa-copy text-slate-500 group-hover:text-yellow-400 opacity-0 group-hover:opacity-100 transition-opacity"})]},F))})})]})]})},Sw=()=>{const{toast:t,closeToast:e}=Ft();if(!t)return null;const n={success:"bg-green-600",error:"bg-red-600",warning:"bg-yellow-600"};return p.jsxs("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 ${n[t.type]} text-white px-6 py-3 rounded-full shadow-2xl z-[100] flex items-center gap-3 animate-fade-in-up cursor-pointer`,onClick:e,children:[p.jsx("i",{className:`fas ${t.type==="success"?"fa-check-circle":t.type==="warning"?"fa-exclamation-triangle":"fa-times-circle"}`}),p.jsx("span",{className:"font-medium",children:t.message})]})},Ew=()=>{const{modalConfig:t,closeModal:e}=Ft(),[n,o]=B.useState("");if(B.useEffect(()=>{t&&o(t.defaultValue||"")},[t]),!t)return null;const r=()=>{t.onConfirm(n),e(),o("")},i=()=>{e(),o("")};return p.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:p.jsxs("div",{className:`bg-slate-800 border border-slate-600 rounded-xl shadow-2xl w-full p-6 relative ${t.type==="textarea"?"max-w-4xl":"max-w-lg"}`,children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t.title}),p.jsx("div",{className:"text-slate-300 mb-4 whitespace-pre-wrap leading-relaxed text-sm",children:t.message}),t.type==="prompt"&&p.jsx("input",{autoFocus:!0,type:"text",className:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white mb-6 focus:ring-2 focus:ring-indigo-500 placeholder-slate-500",placeholder:" ",value:n,onChange:s=>o(s.target.value),onKeyDown:s=>{s.key==="Enter"&&r()}}),t.type==="textarea"&&p.jsx("textarea",{autoFocus:!0,className:"w-full h-[60vh] bg-slate-900 border border-slate-700 rounded p-4 text-white mb-6 focus:ring-2 focus:ring-indigo-500 placeholder-slate-500 text-sm leading-relaxed custom-scrollbar font-mono",placeholder:"  ",value:n,onChange:s=>o(s.target.value)}),p.jsxs("div",{className:"flex justify-end gap-3",children:[p.jsx("button",{onClick:i,className:"px-4 py-2 rounded-lg text-slate-300 hover:bg-slate-700 font-medium transition-colors",children:t.cancelText||""}),p.jsx("button",{onClick:r,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-2 rounded-lg font-bold transition-all shadow-lg hover:shadow-indigo-500/30",children:t.confirmText||""})]})]})})},Tw=({onOpenApiKey:t})=>{const{apiKey:e}=Ft();return p.jsxs("header",{className:"bg-slate-900 border-b border-slate-700 p-4 flex items-center justify-between sticky top-0 z-50 shadow-md",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg",children:""}),p.jsxs("h1",{className:"text-2xl font-bold text-white tracking-wide",children:["  ",p.jsx("span",{className:"text-xs text-slate-500 font-normal ml-2",children:"Ver 2.0 (Joseon Ed.)"})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[e&&p.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-slate-800 px-3 py-1.5 rounded-full border border-slate-600 mr-2",children:[p.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"}),p.jsx("span",{className:"text-xs text-slate-300 font-medium",children:""})]}),p.jsxs("button",{onClick:t,className:"bg-slate-800 hover:bg-slate-700 text-slate-200 px-4 py-2 rounded-lg border border-slate-600 flex items-center gap-2 transition-all text-sm font-medium",children:[p.jsx("i",{className:`fas fa-key ${e?"text-green-500":"text-yellow-500"}`}),e?"API  ":"API  "]})]})]})},Hs=({active:t,label:e,icon:n,onClick:o,disabled:r})=>p.jsxs("button",{onClick:o,disabled:r,className:`flex-1 py-4 text-lg font-bold flex items-center justify-center gap-3 transition-all ${t?"bg-indigo-600 text-white shadow-inner border-b-4 border-indigo-800":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white border-b-4 border-slate-900"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[p.jsx("i",{className:`fas ${n} text-xl`}),e]}),Cw=({isOpen:t,onClose:e})=>{const{apiKey:n,setApiKey:o,showToast:r}=Ft(),[i,s]=B.useState(n);return t?p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[150] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"bg-slate-800 w-full max-w-md p-8 rounded-2xl border border-slate-600 shadow-2xl relative",children:[p.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:p.jsx("i",{className:"fas fa-times text-xl"})}),p.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-key text-yellow-500"})," API  "]}),p.jsx("p",{className:"text-slate-300 mb-6 text-sm",children:"Google AI Studio  Gemini API Key ."}),p.jsx("input",{type:"password",value:i,onChange:u=>s(u.target.value),placeholder:"AIzaSy...",className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-4 text-white focus:ring-2 focus:ring-indigo-500 mb-6 font-mono"}),p.jsx("button",{onClick:()=>{i?(o(i),e(),r(".","success")):r(" .","warning")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg",children:"  "}),p.jsx("div",{className:"mt-6 pt-4 border-t border-slate-700 text-center",children:p.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-400 text-sm",children:"API  "})})]})}):null},ww=()=>{const{apiKey:t,script:e,scriptSegments:n,scenes:o,characters:r,setScenes:i,setCharacters:s,isContinuityMode:u,showToast:c,resetProject:d,openModal:f}=Ft(),[h,m]=B.useState("script"),[g,S]=B.useState(!1),[E,C]=B.useState(!1),y=async()=>{if(!t)return S(!0);if(!e.trim()&&n.length===0)return c(" !","warning");C(!0);try{let x=e,T=e;u?n.length>0&&(x=n[n.length-1].content,c(`  :  (${n[n.length-1].title})   .`,"success")):c("  :     .","success"),c("1/2: (Scene)   ...","success");const _=(await tw(t,x,[])).map((M,U)=>({...M,id:`scene-${Date.now()}-${U}`}));c("2/2:     ...","success");const k=await nw(t,T,_,u?r:[]);u?(i(_),s(M=>{const U=[...M];return k.forEach(O=>{U.findIndex(N=>N.name===O.name)===-1&&U.push(O)}),U})):(i(_),s(k)),m("sintong"),c(` !  ${_.length} .`,"success")}catch(x){c(x.message,"error")}finally{C(!1)}},v=()=>{f({type:"confirm",title:" ",message:`     ?
    .`,confirmText:"",cancelText:"",onConfirm:()=>d()})};return p.jsxs("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 font-sans selection:bg-indigo-500 selection:text-white pb-20",children:[p.jsx(Tw,{onOpenApiKey:()=>S(!0)}),p.jsxs("div",{className:"flex border-b border-slate-700 sticky top-[72px] z-40 bg-[#0f172a]",children:[p.jsx(Hs,{active:h==="script",onClick:()=>m("script"),label:"1. /",icon:"fa-file-alt"}),p.jsx(Hs,{active:h==="sintong",onClick:()=>m("sintong"),label:"2.  (+)",icon:"fa-layer-group"}),p.jsx(Hs,{active:h==="opening",onClick:()=>m("opening"),label:"3.  ()",icon:"fa-film"})]}),p.jsxs("main",{className:"max-w-6xl mx-auto p-6 min-h-[calc(100vh-140px)]",children:[h==="script"&&p.jsx(gw,{onAnalyze:y,isAnalyzing:E}),h==="sintong"&&p.jsx(yw,{onNext:()=>m("opening"),isNextLoading:!1}),h==="opening"&&p.jsx(xw,{})]}),p.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:p.jsxs("button",{onClick:v,className:"bg-red-900/80 hover:bg-red-900 text-red-200 px-4 py-2 rounded-full text-xs border border-red-700 backdrop-blur",children:[p.jsx("i",{className:"fas fa-trash mr-1"}),"  "]})}),p.jsx(Ew,{}),p.jsx(Sw,{}),p.jsx(Cw,{isOpen:g,onClose:()=>S(!1)})]})},Iw=()=>p.jsx(Hv,{children:p.jsx(ww,{})}),nh=document.getElementById("root");if(!nh)throw new Error("Could not find root element to mount to");const Nw=Vs.createRoot(nh);Nw.render(p.jsx(Ch.StrictMode,{children:p.jsx(Iw,{})}));
