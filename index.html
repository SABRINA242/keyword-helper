<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오늘의 키워드 도우미 - RSS 실시간 연동</title>
    <meta name="description" content="구글 알리미 RSS와 연동하여 실시간 트렌드 키워드를 제공합니다.">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .date-display {
            font-size: 1.5em;
            color: #e74c3c;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .update-info {
            font-size: 0.9em;
            color: #27ae60;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .subtitle {
            font-size: 1.2em;
            color: #2c3e50;
            line-height: 1.5;
        }
        
        .rss-controls {
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .update-btn {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 15px;
        }
        
        .update-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(46, 204, 113, 0.4);
        }
        
        .update-btn:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }
        
        .last-update {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-top: 10px;
        }
        
        .category-filter {
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .filter-title {
            font-size: 1.3em;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .category-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .category-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .category-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }
        
        .category-btn.active {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #2c3e50;
            border-color: #f39c12;
        }
        
        .stats-bar {
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
        }
        
        .stat-number {
            font-size: 1.8em;
            font-weight: bold;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .keyword-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
            min-height: 400px;
        }
        
        .keyword-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .keyword-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            border-color: #ffd700;
        }
        
        .keyword-card.rss-generated {
            border-left: 5px solid #27ae60;
        }
        
        .keyword-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .trend-indicator {
            font-size: 2em;
            margin-right: 15px;
        }
        
        .keyword-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
            flex: 1;
        }
        
        .rating {
            font-size: 1.5em;
        }
        
        .keyword-category {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-bottom: 10px;
        }
        
        .rss-badge {
            display: inline-block;
            background: #27ae60;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7em;
            margin-left: 5px;
        }
        
        .keyword-content {
            margin-bottom: 15px;
        }
        
        .search-trend {
            color: #e74c3c;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 8px;
        }
        
        .why-now {
            color: #27ae60;
            font-size: 1em;
            margin-bottom: 8px;
        }
        
        .difficulty {
            color: #3498db;
            font-size: 1em;
        }
        
        .action-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2em;
            color: #7f8c8d;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .footer {
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            color: #7f8c8d;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        /* 모바일 최적화 */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .header { padding: 20px; }
            .header h1 { font-size: 2em; }
            .category-buttons { justify-content: center; }
            .category-btn { font-size: 1em; padding: 10px 20px; }
            .keyword-grid { grid-template-columns: 1fr; gap: 15px; }
            .stats-bar { grid-template-columns: repeat(2, 1fr); gap: 10px; }
        }
        
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🌟 오늘의 키워드 도우미</h1>
            <div class="date-display" id="currentDate"></div>
            <div class="update-info">🔄 구글 알리미 RSS 실시간 연동</div>
            <div class="subtitle">5개 카테고리 RSS 피드에서<br>실시간 트렌드 키워드를 자동 발굴합니다</div>
        </div>
        
        <div class="rss-controls">
            <button class="update-btn" onclick="updateAllRssFeeds()" id="updateBtn">
                🔄 모든 RSS 피드 업데이트
            </button>
            <div class="last-update" id="lastUpdate">마지막 업데이트: 미실행</div>
        </div>
        
        <div class="category-filter">
            <div class="filter-title">🔽 관심 있는 분야를 선택해보세요</div>
            <div class="category-buttons">
                <button class="category-btn active" onclick="filterByCategory('all')">전체보기</button>
                <button class="category-btn" onclick="filterByCategory('travel')">🏖️ 여행</button>
                <button class="category-btn" onclick="filterByCategory('festival')">🎪 축제</button>
                <button class="category-btn" onclick="filterByCategory('ticket')">🎫 예매</button>
                <button class="category-btn" onclick="filterByCategory('restaurant')">🍽️ 맛집</button>
                <button class="category-btn" onclick="filterByCategory('welfare')">💰 복지</button>
            </div>
        </div>
        
        <div class="stats-bar">
            <div class="stat-item">
                <span class="stat-number" id="totalKeywords">15</span>
                <span class="stat-label">전체 키워드</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="rssKeywords">0</span>
                <span class="stat-label">RSS 키워드</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="currentCategory">전체</span>
                <span class="stat-label">선택된 분야</span>
            </div>
        </div>
        
        <div class="keyword-grid" id="keywordGrid">
            <!-- 키워드 카드들이 여기에 동적으로 생성됩니다 -->
        </div>
        
        <div class="footer">
            <p>💝 중년, 우리는 A세대 넋두리</p>
            <p>🔄 구글 알리미 5개 RSS 피드 실시간 연동</p>
        </div>
    </div>
    
    <script>
        // RSS 피드 설정
        const RSS_FEEDS = {
            travel: "https://www.google.com/alerts/feeds/17606266067575828344/4177095888204012688",
            festival: "https://www.google.com/alerts/feeds/17606266067575828344/1809780114746601589",
            ticket: "https://www.google.com/alerts/feeds/17606266067575828344/1809780114746605266",
            restaurant: "https://www.google.com/alerts/feeds/17606266067575828344/17230442263613006018",
            welfare: "https://www.google.com/alerts/feeds/17606266067575828344/4177095888204010041"
        };
        
        // 기본 키워드 데이터
        let allKeywords = [
            // 기본 키워드들 (RSS 업데이트 전까지 표시)
            {
                id: 'base_travel_1',
                title: '여름휴가 예약',
                category: 'travel',
                trend: '🔥',
                rating: 5,
                searchTrend: '📈 기본 키워드',
                whyNow: '💡 여름 성수기 예약 시즌',
                difficulty: '🎯 초보자도 쉽게 성공 가능',
                isRssGenerated: false
            },
            {
                id: 'base_festival_1',
                title: '보령머드축제 2024',
                category: 'festival',
                trend: '🎪',
                rating: 5,
                searchTrend: '📈 기본 키워드',
                whyNow: '💡 7월 19-28일 개최',
                difficulty: '🎯 지역 특화로 경쟁 적음',
                isRssGenerated: false
            },
            {
                id: 'base_ticket_1',
                title: '콘서트 티켓 예매',
                category: 'ticket',
                trend: '🎫',
                rating: 4,
                searchTrend: '📈 기본 키워드',
                whyNow: '💡 여름시즌 공연 시작',
                difficulty: '🎯 인기 아티스트별 특화',
                isRssGenerated: false
            },
            {
                id: 'base_restaurant_1',
                title: '여름 맛집 추천',
                category: 'restaurant',
                trend: '🍽️',
                rating: 4,
                searchTrend: '📈 기본 키워드',
                whyNow: '💡 여름철 시원한 음식 인기',
                difficulty: '🎯 지역별로 나누면 경쟁 적음',
                isRssGenerated: false
            },
            {
                id: 'base_welfare_1',
                title: '6월 지원금 신청',
                category: 'welfare',
                trend: '💰',
                rating: 5,
                searchTrend: '📈 기본 키워드',
                whyNow: '💡 6월 신규 지원금 발표',
                difficulty: '🎯 정확한 정보로 차별화',
                isRssGenerated: false
            }
        ];
        
        let currentCategory = 'all';
        
        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            updateDate();
            updateStats();
            renderKeywords();
        });
        
        // 현재 날짜 표시
        function updateDate() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            };
            const dateString = now.toLocaleDateString('ko-KR', options);
            document.getElementById('currentDate').textContent = `${dateString} 기준`;
        }
        
        // 통계 업데이트
        function updateStats() {
            const totalKeywords = allKeywords.length;
            const rssKeywords = allKeywords.filter(k => k.isRssGenerated).length;
            
            document.getElementById('totalKeywords').textContent = totalKeywords;
            document.getElementById('rssKeywords').textContent = rssKeywords;
            document.getElementById('currentCategory').textContent = getCategoryName(currentCategory);
        }
        
        // 카테고리명 변환
        function getCategoryName(category) {
            const names = {
                'all': '전체',
                'travel': '여행',
                'festival': '축제',
                'ticket': '예매',
                'restaurant': '맛집',
                'welfare': '복지'
            };
            return names[category] || '전체';
        }
        
        // 카테고리별 필터링
        function filterByCategory(category) {
            currentCategory = category;
            
            // 버튼 활성화 상태 변경
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateStats();
            renderKeywords();
        }
        
        // 필터링된 키워드 가져오기
        function getFilteredKeywords() {
            if (currentCategory === 'all') {
                return allKeywords;
            }
            return allKeywords.filter(keyword => keyword.category === currentCategory);
        }
        
        // 키워드 렌더링
        function renderKeywords() {
            const grid = document.getElementById('keywordGrid');
            const filtered = getFilteredKeywords();
            
            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                        RSS 피드에서 키워드를 가져오는 중이거나 해당 카테고리에 키워드가 없습니다.
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = filtered.map(keyword => `
                <div class="keyword-card ${keyword.isRssGenerated ? 'rss-generated' : ''}" onclick="showDetail('${keyword.id}')">
                    <div class="keyword-category">
                        ${getCategoryName(keyword.category)}
                        ${keyword.isRssGenerated ? '<span class="rss-badge">RSS</span>' : ''}
                    </div>
                    <div class="keyword-header">
                        <div class="trend-indicator">${keyword.trend}</div>
                        <div class="keyword-title">${keyword.title}</div>
                        <div class="rating">${'⭐'.repeat(keyword.rating)}</div>
                    </div>
                    <div class="keyword-content">
                        <div class="search-trend">${keyword.searchTrend}</div>
                        <div class="why-now">${keyword.whyNow}</div>
                        <div class="difficulty">${keyword.difficulty}</div>
                    </div>
                    <button class="action-btn">블로그 구조 만들기</button>
                </div>
            `).join('');
        }
        
        // 모든 RSS 피드 업데이트
        async function updateAllRssFeeds() {
            const updateBtn = document.getElementById('updateBtn');
            const lastUpdateDiv = document.getElementById('lastUpdate');
            
            updateBtn.disabled = true;
            updateBtn.textContent = '업데이트 중...';
            lastUpdateDiv.textContent = 'RSS 피드에서 데이터를 가져오는 중...';
            
            try {
                let newKeywordsCount = 0;
                
                // 각 카테고리별 RSS 피드 처리
                for (const [category, rssUrl] of Object.entries(RSS_FEEDS)) {
                    try {
                        console.log(`${category} RSS 피드 처리 중...`);
                        const keywords = await fetchRssKeywords(rssUrl, category);
                        
                        // 새로운 키워드 추가 (중복 제거)
                        keywords.forEach(keyword => {
                            if (!allKeywords.some(k => k.title === keyword.title)) {
                                allKeywords.push(keyword);
                                newKeywordsCount++;
                            }
                        });
                        
                        // 잠시 대기 (API 제한 방지)
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                    } catch (error) {
                        console.error(`${category} RSS 피드 오류:`, error);
                    }
                }
                
                // UI 업데이트
                updateStats();
                renderKeywords();
                
                const now = new Date();
                lastUpdateDiv.textContent = `마지막 업데이트: ${now.toLocaleTimeString('ko-KR')} (새 키워드 ${newKeywordsCount}개 추가)`;
                
            } catch (error) {
                console.error('RSS 업데이트 전체 오류:', error);
                lastUpdateDiv.textContent = '업데이트 중 오류가 발생했습니다.';
            } finally {
                updateBtn.disabled = false;
                updateBtn.textContent = '🔄 모든 RSS 피드 업데이트';
            }
        }
        
        // RSS 피드에서 키워드 추출
        async function fetchRssKeywords(rssUrl, category) {
            try {
                const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                if (data.status !== 'ok' || !data.items) {
                    return [];
                }
                
                const keywords = [];
                const keywordSet = new Set();
                
                data.items.forEach(item => {
                    const title = item.title || '';
                    const extractedKeywords = extractKeywordsFromTitle(title, category);
                    
                    extractedKeywords.forEach(keyword => {
                        if (!keywordSet.has(keyword)) {
                            keywordSet.add(keyword);
                            keywords.push({
                                id: `rss_${category}_${Date.now()}_${Math.random()}`,
                                title: keyword,
                                category: category,
                                trend: getTrendIcon(category),
                                rating: 4,
                                searchTrend: '📈 RSS 피드에서 발굴',
                                whyNow: `💡 ${new Date().toLocaleDateString('ko-KR')} 실시간 트렌드`,
                                difficulty: '🎯 RSS 기반 추천 키워드',
                                isRssGenerated: true
                            });
                        }
                    });
                });
                
                return keywords.slice(0, 3); // 카테고리당 최대 3개
                
            } catch (error) {
                console.error('RSS 키워드 추출 오류:', error);
                return [];
            }
        }
        
        // 제목에서 메인 키워드 추출 (보조 키워드 제외)
        function extractKeywordsFromTitle(title, category) {
            const keywords = [];
            
            switch (category) {
                case 'travel':
                    if (title.includes('여행') || title.includes('휴가')) {
                        keywords.push('여름 휴가지');
                        keywords.push('국내 여행');
                    }
                    if (title.includes('펜션') || title.includes('숙박')) {
                        keywords.push('숙박 예약');
                    }
                    if (title.includes('항공') || title.includes('교통')) {
                        keywords.push('여행 교통편');
                    }
                    break;
                    
                case 'festival':
                    if (title.includes('축제') || title.includes('행사')) {
                        keywords.push('지역 축제');
                        keywords.push('문화 행사');
                    }
                    if (title.includes('공연') || title.includes('이벤트')) {
                        keywords.push('야외 공연');
                    }
                    break;
                    
                case 'ticket':
                    if (title.includes('콘서트') || title.includes('공연')) {
                        keywords.push('콘서트 예매');
                    }
                    if (title.includes('뮤지컬') || title.includes('연극')) {
                        keywords.push('공연 티켓');
                    }
                    if (title.includes('스포츠') || title.includes('야구') || title.includes('축구')) {
                        keywords.push('스포츠 관람');
                    }
                    break;
                    
                case 'restaurant':
                    if (title.includes('맛집') || title.includes('음식')) {
                        keywords.push('맛집 탐방');
                        keywords.push('외식 정보');
                    }
                    if (title.includes('카페') || title.includes('디저트')) {
                        keywords.push('카페 투어');
                    }
                    if (title.includes('요리') || title.includes('레시피')) {
                        keywords.push('요리 레시피');
                    }
                    break;
                    
                case 'welfare':
                    if (title.includes('지원금') || title.includes('혜택')) {
                        keywords.push('정부 혜택');
                        keywords.push('지원금 정보');
                    }
                    if (title.includes('복지') || title.includes('정책')) {
                        keywords.push('복지 정책');
                    }
                    if (title.includes('신청') || title.includes('접수')) {
                        keywords.push('혜택 신청');
                    }
                    break;
            }
            
            // 중복 제거 및 메인 키워드만 반환
            return [...new Set(keywords)];
        }
        
        // 카테고리별 트렌드 아이콘
        function getTrendIcon(category) {
            const icons = {
                travel: '🏖️',
                festival: '🎪',
                ticket: '🎫',
                restaurant: '🍽️',
                welfare: '💰'
            };
            return icons[category] || '🔥';
        }
        
        // 키워드 상세 정보 (간단 버전)
        function showDetail(keywordId) {
            const keyword = allKeywords.find(k => k.id === keywordId);
            if (!keyword) return;
            
            const rssInfo = keyword.isRssGenerated ? '\n\n🔄 RSS 피드에서 실시간 발굴된 키워드입니다!' : '';
            
            alert(`🌟 ${keyword.title}\n\n${keyword.searchTrend}\n${keyword.whyNow}\n${keyword.difficulty}${rssInfo}\n\n4단계 블로그 구조 가이드는 다음 업데이트에서 제공됩니다!`);
        }
    </script>
</body>
</html>