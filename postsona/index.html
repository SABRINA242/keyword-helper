<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>가이드 이미지 슬라이드 템플릿</title>
    <link rel="stylesheet" href="style.css">
    <style>
    /* 크롭 오버레이 스타일 (미리보기 이미지 위에서 드래그/리사이즈) */
    .crop-overlay { position: absolute; left: 0; top: 0; width: 100%; height: 100%; pointer-events: auto; }
    .crop-rect { position: absolute; border: 2px dashed rgba(0,0,0,0.6); background: rgba(0,0,0,0.08); box-sizing: border-box; cursor: move; pointer-events: auto; }
    .crop-handle { position: absolute; width: 12px; height: 12px; background: white; border: 2px solid var(--primary-color, #007bff); border-radius: 50%; box-shadow: 0 1px 3px rgba(0,0,0,0.3); }
    .crop-handle.nw { left: -7px; top: -7px; cursor: nwse-resize; }
    .crop-handle.ne { right: -7px; top: -7px; cursor: nesw-resize; }
    .crop-handle.sw { left: -7px; bottom: -7px; cursor: nesw-resize; }
    .crop-handle.se { right: -7px; bottom: -7px; cursor: nwse-resize; }
    .image-preview { position: relative; }
    .slide-image { position: relative; }
    </style>
</head>
<body>
    <div class="container">
        <h1>가이드 이미지 슬라이드 템플릿</h1>
        
        <!-- 테마 색상 설정 패널 -->
        <div class="theme-panel">
            <h3>테마 색상 설정</h3>
            <div class="color-inputs">
                <div class="color-input-group">
                    <label for="primary-color">메인 색상:</label>
                    <div class="color-input-wrapper">
                        <input type="color" id="primary-color" value="#007bff">
                        <input type="text" id="primary-color-text" value="#007bff" placeholder="#1234AB" maxlength="7">
                        <button id="save-primary-color" class="save-color-btn">저장</button>
                    </div>
                </div>
                <div class="color-input-group">
                    <label for="secondary-color">보조 색상:</label>
                    <div class="color-input-wrapper">
                        <input type="color" id="secondary-color" value="#6c757d">
                        <input type="text" id="secondary-color-text" value="#6c757d" placeholder="#1234AB" maxlength="7">
                    </div>
                </div>

            </div>
        </div>

        <!-- 가이드 편집 패널 -->
        <div class="edit-panel">
            <h3>가이드 내용 편집</h3>
            <div class="guide-info">
                <div class="input-group">
                    <label for="guide-title">가이드 제목:</label>
                    <input type="text" id="guide-title" value="앱 사용법 가이드" placeholder="예: 인스타그램 스토리 올리기">
                </div>
                <div class="input-group" style="margin-top: 10px;">
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" id="show-step-numbers" checked>
                        단계 번호 표시 (1단계, 2단계...)
                    </label>
                    <small style="color: #666; margin-left: 24px;">체크 해제 시 단계별 제목만 표시됩니다</small>
                </div>
                <div class="slides-editor">
                    <div class="slides-header">
                        <h4>단계별 내용</h4>
                        <div class="slide-controls-header">
                            <button class="add-slide-btn" onclick="addSlide()">+ 단계 추가</button>
                            <button class="remove-slide-btn" onclick="removeSlide()">- 단계 삭제</button>
                        </div>
                    </div>
                    <div id="slide-editors">
                    <div class="slide-editor" data-slide="1">
                        <h5>1단계</h5>
                        <input type="text" class="step-title" placeholder="단계 제목" value="첫 번째 단계">
                        <textarea class="step-description" placeholder="단계 설명">첫 번째 단계에 대한 설명을 입력하세요.</textarea>
                        <div class="image-upload">
                            <label for="image-1">이미지 업로드:</label>
                            <input type="file" id="image-1" accept="image/*" multiple onchange="handleImageUpload(1, this)">
                            <div class="image-preview" id="preview-1">
                                <span>이미지를 선택하세요</span>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>

        <!-- 슬라이드 미리보기 -->
        <div class="preview-section">
            <h3>미리보기</h3>
            <div class="guide-slider" id="guideSlider">
                <div class="slider-header">
                    <div style="display: flex; align-items: center; justify-content: space-between; width: 100%;">
                        <h4 id="preview-title" style="margin: 0;">앱 사용법 가이드</h4>
                        
                        <button class="prev-btn" onclick="changeSlide(-1)" style="
                                position: absolute;
                                left: 0;
                                top: 200px;
                                background: rgba(255,255,255,0.9);
                                color: var(--primary-color, #007bff);
                                border: 2px solid var(--primary-color, #007bff);
                                width: 35px;
                                height: 35px;
                                border-radius: 50%;
                                cursor: pointer;
                                font-size: 1.3em;
                                font-weight: bold;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                transition: all 0.3s ease;
                                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                                z-index: 99999;
                            " onmouseover="this.style.background='var(--primary-color, #007bff)'; this.style.color='white'; this.style.borderColor='white';" onmouseout="this.style.background='rgba(255,255,255,0.9)'; this.style.color='var(--primary-color, #007bff)'; this.style.borderColor='var(--primary-color, #007bff)';">‹</button>
                            
                            <button class="next-btn" onclick="changeSlide(1)" style="
                                position: absolute;
                                right: 0;
                                top: 200px;
                                background: rgba(255,255,255,0.9);
                                color: var(--primary-color, #007bff);
                                border: 2px solid var(--primary-color, #007bff);
                                width: 35px;
                                height: 35px;
                                border-radius: 50%;
                                cursor: pointer;
                                font-size: 1.3em;
                                font-weight: bold;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                transition: all 0.3s ease;
                                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                                z-index: 99999;
                            " onmouseover="this.style.background='var(--primary-color, #007bff)'; this.style.color='white'; this.style.borderColor='white';" onmouseout="this.style.background='rgba(255,255,255,0.9)'; this.style.color='var(--primary-color, #007bff)'; this.style.borderColor='var(--primary-color, #007bff)';">›</button>
                        
                        <div class="step-indicator" style="position: absolute; right: 0;">
                            <span class="current-step">1</span> / <span class="total-steps">1</span>
                        </div>
                    </div>
                </div>
                
                <div class="slider-container">
                    <div class="slides-wrapper" id="slides-wrapper">
                        <div class="slide active">
                            <div class="slide-image">
                                <div class="placeholder-image" id="slide-image-1">
                                    <span>1단계 이미지</span>
                                    <p>여기에 스크린샷을 넣으세요</p>
                                </div>
                            </div>
                            <div class="slide-description">
                                <h5 class="slide-title">1단계: 첫 번째 단계</h5>
                                <p class="slide-desc">첫 번째 단계에 대한 설명을 입력하세요.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- HTML 코드 생성 -->
            <div class="code-section">
                <h3>생성된 HTML 코드</h3>
                <div style="margin:8px 0;">
                    <label><input type="checkbox" id="show-nav-buttons" checked> 슬라이드 좌우 버튼 표시</label>
                </div>
                <div style="display:flex; gap:12px; align-items:center; margin:8px 0; flex-wrap:wrap;">
                    <label>이미지 너비(px): <input id="img-width" type="number" min="320" max="2000" step="10" value="920" style="width:90px"></label>
                    <label>이미지 높이(px): <input id="img-height" type="number" min="200" max="2000" step="10" value="250" style="width:90px"></label>
                    <button id="preset-naver" class="preset-btn" type="button">네이버 920×250 적용</button>
                    <span id="slider-size-text" style="margin-left:8px; color:#444; font-size:13px;">920 250</span>
                    <button id="preset-naver-item" class="preset-btn" type="button" style="margin-left:8px;">네이버 개별 270×272 적용</button>
                    <label style="margin-left:8px;"><input type="checkbox" id="lock-box-size" checked> 박스 크기 고정</label>
                    <label style="margin-left:8px;"><input type="checkbox" id="resize-to-box"> 이미지 리사이즈(박스 크기로 변환)</label>
                    <label style="margin-left:8px; display:flex; align-items:center; gap:6px;">
                        모드:
                        <select id="resize-mode" style="height:28px;">
                            <option value="contain" selected>여백 유지(Contain)</option>
                            <option value="cover">여백 없음, 일부 크롭(Cover)</option>
                        </select>
                    </label>
                    <small style="color:#666">미리보기와 생성 코드에 동일 적용</small>
                </div>
                <!-- 네이버 기능: 분할 및 표시 영역 설정 -->
                <div id="naver-feature" style="margin: 10px 0; padding: 10px; border: 1px solid #e5e7eb; border-radius: 8px; background: #fafafa;">
                    <div style="display:flex; align-items:center; gap:10px; flex-wrap:wrap;">
                        <label style="display:flex; align-items:center; gap:6px;">
                            <input type="checkbox" id="enable-naver-feature"> 네이버 기능 사용
                        </label>
                        <label style="display:flex; align-items:center; gap:6px;">
                            분할 수:
                            <select id="naver-split-count" style="height:28px;">
                                <option value="1">1등분</option>
                                <option value="2">2등분</option>
                                <option value="3">3등분</option>
                                <option value="4">4등분</option>
                            </select>
                        </label>
                        <span class="naver-size-inline-note" style="color:#374151; font-size:12px;">네이버 970 480 / 네이버 개별 318 480</span>
                    </div>
                    <div id="naver-alignments" style="display:flex; gap:8px; flex-wrap:wrap; margin-top:8px;"></div>
                    <div class="naver-border-toggle" style="margin-top:8px;">
                        <label style="display:flex; align-items:center; gap:6px;">
                            <input type="checkbox" id="naver-show-borders"> 분할 경계선 표시 (검정 테두리)
                        </label>
                    </div>
                    <div style="color:#6b7280; font-size:12px; margin-top:6px;">
                        단일 이미지를 업로드하고 분할 수를 3으로 지정하면 자동으로 3등분됩니다. 각 분할별 표시 방식: 전체(Contain) / 상단 / 가운데 / 하단.
                    </div>
                </div>
                <div id="box-guidance" style="font-size:13px; color:#555; background:#f1f3f5; border:1px solid #ddd; border-radius:6px; padding:10px; margin:10px 0;">
                    박스/이미지 크기 안내가 여기에 표시됩니다.
                </div>
                <div style="display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-bottom:10px;">
                    <button class="copy-btn" onclick="copyCode()">코드 복사</button>
                    <button class="copy-btn" onclick="openGeneratedInNewTab()">새 탭에서 보기</button>
                </div>
                <pre id="generatedCode"><code></code></pre>
            </div>
    </div>

    <script src="script.js"></script>
</body>
</html>