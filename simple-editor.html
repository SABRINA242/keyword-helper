<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¨ ì‹¬í”Œ ë²„íŠ¼ í˜ì´ì§€ í¸ì§‘ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ë‚˜ëˆ”í°íŠ¸ ì¶”ê°€ */
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&family=Nanum+Myeongjo:wght@400;700;800&display=swap');

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: white;
            min-height: 100vh;
        }

        .container {
            max-width: 90vw;
            width: 90vw;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 30px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 300px 600px 1fr;
            height: 80vh;
        }

        .toolbar {
            background: #f8f9fa;
            padding: 20px;
            border-right: 1px solid #e0e0e0;
            overflow-y: auto;
        }

        .tool-group {
            margin-bottom: 25px;
        }

        .tool-group h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 5px;
        }

        .tool-btn {
            width: 100%;
            padding: 12px;
            margin: 5px 0;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .tool-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .edit-area {
            padding: 30px;
            border-right: 1px solid #e0e0e0;
            overflow-y: auto;
            background: #fff;
        }

        .edit-area[contenteditable="true"] {
            outline: none;
        }

        .preview-area {
            padding: 30px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 5px;
            margin-top: 10px;
        }

        .emoji-btn {
            background: none;
            border: 1px solid #ddd;
            padding: 8px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .emoji-btn:hover {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }

        .selected-button {
            outline: 3px solid #007bff !important;
            outline-offset: 2px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: #28a745;
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 10000;
            font-weight: bold;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .toolbar {
                border-right: none;
                border-bottom: 1px solid #e0e0e0;
            }
        }

        .nav-button {
            background: white;
            border: 2px solid #667eea;
            border-radius: 25px;
            color: #667eea;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            padding: 14px 28px;
            text-decoration: none !important;
            transition: all 0.3s ease;
            display: inline-block;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        .nav-button:hover {
            background: #e17055 !important;
            color: white !important;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(225, 112, 85, 0.3);
            text-decoration: none !important;
        }

        .title-button:hover {
            background: #e17055 !important;
            color: white !important;
            box-shadow: 0 8px 20px rgba(225, 112, 85, 0.4);
        }

        .button-box {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(31, 38, 135, 0.15);
            width: 100%;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            resize: vertical;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #333;
            line-height: 1.5;
            border: 2px solid rgba(255,255,255,0.5);
        }

        .button-box:focus {
            outline: 2px solid rgba(255,255,255,0.8);
            border-color: rgba(255,255,255,0.8);
        }

        .button-row {
          display: flex;
          gap: 15px;
          flex-wrap: wrap;
          justify-content: center;
          margin: 20px 0;
          min-height: 50px;
          padding: 10px;
          border: 2px dashed transparent;
          border-radius: 10px;
          transition: all 0.3s ease;
        }
        .button-row:hover {
          border-color: #e0e0e0;
          background: rgba(224, 224, 224, 0.1);
        }
        .button-row:empty:before {
          content: "âœ¨ ì—¬ê¸°ì— ë²„íŠ¼ì„ ì¶”ê°€í•˜ì„¸ìš”! (ë²„íŠ¼ ì¶”ê°€ í´ë¦­)";
          color: #999;
          font-style: italic;
          text-align: center;
          width: 100%;
          padding: 20px;
          display: block;
        }
        .button-row .link-button {
          flex: 1 !important;
          min-width: 180px !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¨ ì‹¬í”Œ ë²„íŠ¼ í˜ì´ì§€ í¸ì§‘ê¸°</h1>
            <p>í…œí”Œë¦¿ ì„ íƒ â†’ ë²„íŠ¼ í¸ì§‘ â†’ ì½”ë“œ ì €ì¥</p>
        </div>

        <div class="main-content">
            <!-- ë„êµ¬ëª¨ìŒ -->
            <div class="toolbar">
                <div class="tool-group">
                    <h3>ğŸ¨ í…œí”Œë¦¿</h3>
                    <button class="tool-btn" onclick="applyTemplate(1)">ğŸ¨ ëª¨ë˜ìŠ¤íƒ€ì¼1</button>
                    <button class="tool-btn" onclick="applyTemplate(2)">âœ¨ ëª¨ë˜ìŠ¤íƒ€ì¼2</button>
                    <button class="tool-btn" onclick="openGalaxyTemplate()">ğŸŒŒ ê°¤ëŸ­ì‹œë“œë¦¼ 3ë²„íŠ¼</button>
                </div>

                <div class="tool-group">
                    <h3>ğŸ”˜ ë²„íŠ¼ í¸ì§‘</h3>
                    <button class="tool-btn" onclick="deleteSelectedButton()">ğŸ—‘ï¸ ë²„íŠ¼ ì‚­ì œ</button>
                    <button class="tool-btn" onclick="addNewButton()">â• ë²„íŠ¼ ì¶”ê°€</button>
                    <button class="tool-btn" onclick="changeButtonColor()">ğŸ¨ ìƒ‰ìƒ ë³€ê²½</button>
                    <button class="tool-btn" onclick="resizeButton()">ğŸ“ í¬ê¸° ì¡°ì ˆ</button>
                    <button class="tool-btn" onclick="editButtonLink()">ğŸ”— ë§í¬ í¸ì§‘</button>
                    <button class="tool-btn" onclick="alignButtonText()">ğŸ“ ë²„íŠ¼ í…ìŠ¤íŠ¸ ìœ„ì¹˜</button>
                </div>

                <div class="tool-group">
                    <h3>ğŸ”„ ë„¤ë¹„ê²Œì´ì…˜</h3>
                    <button class="tool-btn" onclick="addNavButton()">â• ë„¤ë¹„ ì¶”ê°€</button>
                    <button class="tool-btn" onclick="removeNavButton()">â– ë„¤ë¹„ ì œê±°</button>
                </div>

                <div class="tool-group">
                    <h3>ğŸ“ í…ìŠ¤íŠ¸ í¸ì§‘</h3>
                    <button class="tool-btn" onclick="changeFontSize()">ğŸ“ ê¸€ì í¬ê¸°</button>
                    <button class="tool-btn" onclick="changeTextColor()">ğŸ¨ ê¸€ì ìƒ‰</button>
                    <button class="tool-btn" onclick="toggleBold()">ğŸ’ª êµµê²Œ</button>
                    <button class="tool-btn" onclick="applyNanumFont()">ğŸ–‹ï¸ ë‚˜ëˆ”í°íŠ¸</button>
                    <button class="tool-btn" onclick="alignCenter()">â¬‡ï¸ ì¤‘ì•™ ì •ë ¬</button>
                    <button class="tool-btn" onclick="alignLeft()">â¬…ï¸ ì¢Œì¸¡ ì •ë ¬</button>
                    <button class="tool-btn" onclick="alignRight()">â¡ï¸ ìš°ì¸¡ ì •ë ¬</button>
                </div>

                <div class="tool-group">
                    <h3>ğŸ­ ì´ëª¨ì§€</h3>
                    <div class="emoji-grid">
                        <button class="emoji-btn" onclick="insertEmoji('ğŸ˜Š')">ğŸ˜Š</button>
                        <button class="emoji-btn" onclick="insertEmoji('ğŸ¯')">ğŸ¯</button>
                        <button class="emoji-btn" onclick="insertEmoji('ğŸš€')">ğŸš€</button>
                        <button class="emoji-btn" onclick="insertEmoji('âœ¨')">âœ¨</button>
                        <button class="emoji-btn" onclick="insertEmoji('ğŸ’')">ğŸ’</button>
                        <button class="emoji-btn" onclick="insertEmoji('ğŸŒŸ')">ğŸŒŸ</button>
                        <button class="emoji-btn" onclick="insertEmoji('â¤ï¸')">â¤ï¸</button>
                        <button class="emoji-btn" onclick="insertEmoji('ğŸ’¡')">ğŸ’¡</button>
                        <button class="emoji-btn" onclick="insertEmoji('ğŸ¨')">ğŸ¨</button>
                        <button class="emoji-btn" onclick="insertEmoji('ğŸ”¥')">ğŸ”¥</button>
                        <button class="emoji-btn" onclick="insertEmoji('ğŸ‘‘')">ğŸ‘‘</button>
                        <button class="emoji-btn" onclick="insertEmoji('ğŸ‰')">ğŸ‰</button>
                    </div>
                    <button class="tool-btn" onclick="openEmojiPage()" style="margin-top: 15px; background: #ff6b6b;">ğŸ­ ë” ë§ì€ ì´ëª¨ì§€</button>
                </div>

                <div class="tool-group">
                    <h3>ğŸ’¾ ì €ì¥</h3>
                    <button class="tool-btn" onclick="saveHTML()">ğŸ’¾ HTML ì €ì¥</button>
                    <button class="tool-btn" onclick="clearAll()">ğŸ—‘ï¸ ëª¨ë‘ ì§€ìš°ê¸°</button>
                </div>
            </div>

            <!-- í¸ì§‘ ì˜ì—­ -->
            <div class="edit-area" id="editArea" contenteditable="true">
                <div style="padding: 40px; text-align: center; color: #666;">
                    <h2>ğŸ‘ˆ ì™¼ìª½ì—ì„œ í…œí”Œë¦¿ì„ ì„ íƒí•´ì£¼ì„¸ìš”!</h2>
                    <p>í…œí”Œë¦¿ ì„ íƒ í›„ ë²„íŠ¼ë“¤ì„ í´ë¦­í•´ì„œ í¸ì§‘í•  ìˆ˜ ìˆì–´ìš”.</p>
                    <p>ì—”í„°ë¥¼ ëˆŒëŸ¬ì„œ ììœ ë¡­ê²Œ í…ìŠ¤íŠ¸ë„ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤!</p>
                </div>
            </div>

            <!-- ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ -->
            <div class="preview-area">
                <h3>ğŸ‘€ ë¯¸ë¦¬ë³´ê¸°</h3>
                <div id="previewContent" style="border: 1px solid #ddd; background: white; border-radius: 10px; padding: 20px; min-height: 400px;">
                    <div style="padding: 40px; text-align: center; color: #666;">
                        <h2>ğŸ‘ˆ ì™¼ìª½ì—ì„œ í…œí”Œë¦¿ì„ ì„ íƒí•´ì£¼ì„¸ìš”!</h2>
                        <p>í…œí”Œë¦¿ ì„ íƒ í›„ ë²„íŠ¼ë“¤ì„ í´ë¦­í•´ì„œ í¸ì§‘í•  ìˆ˜ ìˆì–´ìš”.</p>
                        <p>ì—”í„°ë¥¼ ëˆŒëŸ¬ì„œ ììœ ë¡­ê²Œ í…ìŠ¤íŠ¸ë„ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let editArea = document.getElementById('editArea');
        let previewContent = document.getElementById('previewContent');
        let selectedButton = null;

        // í…œí”Œë¦¿ ë°ì´í„°
        const templates = {
            1: `<!-- í…œí”Œë¦¿ 1: ëª¨ë˜ìŠ¤íƒ€ì¼ 1 -->
<div style="background: white; max-width: 1000px; margin: 0 auto; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); font-family: Arial, sans-serif;">
  
  <style>
.nav-button {
  background: white;
  border: 2px solid #e17055;
  border-radius: 25px;
  color: #e17055;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  padding: 14px 28px;
  text-decoration: none !important;
  transition: all 0.3s ease;
  display: inline-block;
}
.nav-button:hover {
  background: #e17055 !important;
  color: white !important;
  transform: translateY(-3px);
  box-shadow: 0 6px 12px rgba(225, 112, 85, 0.3);
  text-decoration: none !important;
}
.title-button {
  background: white;
  border: 2px solid #e17055;
  border-radius: 10px;
  color: #e17055;
  cursor: pointer;
  font-size: 20px;
  font-weight: bold;
  padding: 15px 40px;
  text-decoration: none !important;
  transition: all 0.3s ease;
  display: block;
  width: 100%;
  text-align: center;
  margin-bottom: 30px;
  box-shadow: 0 4px 12px rgba(225, 112, 85, 0.3);
}
.title-button:hover {
  background: #e17055 !important;
  color: white !important;
  box-shadow: 0 8px 20px rgba(225, 112, 85, 0.4);
}
.link-button { 
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
}
.link-button:hover { 
  transform: translateY(-8px) scale(1.02); 
}
.button-row {
  display: flex;
  gap: 15px;
  flex-wrap: nowrap;
  justify-content: center;
  margin: 20px 0;
  min-height: 50px;
  padding: 10px;
  border: 2px dashed transparent;
  border-radius: 10px;
  transition: all 0.3s ease;
}
.button-row:hover {
  border-color: #e0e0e0;
  background: rgba(224, 224, 224, 0.1);
}
.button-row:empty:before {
  content: "âœ¨ ì—¬ê¸°ì— ë²„íŠ¼ì„ ì¶”ê°€í•˜ì„¸ìš”! (ë²„íŠ¼ ì¶”ê°€ í´ë¦­)";
  color: #999;
  font-style: italic;
  text-align: center;
  width: 100%;
  padding: 20px;
  display: block;
}
/* ì²«ë²ˆì§¸ ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */
.link-button:nth-child(1):hover {
  background: #6c5ce7 !important;
  color: white !important;
  box-shadow: 0 12px 25px rgba(108, 92, 231, 0.4) !important;
}
/* ë‘ë²ˆì§¸ ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */  
.link-button:nth-child(2):hover {
  background: #e84393 !important;
  color: white !important;
  box-shadow: 0 12px 25px rgba(232, 67, 147, 0.4) !important;
}
/* ì„¸ë²ˆì§¸ ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */
.link-button:nth-child(3):hover {
  background: #00b894 !important;
  color: white !important;
  box-shadow: 0 12px 25px rgba(0, 184, 148, 0.4) !important;
}
  </style>   

  <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; margin: 30px 0;">
    <a href="#ë„¤ë¹„1" class="nav-button" onclick="selectButton(event)">ë„¤ë¹„1</a>
    <a href="#ë„¤ë¹„2" class="nav-button" onclick="selectButton(event)">ë„¤ë¹„2</a>
    <a href="#ë„¤ë¹„3" class="nav-button" onclick="selectButton(event)">ë„¤ë¹„3</a>
  </div>

  <div class="content-frame" style="border: 2px dashed white; border-radius: 15px; margin: 5px 0; padding: 5px; background: rgba(248, 249, 250, 0.5);">
    <div class="text-area" contenteditable="true" style="min-height: 60px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 15px; background: white; outline: none; color: #999;" placeholder="âœï¸ ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
      <p style="color: #999;">âœï¸ ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...</p>
    </div>
    
    <div class="button-row">
      <a class="link-button" href="/p/button1.html" onclick="selectButton(event)" style="align-items: center; background: white; border-radius: 10px; box-shadow: rgba(108, 92, 231, 0.2) 0px 4px 8px; color: #6c5ce7; display: flex; font-weight: bold; justify-content: center; min-height: 160px; padding: 15px; text-decoration: none; border: 2px solid #6c5ce7;">Button 1</a>
      <a class="link-button" href="/p/button2.html" onclick="selectButton(event)" style="align-items: center; background: white; border-radius: 10px; box-shadow: rgba(232, 67, 147, 0.2) 0px 4px 8px; color: #e84393; display: flex; font-weight: bold; justify-content: center; min-height: 160px; padding: 15px; text-decoration: none; border: 2px solid #e84393;">Button 2</a>
      <a class="link-button" href="/p/button3.html" onclick="selectButton(event)" style="align-items: center; background: white; border-radius: 10px; box-shadow: rgba(0, 184, 148, 0.2) 0px 4px 8px; color: #00b894; display: flex; font-weight: bold; justify-content: center; min-height: 160px; padding: 15px; text-decoration: none; border: 2px solid #00b894;">Button 3</a>
    </div>
  </div>
  
  <div style="text-align: center; margin: 20px 0;">
    <button onclick="addNewFrame()" style="background: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px;">ğŸ“¦ ìƒˆ í”„ë ˆì„ ì¶”ê°€</button>
  </div>
</div>`,

            2: `<!-- í…œí”Œë¦¿ 2: ëª¨ë˜ìŠ¤íƒ€ì¼ 2 -->
<div style="background: white; max-width: 1000px; margin: 0 auto; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); font-family: Arial, sans-serif;">
  
  <style>
.nav-button {
  background: white;
  border: 2px solid #e17055;
  border-radius: 25px;
  color: #e17055;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  padding: 14px 28px;
  text-decoration: none !important;
  transition: all 0.3s ease;
  display: inline-block;
}
.nav-button:hover {
  background: #e17055 !important;
  color: white !important;
  transform: translateY(-3px);
  box-shadow: 0 6px 12px rgba(225, 112, 85, 0.3);
  text-decoration: none !important;
}
.title-button {
  background: white;
  border: 2px solid #e17055;
  border-radius: 10px;
  color: #e17055;
  cursor: pointer;
  font-size: 20px;
  font-weight: bold;
  padding: 15px 40px;
  text-decoration: none !important;
  transition: all 0.3s ease;
  display: block;
  width: 100%;
  text-align: center;
  margin-bottom: 30px;
  box-shadow: 0 4px 12px rgba(225, 112, 85, 0.3);
}
.title-button:hover {
  background: #e17055 !important;
  color: white !important;
  border: 2px solid #667eea !important;
  box-shadow: 0 8px 20px rgba(225, 112, 85, 0.4);
}
.link-button { 
  transition: all 0.4s ease; 
}
.link-button:hover { 
  transform: translateY(-8px) scale(1.02);
  background: white !important;
  box-shadow: 0 12px 25px rgba(0,0,0,0.2) !important;
}
.button-row {
  display: flex;
  gap: 15px;
  flex-wrap: nowrap;
  justify-content: center;
  margin: 20px 0;
  min-height: 50px;
  padding: 10px;
  border: 2px dashed transparent;
  border-radius: 10px;
  transition: all 0.3s ease;
}
.button-row:hover {
  border-color: #e0e0e0;
  background: rgba(224, 224, 224, 0.1);
}
.button-row:empty:before {
  content: "âœ¨ ì—¬ê¸°ì— ë²„íŠ¼ì„ ì¶”ê°€í•˜ì„¸ìš”! (ë²„íŠ¼ ì¶”ê°€ í´ë¦­)";
  color: #999;
  font-style: italic;
  text-align: center;
  width: 100%;
  padding: 20px;
  display: block;
}
/* ì²«ë²ˆì§¸ ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */
.link-button:nth-child(1):hover {
  color: #6c5ce7 !important;
  border-color: #6c5ce7 !important;
}
/* ë‘ë²ˆì§¸ ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */  
.link-button:nth-child(2):hover {
  color: #e84393 !important;
  border-color: #e84393 !important;
}
/* ì„¸ë²ˆì§¸ ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */
.link-button:nth-child(3):hover {
  color: #00b894 !important;
  border-color: #00b894 !important;
}
  </style>   

  <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; margin: 30px 0;">
    <a href="#í™”ì´íŠ¸1" class="nav-button" onclick="selectButton(event)">ë„¤ë¹„1</a>
    <a href="#í™”ì´íŠ¸2" class="nav-button" onclick="selectButton(event)">ë„¤ë¹„2</a>
    <a href="#í™”ì´íŠ¸3" class="nav-button" onclick="selectButton(event)">ë„¤ë¹„3</a>
  </div>

  <div class="content-frame" style="border: 2px dashed white; border-radius: 15px; margin: 5px 0; padding: 5px; background: rgba(248, 249, 250, 0.5);">
    <div class="text-area" contenteditable="true" style="min-height: 60px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 15px; background: white; outline: none; color: #999;" placeholder="âœï¸ ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
      <p style="color: #999;">âœï¸ ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...</p>
    </div>
    
    <div class="button-row">
      <a class="link-button" href="/p/white1.html" onclick="selectButton(event)" style="align-items: center; background: #6c5ce7; border: 2px solid #6c5ce7; border-radius: 15px; box-shadow: 0 8px 20px rgba(108, 92, 231, 0.3); color: white; display: flex; font-weight: bold; justify-content: center; min-height: 180px; padding: 20px; text-decoration: none;">White Button 1</a>
      <a class="link-button" href="/p/white2.html" onclick="selectButton(event)" style="align-items: center; background: #e84393; border: 2px solid #e84393; border-radius: 15px; box-shadow: 0 8px 20px rgba(232, 67, 147, 0.3); color: white; display: flex; font-weight: bold; justify-content: center; min-height: 180px; padding: 20px; text-decoration: none;">White Button 2</a>
      <a class="link-button" href="/p/white3.html" onclick="selectButton(event)" style="align-items: center; background: #00b894; border: 2px solid #00b894; border-radius: 15px; box-shadow: 0 8px 20px rgba(0, 184, 148, 0.3); color: white; display: flex; font-weight: bold; justify-content: center; min-height: 180px; padding: 20px; text-decoration: none;">White Button 3</a>
    </div>
  </div>
  
  <div style="text-align: center; margin: 20px 0;">
    <button onclick="addNewFrame()" style="background: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px;">ğŸ“¦ ìƒˆ í”„ë ˆì„ ì¶”ê°€</button>
  </div>
</div>`,

            3: `<!-- í…œí”Œë¦¿ 3: ê°¤ëŸ­ì‹œë“œë¦¼ 3ë²„íŠ¼ -->
<div style="background: linear-gradient(135deg, #74b9ff 0%, #0984e3 50%, #00b894 100%); max-width: 1000px; margin: 0 auto; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
  <style>
    .header-text {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 20px;
        padding: 25px 40px;
        margin-bottom: 30px;
        text-align: center;
        font-size: 18px;
        font-weight: 600;
        box-shadow: 0 8px 25px rgba(31, 38, 135, 0.15);
        width: 100%;
    }

    .button-box {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 8px 25px rgba(31, 38, 135, 0.15);
        width: 100%;
        min-height: 300px;
        display: flex;
        flex-direction: column;
        gap: 15px;
        align-items: center;
        resize: vertical;
        font-family: 'Courier New', monospace;
        font-size: 14px;
        color: #333;
        line-height: 1.5;
        border: 2px solid rgba(255,255,255,0.5);
    }

    .button-box:focus {
        outline: 2px solid rgba(255,255,255,0.8);
        border-color: rgba(255,255,255,0.8);
    }

    .button-box .custom-button,
    .button-box a[class*="button"],
    .button-box button {
        margin: 10px 5px !important;
        border-radius: 15px !important;
        backdrop-filter: blur(5px) !important;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;
        transition: all 0.3s ease !important;
    }

    .button-box .custom-button:hover,
    .button-box a[class*="button"]:hover,
    .button-box button:hover {
        transform: translateY(-3px) scale(1.02) !important;
        box-shadow: 0 8px 25px rgba(0,0,0,0.3) !important;
    }
  </style>

  <div class="header-text" contenteditable="true">
      ğŸŒŒ ë²„íŠ¼ í˜ì´ì§€ì— ë²„íŠ¼ì„ ë§Œë“¤ì–´ ë„£ìœ¼ì„¸ìš”!
  </div>
  
  <textarea class="button-box" placeholder="ğŸ¨ ë²„íŠ¼ ë©”ì´ì»¤ì—ì„œ ë§Œë“  HTML ì½”ë“œë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!

ì˜ˆì‹œ:
<style>
  .my-button { ... }
</style>
<div>
  <button>ë²„íŠ¼ í…ìŠ¤íŠ¸</button>
</div>

ë˜ëŠ” ì§ì ‘ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
</div>`
        };

        // í…œí”Œë¦¿ ì ìš©
        function applyTemplate(num) {
            editArea.innerHTML = templates[num];
            updatePreview();
            setupButtonEvents();
            setupAllTextAreas();
            showNotification(`âœ¨ í…œí”Œë¦¿ ${num}ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!`);
        }

        // ë²„íŠ¼ ì„ íƒ
        function selectButton(event) {
            event.preventDefault();
            
            // ì´ì „ ì„ íƒ í•´ì œ
            if (selectedButton) {
                selectedButton.classList.remove('selected-button');
            }
            
            // ìƒˆ ë²„íŠ¼ ì„ íƒ
            selectedButton = event.target;
            selectedButton.classList.add('selected-button');
            
            showNotification('ğŸ¯ ë²„íŠ¼ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì •
        function setupButtonEvents() {
            const buttons = editArea.querySelectorAll('a[href], button');
            buttons.forEach(btn => {
                btn.addEventListener('click', selectButton);
            });
        }

        // ë²„íŠ¼ ì‚­ì œ
        function deleteSelectedButton() {
            if (!selectedButton) {
                alert('âŒ ë¨¼ì € ì‚­ì œí•  ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            if (confirm('ì„ íƒëœ ë²„íŠ¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                selectedButton.remove();
                selectedButton = null;
                updatePreview();
                showNotification('ğŸ—‘ï¸ ë²„íŠ¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        }

        // ìƒˆ ë²„íŠ¼ ì¶”ê°€ (í˜„ì¬ ì¤„ì—)
        function addNewButton() {
            // í˜„ì¬ ì„ íƒëœ ë²„íŠ¼ì´ ìˆìœ¼ë©´ ê·¸ ì¤„ì—, ì—†ìœ¼ë©´ ë§ˆì§€ë§‰ ì¤„ì— ì¶”ê°€
            let targetRow = null;
            
            if (selectedButton) {
                targetRow = selectedButton.closest('.button-row');
            } else {
                const allRows = editArea.querySelectorAll('.button-row');
                targetRow = allRows[allRows.length - 1];
            }
            
            if (!targetRow) {
                alert('âŒ ë¨¼ì € í…œí”Œë¦¿ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // í˜„ì¬ ì¤„ì˜ ê¸°ì¡´ ë²„íŠ¼ë“¤
            const existingButtons = targetRow.querySelectorAll('.link-button');
            
            if (existingButtons.length === 0) {
                alert('âŒ ë¨¼ì € í…œí”Œë¦¿ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // ë²„íŠ¼ ê°œìˆ˜ ì„ íƒ
            const countOptions = "ì´ ì¤„ì— ì¶”ê°€í•  ë²„íŠ¼ ê°œìˆ˜ë¥¼ ì„ íƒí•˜ì„¸ìš”:\n\n1 = ğŸ”˜ ë²„íŠ¼ 1ê°œ\n2 = ğŸ”˜ğŸ”˜ ë²„íŠ¼ 2ê°œ\n3 = ğŸ”˜ğŸ”˜ğŸ”˜ ë²„íŠ¼ 3ê°œ\n4 = ğŸ”˜ğŸ”˜ğŸ”˜ğŸ”˜ ë²„íŠ¼ 4ê°œ\n\në²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:";
            const buttonCount = prompt(countOptions, '1');
            
            if (!buttonCount || !['1', '2', '3', '4'].includes(buttonCount)) {
                if (buttonCount !== null) {
                    showNotification('âŒ 1~4 ì¤‘ì—ì„œ ì„ íƒí•´ì£¼ì„¸ìš”!');
                }
                return;
            }
            
            const count = parseInt(buttonCount);
            const firstButton = existingButtons[0];
            
            // ì„ íƒí•œ ê°œìˆ˜ë§Œí¼ ë²„íŠ¼ ìƒì„±
            for (let i = 0; i < count; i++) {
                const text = prompt(`${i + 1}ë²ˆì§¸ ë²„íŠ¼ì˜ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:`, `New Button ${existingButtons.length + i + 1}`);
                const link = prompt(`${i + 1}ë²ˆì§¸ ë²„íŠ¼ì˜ ë§í¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”:`, '#');
                
                if (text) {
                    const newBtn = firstButton.cloneNode(true);
                    newBtn.textContent = text;
                    newBtn.href = link || '#';
                    newBtn.onclick = selectButton;
                    
                    // ìƒ‰ìƒ ì„ íƒ (ì²« ë²ˆì§¸ ë²„íŠ¼ë§Œ)
                    if (i === 0) {
                        showColorPicker(newBtn, firstButton, count, targetRow);
                        return; // ìƒ‰ìƒ ì„ íƒ í›„ ë‚˜ë¨¸ì§€ëŠ” selectColorì—ì„œ ì²˜ë¦¬
                    }
                } else {
                    // ì·¨ì†Œëœ ê²½ìš° ì¤‘ë‹¨
                    showNotification('âŒ ë²„íŠ¼ ì¶”ê°€ê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    return;
                }
            }
        }
        
        // ìƒˆë¡œìš´ ë²„íŠ¼ ì¤„ ì¶”ê°€
        function addNewButtonRow() {
            const allRows = editArea.querySelectorAll('.button-row');
            if (allRows.length === 0) {
                alert('âŒ ë¨¼ì € í…œí”Œë¦¿ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // ë§ˆì§€ë§‰ ë²„íŠ¼ ì¤„ ì°¾ê¸°
            const lastRow = allRows[allRows.length - 1];
            
            // ìƒˆë¡œìš´ ë²„íŠ¼ ì¤„ ìƒì„±
            const newRow = document.createElement('div');
            newRow.className = 'button-row';
            
            // ë§ˆì§€ë§‰ ì¤„ ë‹¤ìŒì— ìƒˆ ì¤„ ì¶”ê°€
            const textArea = editArea.querySelector('div[style*="ììœ ë¡­ê²Œ í…ìŠ¤íŠ¸"]');
            if (textArea) {
                textArea.parentElement.insertBefore(newRow, textArea);
            } else {
                lastRow.parentElement.appendChild(newRow);
            }
            
            updatePreview();
            showNotification('âœ¨ ìƒˆë¡œìš´ ë²„íŠ¼ ì¤„ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! ë²„íŠ¼ ì¶”ê°€ë¥¼ ëˆŒëŸ¬ì„œ ë²„íŠ¼ì„ ë„£ì–´ë³´ì„¸ìš”.');
        }

        // ìƒ‰ìƒ ì„ íƒê¸° í‘œì‹œ
        function showColorPicker(newBtn, templateBtn, count = 1, buttonContainer = null) {
            // í…œí”Œë¦¿ íƒ€ì… ê°ì§€ - ë” ì •í™•í•œ ë°©ë²•ìœ¼ë¡œ ìˆ˜ì •
            const templateContainer = editArea.querySelector('div[style*="background: white"]');
            let isTemplate1 = templateContainer && templateContainer.innerHTML.includes('ì˜¤ëŠ˜ì˜ ì‹¤ì²œ');
            let isTemplate2 = templateContainer && templateContainer.innerHTML.includes('ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¤ë³´ì„¸ìš”');
            let isTemplate3 = templateContainer && templateContainer.innerHTML.includes('ê°¤ëŸ­ì‹œë“œë¦¼');
            
            let colorOptions = '';
            
            if (isTemplate1) {
                // í…œí”Œë¦¿ 1: ë³´ë” ìŠ¤íƒ€ì¼ ìƒ‰ìƒë“¤
                colorOptions = `
                    <option value="#6c5ce7,rgba(108, 92, 231, 0.2),rgba(108, 92, 231, 0.4)">ğŸŸ£ í¼í”Œ</option>
                    <option value="#e84393,rgba(232, 67, 147, 0.2),rgba(232, 67, 147, 0.4)">ğŸ©· í•‘í¬</option>
                    <option value="#00b894,rgba(0, 184, 148, 0.2),rgba(0, 184, 148, 0.4)">ğŸŸ¢ ê·¸ë¦°</option>
                    <option value="#fd79a8,rgba(253, 121, 168, 0.2),rgba(253, 121, 168, 0.4)">ğŸ’— ë¼ì´íŠ¸í•‘í¬</option>
                    <option value="#fdcb6e,rgba(253, 203, 110, 0.2),rgba(253, 203, 110, 0.4)">ğŸŸ¡ ì˜ë¡œìš°</option>
                    <option value="#74b9ff,rgba(116, 185, 255, 0.2),rgba(116, 185, 255, 0.4)">ğŸ”µ ë¸”ë£¨</option>
                    <option value="#a29bfe,rgba(162, 155, 254, 0.2),rgba(162, 155, 254, 0.4)">ğŸŸ£ ë¼ë²¤ë”</option>
                    <option value="#ff7675,rgba(255, 118, 117, 0.2),rgba(255, 118, 117, 0.4)">ğŸ”´ ë ˆë“œ</option>
                `;
            } else if (isTemplate2) {
                // í…œí”Œë¦¿ 2: ìƒ‰ìƒ ë°°ê²½ (í˜¸ë²„ì‹œ í°ìƒ‰)
                colorOptions = `
                    <option value="#6c5ce7,rgba(108, 92, 231, 0.3)">ğŸŸ£ í¼í”Œ</option>
                    <option value="#e84393,rgba(232, 67, 147, 0.3)">ğŸ©· í•‘í¬</option>
                    <option value="#00b894,rgba(0, 184, 148, 0.3)">ğŸŸ¢ ê·¸ë¦°</option>
                    <option value="#fd79a8,rgba(253, 121, 168, 0.3)">ğŸ’— ë¼ì´íŠ¸í•‘í¬</option>
                    <option value="#fdcb6e,rgba(253, 203, 110, 0.3)">ğŸŸ¡ ì˜ë¡œìš°</option>
                    <option value="#74b9ff,rgba(116, 185, 255, 0.3)">ğŸ”µ ë¸”ë£¨</option>
                    <option value="#a29bfe,rgba(162, 155, 254, 0.3)">ğŸŸ£ ë¼ë²¤ë”</option>
                    <option value="#ff7675,rgba(255, 118, 117, 0.3)">ğŸ”´ ë ˆë“œ</option>
                    <option value="#00cec9,rgba(0, 206, 201, 0.3)">ğŸŒŠ ì‹œì•ˆ</option>
                    <option value="#e17055,rgba(225, 112, 85, 0.3)">ğŸ§¡ ì½”ë„</option>
                `;
            } else {
                // ê¸°ë³¸ê°’ìœ¼ë¡œ í…œí”Œë¦¿ 1 ìŠ¤íƒ€ì¼ ì‚¬ìš©
                colorOptions = `
                    <option value="#6c5ce7,rgba(108, 92, 231, 0.2),rgba(108, 92, 231, 0.4)">ğŸŸ£ í¼í”Œ</option>
                    <option value="#e84393,rgba(232, 67, 147, 0.2),rgba(232, 67, 147, 0.4)">ğŸ©· í•‘í¬</option>
                    <option value="#00b894,rgba(0, 184, 148, 0.2),rgba(0, 184, 148, 0.4)">ğŸŸ¢ ê·¸ë¦°</option>
                    <option value="#fd79a8,rgba(253, 121, 168, 0.2),rgba(253, 121, 168, 0.4)">ğŸ’— ë¼ì´íŠ¸í•‘í¬</option>
                    <option value="#fdcb6e,rgba(253, 203, 110, 0.2),rgba(253, 203, 110, 0.4)">ğŸŸ¡ ì˜ë¡œìš°</option>
                    <option value="#74b9ff,rgba(116, 185, 255, 0.2),rgba(116, 185, 255, 0.4)">ğŸ”µ ë¸”ë£¨</option>
                    <option value="#a29bfe,rgba(162, 155, 254, 0.2),rgba(162, 155, 254, 0.4)">ğŸŸ£ ë¼ë²¤ë”</option>
                    <option value="#ff7675,rgba(255, 118, 117, 0.2),rgba(255, 118, 117, 0.4)">ğŸ”´ ë ˆë“œ</option>
                `;
            }
            
            // ìƒ‰ìƒ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸ ìƒì„±
            const colorDialog = document.createElement('div');
            colorDialog.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; display: flex; align-items: center; justify-content: center;">
                    <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; text-align: center;">
                        <h3 style="margin-bottom: 20px;">ğŸ¨ ë²„íŠ¼ ìƒ‰ìƒ ì„ íƒ</h3>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px;">
                            ${colorOptions.split('<option').slice(1).map((option, index) => {
                                const value = option.match(/value="([^"]+)"/)?.[1] || '';
                                const text = option.match(/>([^<]+)</)?.[1] || '';
                                const colors = value.split(',');
                                const mainColor = colors[0];
                                
                                return `<div onclick="selectColor('${value}')" style="
                                    padding: 15px 10px; 
                                    background: ${mainColor}; 
                                    color: white; 
                                    border-radius: 8px; 
                                    cursor: pointer; 
                                    font-weight: bold;
                                    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                                    transition: transform 0.2s ease;
                                    font-size: 12px;
                                " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">${text}</div>`;
                            }).join('')}
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <button onclick="cancelColorSelection()" style="background: #6c757d; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold;">ì·¨ì†Œ</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(colorDialog);
            
            // ì „ì—­ ë³€ìˆ˜ë¡œ ë²„íŠ¼ ì •ë³´ ì €ì¥
            window.currentNewBtn = newBtn;
            window.currentTemplateBtn = templateBtn;
            window.currentColorDialog = colorDialog;
            window.currentButtonCount = count;
            window.currentButtonContainer = buttonContainer;
        }

        // ìƒ‰ìƒ ì ìš©
        function selectColor(selectedValue) {
            const newBtn = window.currentNewBtn;
            const templateBtn = window.currentTemplateBtn;
            const count = window.currentButtonCount || 1;
            const buttonContainer = window.currentButtonContainer;
            
            if (newBtn && templateBtn) {
                // ì²« ë²ˆì§¸ ë²„íŠ¼ ì¶”ê°€
                applyColorToButton(newBtn, selectedValue, templateBtn);
                buttonContainer.appendChild(newBtn);
                
                // ë‚˜ë¨¸ì§€ ë²„íŠ¼ë“¤ ì¶”ê°€ (count > 1ì¸ ê²½ìš°)
                if (count > 1) {
                    const existingButtons = editArea.querySelectorAll('.link-button');
                    for (let i = 1; i < count; i++) {
                        const additionalBtn = templateBtn.cloneNode(true);
                        additionalBtn.textContent = `New Button ${existingButtons.length + i}`;
                        additionalBtn.href = '#';
                        additionalBtn.onclick = selectButton;
                        
                        // ê°™ì€ ìƒ‰ìƒ ì ìš©
                        applyColorToButton(additionalBtn, selectedValue, templateBtn);
                        buttonContainer.appendChild(additionalBtn);
                    }
                }
                
                document.body.removeChild(window.currentColorDialog);
                showNotification(`ğŸ¨ ${count}ê°œì˜ ìƒˆë¡œìš´ ë²„íŠ¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`);
            } else if (window.currentExistingBtn) {
                // ê¸°ì¡´ ë²„íŠ¼ ìƒ‰ìƒ ë³€ê²½ìš©
                applyColorToButton(window.currentExistingBtn, selectedValue);
                document.body.removeChild(window.currentExistingColorDialog);
                showNotification('ğŸ¨ ë²„íŠ¼ ìƒ‰ìƒì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
            
            updatePreview();
        }

        // ë²„íŠ¼ì— ìƒ‰ìƒ ì ìš©í•˜ëŠ” ê³µí†µ í•¨ìˆ˜
        function applyColorToButton(button, selectedValue, templateBtn = null) {
            // í…œí”Œë¦¿ë³„ ìƒ‰ìƒ ì ìš© - ë” ì •í™•í•œ ë°©ë²•ìœ¼ë¡œ ìˆ˜ì •
            const templateContainer = editArea.querySelector('div[style*="background: white"]');
            let isTemplate1 = templateContainer && templateContainer.innerHTML.includes('ì˜¤ëŠ˜ì˜ ì‹¤ì²œ');
            let isTemplate2 = templateContainer && templateContainer.innerHTML.includes('ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¤ë³´ì„¸ìš”');
            let isTemplate3 = templateContainer && templateContainer.innerHTML.includes('ê°¤ëŸ­ì‹œë“œë¦¼');
            
            if (isTemplate1) {
                // í…œí”Œë¦¿ 1: ìƒ‰ìƒ, ê·¸ë¦¼ì, í˜¸ë²„ ìƒ‰ìƒ ë¶„ë¦¬
                const [borderColor, shadowColor, hoverShadow] = selectedValue.split(',');
                
                button.style.color = borderColor;
                button.style.borderColor = borderColor;
                button.style.boxShadow = `${shadowColor} 0px 4px 8px`;
                
            } else if (isTemplate2) {
                // í…œí”Œë¦¿ 2: ìƒ‰ìƒ ë°°ê²½ (í˜¸ë²„ì‹œ í°ìƒ‰)
                const [bgColor, shadowColor] = selectedValue.split(',');
                
                button.style.background = bgColor;
                button.style.borderColor = bgColor;
                button.style.boxShadow = `0 8px 20px ${shadowColor}`;
                button.style.color = 'white';
                
            } else {
                // ê¸°ë³¸ê°’ìœ¼ë¡œ í…œí”Œë¦¿ 1 ìŠ¤íƒ€ì¼ ì‚¬ìš©
                const [borderColor, shadowColor, hoverShadow] = selectedValue.split(',');
                
                button.style.color = borderColor;
                button.style.borderColor = borderColor;
                button.style.boxShadow = `${shadowColor} 0px 4px 8px`;
            }
        }

        function applySelectedColor() {
            // ì´ì „ í•¨ìˆ˜ëŠ” ì œê±°ë˜ê³  selectColorë¡œ ëŒ€ì²´ë¨
        }

        function applyExistingButtonColor() {
            // ì´ì „ í•¨ìˆ˜ëŠ” ì œê±°ë˜ê³  selectColorë¡œ ëŒ€ì²´ë¨
        }

        // ìƒ‰ìƒ ì„ íƒ ì·¨ì†Œ
        function cancelColorSelection() {
            document.body.removeChild(window.currentColorDialog);
            showNotification('âŒ ë²„íŠ¼ ì¶”ê°€ê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ë²„íŠ¼ í¬ê¸° ì¡°ì ˆ
        function resizeButton() {
            if (!selectedButton) {
                alert('âŒ ë¨¼ì € í¬ê¸°ë¥¼ ì¡°ì ˆí•  ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const height = prompt('ë²„íŠ¼ ì„¸ë¡œ í¬ê¸°ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 50px, 80px, 120px):', '60px');
            
            if (height) {
                // ê°€ë¡œëŠ” ìë™ ë°˜ì‘í˜•, ì„¸ë¡œë§Œ ì¡°ì ˆ
                selectedButton.style.width = '90%';
                selectedButton.style.maxWidth = '400px';
                selectedButton.style.height = height;
                selectedButton.style.minHeight = height;
                
                updatePreview();
                showNotification(`ğŸ“ ë²„íŠ¼ ì„¸ë¡œ í¬ê¸°ê°€ ${height}ë¡œ ì¡°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤!`);
            }
        }

        // ë²„íŠ¼ ìƒ‰ìƒ ë³€ê²½
        function changeButtonColor() {
            if (!selectedButton) {
                alert('âŒ ë¨¼ì € ìƒ‰ìƒì„ ë³€ê²½í•  ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // ì„ íƒëœ ë²„íŠ¼ì´ link-button í´ë˜ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸
            if (!selectedButton.classList.contains('link-button')) {
                alert('âŒ ë©”ì¸ ë²„íŠ¼ë“¤ë§Œ ìƒ‰ìƒ ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!');
                return;
            }
            
            showColorPickerForExisting(selectedButton);
        }

        // ê¸°ì¡´ ë²„íŠ¼ìš© ìƒ‰ìƒ ì„ íƒê¸°
        function showColorPickerForExisting(button) {
            // í…œí”Œë¦¿ íƒ€ì… ê°ì§€ - ë” ì •í™•í•œ ë°©ë²•ìœ¼ë¡œ ìˆ˜ì •
            const templateContainer = editArea.querySelector('div[style*="background: white"]');
            let isTemplate1 = templateContainer && templateContainer.innerHTML.includes('ì˜¤ëŠ˜ì˜ ì‹¤ì²œ');
            let isTemplate2 = templateContainer && templateContainer.innerHTML.includes('ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¤ë³´ì„¸ìš”');
            let isTemplate3 = templateContainer && templateContainer.innerHTML.includes('ê°¤ëŸ­ì‹œë“œë¦¼');
            
            let colorOptions = '';
            
            if (isTemplate1) {
                // í…œí”Œë¦¿ 1: ë³´ë” ìŠ¤íƒ€ì¼ ìƒ‰ìƒë“¤
                colorOptions = `
                    <option value="#6c5ce7,rgba(108, 92, 231, 0.2),rgba(108, 92, 231, 0.4)">ğŸŸ£ í¼í”Œ</option>
                    <option value="#e84393,rgba(232, 67, 147, 0.2),rgba(232, 67, 147, 0.4)">ğŸ©· í•‘í¬</option>
                    <option value="#00b894,rgba(0, 184, 148, 0.2),rgba(0, 184, 148, 0.4)">ğŸŸ¢ ê·¸ë¦°</option>
                    <option value="#fd79a8,rgba(253, 121, 168, 0.2),rgba(253, 121, 168, 0.4)">ğŸ’— ë¼ì´íŠ¸í•‘í¬</option>
                    <option value="#fdcb6e,rgba(253, 203, 110, 0.2),rgba(253, 203, 110, 0.4)">ğŸŸ¡ ì˜ë¡œìš°</option>
                    <option value="#74b9ff,rgba(116, 185, 255, 0.2),rgba(116, 185, 255, 0.4)">ğŸ”µ ë¸”ë£¨</option>
                    <option value="#a29bfe,rgba(162, 155, 254, 0.2),rgba(162, 155, 254, 0.4)">ğŸŸ£ ë¼ë²¤ë”</option>
                    <option value="#ff7675,rgba(255, 118, 117, 0.2),rgba(255, 118, 117, 0.4)">ğŸ”´ ë ˆë“œ</option>
                `;
            } else if (isTemplate2) {
                // í…œí”Œë¦¿ 2: ìƒ‰ìƒ ë°°ê²½ (í˜¸ë²„ì‹œ í°ìƒ‰)
                colorOptions = `
                    <option value="#6c5ce7,rgba(108, 92, 231, 0.3)">ğŸŸ£ í¼í”Œ</option>
                    <option value="#e84393,rgba(232, 67, 147, 0.3)">ğŸ©· í•‘í¬</option>
                    <option value="#00b894,rgba(0, 184, 148, 0.3)">ğŸŸ¢ ê·¸ë¦°</option>
                    <option value="#fd79a8,rgba(253, 121, 168, 0.3)">ğŸ’— ë¼ì´íŠ¸í•‘í¬</option>
                    <option value="#fdcb6e,rgba(253, 203, 110, 0.3)">ğŸŸ¡ ì˜ë¡œìš°</option>
                    <option value="#74b9ff,rgba(116, 185, 255, 0.3)">ğŸ”µ ë¸”ë£¨</option>
                    <option value="#a29bfe,rgba(162, 155, 254, 0.3)">ğŸŸ£ ë¼ë²¤ë”</option>
                    <option value="#ff7675,rgba(255, 118, 117, 0.3)">ğŸ”´ ë ˆë“œ</option>
                    <option value="#00cec9,rgba(0, 206, 201, 0.3)">ğŸŒŠ ì‹œì•ˆ</option>
                    <option value="#e17055,rgba(225, 112, 85, 0.3)">ğŸ§¡ ì½”ë„</option>
                `;
            } else {
                // ê¸°ë³¸ê°’ìœ¼ë¡œ í…œí”Œë¦¿ 1 ìŠ¤íƒ€ì¼ ì‚¬ìš©
                colorOptions = `
                    <option value="#6c5ce7,rgba(108, 92, 231, 0.2),rgba(108, 92, 231, 0.4)">ğŸŸ£ í¼í”Œ</option>
                    <option value="#e84393,rgba(232, 67, 147, 0.2),rgba(232, 67, 147, 0.4)">ğŸ©· í•‘í¬</option>
                    <option value="#00b894,rgba(0, 184, 148, 0.2),rgba(0, 184, 148, 0.4)">ğŸŸ¢ ê·¸ë¦°</option>
                    <option value="#fd79a8,rgba(253, 121, 168, 0.2),rgba(253, 121, 168, 0.4)">ğŸ’— ë¼ì´íŠ¸í•‘í¬</option>
                    <option value="#fdcb6e,rgba(253, 203, 110, 0.2),rgba(253, 203, 110, 0.4)">ğŸŸ¡ ì˜ë¡œìš°</option>
                    <option value="#74b9ff,rgba(116, 185, 255, 0.2),rgba(116, 185, 255, 0.4)">ğŸ”µ ë¸”ë£¨</option>
                    <option value="#a29bfe,rgba(162, 155, 254, 0.2),rgba(162, 155, 254, 0.4)">ğŸŸ£ ë¼ë²¤ë”</option>
                    <option value="#ff7675,rgba(255, 118, 117, 0.2),rgba(255, 118, 117, 0.4)">ğŸ”´ ë ˆë“œ</option>
                `;
            }
            
            // ìƒ‰ìƒ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸ ìƒì„±
            const colorDialog = document.createElement('div');
            colorDialog.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; display: flex; align-items: center; justify-content: center;">
                    <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; text-align: center;">
                        <h3 style="margin-bottom: 20px;">ğŸ¨ ë²„íŠ¼ ìƒ‰ìƒ ì„ íƒ</h3>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px;">
                            ${colorOptions.split('<option').slice(1).map((option, index) => {
                                const value = option.match(/value="([^"]+)"/)?.[1] || '';
                                const text = option.match(/>([^<]+)</)?.[1] || '';
                                const colors = value.split(',');
                                const mainColor = colors[0];
                                
                                return `<div onclick="selectColor('${value}')" style="
                                    padding: 15px 10px; 
                                    background: ${mainColor}; 
                                    color: white; 
                                    border-radius: 8px; 
                                    cursor: pointer; 
                                    font-weight: bold;
                                    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                                    transition: transform 0.2s ease;
                                    font-size: 12px;
                                " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">${text}</div>`;
                            }).join('')}
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <button onclick="cancelColorSelection()" style="background: #6c757d; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold;">ì·¨ì†Œ</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(colorDialog);
            
            // ì „ì—­ ë³€ìˆ˜ë¡œ ë²„íŠ¼ ì •ë³´ ì €ì¥
            window.currentExistingBtn = button;
            window.currentExistingColorDialog = colorDialog;
        }

        // ê¸°ì¡´ ë²„íŠ¼ ìƒ‰ìƒ ì ìš©
        function applyExistingButtonColor() {
            const colorSelect = document.getElementById('existingColorSelect');
            const selectedValue = colorSelect.value;
            const button = window.currentExistingBtn;
            
            // í…œí”Œë¦¿ë³„ ìƒ‰ìƒ ì ìš©
            const templateContainer = editArea.querySelector('div[style*="background: white"]');
            let isTemplate1 = templateContainer && templateContainer.innerHTML.includes('Honeybee Tips');
            let isTemplate2 = templateContainer && templateContainer.innerHTML.includes('í˜¸ë²„ í™”ì´íŠ¸');
            let isTemplate3 = templateContainer && templateContainer.innerHTML.includes('ê°¤ëŸ­ì‹œ ë“œë¦¼');
            
            if (isTemplate1) {
                // í…œí”Œë¦¿ 1: ìƒ‰ìƒ, ê·¸ë¦¼ì, í˜¸ë²„ ìƒ‰ìƒ ë¶„ë¦¬
                const [borderColor, shadowColor, hoverShadow] = selectedValue.split(',');
                
                button.style.color = borderColor;
                button.style.borderColor = borderColor;
                button.style.boxShadow = `${shadowColor} 0px 4px 8px`;
                
            } else if (isTemplate2) {
                // í…œí”Œë¦¿ 2: ìƒ‰ìƒ ë°°ê²½ (í˜¸ë²„ì‹œ í°ìƒ‰)
                const [bgColor, shadowColor] = selectedValue.split(',');
                
                button.style.background = bgColor;
                button.style.borderColor = bgColor;
                button.style.boxShadow = `0 8px 20px ${shadowColor}`;
                button.style.color = 'white';
                
            } else if (isTemplate3) {
                // í…œí”Œë¦¿ 3: glassmorphism íš¨ê³¼
                const [bgColor, borderColor] = selectedValue.split(',');
                button.style.background = `linear-gradient(135deg, ${bgColor} 0%, ${bgColor.replace('0.2', '0.05')} 100%)`;
                button.style.borderColor = borderColor;
            }
            
            // ë‹¤ì´ì–¼ë¡œê·¸ ì œê±°
            document.body.removeChild(window.currentExistingColorDialog);
            
            updatePreview();
            showNotification('ğŸ¨ ë²„íŠ¼ ìƒ‰ìƒì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ê¸°ì¡´ ë²„íŠ¼ ìƒ‰ìƒ ì„ íƒ ì·¨ì†Œ
        function cancelExistingColorSelection() {
            document.body.removeChild(window.currentExistingColorDialog);
            showNotification('âŒ ìƒ‰ìƒ ë³€ê²½ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ë²„íŠ¼ ë§í¬ í¸ì§‘
        function editButtonLink() {
            if (!selectedButton) {
                alert('âŒ ë¨¼ì € í¸ì§‘í•  ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const newLink = prompt('ìƒˆ ë§í¬ ì£¼ì†Œ:', selectedButton.href || '#');
            const newText = prompt('ë²„íŠ¼ í…ìŠ¤íŠ¸:', selectedButton.textContent || '');
            
            if (newLink !== null) selectedButton.href = newLink;
            if (newText !== null) selectedButton.textContent = newText;
            
            updatePreview();
            showNotification('ğŸ”— ë²„íŠ¼ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ë„¤ë¹„ê²Œì´ì…˜ ì¶”ê°€/ì œê±°
        function addNavButton() {
            const navContainer = editArea.querySelector('.nav-button')?.parentElement;
            if (!navContainer) {
                alert('í˜„ì¬ í…œí”Œë¦¿ì— ë„¤ë¹„ê²Œì´ì…˜ì´ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            const text = prompt('ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ í…ìŠ¤íŠ¸:', 'ìƒˆ ë©”ë‰´');
            const link = prompt('ë§í¬ ì£¼ì†Œ:', '#ìƒˆë©”ë‰´');
            
            if (text) {
                const newNav = document.createElement('a');
                newNav.href = link || '#';
                newNav.className = 'nav-button';
                newNav.textContent = text;
                newNav.onclick = selectButton;
                
                navContainer.appendChild(newNav);
                updatePreview();
                showNotification('ğŸ”„ ë„¤ë¹„ê²Œì´ì…˜ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        }

        function removeNavButton() {
            const navButtons = editArea.querySelectorAll('.nav-button');
            if (navButtons.length > 0) {
                navButtons[navButtons.length - 1].remove();
                updatePreview();
                showNotification('ğŸ—‘ï¸ ë§ˆì§€ë§‰ ë„¤ë¹„ê²Œì´ì…˜ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤!');
            } else {
                alert('ì œê±°í•  ë„¤ë¹„ê²Œì´ì…˜ì´ ì—†ìŠµë‹ˆë‹¤!');
            }
        }

        // ì´ëª¨ì§€ ì‚½ì…
        function insertEmoji(emoji) {
            const selection = window.getSelection();
            const range = selection.getRangeAt(0);
            range.deleteContents();
            range.insertNode(document.createTextNode(emoji));
            range.collapse(false);
            
            updatePreview();
            showNotification(`${emoji} ì´ëª¨ì§€ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`);
        }

        // ì´ëª¨ì§€ í˜ì´ì§€ ì—´ê¸°
        function openEmojiPage() {
            window.open('emoji-page.html', '_blank', 'width=1200,height=800,scrollbars=yes,resizable=yes');
            showNotification('ğŸ­ ì´ëª¨ì§€ í˜ì´ì§€ê°€ ì—´ë ¸ìŠµë‹ˆë‹¤!');
        }

        // ê°¤ëŸ­ì‹œë“œë¦¼ í…œí”Œë¦¿ í˜ì´ì§€ ì—´ê¸°
        function openGalaxyTemplate() {
            window.open('galaxy-template.html', '_blank', 'width=1400,height=900,scrollbars=yes,resizable=yes');
            showNotification('ğŸŒŒ ê°¤ëŸ­ì‹œë“œë¦¼ ì „ìš© í¸ì§‘ê¸°ê°€ ì—´ë ¸ìŠµë‹ˆë‹¤!');
        }

        // HTML ì €ì¥
        function saveHTML() {
            // DOMì„ ë³µì‚¬í•´ì„œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = editArea.innerHTML;
            
            // DOM ë°©ì‹ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ í¸ì§‘ìš© ì†ì„±ë§Œ ì œê±°
            const allElements = tempDiv.querySelectorAll('*');
            allElements.forEach(element => {
                // í¸ì§‘ìš© ì†ì„±ë“¤ë§Œ ì œê±°
                element.removeAttribute('contenteditable');
                element.removeAttribute('placeholder');
                
                // onclick ì´ë²¤íŠ¸ë§Œ ì œê±°
                if (element.getAttribute('onclick')) {
                    element.removeAttribute('onclick');
                }
                
                // í¸ì§‘ìš© í´ë˜ìŠ¤ë§Œ ì œê±°
                if (element.classList.contains('selected-button')) {
                    element.classList.remove('selected-button');
                }
                if (element.classList.contains('content-frame')) {
                    element.classList.remove('content-frame');
                }
                if (element.classList.contains('text-area')) {
                    element.classList.remove('text-area');
                }
                
                // ì ì„  ìŠ¤íƒ€ì¼ë§Œ ì œê±°
                if (element.style.border && element.style.border.includes('dashed')) {
                    element.style.border = '';
                }
                if (element.style.background && element.style.background.includes('rgba(248, 249, 250')) {
                    element.style.background = '';
                }
            });
            
            // ìƒˆ í”„ë ˆì„ ì¶”ê°€ ë²„íŠ¼ë§Œ ì œê±°
            const frameButtons = tempDiv.querySelectorAll('button');
            frameButtons.forEach(btn => {
                if (btn.textContent.includes('ğŸ“¦ ìƒˆ í”„ë ˆì„ ì¶”ê°€')) {
                    btn.parentElement.remove();
                }
            });
            
            // ê¹¨ë—í•œ HTML ì–»ê¸°
            const cleanHTML = tempDiv.innerHTML;
            
            // ì™„ì „í•œ HTML ë¬¸ì„œë¡œ ë§Œë“¤ê¸°
            const fullHTML = `<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë²„íŠ¼ í˜ì´ì§€</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: white;
            min-height: 100vh;
        }
        .button-row .link-button {
            flex: 1 !important;
            min-width: 180px !important;
        }
    </style>
</head>
<body>
    ${cleanHTML}
</body>
</html>`;
            
            navigator.clipboard.writeText(fullHTML).then(() => {
                showNotification('ğŸ’¾ HTMLì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }).catch(() => {
                showNotification('âŒ ë³µì‚¬ ì‹¤íŒ¨! ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
            });
        }

        // ëª¨ë‘ ì§€ìš°ê¸°
        function clearAll() {
            if (confirm('ì •ë§ë¡œ ëª¨ë“  ë‚´ìš©ì„ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                editArea.innerHTML = '<div style="padding: 40px; text-align: center; color: #666;"><h2>ğŸ‘ˆ ì™¼ìª½ì—ì„œ í…œí”Œë¦¿ì„ ì„ íƒí•´ì£¼ì„¸ìš”!</h2></div>';
                selectedButton = null;
                updatePreview();
                showNotification('ğŸ—‘ï¸ ëª¨ë“  ë‚´ìš©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        }

        // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
        function updatePreview() {
            if (previewContent && editArea) {
                let previewHTML = editArea.innerHTML;
                
                // 3ë²ˆ í…œí”Œë¦¿ì˜ textarea ë‚´ìš©ì„ HTMLë¡œ ë Œë”ë§
                const textareas = editArea.querySelectorAll('textarea.button-box');
                textareas.forEach(textarea => {
                    const textareaHTML = textarea.value || '';
                    const renderedHTML = `<div class="button-box-preview" style="
                        background: rgba(255, 255, 255, 0.95);
                        backdrop-filter: blur(10px);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        border-radius: 20px;
                        padding: 30px;
                        box-shadow: 0 8px 25px rgba(31, 38, 135, 0.15);
                        width: 100%;
                        min-height: 300px;
                        display: flex;
                        flex-direction: column;
                        gap: 15px;
                        align-items: center;
                    ">${textareaHTML}</div>`;
                    
                    previewHTML = previewHTML.replace(textarea.outerHTML, renderedHTML);
                });
                
                previewContent.innerHTML = previewHTML;
            }
        }

        // ì•Œë¦¼ í‘œì‹œ
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.remove(), 3000);
        }

        // ì´ˆê¸°í™”
        editArea.addEventListener('input', updatePreview);
        editArea.addEventListener('keyup', updatePreview);
        
        // ë¶™ì—¬ë„£ê¸° ì²˜ë¦¬
        editArea.addEventListener('paste', function(e) {
            e.preventDefault();
            
            const clipboardData = e.clipboardData || window.clipboardData;
            const pastedData = clipboardData.getData('text/html') || clipboardData.getData('text/plain');
            
            // HTML ì½”ë“œì¸ì§€ í™•ì¸
            if (pastedData.includes('<style>') && pastedData.includes('</style>')) {
                // HTML ì½”ë“œ ë¶™ì—¬ë„£ê¸°
                const selection = window.getSelection();
                const range = selection.getRangeAt(0);
                
                // ì„ì‹œ divì— HTML íŒŒì‹±
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = pastedData;
                
                // íŒŒì‹±ëœ ë‚´ìš©ì„ í˜„ì¬ ìœ„ì¹˜ì— ì‚½ì…
                const fragment = document.createDocumentFragment();
                while (tempDiv.firstChild) {
                    fragment.appendChild(tempDiv.firstChild);
                }
                
                range.deleteContents();
                range.insertNode(fragment);
                
                // ì»¤ì„œë¥¼ ì‚½ì…ëœ ë‚´ìš© ë’¤ë¡œ ì´ë™
                range.collapse(false);
                selection.removeAllRanges();
                selection.addRange(range);
                
                updatePreview();
                showNotification('ğŸ¨ HTML ì½”ë“œê°€ ë²„íŠ¼ìœ¼ë¡œ ë³€í™˜ë˜ì–´ ë¶™ì—¬ë„£ì–´ì¡ŒìŠµë‹ˆë‹¤!');
            } else {
                // ì¼ë°˜ í…ìŠ¤íŠ¸ ë¶™ì—¬ë„£ê¸°
                const selection = window.getSelection();
                const range = selection.getRangeAt(0);
                range.deleteContents();
                range.insertNode(document.createTextNode(pastedData));
                range.collapse(false);
                selection.removeAllRanges();
                selection.addRange(range);
                
                updatePreview();
            }
        });
        
        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ì²˜ë¦¬ (ë²„íŠ¼ ë³µì‚¬ ë°©ì§€)
        editArea.addEventListener('keydown', function(e) {
            // Delete/Backspace í‚¤ ì²˜ë¦¬ - ë²„íŠ¼ ë³´í˜¸
            if (e.key === 'Delete' || e.key === 'Backspace') {
                const selection = window.getSelection();
                if (selection.rangeCount > 0) {
                    const range = selection.getRangeAt(0);
                    const container = range.commonAncestorContainer;
                    
                    // ë²„íŠ¼ ìš”ì†Œ ë‚´ë¶€ì—ì„œ í…ìŠ¤íŠ¸ ì‚­ì œ ì‹œ ë²„íŠ¼ ìì²´ëŠ” ë³´í˜¸
                    let buttonElement = null;
                    if (container.nodeType === Node.TEXT_NODE) {
                        buttonElement = container.parentElement;
                    } else {
                        buttonElement = container;
                    }
                    
                    // ë²„íŠ¼ì´ë‚˜ ë§í¬ ìš”ì†Œì¸ ê²½ìš° í…ìŠ¤íŠ¸ë§Œ ì§€ìš°ê³  ìš”ì†ŒëŠ” ë³´ì¡´
                    if (buttonElement && (buttonElement.tagName === 'A' || buttonElement.tagName === 'BUTTON')) {
                        e.preventDefault();
                        
                        // ì„ íƒëœ í…ìŠ¤íŠ¸ê°€ ìˆìœ¼ë©´ ê·¸ê²ƒë§Œ ì‚­ì œ
                        if (!selection.isCollapsed) {
                            range.deleteContents();
                        } else {
                            // ì»¤ì„œ ìœ„ì¹˜ì—ì„œ í•œ ê¸€ìë§Œ ì‚­ì œ
                            if (e.key === 'Backspace' && range.startOffset > 0) {
                                range.setStart(range.startContainer, range.startOffset - 1);
                                range.deleteContents();
                            } else if (e.key === 'Delete' && range.startOffset < range.startContainer.textContent.length) {
                                range.setEnd(range.endContainer, range.endOffset + 1);
                                range.deleteContents();
                            }
                        }
                        
                        // í…ìŠ¤íŠ¸ê°€ ì™„ì „íˆ ë¹„ì–´ìˆìœ¼ë©´ ê¸°ë³¸ í…ìŠ¤íŠ¸ ì¶”ê°€
                        if (buttonElement.textContent.trim() === '') {
                            buttonElement.textContent = 'ë²„íŠ¼ í…ìŠ¤íŠ¸';
                        }
                        
                        updatePreview();
                        return;
                    }
                }
            }
            
            // ì—”í„°í‚¤ ì²˜ë¦¬
            if (e.key === 'Enter') {
                // í˜„ì¬ ì„ íƒëœ ìš”ì†Œê°€ ë²„íŠ¼ì¸ ê²½ìš°
                const selection = window.getSelection();
                if (selection.rangeCount > 0) {
                    const range = selection.getRangeAt(0);
                    const container = range.commonAncestorContainer;
                    
                    // ë²„íŠ¼ ì•ˆì— ì»¤ì„œê°€ ìˆìœ¼ë©´ ë²„íŠ¼ ë°–ìœ¼ë¡œ ì´ë™
                    if (container.nodeType === Node.TEXT_NODE) {
                        const parentElement = container.parentElement;
                        if (parentElement && (parentElement.tagName === 'A' || parentElement.tagName === 'BUTTON')) {
                            e.preventDefault();
                            
                            // ìƒˆë¡œìš´ div ìš”ì†Œ ìƒì„±í•´ì„œ ë²„íŠ¼ ë‹¤ìŒì— ì¶”ê°€
                            const newDiv = document.createElement('div');
                            newDiv.innerHTML = '<br>';
                            parentElement.parentElement.insertBefore(newDiv, parentElement.nextSibling);
                            
                            // ì»¤ì„œë¥¼ ìƒˆ divë¡œ ì´ë™
                            const newRange = document.createRange();
                            newRange.setStart(newDiv, 0);
                            newRange.collapse(true);
                            selection.removeAllRanges();
                            selection.addRange(newRange);
                            
                            updatePreview();
                            return;
                        }
                    }
                    
                    // ë²„íŠ¼ ìš”ì†Œê°€ ì„ íƒëœ ê²½ìš°
                    if (container.tagName === 'A' || container.tagName === 'BUTTON') {
                        e.preventDefault();
                        
                        const newDiv = document.createElement('div');
                        newDiv.innerHTML = '<br>';
                        container.parentElement.insertBefore(newDiv, container.nextSibling);
                        
                        const newRange = document.createRange();
                        newRange.setStart(newDiv, 0);
                        newRange.collapse(true);
                        selection.removeAllRanges();
                        selection.addRange(newRange);
                        
                        updatePreview();
                        return;
                    }
                }
            }
            
            // ì¼ë°˜ í…ìŠ¤íŠ¸ ì…ë ¥ ì‹œ ë²„íŠ¼ ë‚´ë¶€ê°€ ì•„ë‹Œ ê³³ì— ì…ë ¥ë˜ë„ë¡ ì²˜ë¦¬
            if (e.key.length === 1 && !e.ctrlKey && !e.altKey) {
                const selection = window.getSelection();
                if (selection.rangeCount > 0) {
                    const range = selection.getRangeAt(0);
                    const container = range.commonAncestorContainer;
                    
                    // ë²„íŠ¼ ì•ˆì—ì„œ í…ìŠ¤íŠ¸ ì…ë ¥í•˜ë ¤ëŠ” ê²½ìš° - ë²„íŠ¼ í…ìŠ¤íŠ¸ í¸ì§‘ì€ í—ˆìš©
                    if (container.nodeType === Node.TEXT_NODE) {
                        const parentElement = container.parentElement;
                        if (parentElement && (parentElement.tagName === 'A' || parentElement.tagName === 'BUTTON')) {
                            // ë²„íŠ¼ ë‚´ë¶€ í…ìŠ¤íŠ¸ ìˆ˜ì •ì€ í—ˆìš© (ë²„íŠ¼ í…ìŠ¤íŠ¸ í¸ì§‘ìš©)
                            return;
                        }
                    }
                    
                    if (container.tagName === 'A' || container.tagName === 'BUTTON') {
                        e.preventDefault();
                        
                        // ë²„íŠ¼ ë‹¤ìŒì— í…ìŠ¤íŠ¸ ë…¸ë“œ ì¶”ê°€
                        const textNode = document.createTextNode(e.key);
                        container.parentElement.insertBefore(textNode, container.nextSibling);
                        
                        // ì»¤ì„œë¥¼ í…ìŠ¤íŠ¸ ë…¸ë“œ ëìœ¼ë¡œ ì´ë™
                        const newRange = document.createRange();
                        newRange.setStart(textNode, 1);
                        newRange.collapse(true);
                        selection.removeAllRanges();
                        selection.addRange(newRange);
                        
                        updatePreview();
                        return;
                    }
                }
            }
        });
        
        updatePreview();
        
        showNotification('ğŸ‰ ì‹¬í”Œ ë²„íŠ¼ í˜ì´ì§€ í¸ì§‘ê¸°ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!');

        // ê¸€ì í¬ê¸° ë³€ê²½
        function changeFontSize() {
            const selection = window.getSelection();
            if (selection.rangeCount > 0 && !selection.isCollapsed) {
                const size = prompt('ê¸€ì í¬ê¸°ë¥¼ ì…ë ¥í•˜ì„¸ìš”:\n\n12px = ì‘ì€ ê¸€ì”¨\n16px = ë³´í†µ ê¸€ì”¨\n20px = í° ê¸€ì”¨\n24px = ì œëª© ê¸€ì”¨\n32px = ëŒ€ì œëª©\n48px = ë©”ì¸ ì œëª©', '20px');
                
                if (size) {
                    const range = selection.getRangeAt(0);
                    const span = document.createElement('span');
                    span.style.fontSize = size;
                    
                    try {
                        range.surroundContents(span);
                        updatePreview();
                        showNotification(`ğŸ“ ê¸€ì í¬ê¸°ê°€ ${size}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!`);
                    } catch (e) {
                        showNotification('âŒ í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                    }
                }
            } else {
                showNotification('âŒ ë¨¼ì € í¬ê¸°ë¥¼ ë³€ê²½í•  í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
            }
        }

        // ê¸€ì ìƒ‰ìƒ ë³€ê²½
        function changeTextColor() {
            const selection = window.getSelection();
            if (selection.rangeCount > 0 && !selection.isCollapsed) {
                const colorOptions = `ê¸€ì ìƒ‰ìƒì„ ì„ íƒí•˜ì„¸ìš”:

1 = ğŸ”´ ë¹¨ê°• (#ff6b6b)
2 = ğŸŸ¡ ë…¸ë‘ (#ffd93d)
3 = ğŸŸ¢ ì´ˆë¡ (#6bcf7f)
4 = ğŸ”µ íŒŒë‘ (#4dabf7)
5 = ğŸŸ£ ë³´ë¼ (#a29bfe)
6 = ğŸ©· í•‘í¬ (#fd79a8)
7 = ğŸ§¡ ì£¼í™© (#ff9f43)
8 = ğŸ¤ ê°ˆìƒ‰ (#d63031)
9 = âš« ê²€ì • (#2d3436)
10 = ğŸ”µ ì§„íŒŒë‘ (#0984e3)
11 = ğŸŸ¢ ì§„ì´ˆë¡ (#00b894)
12 = ğŸŸ£ ì§„ë³´ë¼ (#6c5ce7)
13 = ğŸ©· ì§„í•‘í¬ (#e84393)
14 = ğŸ§¡ ì§„ì£¼í™© (#e17055)

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:`;

                const choice = prompt(colorOptions, '1');
                const colors = {
                    '1': '#ff6b6b', '2': '#ffd93d', '3': '#6bcf7f', '4': '#4dabf7',
                    '5': '#a29bfe', '6': '#fd79a8', '7': '#ff9f43', '8': '#d63031',
                    '9': '#2d3436', '10': '#0984e3', '11': '#00b894', '12': '#6c5ce7',
                    '13': '#e84393', '14': '#e17055'
                };
                
                const selectedColor = colors[choice];
                if (selectedColor) {
                    const range = selection.getRangeAt(0);
                    const span = document.createElement('span');
                    span.style.color = selectedColor;
                    
                    try {
                        range.surroundContents(span);
                        updatePreview();
                        showNotification(`ğŸ¨ ê¸€ì ìƒ‰ìƒì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!`);
                    } catch (e) {
                        showNotification('âŒ í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                    }
                } else if (choice !== null) {
                    showNotification('âŒ ì˜¬ë°”ë¥¸ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”! (1-14)');
                }
            } else {
                showNotification('âŒ ë¨¼ì € ìƒ‰ìƒì„ ë³€ê²½í•  í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
            }
        }

        // êµµê²Œ í† ê¸€
        function toggleBold() {
            const selection = window.getSelection();
            if (selection.rangeCount > 0 && !selection.isCollapsed) {
                const range = selection.getRangeAt(0);
                const span = document.createElement('span');
                span.style.fontWeight = 'bold';
                
                try {
                    range.surroundContents(span);
                    updatePreview();
                    showNotification('ğŸ’ª í…ìŠ¤íŠ¸ê°€ êµµê²Œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } catch (e) {
                    showNotification('âŒ í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                }
            } else {
                showNotification('âŒ ë¨¼ì € êµµê²Œ ë§Œë“¤ í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
            }
        }

        // ë‚˜ëˆ”í°íŠ¸ ì ìš©
        function applyNanumFont() {
            const selection = window.getSelection();
            if (selection.rangeCount > 0 && !selection.isCollapsed) {
                const range = selection.getRangeAt(0);
                const span = document.createElement('span');
                span.style.fontFamily = "'Nanum Gothic', sans-serif";
                
                try {
                    range.surroundContents(span);
                    updatePreview();
                    showNotification('ğŸ–‹ï¸ ë‚˜ëˆ”í°íŠ¸ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } catch (e) {
                    showNotification('âŒ í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                }
            } else {
                showNotification('âŒ ë¨¼ì € í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
            }
        }

        // ì¤‘ì•™ ì •ë ¬
        function alignCenter() {
            const selection = window.getSelection();
            if (selection.rangeCount > 0 && !selection.isCollapsed) {
                const range = selection.getRangeAt(0);
                const container = range.commonAncestorContainer;
                
                // ë²„íŠ¼ ì•ˆì˜ í…ìŠ¤íŠ¸ì¸ì§€ í™•ì¸
                let parentElement = container.nodeType === Node.TEXT_NODE ? container.parentElement : container;
                while (parentElement && parentElement !== editArea) {
                    if (parentElement.tagName === 'A' || parentElement.tagName === 'BUTTON' || parentElement.classList.contains('link-button')) {
                        showNotification('âŒ ë²„íŠ¼ ì•ˆ í…ìŠ¤íŠ¸ëŠ” ğŸ“ ë²„íŠ¼ í…ìŠ¤íŠ¸ ìœ„ì¹˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì„¸ìš”!');
                        return;
                    }
                    parentElement = parentElement.parentElement;
                }
                
                const span = document.createElement('span');
                span.style.cssText = `
                    display: block;
                    text-align: center;
                    margin: 20px auto;
                    padding: 10px;
                `;
                
                try {
                    range.surroundContents(span);
                    updatePreview();
                    showNotification('â¬‡ï¸ í…ìŠ¤íŠ¸ê°€ ì¤‘ì•™ ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } catch (e) {
                    showNotification('âŒ í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                }
            } else {
                showNotification('âŒ ë¨¼ì € í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
            }
        }

        // ì¢Œì¸¡ ì •ë ¬
        function alignLeft() {
            const selection = window.getSelection();
            if (selection.rangeCount > 0 && !selection.isCollapsed) {
                const range = selection.getRangeAt(0);
                const container = range.commonAncestorContainer;
                
                // ë²„íŠ¼ ì•ˆì˜ í…ìŠ¤íŠ¸ì¸ì§€ í™•ì¸
                let parentElement = container.nodeType === Node.TEXT_NODE ? container.parentElement : container;
                while (parentElement && parentElement !== editArea) {
                    if (parentElement.tagName === 'A' || parentElement.tagName === 'BUTTON' || parentElement.classList.contains('link-button')) {
                        showNotification('âŒ ë²„íŠ¼ ì•ˆ í…ìŠ¤íŠ¸ëŠ” ğŸ“ ë²„íŠ¼ í…ìŠ¤íŠ¸ ìœ„ì¹˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì„¸ìš”!');
                        return;
                    }
                    parentElement = parentElement.parentElement;
                }
                
                const span = document.createElement('span');
                span.style.cssText = `
                    display: block;
                    text-align: left;
                    margin: 10px 0;
                    padding: 5px 0;
                `;
                
                try {
                    range.surroundContents(span);
                    updatePreview();
                    showNotification('â¬…ï¸ í…ìŠ¤íŠ¸ê°€ ì¢Œì¸¡ ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } catch (e) {
                    showNotification('âŒ í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                }
            } else {
                showNotification('âŒ ë¨¼ì € í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
            }
        }

        // ìš°ì¸¡ ì •ë ¬
        function alignRight() {
            const selection = window.getSelection();
            if (selection.rangeCount > 0 && !selection.isCollapsed) {
                const range = selection.getRangeAt(0);
                const container = range.commonAncestorContainer;
                
                // ë²„íŠ¼ ì•ˆì˜ í…ìŠ¤íŠ¸ì¸ì§€ í™•ì¸
                let parentElement = container.nodeType === Node.TEXT_NODE ? container.parentElement : container;
                while (parentElement && parentElement !== editArea) {
                    if (parentElement.tagName === 'A' || parentElement.tagName === 'BUTTON' || parentElement.classList.contains('link-button')) {
                        showNotification('âŒ ë²„íŠ¼ ì•ˆ í…ìŠ¤íŠ¸ëŠ” ğŸ“ ë²„íŠ¼ í…ìŠ¤íŠ¸ ìœ„ì¹˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì„¸ìš”!');
                        return;
                    }
                    parentElement = parentElement.parentElement;
                }
                
                const span = document.createElement('span');
                span.style.cssText = `
                    display: block;
                    text-align: right;
                    margin: 10px 0;
                    padding: 5px 0;
                `;
                
                try {
                    range.surroundContents(span);
                    updatePreview();
                    showNotification('â¡ï¸ í…ìŠ¤íŠ¸ê°€ ìš°ì¸¡ ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } catch (e) {
                    showNotification('âŒ í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                }
            } else {
                showNotification('âŒ ë¨¼ì € í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
            }
        }

        // ë²„íŠ¼ í…ìŠ¤íŠ¸ ìœ„ì¹˜ ì •ë ¬
        function alignButtonText() {
            if (!selectedButton) {
                alert('âŒ ë¨¼ì € í…ìŠ¤íŠ¸ë¥¼ ì •ë ¬í•  ë²„íŠ¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const positionOptions = "ë²„íŠ¼ ë‚´ë¶€ í…ìŠ¤íŠ¸ ìœ„ì¹˜ë¥¼ ì„ íƒí•˜ì„¸ìš”:\n\n1 = â†–ï¸ ì¢Œì¸¡ ìƒë‹¨\n2 = â¬†ï¸ ì¤‘ì•™ ìƒë‹¨\n3 = â†—ï¸ ìš°ì¸¡ ìƒë‹¨\n4 = â¬…ï¸ ì¢Œì¸¡ ì¤‘ì•™\n5 = â¬‡ï¸ ì¤‘ì•™ (ê¸°ë³¸)\n6 = â¡ï¸ ìš°ì¸¡ ì¤‘ì•™\n7 = â†™ï¸ ì¢Œì¸¡ í•˜ë‹¨\n8 = â¬‡ï¸ ì¤‘ì•™ í•˜ë‹¨\n9 = â†˜ï¸ ìš°ì¸¡ í•˜ë‹¨\n\në²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:";
            
            const choice = prompt(positionOptions, '5');
            
            const alignments = {
                '1': { align: 'left', vertical: 'flex-start', padding: '10px 15px' },
                '2': { align: 'center', vertical: 'flex-start', padding: '10px 15px' },
                '3': { align: 'right', vertical: 'flex-start', padding: '10px 15px' },
                '4': { align: 'left', vertical: 'center', padding: '15px' },
                '5': { align: 'center', vertical: 'center', padding: '15px' },
                '6': { align: 'right', vertical: 'center', padding: '15px' },
                '7': { align: 'left', vertical: 'flex-end', padding: '10px 15px' },
                '8': { align: 'center', vertical: 'flex-end', padding: '10px 15px' },
                '9': { align: 'right', vertical: 'flex-end', padding: '10px 15px' }
            };
            
            const selectedAlign = alignments[choice];
            if (selectedAlign) {
                selectedButton.style.display = 'flex';
                selectedButton.style.alignItems = selectedAlign.vertical;
                selectedButton.style.justifyContent = selectedAlign.align;
                selectedButton.style.textAlign = selectedAlign.align;
                selectedButton.style.padding = selectedAlign.padding;
                
                updatePreview();
                showNotification('ğŸ“ ë²„íŠ¼ í…ìŠ¤íŠ¸ ìœ„ì¹˜ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!');
            } else if (choice !== null) {
                showNotification('âŒ ì˜¬ë°”ë¥¸ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”! (1-9)');
            }
        }

        // contenteditableë¡œ ì¸í•œ HTML ì •ë¦¬
        function cleanupContentEditableHTML(html) {
            let cleaned = html;
            
            // í”„ë ˆì„ ì ì„ ê³¼ ê´€ë ¨ ìŠ¤íƒ€ì¼ë“¤ ì œê±°
            cleaned = cleaned.replace(/border: 2px dashed #e0e0e0;/g, '');
            cleaned = cleaned.replace(/background: rgba\(248, 249, 250, 0\.5\);/g, '');
            cleaned = cleaned.replace(/class="content-frame"/g, '');
            
            // ë¨¼ì € ì‹¤ì œ HTML ì½”ë“œ ì˜ì—­ì„ ë³´í˜¸
            const protectedSections = [];
            let protectionIndex = 0;
            
            // <style> íƒœê·¸ ë³´í˜¸
            cleaned = cleaned.replace(/<style[\s\S]*?<\/style>/gi, function(match) {
                const placeholder = `__PROTECTED_STYLE_${protectionIndex}__`;
                protectedSections[protectionIndex] = match;
                protectionIndex++;
                return placeholder;
            });
            
            // <div> ì»¨í…Œì´ë„ˆì™€ ë²„íŠ¼ êµ¬ì¡° ë³´í˜¸
            cleaned = cleaned.replace(/<div[^>]*style="margin-top:[^"]*"[^>]*>[\s\S]*?<\/div>/gi, function(match) {
                const placeholder = `__PROTECTED_BUTTON_${protectionIndex}__`;
                protectedSections[protectionIndex] = match;
                protectionIndex++;
                return placeholder;
            });
            
            // HTML ì£¼ì„ ë³´í˜¸
            cleaned = cleaned.replace(/<!--[\s\S]*?-->/gi, function(match) {
                const placeholder = `__PROTECTED_COMMENT_${protectionIndex}__`;
                protectedSections[protectionIndex] = match;
                protectionIndex++;
                return placeholder;
            });
            
            // ì´ì œ ë¶ˆí•„ìš”í•œ contenteditable ë¶€ì‚°ë¬¼ë“¤ë§Œ ì œê±°
            // font íƒœê·¸ ì œê±° (ë³´í˜¸ëœ ì˜ì—­ ì™¸ë¶€ì—ì„œë§Œ)
            cleaned = cleaned.replace(/<\/?font[^>]*>/gi, '');
            
            // contenteditableë¡œ ìƒê¸´ ë¶ˆí•„ìš”í•œ i íƒœê·¸ ì œê±°
            cleaned = cleaned.replace(/<i>/gi, '').replace(/<\/i>/gi, '');
            
            // ë¹ˆ p íƒœê·¸ë“¤ ì œê±°
            cleaned = cleaned.replace(/<p[^>]*><\/p>/gi, '');
            
            // ë‹¨ìˆœí•œ í…ìŠ¤íŠ¸ë§Œ ìˆëŠ” p íƒœê·¸ë“¤ ì •ë¦¬
            cleaned = cleaned.replace(/<p[^>]*style="[^"]*margin-bottom: 20px; text-align: center;"[^>]*>([^<]*)<\/p>/gi, '$1');
            
            // HTML ì—”í‹°í‹° ë³µì› (ë³´í˜¸ëœ ì˜ì—­ì—ì„œ)
            protectedSections.forEach((section, index) => {
                protectedSections[index] = section
                    .replace(/&lt;/g, '<')
                    .replace(/&gt;/g, '>')
                    .replace(/&quot;/g, '"')
                    .replace(/&amp;/g, '&');
            });
            
            // ë³´í˜¸ëœ ì„¹ì…˜ë“¤ ë³µì›
            protectedSections.forEach((section, index) => {
                cleaned = cleaned.replace(`__PROTECTED_STYLE_${index}__`, section);
                cleaned = cleaned.replace(`__PROTECTED_BUTTON_${index}__`, section);
                cleaned = cleaned.replace(`__PROTECTED_COMMENT_${index}__`, section);
            });
            
            // ì—°ì†ëœ <br> íƒœê·¸ ì •ë¦¬
            cleaned = cleaned.replace(/(<br\s*\/?>){3,}/gi, '<br><br>');
            
            // ë¹ˆ ì¤„ë“¤ ì •ë¦¬
            cleaned = cleaned.replace(/\n\s*\n\s*\n/g, '\n\n');
            
            return cleaned;
        }

        // ìƒˆë¡œìš´ í”„ë ˆì„ ì¶”ê°€
        function addNewFrame() {
            // ê¸°ì¡´ í”„ë ˆì„ì—ì„œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³µì‚¬í•˜ê¸° ìœ„í•´ ì²« ë²ˆì§¸ í”„ë ˆì„ ì°¾ê¸°
            const existingFrame = editArea.querySelector('.content-frame');
            if (!existingFrame) {
                alert('âŒ ë¨¼ì € í…œí”Œë¦¿ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // ê¸°ì¡´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ê°€ì ¸ì˜¤ê¸°
            const existingButton = existingFrame.querySelector('.link-button');
            if (!existingButton) {
                alert('âŒ í…œí”Œë¦¿ì˜ ë²„íŠ¼ì„ ë¨¼ì € í™•ì¸í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // ìƒˆ í”„ë ˆì„ ìƒì„±
            const newFrame = document.createElement('div');
            newFrame.className = 'content-frame';
            newFrame.style.cssText = 'border: 2px dashed white; border-radius: 15px; margin: 5px 0; padding: 5px; background: rgba(248, 249, 250, 0.5);';
            
            newFrame.innerHTML = `
                <div class="text-area" contenteditable="true" style="min-height: 60px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 15px; background: white; outline: none; color: #999;" placeholder="âœï¸ ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
                    <p style="color: #999;">âœï¸ ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...</p>
                </div>
                
                <div class="button-row">
                </div>
            `;
            
            // ê¸°ë³¸ ë²„íŠ¼ ì¶”ê°€ (ê¸°ì¡´ ìŠ¤íƒ€ì¼ ë³µì‚¬)
            const defaultButton = existingButton.cloneNode(true);
            defaultButton.textContent = 'ìƒˆ ë²„íŠ¼';
            defaultButton.href = '#';
            defaultButton.onclick = selectButton;
            
            const buttonRow = newFrame.querySelector('.button-row');
            buttonRow.appendChild(defaultButton);
            
            // ìƒˆ í”„ë ˆì„ ì¶”ê°€ ë²„íŠ¼ ì°¾ì•„ì„œ ê·¸ ë°”ë¡œ ì•ì— ì¶”ê°€
            const addButton = editArea.querySelector('button[onclick="addNewFrame()"]');
            if (addButton) {
                const buttonContainer = addButton.parentElement;
                buttonContainer.parentElement.insertBefore(newFrame, buttonContainer);
            } else {
                editArea.appendChild(newFrame);
            }
            
            // ìƒˆ í…ìŠ¤íŠ¸ ì˜ì—­ì— ì´ë²¤íŠ¸ ì¶”ê°€
            setupTextAreaEvents(newFrame.querySelector('.text-area'));
            
            updatePreview();
            showNotification('ğŸ“¦ ìƒˆë¡œìš´ í”„ë ˆì„ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! (ê¸°ë³¸ ë²„íŠ¼ 1ê°œ í¬í•¨)');
        }
        
        // í…ìŠ¤íŠ¸ ì˜ì—­ ì´ë²¤íŠ¸ ì„¤ì •
        function setupTextAreaEvents(textArea) {
            // í¬ì»¤ìŠ¤ ì‹œ í”Œë ˆì´ìŠ¤í™€ë” ì œê±°
            textArea.addEventListener('focus', function() {
                if (this.innerHTML.includes('ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”')) {
                    this.innerHTML = '';
                    this.style.fontStyle = 'normal'; // ê¸°ìš¸ì„ê¼´ í•´ì œ
                    this.style.color = '#333'; // ì •ìƒ ê¸€ììƒ‰
                }
            });
            
            // í¬ì»¤ìŠ¤ ì•„ì›ƒ ì‹œ ë¹ˆ ë‚´ìš©ì´ë©´ í”Œë ˆì´ìŠ¤í™€ë” ë³µì›
            textArea.addEventListener('blur', function() {
                if (this.textContent.trim() === '') {
                    this.innerHTML = '<p style="color: #999; font-style: italic;">âœï¸ ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...</p>';
                    this.style.fontStyle = 'italic'; // í”Œë ˆì´ìŠ¤í™€ë”ìš© ê¸°ìš¸ì„ê¼´
                    this.style.color = '#999'; // í”Œë ˆì´ìŠ¤í™€ë”ìš© íšŒìƒ‰
                }
            });
            
            // ë‚´ìš© ë³€ê²½ ì‹œ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
            textArea.addEventListener('input', updatePreview);
        }
        
        // ì´ˆê¸° í…ìŠ¤íŠ¸ ì˜ì—­ë“¤ì— ì´ë²¤íŠ¸ ì„¤ì •
        function setupAllTextAreas() {
            const textAreas = editArea.querySelectorAll('.text-area');
            textAreas.forEach(setupTextAreaEvents);
        }
    </script>
</body>
</html> 