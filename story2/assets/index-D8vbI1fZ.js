(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function hm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var id={exports:{}},ri={},sd={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=Symbol.for("react.element"),gm=Symbol.for("react.portal"),vm=Symbol.for("react.fragment"),ym=Symbol.for("react.strict_mode"),Sm=Symbol.for("react.profiler"),Em=Symbol.for("react.provider"),Tm=Symbol.for("react.context"),Cm=Symbol.for("react.forward_ref"),_m=Symbol.for("react.suspense"),xm=Symbol.for("react.memo"),wm=Symbol.for("react.lazy"),ga=Symbol.iterator;function Im(t){return t===null||typeof t!="object"?null:(t=ga&&t[ga]||t["@@iterator"],typeof t=="function"?t:null)}var ld={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ad=Object.assign,ud={};function qn(t,e,n){this.props=t,this.context=e,this.refs=ud,this.updater=n||ld}qn.prototype.isReactComponent={};qn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cd(){}cd.prototype=qn.prototype;function cl(t,e,n){this.props=t,this.context=e,this.refs=ud,this.updater=n||ld}var dl=cl.prototype=new cd;dl.constructor=cl;ad(dl,qn.prototype);dl.isPureReactComponent=!0;var va=Array.isArray,dd=Object.prototype.hasOwnProperty,fl={current:null},fd={key:!0,ref:!0,__self:!0,__source:!0};function pd(t,e,n){var o,r={},i=null,s=null;if(e!=null)for(o in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)dd.call(e,o)&&!fd.hasOwnProperty(o)&&(r[o]=e[o]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(o in u=t.defaultProps,u)r[o]===void 0&&(r[o]=u[o]);return{$$typeof:Fo,type:t,key:i,ref:s,props:r,_owner:fl.current}}function Nm(t,e){return{$$typeof:Fo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fo}function Am(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ya=/\/+/g;function Ni(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Am(""+t.key):e.toString(36)}function pr(t,e,n,o,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Fo:case gm:s=!0}}if(s)return s=t,r=r(s),t=o===""?"."+Ni(s,0):o,va(r)?(n="",t!=null&&(n=t.replace(ya,"$&/")+"/"),pr(r,e,n,"",function(d){return d})):r!=null&&(pl(r)&&(r=Nm(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(ya,"$&/")+"/")+t)),e.push(r)),1;if(s=0,o=o===""?".":o+":",va(t))for(var u=0;u<t.length;u++){i=t[u];var c=o+Ni(i,u);s+=pr(i,e,n,c,r)}else if(c=Im(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=o+Ni(i,u++),s+=pr(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function qo(t,e,n){if(t==null)return t;var o=[],r=0;return pr(t,o,"","",function(i){return e.call(n,i,r++)}),o}function Rm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ie={current:null},mr={transition:null},Pm={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:mr,ReactCurrentOwner:fl};function md(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:qo,forEach:function(t,e,n){qo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qo(t,function(){e++}),e},toArray:function(t){return qo(t,function(e){return e})||[]},only:function(t){if(!pl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};z.Component=qn;z.Fragment=vm;z.Profiler=Sm;z.PureComponent=cl;z.StrictMode=ym;z.Suspense=_m;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pm;z.act=md;z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=ad({},t.props),r=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=fl.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)dd.call(e,c)&&!fd.hasOwnProperty(c)&&(o[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:Fo,type:t.type,key:r,ref:i,props:o,_owner:s}};z.createContext=function(t){return t={$$typeof:Tm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Em,_context:t},t.Consumer=t};z.createElement=pd;z.createFactory=function(t){var e=pd.bind(null,t);return e.type=t,e};z.createRef=function(){return{current:null}};z.forwardRef=function(t){return{$$typeof:Cm,render:t}};z.isValidElement=pl;z.lazy=function(t){return{$$typeof:wm,_payload:{_status:-1,_result:t},_init:Rm}};z.memo=function(t,e){return{$$typeof:xm,type:t,compare:e===void 0?null:e}};z.startTransition=function(t){var e=mr.transition;mr.transition={};try{t()}finally{mr.transition=e}};z.unstable_act=md;z.useCallback=function(t,e){return Ie.current.useCallback(t,e)};z.useContext=function(t){return Ie.current.useContext(t)};z.useDebugValue=function(){};z.useDeferredValue=function(t){return Ie.current.useDeferredValue(t)};z.useEffect=function(t,e){return Ie.current.useEffect(t,e)};z.useId=function(){return Ie.current.useId()};z.useImperativeHandle=function(t,e,n){return Ie.current.useImperativeHandle(t,e,n)};z.useInsertionEffect=function(t,e){return Ie.current.useInsertionEffect(t,e)};z.useLayoutEffect=function(t,e){return Ie.current.useLayoutEffect(t,e)};z.useMemo=function(t,e){return Ie.current.useMemo(t,e)};z.useReducer=function(t,e,n){return Ie.current.useReducer(t,e,n)};z.useRef=function(t){return Ie.current.useRef(t)};z.useState=function(t){return Ie.current.useState(t)};z.useSyncExternalStore=function(t,e,n){return Ie.current.useSyncExternalStore(t,e,n)};z.useTransition=function(){return Ie.current.useTransition()};z.version="18.3.1";sd.exports=z;var b=sd.exports;const km=hm(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=b,Dm=Symbol.for("react.element"),Lm=Symbol.for("react.fragment"),Um=Object.prototype.hasOwnProperty,Fm=Mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vm={key:!0,ref:!0,__self:!0,__source:!0};function hd(t,e,n){var o,r={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(o in e)Um.call(e,o)&&!Vm.hasOwnProperty(o)&&(r[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)r[o]===void 0&&(r[o]=e[o]);return{$$typeof:Dm,type:t,key:i,ref:s,props:r,_owner:Fm.current}}ri.Fragment=Lm;ri.jsx=hd;ri.jsxs=hd;id.exports=ri;var h=id.exports,os={},gd={exports:{}},Ge={},vd={exports:{}},yd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,V){var H=R.length;R.push(V);e:for(;0<H;){var $=H-1>>>1,oe=R[$];if(0<r(oe,V))R[$]=V,R[H]=oe,H=$;else break e}}function n(R){return R.length===0?null:R[0]}function o(R){if(R.length===0)return null;var V=R[0],H=R.pop();if(H!==V){R[0]=H;e:for(var $=0,oe=R.length,zt=oe>>>1;$<zt;){var Ae=2*($+1)-1,Jt=R[Ae],Wt=Ae+1,$o=R[Wt];if(0>r(Jt,H))Wt<oe&&0>r($o,Jt)?(R[$]=$o,R[Wt]=H,$=Wt):(R[$]=Jt,R[Ae]=H,$=Ae);else if(Wt<oe&&0>r($o,H))R[$]=$o,R[Wt]=H,$=Wt;else break e}}return V}function r(R,V){var H=R.sortIndex-V.sortIndex;return H!==0?H:R.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],d=[],f=1,m=null,p=3,g=!1,S=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(R){for(var V=n(d);V!==null;){if(V.callback===null)o(d);else if(V.startTime<=R)o(d),V.sortIndex=V.expirationTime,e(c,V);else break;V=n(d)}}function _(R){if(T=!1,E(R),!S)if(n(c)!==null)S=!0,U(w);else{var V=n(d);V!==null&&G(_,V.startTime-R)}}function w(R,V){S=!1,T&&(T=!1,y(A),A=-1),g=!0;var H=p;try{for(E(V),m=n(c);m!==null&&(!(m.expirationTime>V)||R&&!L());){var $=m.callback;if(typeof $=="function"){m.callback=null,p=m.priorityLevel;var oe=$(m.expirationTime<=V);V=t.unstable_now(),typeof oe=="function"?m.callback=oe:m===n(c)&&o(c),E(V)}else o(c);m=n(c)}if(m!==null)var zt=!0;else{var Ae=n(d);Ae!==null&&G(_,Ae.startTime-V),zt=!1}return zt}finally{m=null,p=H,g=!1}}var x=!1,I=null,A=-1,P=5,k=-1;function L(){return!(t.unstable_now()-k<P)}function Y(){if(I!==null){var R=t.unstable_now();k=R;var V=!0;try{V=I(!0,R)}finally{V?q():(x=!1,I=null)}}else x=!1}var q;if(typeof v=="function")q=function(){v(Y)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,F=O.port2;O.port1.onmessage=Y,q=function(){F.postMessage(null)}}else q=function(){C(Y,0)};function U(R){I=R,x||(x=!0,q())}function G(R,V){A=C(function(){R(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){S||g||(S=!0,U(w))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var H=p;p=V;try{return R()}finally{p=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,V){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=p;p=R;try{return V()}finally{p=H}},t.unstable_scheduleCallback=function(R,V,H){var $=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?$+H:$):H=$,R){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=H+oe,R={id:f++,callback:V,priorityLevel:R,startTime:H,expirationTime:oe,sortIndex:-1},H>$?(R.sortIndex=H,e(d,R),n(c)===null&&R===n(d)&&(T?(y(A),A=-1):T=!0,G(_,H-$))):(R.sortIndex=oe,e(c,R),S||g||(S=!0,U(w))),R},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(R){var V=p;return function(){var H=p;p=V;try{return R.apply(this,arguments)}finally{p=H}}}})(yd);vd.exports=yd;var Gm=vd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm=b,Ve=Gm;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sd=new Set,So={};function un(t,e){Fn(t,e),Fn(t+"Capture",e)}function Fn(t,e){for(So[t]=e,t=0;t<e.length;t++)Sd.add(e[t])}var mt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rs=Object.prototype.hasOwnProperty,bm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sa={},Ea={};function Bm(t){return rs.call(Ea,t)?!0:rs.call(Sa,t)?!1:bm.test(t)?Ea[t]=!0:(Sa[t]=!0,!1)}function $m(t,e,n,o){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qm(t,e,n,o){if(e===null||typeof e>"u"||$m(t,e,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ne(t,e,n,o,r,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ge[t]=new Ne(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ge[e]=new Ne(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ge[t]=new Ne(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ge[t]=new Ne(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ge[t]=new Ne(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ge[t]=new Ne(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ge[t]=new Ne(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ge[t]=new Ne(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ge[t]=new Ne(t,5,!1,t.toLowerCase(),null,!1,!1)});var ml=/[\-:]([a-z])/g;function hl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ml,hl);ge[e]=new Ne(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ml,hl);ge[e]=new Ne(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ml,hl);ge[e]=new Ne(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ge[t]=new Ne(t,1,!1,t.toLowerCase(),null,!1,!1)});ge.xlinkHref=new Ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ge[t]=new Ne(t,1,!1,t.toLowerCase(),null,!0,!0)});function gl(t,e,n,o){var r=ge.hasOwnProperty(e)?ge[e]:null;(r!==null?r.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qm(e,n,r,o)&&(n=null),o||r===null?Bm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,o=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,o?t.setAttributeNS(o,e,n):t.setAttribute(e,n))))}var St=Hm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oo=Symbol.for("react.element"),mn=Symbol.for("react.portal"),hn=Symbol.for("react.fragment"),vl=Symbol.for("react.strict_mode"),is=Symbol.for("react.profiler"),Ed=Symbol.for("react.provider"),Td=Symbol.for("react.context"),yl=Symbol.for("react.forward_ref"),ss=Symbol.for("react.suspense"),ls=Symbol.for("react.suspense_list"),Sl=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),Cd=Symbol.for("react.offscreen"),Ta=Symbol.iterator;function Yn(t){return t===null||typeof t!="object"?null:(t=Ta&&t[Ta]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,Ai;function ro(t){if(Ai===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ai=e&&e[1]||""}return`
`+Ai+t}var Ri=!1;function Pi(t,e){if(!t||Ri)return"";Ri=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var o=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){o=d}t.call(e.prototype)}else{try{throw Error()}catch(d){o=d}t()}}catch(d){if(d&&o&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=o.stack.split(`
`),s=r.length-1,u=i.length-1;1<=s&&0<=u&&r[s]!==i[u];)u--;for(;1<=s&&0<=u;s--,u--)if(r[s]!==i[u]){if(s!==1||u!==1)do if(s--,u--,0>u||r[s]!==i[u]){var c=`
`+r[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=u);break}}}finally{Ri=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ro(t):""}function Om(t){switch(t.tag){case 5:return ro(t.type);case 16:return ro("Lazy");case 13:return ro("Suspense");case 19:return ro("SuspenseList");case 0:case 2:case 15:return t=Pi(t.type,!1),t;case 11:return t=Pi(t.type.render,!1),t;case 1:return t=Pi(t.type,!0),t;default:return""}}function as(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hn:return"Fragment";case mn:return"Portal";case is:return"Profiler";case vl:return"StrictMode";case ss:return"Suspense";case ls:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Td:return(t.displayName||"Context")+".Consumer";case Ed:return(t._context.displayName||"Context")+".Provider";case yl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sl:return e=t.displayName||null,e!==null?e:as(t.type)||"Memo";case xt:e=t._payload,t=t._init;try{return as(t(e))}catch{}}return null}function zm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return as(e);case 8:return e===vl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ht(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _d(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jm(t){var e=_d(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){o=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(s){o=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zo(t){t._valueTracker||(t._valueTracker=Jm(t))}function xd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),o="";return t&&(o=_d(t)?t.checked?"true":"false":t.value),t=o,t!==n?(e.setValue(t),!0):!1}function Nr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function us(t,e){var n=e.checked;return ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ca(t,e){var n=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;n=Ht(e.value!=null?e.value:n),t._wrapperState={initialChecked:o,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wd(t,e){e=e.checked,e!=null&&gl(t,"checked",e,!1)}function cs(t,e){wd(t,e);var n=Ht(e.value),o=e.type;if(n!=null)o==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ds(t,e.type,n):e.hasOwnProperty("defaultValue")&&ds(t,e.type,Ht(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _a(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ds(t,e,n){(e!=="number"||Nr(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var io=Array.isArray;function An(t,e,n,o){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&o&&(t[n].defaultSelected=!0)}else{for(n=""+Ht(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,o&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function fs(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xa(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(N(92));if(io(n)){if(1<n.length)throw Error(N(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ht(n)}}function Id(t,e){var n=Ht(e.value),o=Ht(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),o!=null&&(t.defaultValue=""+o)}function wa(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Nd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ps(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Nd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jo,Ad=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,o,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,o,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jo=Jo||document.createElement("div"),Jo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wm=["Webkit","ms","Moz","O"];Object.keys(uo).forEach(function(t){Wm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uo[e]=uo[t]})});function Rd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||uo.hasOwnProperty(t)&&uo[t]?(""+e).trim():e+"px"}function Pd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var o=n.indexOf("--")===0,r=Rd(n,e[n],o);n==="float"&&(n="cssFloat"),o?t.setProperty(n,r):t[n]=r}}var Km=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ms(t,e){if(e){if(Km[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function hs(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gs=null;function El(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vs=null,Rn=null,Pn=null;function Ia(t){if(t=Ho(t)){if(typeof vs!="function")throw Error(N(280));var e=t.stateNode;e&&(e=ui(e),vs(t.stateNode,t.type,e))}}function kd(t){Rn?Pn?Pn.push(t):Pn=[t]:Rn=t}function Md(){if(Rn){var t=Rn,e=Pn;if(Pn=Rn=null,Ia(t),e)for(t=0;t<e.length;t++)Ia(e[t])}}function Dd(t,e){return t(e)}function Ld(){}var ki=!1;function Ud(t,e,n){if(ki)return t(e,n);ki=!0;try{return Dd(t,e,n)}finally{ki=!1,(Rn!==null||Pn!==null)&&(Ld(),Md())}}function To(t,e){var n=t.stateNode;if(n===null)return null;var o=ui(n);if(o===null)return null;n=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(N(231,e,typeof n));return n}var ys=!1;if(mt)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){ys=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{ys=!1}function Ym(t,e,n,o,r,i,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var co=!1,Ar=null,Rr=!1,Ss=null,Qm={onError:function(t){co=!0,Ar=t}};function Xm(t,e,n,o,r,i,s,u,c){co=!1,Ar=null,Ym.apply(Qm,arguments)}function Zm(t,e,n,o,r,i,s,u,c){if(Xm.apply(this,arguments),co){if(co){var d=Ar;co=!1,Ar=null}else throw Error(N(198));Rr||(Rr=!0,Ss=d)}}function cn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Na(t){if(cn(t)!==t)throw Error(N(188))}function jm(t){var e=t.alternate;if(!e){if(e=cn(t),e===null)throw Error(N(188));return e!==t?null:t}for(var n=t,o=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(o=r.return,o!==null){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Na(r),t;if(i===o)return Na(r),e;i=i.sibling}throw Error(N(188))}if(n.return!==o.return)n=r,o=i;else{for(var s=!1,u=r.child;u;){if(u===n){s=!0,n=r,o=i;break}if(u===o){s=!0,o=r,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,o=r;break}if(u===o){s=!0,o=i,n=r;break}u=u.sibling}if(!s)throw Error(N(189))}}if(n.alternate!==o)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?t:e}function Vd(t){return t=jm(t),t!==null?Gd(t):null}function Gd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gd(t);if(e!==null)return e;t=t.sibling}return null}var Hd=Ve.unstable_scheduleCallback,Aa=Ve.unstable_cancelCallback,eh=Ve.unstable_shouldYield,th=Ve.unstable_requestPaint,se=Ve.unstable_now,nh=Ve.unstable_getCurrentPriorityLevel,Tl=Ve.unstable_ImmediatePriority,bd=Ve.unstable_UserBlockingPriority,Pr=Ve.unstable_NormalPriority,oh=Ve.unstable_LowPriority,Bd=Ve.unstable_IdlePriority,ii=null,lt=null;function rh(t){if(lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(ii,t,void 0,(t.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:lh,ih=Math.log,sh=Math.LN2;function lh(t){return t>>>=0,t===0?32:31-(ih(t)/sh|0)|0}var Wo=64,Ko=4194304;function so(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kr(t,e){var n=t.pendingLanes;if(n===0)return 0;var o=0,r=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var u=s&~r;u!==0?o=so(u):(i&=s,i!==0&&(o=so(i)))}else s=n&~r,s!==0?o=so(s):i!==0&&(o=so(i));if(o===0)return 0;if(e!==0&&e!==o&&!(e&r)&&(r=o&-o,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(o&4&&(o|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=o;0<e;)n=31-Ze(e),r=1<<n,o|=t[n],e&=~r;return o}function ah(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uh(t,e){for(var n=t.suspendedLanes,o=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Ze(i),u=1<<s,c=r[s];c===-1?(!(u&n)||u&o)&&(r[s]=ah(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Es(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $d(){var t=Wo;return Wo<<=1,!(Wo&4194240)&&(Wo=64),t}function Mi(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ze(e),t[e]=n}function ch(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ze(n),i=1<<r;e[r]=0,o[r]=-1,t[r]=-1,n&=~i}}function Cl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var o=31-Ze(n),r=1<<o;r&e|t[o]&e&&(t[o]|=e),n&=~r}}var K=0;function qd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Od,_l,zd,Jd,Wd,Ts=!1,Yo=[],kt=null,Mt=null,Dt=null,Co=new Map,_o=new Map,It=[],dh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ra(t,e){switch(t){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Co.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_o.delete(e.pointerId)}}function Xn(t,e,n,o,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Ho(e),e!==null&&_l(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function fh(t,e,n,o,r){switch(e){case"focusin":return kt=Xn(kt,t,e,n,o,r),!0;case"dragenter":return Mt=Xn(Mt,t,e,n,o,r),!0;case"mouseover":return Dt=Xn(Dt,t,e,n,o,r),!0;case"pointerover":var i=r.pointerId;return Co.set(i,Xn(Co.get(i)||null,t,e,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,_o.set(i,Xn(_o.get(i)||null,t,e,n,o,r)),!0}return!1}function Kd(t){var e=Xt(t.target);if(e!==null){var n=cn(e);if(n!==null){if(e=n.tag,e===13){if(e=Fd(n),e!==null){t.blockedOn=e,Wd(t.priority,function(){zd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cs(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var o=new n.constructor(n.type,n);gs=o,n.target.dispatchEvent(o),gs=null}else return e=Ho(n),e!==null&&_l(e),t.blockedOn=n,!1;e.shift()}return!0}function Pa(t,e,n){hr(t)&&n.delete(e)}function ph(){Ts=!1,kt!==null&&hr(kt)&&(kt=null),Mt!==null&&hr(Mt)&&(Mt=null),Dt!==null&&hr(Dt)&&(Dt=null),Co.forEach(Pa),_o.forEach(Pa)}function Zn(t,e){t.blockedOn===e&&(t.blockedOn=null,Ts||(Ts=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,ph)))}function xo(t){function e(r){return Zn(r,t)}if(0<Yo.length){Zn(Yo[0],t);for(var n=1;n<Yo.length;n++){var o=Yo[n];o.blockedOn===t&&(o.blockedOn=null)}}for(kt!==null&&Zn(kt,t),Mt!==null&&Zn(Mt,t),Dt!==null&&Zn(Dt,t),Co.forEach(e),_o.forEach(e),n=0;n<It.length;n++)o=It[n],o.blockedOn===t&&(o.blockedOn=null);for(;0<It.length&&(n=It[0],n.blockedOn===null);)Kd(n),n.blockedOn===null&&It.shift()}var kn=St.ReactCurrentBatchConfig,Mr=!0;function mh(t,e,n,o){var r=K,i=kn.transition;kn.transition=null;try{K=1,xl(t,e,n,o)}finally{K=r,kn.transition=i}}function hh(t,e,n,o){var r=K,i=kn.transition;kn.transition=null;try{K=4,xl(t,e,n,o)}finally{K=r,kn.transition=i}}function xl(t,e,n,o){if(Mr){var r=Cs(t,e,n,o);if(r===null)$i(t,e,o,Dr,n),Ra(t,o);else if(fh(r,t,e,n,o))o.stopPropagation();else if(Ra(t,o),e&4&&-1<dh.indexOf(t)){for(;r!==null;){var i=Ho(r);if(i!==null&&Od(i),i=Cs(t,e,n,o),i===null&&$i(t,e,o,Dr,n),i===r)break;r=i}r!==null&&o.stopPropagation()}else $i(t,e,o,null,n)}}var Dr=null;function Cs(t,e,n,o){if(Dr=null,t=El(o),t=Xt(t),t!==null)if(e=cn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dr=t,null}function Yd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nh()){case Tl:return 1;case bd:return 4;case Pr:case oh:return 16;case Bd:return 536870912;default:return 16}default:return 16}}var At=null,wl=null,gr=null;function Qd(){if(gr)return gr;var t,e=wl,n=e.length,o,r="value"in At?At.value:At.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(o=1;o<=s&&e[n-o]===r[i-o];o++);return gr=r.slice(t,1<o?1-o:void 0)}function vr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qo(){return!0}function ka(){return!1}function He(t){function e(n,o,r,i,s){this._reactName=n,this._targetInst=r,this.type=o,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qo:ka,this.isPropagationStopped=ka,this}return ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),e}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=He(On),Go=ne({},On,{view:0,detail:0}),gh=He(Go),Di,Li,jn,si=ne({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jn&&(jn&&t.type==="mousemove"?(Di=t.screenX-jn.screenX,Li=t.screenY-jn.screenY):Li=Di=0,jn=t),Di)},movementY:function(t){return"movementY"in t?t.movementY:Li}}),Ma=He(si),vh=ne({},si,{dataTransfer:0}),yh=He(vh),Sh=ne({},Go,{relatedTarget:0}),Ui=He(Sh),Eh=ne({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),Th=He(Eh),Ch=ne({},On,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_h=He(Ch),xh=ne({},On,{data:0}),Da=He(xh),wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ih={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ah(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Nh[t])?!!e[t]:!1}function Nl(){return Ah}var Rh=ne({},Go,{key:function(t){if(t.key){var e=wh[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ih[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nl,charCode:function(t){return t.type==="keypress"?vr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ph=He(Rh),kh=ne({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),La=He(kh),Mh=ne({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nl}),Dh=He(Mh),Lh=ne({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uh=He(Lh),Fh=ne({},si,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vh=He(Fh),Gh=[9,13,27,32],Al=mt&&"CompositionEvent"in window,fo=null;mt&&"documentMode"in document&&(fo=document.documentMode);var Hh=mt&&"TextEvent"in window&&!fo,Xd=mt&&(!Al||fo&&8<fo&&11>=fo),Ua=" ",Fa=!1;function Zd(t,e){switch(t){case"keyup":return Gh.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gn=!1;function bh(t,e){switch(t){case"compositionend":return jd(e);case"keypress":return e.which!==32?null:(Fa=!0,Ua);case"textInput":return t=e.data,t===Ua&&Fa?null:t;default:return null}}function Bh(t,e){if(gn)return t==="compositionend"||!Al&&Zd(t,e)?(t=Qd(),gr=wl=At=null,gn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xd&&e.locale!=="ko"?null:e.data;default:return null}}var $h={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Va(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$h[t.type]:e==="textarea"}function ef(t,e,n,o){kd(o),e=Lr(e,"onChange"),0<e.length&&(n=new Il("onChange","change",null,n,o),t.push({event:n,listeners:e}))}var po=null,wo=null;function qh(t){ff(t,0)}function li(t){var e=Sn(t);if(xd(e))return t}function Oh(t,e){if(t==="change")return e}var tf=!1;if(mt){var Fi;if(mt){var Vi="oninput"in document;if(!Vi){var Ga=document.createElement("div");Ga.setAttribute("oninput","return;"),Vi=typeof Ga.oninput=="function"}Fi=Vi}else Fi=!1;tf=Fi&&(!document.documentMode||9<document.documentMode)}function Ha(){po&&(po.detachEvent("onpropertychange",nf),wo=po=null)}function nf(t){if(t.propertyName==="value"&&li(wo)){var e=[];ef(e,wo,t,El(t)),Ud(qh,e)}}function zh(t,e,n){t==="focusin"?(Ha(),po=e,wo=n,po.attachEvent("onpropertychange",nf)):t==="focusout"&&Ha()}function Jh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return li(wo)}function Wh(t,e){if(t==="click")return li(e)}function Kh(t,e){if(t==="input"||t==="change")return li(e)}function Yh(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nt=typeof Object.is=="function"?Object.is:Yh;function Io(t,e){if(nt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!rs.call(e,r)||!nt(t[r],e[r]))return!1}return!0}function ba(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ba(t,e){var n=ba(t);t=0;for(var o;n;){if(n.nodeType===3){if(o=t+n.textContent.length,t<=e&&o>=e)return{node:n,offset:e-t};t=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ba(n)}}function of(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?of(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rf(){for(var t=window,e=Nr();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nr(t.document)}return e}function Rl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qh(t){var e=rf(),n=t.focusedElem,o=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&of(n.ownerDocument.documentElement,n)){if(o!==null&&Rl(n)){if(e=o.start,t=o.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=o.end===void 0?i:Math.min(o.end,r),!t.extend&&i>o&&(r=o,o=i,i=r),r=Ba(n,i);var s=Ba(n,o);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>o?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xh=mt&&"documentMode"in document&&11>=document.documentMode,vn=null,_s=null,mo=null,xs=!1;function $a(t,e,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xs||vn==null||vn!==Nr(o)||(o=vn,"selectionStart"in o&&Rl(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),mo&&Io(mo,o)||(mo=o,o=Lr(_s,"onSelect"),0<o.length&&(e=new Il("onSelect","select",null,e,n),t.push({event:e,listeners:o}),e.target=vn)))}function Xo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yn={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionend:Xo("Transition","TransitionEnd")},Gi={},sf={};mt&&(sf=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);function ai(t){if(Gi[t])return Gi[t];if(!yn[t])return t;var e=yn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sf)return Gi[t]=e[n];return t}var lf=ai("animationend"),af=ai("animationiteration"),uf=ai("animationstart"),cf=ai("transitionend"),df=new Map,qa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bt(t,e){df.set(t,e),un(e,[t])}for(var Hi=0;Hi<qa.length;Hi++){var bi=qa[Hi],Zh=bi.toLowerCase(),jh=bi[0].toUpperCase()+bi.slice(1);Bt(Zh,"on"+jh)}Bt(lf,"onAnimationEnd");Bt(af,"onAnimationIteration");Bt(uf,"onAnimationStart");Bt("dblclick","onDoubleClick");Bt("focusin","onFocus");Bt("focusout","onBlur");Bt(cf,"onTransitionEnd");Fn("onMouseEnter",["mouseout","mouseover"]);Fn("onMouseLeave",["mouseout","mouseover"]);Fn("onPointerEnter",["pointerout","pointerover"]);Fn("onPointerLeave",["pointerout","pointerover"]);un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));un("onBeforeInput",["compositionend","keypress","textInput","paste"]);un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eg=new Set("cancel close invalid load scroll toggle".split(" ").concat(lo));function Oa(t,e,n){var o=t.type||"unknown-event";t.currentTarget=n,Zm(o,e,void 0,t),t.currentTarget=null}function ff(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var o=t[n],r=o.event;o=o.listeners;e:{var i=void 0;if(e)for(var s=o.length-1;0<=s;s--){var u=o[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&r.isPropagationStopped())break e;Oa(r,u,d),i=c}else for(s=0;s<o.length;s++){if(u=o[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&r.isPropagationStopped())break e;Oa(r,u,d),i=c}}}if(Rr)throw t=Ss,Rr=!1,Ss=null,t}function X(t,e){var n=e[Rs];n===void 0&&(n=e[Rs]=new Set);var o=t+"__bubble";n.has(o)||(pf(e,t,2,!1),n.add(o))}function Bi(t,e,n){var o=0;e&&(o|=4),pf(n,t,o,e)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function No(t){if(!t[Zo]){t[Zo]=!0,Sd.forEach(function(n){n!=="selectionchange"&&(eg.has(n)||Bi(n,!1,t),Bi(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zo]||(e[Zo]=!0,Bi("selectionchange",!1,e))}}function pf(t,e,n,o){switch(Yd(e)){case 1:var r=mh;break;case 4:r=hh;break;default:r=xl}n=r.bind(null,e,n,t),r=void 0,!ys||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),o?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function $i(t,e,n,o,r){var i=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var s=o.tag;if(s===3||s===4){var u=o.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(s===4)for(s=o.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;s=s.return}for(;u!==null;){if(s=Xt(u),s===null)return;if(c=s.tag,c===5||c===6){o=i=s;continue e}u=u.parentNode}}o=o.return}Ud(function(){var d=i,f=El(n),m=[];e:{var p=df.get(t);if(p!==void 0){var g=Il,S=t;switch(t){case"keypress":if(vr(n)===0)break e;case"keydown":case"keyup":g=Ph;break;case"focusin":S="focus",g=Ui;break;case"focusout":S="blur",g=Ui;break;case"beforeblur":case"afterblur":g=Ui;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Dh;break;case lf:case af:case uf:g=Th;break;case cf:g=Uh;break;case"scroll":g=gh;break;case"wheel":g=Vh;break;case"copy":case"cut":case"paste":g=_h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=La}var T=(e&4)!==0,C=!T&&t==="scroll",y=T?p!==null?p+"Capture":null:p;T=[];for(var v=d,E;v!==null;){E=v;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,y!==null&&(_=To(v,y),_!=null&&T.push(Ao(v,_,E)))),C)break;v=v.return}0<T.length&&(p=new g(p,S,null,n,f),m.push({event:p,listeners:T}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==gs&&(S=n.relatedTarget||n.fromElement)&&(Xt(S)||S[ht]))break e;if((g||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,g?(S=n.relatedTarget||n.toElement,g=d,S=S?Xt(S):null,S!==null&&(C=cn(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(g=null,S=d),g!==S)){if(T=Ma,_="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(T=La,_="onPointerLeave",y="onPointerEnter",v="pointer"),C=g==null?p:Sn(g),E=S==null?p:Sn(S),p=new T(_,v+"leave",g,n,f),p.target=C,p.relatedTarget=E,_=null,Xt(f)===d&&(T=new T(y,v+"enter",S,n,f),T.target=E,T.relatedTarget=C,_=T),C=_,g&&S)t:{for(T=g,y=S,v=0,E=T;E;E=fn(E))v++;for(E=0,_=y;_;_=fn(_))E++;for(;0<v-E;)T=fn(T),v--;for(;0<E-v;)y=fn(y),E--;for(;v--;){if(T===y||y!==null&&T===y.alternate)break t;T=fn(T),y=fn(y)}T=null}else T=null;g!==null&&za(m,p,g,T,!1),S!==null&&C!==null&&za(m,C,S,T,!0)}}e:{if(p=d?Sn(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var w=Oh;else if(Va(p))if(tf)w=Kh;else{w=Jh;var x=zh}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=Wh);if(w&&(w=w(t,d))){ef(m,w,n,f);break e}x&&x(t,p,d),t==="focusout"&&(x=p._wrapperState)&&x.controlled&&p.type==="number"&&ds(p,"number",p.value)}switch(x=d?Sn(d):window,t){case"focusin":(Va(x)||x.contentEditable==="true")&&(vn=x,_s=d,mo=null);break;case"focusout":mo=_s=vn=null;break;case"mousedown":xs=!0;break;case"contextmenu":case"mouseup":case"dragend":xs=!1,$a(m,n,f);break;case"selectionchange":if(Xh)break;case"keydown":case"keyup":$a(m,n,f)}var I;if(Al)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else gn?Zd(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Xd&&n.locale!=="ko"&&(gn||A!=="onCompositionStart"?A==="onCompositionEnd"&&gn&&(I=Qd()):(At=f,wl="value"in At?At.value:At.textContent,gn=!0)),x=Lr(d,A),0<x.length&&(A=new Da(A,t,null,n,f),m.push({event:A,listeners:x}),I?A.data=I:(I=jd(n),I!==null&&(A.data=I)))),(I=Hh?bh(t,n):Bh(t,n))&&(d=Lr(d,"onBeforeInput"),0<d.length&&(f=new Da("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=I))}ff(m,e)})}function Ao(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lr(t,e){for(var n=e+"Capture",o=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=To(t,n),i!=null&&o.unshift(Ao(t,i,r)),i=To(t,e),i!=null&&o.push(Ao(t,i,r))),t=t.return}return o}function fn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function za(t,e,n,o,r){for(var i=e._reactName,s=[];n!==null&&n!==o;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===o)break;u.tag===5&&d!==null&&(u=d,r?(c=To(n,i),c!=null&&s.unshift(Ao(n,c,u))):r||(c=To(n,i),c!=null&&s.push(Ao(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var tg=/\r\n?/g,ng=/\u0000|\uFFFD/g;function Ja(t){return(typeof t=="string"?t:""+t).replace(tg,`
`).replace(ng,"")}function jo(t,e,n){if(e=Ja(e),Ja(t)!==e&&n)throw Error(N(425))}function Ur(){}var ws=null,Is=null;function Ns(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var As=typeof setTimeout=="function"?setTimeout:void 0,og=typeof clearTimeout=="function"?clearTimeout:void 0,Wa=typeof Promise=="function"?Promise:void 0,rg=typeof queueMicrotask=="function"?queueMicrotask:typeof Wa<"u"?function(t){return Wa.resolve(null).then(t).catch(ig)}:As;function ig(t){setTimeout(function(){throw t})}function qi(t,e){var n=e,o=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(o===0){t.removeChild(r),xo(e);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=r}while(n);xo(e)}function Lt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ka(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zn=Math.random().toString(36).slice(2),st="__reactFiber$"+zn,Ro="__reactProps$"+zn,ht="__reactContainer$"+zn,Rs="__reactEvents$"+zn,sg="__reactListeners$"+zn,lg="__reactHandles$"+zn;function Xt(t){var e=t[st];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ht]||n[st]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ka(t);t!==null;){if(n=t[st])return n;t=Ka(t)}return e}t=n,n=t.parentNode}return null}function Ho(t){return t=t[st]||t[ht],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function ui(t){return t[Ro]||null}var Ps=[],En=-1;function $t(t){return{current:t}}function Z(t){0>En||(t.current=Ps[En],Ps[En]=null,En--)}function Q(t,e){En++,Ps[En]=t.current,t.current=e}var bt={},Te=$t(bt),ke=$t(!1),on=bt;function Vn(t,e){var n=t.type.contextTypes;if(!n)return bt;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Me(t){return t=t.childContextTypes,t!=null}function Fr(){Z(ke),Z(Te)}function Ya(t,e,n){if(Te.current!==bt)throw Error(N(168));Q(Te,e),Q(ke,n)}function mf(t,e,n){var o=t.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var r in o)if(!(r in e))throw Error(N(108,zm(t)||"Unknown",r));return ne({},n,o)}function Vr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bt,on=Te.current,Q(Te,t),Q(ke,ke.current),!0}function Qa(t,e,n){var o=t.stateNode;if(!o)throw Error(N(169));n?(t=mf(t,e,on),o.__reactInternalMemoizedMergedChildContext=t,Z(ke),Z(Te),Q(Te,t)):Z(ke),Q(ke,n)}var ct=null,ci=!1,Oi=!1;function hf(t){ct===null?ct=[t]:ct.push(t)}function ag(t){ci=!0,hf(t)}function qt(){if(!Oi&&ct!==null){Oi=!0;var t=0,e=K;try{var n=ct;for(K=1;t<n.length;t++){var o=n[t];do o=o(!0);while(o!==null)}ct=null,ci=!1}catch(r){throw ct!==null&&(ct=ct.slice(t+1)),Hd(Tl,qt),r}finally{K=e,Oi=!1}}return null}var Tn=[],Cn=0,Gr=null,Hr=0,be=[],Be=0,rn=null,dt=1,ft="";function Kt(t,e){Tn[Cn++]=Hr,Tn[Cn++]=Gr,Gr=t,Hr=e}function gf(t,e,n){be[Be++]=dt,be[Be++]=ft,be[Be++]=rn,rn=t;var o=dt;t=ft;var r=32-Ze(o)-1;o&=~(1<<r),n+=1;var i=32-Ze(e)+r;if(30<i){var s=r-r%5;i=(o&(1<<s)-1).toString(32),o>>=s,r-=s,dt=1<<32-Ze(e)+r|n<<r|o,ft=i+t}else dt=1<<i|n<<r|o,ft=t}function Pl(t){t.return!==null&&(Kt(t,1),gf(t,1,0))}function kl(t){for(;t===Gr;)Gr=Tn[--Cn],Tn[Cn]=null,Hr=Tn[--Cn],Tn[Cn]=null;for(;t===rn;)rn=be[--Be],be[Be]=null,ft=be[--Be],be[Be]=null,dt=be[--Be],be[Be]=null}var Fe=null,Ue=null,j=!1,Xe=null;function vf(t,e){var n=$e(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xa(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fe=t,Ue=Lt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fe=t,Ue=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=rn!==null?{id:dt,overflow:ft}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$e(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Fe=t,Ue=null,!0):!1;default:return!1}}function ks(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ms(t){if(j){var e=Ue;if(e){var n=e;if(!Xa(t,e)){if(ks(t))throw Error(N(418));e=Lt(n.nextSibling);var o=Fe;e&&Xa(t,e)?vf(o,n):(t.flags=t.flags&-4097|2,j=!1,Fe=t)}}else{if(ks(t))throw Error(N(418));t.flags=t.flags&-4097|2,j=!1,Fe=t}}}function Za(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fe=t}function er(t){if(t!==Fe)return!1;if(!j)return Za(t),j=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ns(t.type,t.memoizedProps)),e&&(e=Ue)){if(ks(t))throw yf(),Error(N(418));for(;e;)vf(t,e),e=Lt(e.nextSibling)}if(Za(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ue=Lt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ue=null}}else Ue=Fe?Lt(t.stateNode.nextSibling):null;return!0}function yf(){for(var t=Ue;t;)t=Lt(t.nextSibling)}function Gn(){Ue=Fe=null,j=!1}function Ml(t){Xe===null?Xe=[t]:Xe.push(t)}var ug=St.ReactCurrentBatchConfig;function eo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var o=n.stateNode}if(!o)throw Error(N(147,t));var r=o,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var u=r.refs;s===null?delete u[i]:u[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,t))}return t}function tr(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ja(t){var e=t._init;return e(t._payload)}function Sf(t){function e(y,v){if(t){var E=y.deletions;E===null?(y.deletions=[v],y.flags|=16):E.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function o(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function r(y,v){return y=Gt(y,v),y.index=0,y.sibling=null,y}function i(y,v,E){return y.index=E,t?(E=y.alternate,E!==null?(E=E.index,E<v?(y.flags|=2,v):E):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function u(y,v,E,_){return v===null||v.tag!==6?(v=Xi(E,y.mode,_),v.return=y,v):(v=r(v,E),v.return=y,v)}function c(y,v,E,_){var w=E.type;return w===hn?f(y,v,E.props.children,_,E.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===xt&&ja(w)===v.type)?(_=r(v,E.props),_.ref=eo(y,v,E),_.return=y,_):(_=xr(E.type,E.key,E.props,null,y.mode,_),_.ref=eo(y,v,E),_.return=y,_)}function d(y,v,E,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=Zi(E,y.mode,_),v.return=y,v):(v=r(v,E.children||[]),v.return=y,v)}function f(y,v,E,_,w){return v===null||v.tag!==7?(v=tn(E,y.mode,_,w),v.return=y,v):(v=r(v,E),v.return=y,v)}function m(y,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Xi(""+v,y.mode,E),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Oo:return E=xr(v.type,v.key,v.props,null,y.mode,E),E.ref=eo(y,null,v),E.return=y,E;case mn:return v=Zi(v,y.mode,E),v.return=y,v;case xt:var _=v._init;return m(y,_(v._payload),E)}if(io(v)||Yn(v))return v=tn(v,y.mode,E,null),v.return=y,v;tr(y,v)}return null}function p(y,v,E,_){var w=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return w!==null?null:u(y,v,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Oo:return E.key===w?c(y,v,E,_):null;case mn:return E.key===w?d(y,v,E,_):null;case xt:return w=E._init,p(y,v,w(E._payload),_)}if(io(E)||Yn(E))return w!==null?null:f(y,v,E,_,null);tr(y,E)}return null}function g(y,v,E,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(E)||null,u(v,y,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Oo:return y=y.get(_.key===null?E:_.key)||null,c(v,y,_,w);case mn:return y=y.get(_.key===null?E:_.key)||null,d(v,y,_,w);case xt:var x=_._init;return g(y,v,E,x(_._payload),w)}if(io(_)||Yn(_))return y=y.get(E)||null,f(v,y,_,w,null);tr(v,_)}return null}function S(y,v,E,_){for(var w=null,x=null,I=v,A=v=0,P=null;I!==null&&A<E.length;A++){I.index>A?(P=I,I=null):P=I.sibling;var k=p(y,I,E[A],_);if(k===null){I===null&&(I=P);break}t&&I&&k.alternate===null&&e(y,I),v=i(k,v,A),x===null?w=k:x.sibling=k,x=k,I=P}if(A===E.length)return n(y,I),j&&Kt(y,A),w;if(I===null){for(;A<E.length;A++)I=m(y,E[A],_),I!==null&&(v=i(I,v,A),x===null?w=I:x.sibling=I,x=I);return j&&Kt(y,A),w}for(I=o(y,I);A<E.length;A++)P=g(I,y,A,E[A],_),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?A:P.key),v=i(P,v,A),x===null?w=P:x.sibling=P,x=P);return t&&I.forEach(function(L){return e(y,L)}),j&&Kt(y,A),w}function T(y,v,E,_){var w=Yn(E);if(typeof w!="function")throw Error(N(150));if(E=w.call(E),E==null)throw Error(N(151));for(var x=w=null,I=v,A=v=0,P=null,k=E.next();I!==null&&!k.done;A++,k=E.next()){I.index>A?(P=I,I=null):P=I.sibling;var L=p(y,I,k.value,_);if(L===null){I===null&&(I=P);break}t&&I&&L.alternate===null&&e(y,I),v=i(L,v,A),x===null?w=L:x.sibling=L,x=L,I=P}if(k.done)return n(y,I),j&&Kt(y,A),w;if(I===null){for(;!k.done;A++,k=E.next())k=m(y,k.value,_),k!==null&&(v=i(k,v,A),x===null?w=k:x.sibling=k,x=k);return j&&Kt(y,A),w}for(I=o(y,I);!k.done;A++,k=E.next())k=g(I,y,A,k.value,_),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?A:k.key),v=i(k,v,A),x===null?w=k:x.sibling=k,x=k);return t&&I.forEach(function(Y){return e(y,Y)}),j&&Kt(y,A),w}function C(y,v,E,_){if(typeof E=="object"&&E!==null&&E.type===hn&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Oo:e:{for(var w=E.key,x=v;x!==null;){if(x.key===w){if(w=E.type,w===hn){if(x.tag===7){n(y,x.sibling),v=r(x,E.props.children),v.return=y,y=v;break e}}else if(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===xt&&ja(w)===x.type){n(y,x.sibling),v=r(x,E.props),v.ref=eo(y,x,E),v.return=y,y=v;break e}n(y,x);break}else e(y,x);x=x.sibling}E.type===hn?(v=tn(E.props.children,y.mode,_,E.key),v.return=y,y=v):(_=xr(E.type,E.key,E.props,null,y.mode,_),_.ref=eo(y,v,E),_.return=y,y=_)}return s(y);case mn:e:{for(x=E.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){n(y,v.sibling),v=r(v,E.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=Zi(E,y.mode,_),v.return=y,y=v}return s(y);case xt:return x=E._init,C(y,v,x(E._payload),_)}if(io(E))return S(y,v,E,_);if(Yn(E))return T(y,v,E,_);tr(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(n(y,v.sibling),v=r(v,E),v.return=y,y=v):(n(y,v),v=Xi(E,y.mode,_),v.return=y,y=v),s(y)):n(y,v)}return C}var Hn=Sf(!0),Ef=Sf(!1),br=$t(null),Br=null,_n=null,Dl=null;function Ll(){Dl=_n=Br=null}function Ul(t){var e=br.current;Z(br),t._currentValue=e}function Ds(t,e,n){for(;t!==null;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===n)break;t=t.return}}function Mn(t,e){Br=t,Dl=_n=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pe=!0),t.firstContext=null)}function ze(t){var e=t._currentValue;if(Dl!==t)if(t={context:t,memoizedValue:e,next:null},_n===null){if(Br===null)throw Error(N(308));_n=t,Br.dependencies={lanes:0,firstContext:t}}else _n=_n.next=t;return e}var Zt=null;function Fl(t){Zt===null?Zt=[t]:Zt.push(t)}function Tf(t,e,n,o){var r=e.interleaved;return r===null?(n.next=n,Fl(e)):(n.next=r.next,r.next=n),e.interleaved=n,gt(t,o)}function gt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wt=!1;function Vl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ut(t,e,n){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,J&2){var r=o.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),o.pending=e,gt(t,n)}return r=o.interleaved,r===null?(e.next=e,Fl(o)):(e.next=r.next,r.next=e),o.interleaved=e,gt(t,n)}function yr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,Cl(t,n)}}function eu(t,e){var n=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $r(t,e,n,o){var r=t.updateQueue;wt=!1;var i=r.firstBaseUpdate,s=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?i=d:s.next=d,s=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=r.baseState;s=0,f=d=c=null,u=i;do{var p=u.lane,g=u.eventTime;if((o&p)===p){f!==null&&(f=f.next={eventTime:g,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var S=t,T=u;switch(p=e,g=n,T.tag){case 1:if(S=T.payload,typeof S=="function"){m=S.call(g,m,p);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=T.payload,p=typeof S=="function"?S.call(g,m,p):S,p==null)break e;m=ne({},m,p);break e;case 2:wt=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[u]:p.push(u))}else g={eventTime:g,lane:p,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=g,c=m):f=f.next=g,s|=p;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;p=u,u=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(f===null&&(c=m),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);ln|=s,t.lanes=s,t.memoizedState=m}}function tu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var o=t[e],r=o.callback;if(r!==null){if(o.callback=null,o=n,typeof r!="function")throw Error(N(191,r));r.call(o)}}}var bo={},at=$t(bo),Po=$t(bo),ko=$t(bo);function jt(t){if(t===bo)throw Error(N(174));return t}function Gl(t,e){switch(Q(ko,e),Q(Po,t),Q(at,bo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ps(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ps(e,t)}Z(at),Q(at,e)}function bn(){Z(at),Z(Po),Z(ko)}function _f(t){jt(ko.current);var e=jt(at.current),n=ps(e,t.type);e!==n&&(Q(Po,t),Q(at,n))}function Hl(t){Po.current===t&&(Z(at),Z(Po))}var ee=$t(0);function qr(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zi=[];function bl(){for(var t=0;t<zi.length;t++)zi[t]._workInProgressVersionPrimary=null;zi.length=0}var Sr=St.ReactCurrentDispatcher,Ji=St.ReactCurrentBatchConfig,sn=0,te=null,ae=null,ce=null,Or=!1,ho=!1,Mo=0,cg=0;function ve(){throw Error(N(321))}function Bl(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nt(t[n],e[n]))return!1;return!0}function $l(t,e,n,o,r,i){if(sn=i,te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sr.current=t===null||t.memoizedState===null?mg:hg,t=n(o,r),ho){i=0;do{if(ho=!1,Mo=0,25<=i)throw Error(N(301));i+=1,ce=ae=null,e.updateQueue=null,Sr.current=gg,t=n(o,r)}while(ho)}if(Sr.current=zr,e=ae!==null&&ae.next!==null,sn=0,ce=ae=te=null,Or=!1,e)throw Error(N(300));return t}function ql(){var t=Mo!==0;return Mo=0,t}function it(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ce===null?te.memoizedState=ce=t:ce=ce.next=t,ce}function Je(){if(ae===null){var t=te.alternate;t=t!==null?t.memoizedState:null}else t=ae.next;var e=ce===null?te.memoizedState:ce.next;if(e!==null)ce=e,ae=t;else{if(t===null)throw Error(N(310));ae=t,t={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},ce===null?te.memoizedState=ce=t:ce=ce.next=t}return ce}function Do(t,e){return typeof e=="function"?e(t):e}function Wi(t){var e=Je(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var o=ae,r=o.baseQueue,i=n.pending;if(i!==null){if(r!==null){var s=r.next;r.next=i.next,i.next=s}o.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,o=o.baseState;var u=s=null,c=null,d=i;do{var f=d.lane;if((sn&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),o=d.hasEagerState?d.eagerState:t(o,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=m,s=o):c=c.next=m,te.lanes|=f,ln|=f}d=d.next}while(d!==null&&d!==i);c===null?s=o:c.next=u,nt(o,e.memoizedState)||(Pe=!0),e.memoizedState=o,e.baseState=s,e.baseQueue=c,n.lastRenderedState=o}if(t=n.interleaved,t!==null){r=t;do i=r.lane,te.lanes|=i,ln|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ki(t){var e=Je(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var o=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do i=t(i,s.action),s=s.next;while(s!==r);nt(i,e.memoizedState)||(Pe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,o]}function xf(){}function wf(t,e){var n=te,o=Je(),r=e(),i=!nt(o.memoizedState,r);if(i&&(o.memoizedState=r,Pe=!0),o=o.queue,Ol(Af.bind(null,n,o,t),[t]),o.getSnapshot!==e||i||ce!==null&&ce.memoizedState.tag&1){if(n.flags|=2048,Lo(9,Nf.bind(null,n,o,r,e),void 0,null),de===null)throw Error(N(349));sn&30||If(n,e,r)}return r}function If(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Nf(t,e,n,o){e.value=n,e.getSnapshot=o,Rf(e)&&Pf(t)}function Af(t,e,n){return n(function(){Rf(e)&&Pf(t)})}function Rf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nt(t,n)}catch{return!0}}function Pf(t){var e=gt(t,1);e!==null&&je(e,t,1,-1)}function nu(t){var e=it();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:t},e.queue=t,t=t.dispatch=pg.bind(null,te,t),[e.memoizedState,t]}function Lo(t,e,n,o){return t={tag:t,create:e,destroy:n,deps:o,next:null},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(o=n.next,n.next=t,t.next=o,e.lastEffect=t)),t}function kf(){return Je().memoizedState}function Er(t,e,n,o){var r=it();te.flags|=t,r.memoizedState=Lo(1|e,n,void 0,o===void 0?null:o)}function di(t,e,n,o){var r=Je();o=o===void 0?null:o;var i=void 0;if(ae!==null){var s=ae.memoizedState;if(i=s.destroy,o!==null&&Bl(o,s.deps)){r.memoizedState=Lo(e,n,i,o);return}}te.flags|=t,r.memoizedState=Lo(1|e,n,i,o)}function ou(t,e){return Er(8390656,8,t,e)}function Ol(t,e){return di(2048,8,t,e)}function Mf(t,e){return di(4,2,t,e)}function Df(t,e){return di(4,4,t,e)}function Lf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Uf(t,e,n){return n=n!=null?n.concat([t]):null,di(4,4,Lf.bind(null,e,t),n)}function zl(){}function Ff(t,e){var n=Je();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&Bl(e,o[1])?o[0]:(n.memoizedState=[t,e],t)}function Vf(t,e){var n=Je();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&Bl(e,o[1])?o[0]:(t=t(),n.memoizedState=[t,e],t)}function Gf(t,e,n){return sn&21?(nt(n,e)||(n=$d(),te.lanes|=n,ln|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pe=!0),t.memoizedState=n)}function dg(t,e){var n=K;K=n!==0&&4>n?n:4,t(!0);var o=Ji.transition;Ji.transition={};try{t(!1),e()}finally{K=n,Ji.transition=o}}function Hf(){return Je().memoizedState}function fg(t,e,n){var o=Vt(t);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},bf(t))Bf(e,n);else if(n=Tf(t,e,n,o),n!==null){var r=xe();je(n,t,o,r),$f(n,e,o)}}function pg(t,e,n){var o=Vt(t),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(bf(t))Bf(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,u=i(s,n);if(r.hasEagerState=!0,r.eagerState=u,nt(u,s)){var c=e.interleaved;c===null?(r.next=r,Fl(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=Tf(t,e,r,o),n!==null&&(r=xe(),je(n,t,o,r),$f(n,e,o))}}function bf(t){var e=t.alternate;return t===te||e!==null&&e===te}function Bf(t,e){ho=Or=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $f(t,e,n){if(n&4194240){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,Cl(t,n)}}var zr={readContext:ze,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useInsertionEffect:ve,useLayoutEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useMutableSource:ve,useSyncExternalStore:ve,useId:ve,unstable_isNewReconciler:!1},mg={readContext:ze,useCallback:function(t,e){return it().memoizedState=[t,e===void 0?null:e],t},useContext:ze,useEffect:ou,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Er(4194308,4,Lf.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Er(4194308,4,t,e)},useInsertionEffect:function(t,e){return Er(4,2,t,e)},useMemo:function(t,e){var n=it();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var o=it();return e=n!==void 0?n(e):e,o.memoizedState=o.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},o.queue=t,t=t.dispatch=fg.bind(null,te,t),[o.memoizedState,t]},useRef:function(t){var e=it();return t={current:t},e.memoizedState=t},useState:nu,useDebugValue:zl,useDeferredValue:function(t){return it().memoizedState=t},useTransition:function(){var t=nu(!1),e=t[0];return t=dg.bind(null,t[1]),it().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var o=te,r=it();if(j){if(n===void 0)throw Error(N(407));n=n()}else{if(n=e(),de===null)throw Error(N(349));sn&30||If(o,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,ou(Af.bind(null,o,i,t),[t]),o.flags|=2048,Lo(9,Nf.bind(null,o,i,n,e),void 0,null),n},useId:function(){var t=it(),e=de.identifierPrefix;if(j){var n=ft,o=dt;n=(o&~(1<<32-Ze(o)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cg++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hg={readContext:ze,useCallback:Ff,useContext:ze,useEffect:Ol,useImperativeHandle:Uf,useInsertionEffect:Mf,useLayoutEffect:Df,useMemo:Vf,useReducer:Wi,useRef:kf,useState:function(){return Wi(Do)},useDebugValue:zl,useDeferredValue:function(t){var e=Je();return Gf(e,ae.memoizedState,t)},useTransition:function(){var t=Wi(Do)[0],e=Je().memoizedState;return[t,e]},useMutableSource:xf,useSyncExternalStore:wf,useId:Hf,unstable_isNewReconciler:!1},gg={readContext:ze,useCallback:Ff,useContext:ze,useEffect:Ol,useImperativeHandle:Uf,useInsertionEffect:Mf,useLayoutEffect:Df,useMemo:Vf,useReducer:Ki,useRef:kf,useState:function(){return Ki(Do)},useDebugValue:zl,useDeferredValue:function(t){var e=Je();return ae===null?e.memoizedState=t:Gf(e,ae.memoizedState,t)},useTransition:function(){var t=Ki(Do)[0],e=Je().memoizedState;return[t,e]},useMutableSource:xf,useSyncExternalStore:wf,useId:Hf,unstable_isNewReconciler:!1};function Ye(t,e){if(t&&t.defaultProps){e=ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ls(t,e,n,o){e=t.memoizedState,n=n(o,e),n=n==null?e:ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fi={isMounted:function(t){return(t=t._reactInternals)?cn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var o=xe(),r=Vt(t),i=pt(o,r);i.payload=e,n!=null&&(i.callback=n),e=Ut(t,i,r),e!==null&&(je(e,t,r,o),yr(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var o=xe(),r=Vt(t),i=pt(o,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ut(t,i,r),e!==null&&(je(e,t,r,o),yr(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xe(),o=Vt(t),r=pt(n,o);r.tag=2,e!=null&&(r.callback=e),e=Ut(t,r,o),e!==null&&(je(e,t,o,n),yr(e,t,o))}};function ru(t,e,n,o,r,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,i,s):e.prototype&&e.prototype.isPureReactComponent?!Io(n,o)||!Io(r,i):!0}function qf(t,e,n){var o=!1,r=bt,i=e.contextType;return typeof i=="object"&&i!==null?i=ze(i):(r=Me(e)?on:Te.current,o=e.contextTypes,i=(o=o!=null)?Vn(t,r):bt),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fi,t.stateNode=e,e._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function iu(t,e,n,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,o),e.state!==t&&fi.enqueueReplaceState(e,e.state,null)}function Us(t,e,n,o){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Vl(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=ze(i):(i=Me(e)?on:Te.current,r.context=Vn(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ls(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&fi.enqueueReplaceState(r,r.state,null),$r(t,n,r,o),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Bn(t,e){try{var n="",o=e;do n+=Om(o),o=o.return;while(o);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Yi(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fs(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vg=typeof WeakMap=="function"?WeakMap:Map;function Of(t,e,n){n=pt(-1,n),n.tag=3,n.payload={element:null};var o=e.value;return n.callback=function(){Wr||(Wr=!0,Js=o),Fs(t,e)},n}function zf(t,e,n){n=pt(-1,n),n.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var r=e.value;n.payload=function(){return o(r)},n.callback=function(){Fs(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Fs(t,e),typeof o!="function"&&(Ft===null?Ft=new Set([this]):Ft.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function su(t,e,n){var o=t.pingCache;if(o===null){o=t.pingCache=new vg;var r=new Set;o.set(e,r)}else r=o.get(e),r===void 0&&(r=new Set,o.set(e,r));r.has(n)||(r.add(n),t=kg.bind(null,t,e,n),e.then(t,t))}function lu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function au(t,e,n,o,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pt(-1,1),e.tag=2,Ut(n,e,1))),n.lanes|=1),t)}var yg=St.ReactCurrentOwner,Pe=!1;function _e(t,e,n,o){e.child=t===null?Ef(e,null,n,o):Hn(e,t.child,n,o)}function uu(t,e,n,o,r){n=n.render;var i=e.ref;return Mn(e,r),o=$l(t,e,n,o,i,r),n=ql(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,vt(t,e,r)):(j&&n&&Pl(e),e.flags|=1,_e(t,e,o,r),e.child)}function cu(t,e,n,o,r){if(t===null){var i=n.type;return typeof i=="function"&&!jl(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Jf(t,e,i,o,r)):(t=xr(n.type,null,o,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(s,o)&&t.ref===e.ref)return vt(t,e,r)}return e.flags|=1,t=Gt(i,o),t.ref=e.ref,t.return=e,e.child=t}function Jf(t,e,n,o,r){if(t!==null){var i=t.memoizedProps;if(Io(i,o)&&t.ref===e.ref)if(Pe=!1,e.pendingProps=o=i,(t.lanes&r)!==0)t.flags&131072&&(Pe=!0);else return e.lanes=t.lanes,vt(t,e,r)}return Vs(t,e,n,o,r)}function Wf(t,e,n){var o=e.pendingProps,r=o.children,i=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(wn,Le),Le|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Q(wn,Le),Le|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=i!==null?i.baseLanes:n,Q(wn,Le),Le|=o}else i!==null?(o=i.baseLanes|n,e.memoizedState=null):o=n,Q(wn,Le),Le|=o;return _e(t,e,r,n),e.child}function Kf(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vs(t,e,n,o,r){var i=Me(n)?on:Te.current;return i=Vn(e,i),Mn(e,r),n=$l(t,e,n,o,i,r),o=ql(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,vt(t,e,r)):(j&&o&&Pl(e),e.flags|=1,_e(t,e,n,r),e.child)}function du(t,e,n,o,r){if(Me(n)){var i=!0;Vr(e)}else i=!1;if(Mn(e,r),e.stateNode===null)Tr(t,e),qf(e,n,o),Us(e,n,o,r),o=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=ze(d):(d=Me(n)?on:Te.current,d=Vn(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";m||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==o||c!==d)&&iu(e,s,o,d),wt=!1;var p=e.memoizedState;s.state=p,$r(e,o,s,r),c=e.memoizedState,u!==o||p!==c||ke.current||wt?(typeof f=="function"&&(Ls(e,n,f,o),c=e.memoizedState),(u=wt||ru(e,n,u,o,p,c,d))?(m||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=c),s.props=o,s.state=c,s.context=d,o=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{s=e.stateNode,Cf(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:Ye(e.type,u),s.props=d,m=e.pendingProps,p=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=ze(c):(c=Me(n)?on:Te.current,c=Vn(e,c));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==m||p!==c)&&iu(e,s,o,c),wt=!1,p=e.memoizedState,s.state=p,$r(e,o,s,r);var S=e.memoizedState;u!==m||p!==S||ke.current||wt?(typeof g=="function"&&(Ls(e,n,g,o),S=e.memoizedState),(d=wt||ru(e,n,d,o,p,S,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(o,S,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(o,S,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=S),s.props=o,s.state=S,s.context=c,o=d):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),o=!1)}return Gs(t,e,n,o,i,r)}function Gs(t,e,n,o,r,i){Kf(t,e);var s=(e.flags&128)!==0;if(!o&&!s)return r&&Qa(e,n,!1),vt(t,e,i);o=e.stateNode,yg.current=e;var u=s&&typeof n.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,t!==null&&s?(e.child=Hn(e,t.child,null,i),e.child=Hn(e,null,u,i)):_e(t,e,u,i),e.memoizedState=o.state,r&&Qa(e,n,!0),e.child}function Yf(t){var e=t.stateNode;e.pendingContext?Ya(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ya(t,e.context,!1),Gl(t,e.containerInfo)}function fu(t,e,n,o,r){return Gn(),Ml(r),e.flags|=256,_e(t,e,n,o),e.child}var Hs={dehydrated:null,treeContext:null,retryLane:0};function bs(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qf(t,e,n){var o=e.pendingProps,r=ee.current,i=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Q(ee,r&1),t===null)return Ms(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=o.children,t=o.fallback,i?(o=e.mode,i=e.child,s={mode:"hidden",children:s},!(o&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=hi(s,o,0,null),t=tn(t,o,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=bs(n),e.memoizedState=Hs,t):Jl(e,s));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Sg(t,e,s,o,u,r,n);if(i){i=o.fallback,s=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:o.children};return!(s&1)&&e.child!==r?(o=e.child,o.childLanes=0,o.pendingProps=c,e.deletions=null):(o=Gt(r,c),o.subtreeFlags=r.subtreeFlags&14680064),u!==null?i=Gt(u,i):(i=tn(i,s,n,null),i.flags|=2),i.return=e,o.return=e,o.sibling=i,e.child=o,o=i,i=e.child,s=t.child.memoizedState,s=s===null?bs(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=Hs,o}return i=t.child,t=i.sibling,o=Gt(i,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=n),o.return=e,o.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=o,e.memoizedState=null,o}function Jl(t,e){return e=hi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nr(t,e,n,o){return o!==null&&Ml(o),Hn(e,t.child,null,n),t=Jl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Sg(t,e,n,o,r,i,s){if(n)return e.flags&256?(e.flags&=-257,o=Yi(Error(N(422))),nr(t,e,s,o)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=o.fallback,r=e.mode,o=hi({mode:"visible",children:o.children},r,0,null),i=tn(i,r,s,null),i.flags|=2,o.return=e,i.return=e,o.sibling=i,e.child=o,e.mode&1&&Hn(e,t.child,null,s),e.child.memoizedState=bs(s),e.memoizedState=Hs,i);if(!(e.mode&1))return nr(t,e,s,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var u=o.dgst;return o=u,i=Error(N(419)),o=Yi(i,o,void 0),nr(t,e,s,o)}if(u=(s&t.childLanes)!==0,Pe||u){if(o=de,o!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|s)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,gt(t,r),je(o,t,r,-1))}return Zl(),o=Yi(Error(N(421))),nr(t,e,s,o)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Mg.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Ue=Lt(r.nextSibling),Fe=e,j=!0,Xe=null,t!==null&&(be[Be++]=dt,be[Be++]=ft,be[Be++]=rn,dt=t.id,ft=t.overflow,rn=e),e=Jl(e,o.children),e.flags|=4096,e)}function pu(t,e,n){t.lanes|=e;var o=t.alternate;o!==null&&(o.lanes|=e),Ds(t.return,e,n)}function Qi(t,e,n,o,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function Xf(t,e,n){var o=e.pendingProps,r=o.revealOrder,i=o.tail;if(_e(t,e,o.children,n),o=ee.current,o&2)o=o&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pu(t,n,e);else if(t.tag===19)pu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(Q(ee,o),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&qr(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Qi(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&qr(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Qi(e,!0,n,null,i);break;case"together":Qi(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ln|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,n=Gt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Eg(t,e,n){switch(e.tag){case 3:Yf(e),Gn();break;case 5:_f(e);break;case 1:Me(e.type)&&Vr(e);break;case 4:Gl(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,r=e.memoizedProps.value;Q(br,o._currentValue),o._currentValue=r;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(Q(ee,ee.current&1),e.flags|=128,null):n&e.child.childLanes?Qf(t,e,n):(Q(ee,ee.current&1),t=vt(t,e,n),t!==null?t.sibling:null);Q(ee,ee.current&1);break;case 19:if(o=(n&e.childLanes)!==0,t.flags&128){if(o)return Xf(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Q(ee,ee.current),o)break;return null;case 22:case 23:return e.lanes=0,Wf(t,e,n)}return vt(t,e,n)}var Zf,Bs,jf,ep;Zf=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bs=function(){};jf=function(t,e,n,o){var r=t.memoizedProps;if(r!==o){t=e.stateNode,jt(at.current);var i=null;switch(n){case"input":r=us(t,r),o=us(t,o),i=[];break;case"select":r=ne({},r,{value:void 0}),o=ne({},o,{value:void 0}),i=[];break;case"textarea":r=fs(t,r),o=fs(t,o),i=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=Ur)}ms(n,o);var s;n=null;for(d in r)if(!o.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var u=r[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(So.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in o){var c=o[d];if(u=r!=null?r[d]:void 0,o.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(So.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&X("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};ep=function(t,e,n,o){n!==o&&(e.flags|=4)};function to(t,e){if(!j)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,o=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=o,t.childLanes=n,e}function Tg(t,e,n){var o=e.pendingProps;switch(kl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(e),null;case 1:return Me(e.type)&&Fr(),ye(e),null;case 3:return o=e.stateNode,bn(),Z(ke),Z(Te),bl(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(er(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xe!==null&&(Ys(Xe),Xe=null))),Bs(t,e),ye(e),null;case 5:Hl(e);var r=jt(ko.current);if(n=e.type,t!==null&&e.stateNode!=null)jf(t,e,n,o,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(N(166));return ye(e),null}if(t=jt(at.current),er(e)){o=e.stateNode,n=e.type;var i=e.memoizedProps;switch(o[st]=e,o[Ro]=i,t=(e.mode&1)!==0,n){case"dialog":X("cancel",o),X("close",o);break;case"iframe":case"object":case"embed":X("load",o);break;case"video":case"audio":for(r=0;r<lo.length;r++)X(lo[r],o);break;case"source":X("error",o);break;case"img":case"image":case"link":X("error",o),X("load",o);break;case"details":X("toggle",o);break;case"input":Ca(o,i),X("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},X("invalid",o);break;case"textarea":xa(o,i),X("invalid",o)}ms(n,i),r=null;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="children"?typeof u=="string"?o.textContent!==u&&(i.suppressHydrationWarning!==!0&&jo(o.textContent,u,t),r=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&jo(o.textContent,u,t),r=["children",""+u]):So.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&X("scroll",o)}switch(n){case"input":zo(o),_a(o,i,!0);break;case"textarea":zo(o),wa(o);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(o.onclick=Ur)}o=r,e.updateQueue=o,o!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Nd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=s.createElement(n,{is:o.is}):(t=s.createElement(n),n==="select"&&(s=t,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):t=s.createElementNS(t,n),t[st]=e,t[Ro]=o,Zf(t,e,!1,!1),e.stateNode=t;e:{switch(s=hs(n,o),n){case"dialog":X("cancel",t),X("close",t),r=o;break;case"iframe":case"object":case"embed":X("load",t),r=o;break;case"video":case"audio":for(r=0;r<lo.length;r++)X(lo[r],t);r=o;break;case"source":X("error",t),r=o;break;case"img":case"image":case"link":X("error",t),X("load",t),r=o;break;case"details":X("toggle",t),r=o;break;case"input":Ca(t,o),r=us(t,o),X("invalid",t);break;case"option":r=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},r=ne({},o,{value:void 0}),X("invalid",t);break;case"textarea":xa(t,o),r=fs(t,o),X("invalid",t);break;default:r=o}ms(n,r),u=r;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?Pd(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ad(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Eo(t,c):typeof c=="number"&&Eo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(So.hasOwnProperty(i)?c!=null&&i==="onScroll"&&X("scroll",t):c!=null&&gl(t,i,c,s))}switch(n){case"input":zo(t),_a(t,o,!1);break;case"textarea":zo(t),wa(t);break;case"option":o.value!=null&&t.setAttribute("value",""+Ht(o.value));break;case"select":t.multiple=!!o.multiple,i=o.value,i!=null?An(t,!!o.multiple,i,!1):o.defaultValue!=null&&An(t,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ur)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ye(e),null;case 6:if(t&&e.stateNode!=null)ep(t,e,t.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(N(166));if(n=jt(ko.current),jt(at.current),er(e)){if(o=e.stateNode,n=e.memoizedProps,o[st]=e,(i=o.nodeValue!==n)&&(t=Fe,t!==null))switch(t.tag){case 3:jo(o.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jo(o.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[st]=e,e.stateNode=o}return ye(e),null;case 13:if(Z(ee),o=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(j&&Ue!==null&&e.mode&1&&!(e.flags&128))yf(),Gn(),e.flags|=98560,i=!1;else if(i=er(e),o!==null&&o.dehydrated!==null){if(t===null){if(!i)throw Error(N(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[st]=e}else Gn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ye(e),i=!1}else Xe!==null&&(Ys(Xe),Xe=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?ue===0&&(ue=3):Zl())),e.updateQueue!==null&&(e.flags|=4),ye(e),null);case 4:return bn(),Bs(t,e),t===null&&No(e.stateNode.containerInfo),ye(e),null;case 10:return Ul(e.type._context),ye(e),null;case 17:return Me(e.type)&&Fr(),ye(e),null;case 19:if(Z(ee),i=e.memoizedState,i===null)return ye(e),null;if(o=(e.flags&128)!==0,s=i.rendering,s===null)if(o)to(i,!1);else{if(ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=qr(t),s!==null){for(e.flags|=128,to(i,!1),o=s.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=n,n=e.child;n!==null;)i=n,t=o,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Q(ee,ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&se()>$n&&(e.flags|=128,o=!0,to(i,!1),e.lanes=4194304)}else{if(!o)if(t=qr(s),t!==null){if(e.flags|=128,o=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),to(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!j)return ye(e),null}else 2*se()-i.renderingStartTime>$n&&n!==1073741824&&(e.flags|=128,o=!0,to(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=se(),e.sibling=null,n=ee.current,Q(ee,o?n&1|2:n&1),e):(ye(e),null);case 22:case 23:return Xl(),o=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?Le&1073741824&&(ye(e),e.subtreeFlags&6&&(e.flags|=8192)):ye(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function Cg(t,e){switch(kl(e),e.tag){case 1:return Me(e.type)&&Fr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bn(),Z(ke),Z(Te),bl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hl(e),null;case 13:if(Z(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));Gn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(ee),null;case 4:return bn(),null;case 10:return Ul(e.type._context),null;case 22:case 23:return Xl(),null;case 24:return null;default:return null}}var or=!1,Se=!1,_g=typeof WeakSet=="function"?WeakSet:Set,D=null;function xn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){ie(t,e,o)}else n.current=null}function $s(t,e,n){try{n()}catch(o){ie(t,e,o)}}var mu=!1;function xg(t,e){if(ws=Mr,t=rf(),Rl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var r=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,f=0,m=t,p=null;t:for(;;){for(var g;m!==n||r!==0&&m.nodeType!==3||(u=s+r),m!==i||o!==0&&m.nodeType!==3||(c=s+o),m.nodeType===3&&(s+=m.nodeValue.length),(g=m.firstChild)!==null;)p=m,m=g;for(;;){if(m===t)break t;if(p===n&&++d===r&&(u=s),p===i&&++f===o&&(c=s),(g=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=g}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Is={focusedElem:t,selectionRange:n},Mr=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var T=S.memoizedProps,C=S.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?T:Ye(e.type,T),C);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(_){ie(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return S=mu,mu=!1,S}function go(t,e,n){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&$s(e,n,i)}r=r.next}while(r!==o)}}function pi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var o=n.create;n.destroy=o()}n=n.next}while(n!==e)}}function qs(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tp(t){var e=t.alternate;e!==null&&(t.alternate=null,tp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[st],delete e[Ro],delete e[Rs],delete e[sg],delete e[lg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function np(t){return t.tag===5||t.tag===3||t.tag===4}function hu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||np(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Os(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ur));else if(o!==4&&(t=t.child,t!==null))for(Os(t,e,n),t=t.sibling;t!==null;)Os(t,e,n),t=t.sibling}function zs(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(zs(t,e,n),t=t.sibling;t!==null;)zs(t,e,n),t=t.sibling}var me=null,Qe=!1;function _t(t,e,n){for(n=n.child;n!==null;)op(t,e,n),n=n.sibling}function op(t,e,n){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(ii,n)}catch{}switch(n.tag){case 5:Se||xn(n,e);case 6:var o=me,r=Qe;me=null,_t(t,e,n),me=o,Qe=r,me!==null&&(Qe?(t=me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(Qe?(t=me,n=n.stateNode,t.nodeType===8?qi(t.parentNode,n):t.nodeType===1&&qi(t,n),xo(t)):qi(me,n.stateNode));break;case 4:o=me,r=Qe,me=n.stateNode.containerInfo,Qe=!0,_t(t,e,n),me=o,Qe=r;break;case 0:case 11:case 14:case 15:if(!Se&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var i=r,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&$s(n,e,s),r=r.next}while(r!==o)}_t(t,e,n);break;case 1:if(!Se&&(xn(n,e),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){ie(n,e,u)}_t(t,e,n);break;case 21:_t(t,e,n);break;case 22:n.mode&1?(Se=(o=Se)||n.memoizedState!==null,_t(t,e,n),Se=o):_t(t,e,n);break;default:_t(t,e,n)}}function gu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _g),e.forEach(function(o){var r=Dg.bind(null,t,o);n.has(o)||(n.add(o),o.then(r,r))})}}function Ke(t,e){var n=e.deletions;if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];try{var i=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:me=u.stateNode,Qe=!1;break e;case 3:me=u.stateNode.containerInfo,Qe=!0;break e;case 4:me=u.stateNode.containerInfo,Qe=!0;break e}u=u.return}if(me===null)throw Error(N(160));op(i,s,r),me=null,Qe=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){ie(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rp(e,t),e=e.sibling}function rp(t,e){var n=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ke(e,t),rt(t),o&4){try{go(3,t,t.return),pi(3,t)}catch(T){ie(t,t.return,T)}try{go(5,t,t.return)}catch(T){ie(t,t.return,T)}}break;case 1:Ke(e,t),rt(t),o&512&&n!==null&&xn(n,n.return);break;case 5:if(Ke(e,t),rt(t),o&512&&n!==null&&xn(n,n.return),t.flags&32){var r=t.stateNode;try{Eo(r,"")}catch(T){ie(t,t.return,T)}}if(o&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&wd(r,i),hs(u,s);var d=hs(u,i);for(s=0;s<c.length;s+=2){var f=c[s],m=c[s+1];f==="style"?Pd(r,m):f==="dangerouslySetInnerHTML"?Ad(r,m):f==="children"?Eo(r,m):gl(r,f,m,d)}switch(u){case"input":cs(r,i);break;case"textarea":Id(r,i);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?An(r,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?An(r,!!i.multiple,i.defaultValue,!0):An(r,!!i.multiple,i.multiple?[]:"",!1))}r[Ro]=i}catch(T){ie(t,t.return,T)}}break;case 6:if(Ke(e,t),rt(t),o&4){if(t.stateNode===null)throw Error(N(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(T){ie(t,t.return,T)}}break;case 3:if(Ke(e,t),rt(t),o&4&&n!==null&&n.memoizedState.isDehydrated)try{xo(e.containerInfo)}catch(T){ie(t,t.return,T)}break;case 4:Ke(e,t),rt(t);break;case 13:Ke(e,t),rt(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Yl=se())),o&4&&gu(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Se=(d=Se)||f,Ke(e,t),Se=d):Ke(e,t),rt(t),o&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(D=t,f=t.child;f!==null;){for(m=D=f;D!==null;){switch(p=D,g=p.child,p.tag){case 0:case 11:case 14:case 15:go(4,p,p.return);break;case 1:xn(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){o=p,n=p.return;try{e=o,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(T){ie(o,n,T)}}break;case 5:xn(p,p.return);break;case 22:if(p.memoizedState!==null){yu(m);continue}}g!==null?(g.return=p,D=g):yu(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{r=m.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,c=m.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Rd("display",s))}catch(T){ie(t,t.return,T)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(T){ie(t,t.return,T)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ke(e,t),rt(t),o&4&&gu(t);break;case 21:break;default:Ke(e,t),rt(t)}}function rt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(np(n)){var o=n;break e}n=n.return}throw Error(N(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(Eo(r,""),o.flags&=-33);var i=hu(t);zs(t,i,r);break;case 3:case 4:var s=o.stateNode.containerInfo,u=hu(t);Os(t,u,s);break;default:throw Error(N(161))}}catch(c){ie(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wg(t,e,n){D=t,ip(t)}function ip(t,e,n){for(var o=(t.mode&1)!==0;D!==null;){var r=D,i=r.child;if(r.tag===22&&o){var s=r.memoizedState!==null||or;if(!s){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Se;u=or;var d=Se;if(or=s,(Se=c)&&!d)for(D=r;D!==null;)s=D,c=s.child,s.tag===22&&s.memoizedState!==null?Su(r):c!==null?(c.return=s,D=c):Su(r);for(;i!==null;)D=i,ip(i),i=i.sibling;D=r,or=u,Se=d}vu(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,D=i):vu(t)}}function vu(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Se||pi(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!Se)if(n===null)o.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Ye(e.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&tu(e,i,o);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tu(e,s,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&xo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Se||e.flags&512&&qs(e)}catch(p){ie(e,e.return,p)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function yu(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function Su(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pi(4,e)}catch(c){ie(e,n,c)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var r=e.return;try{o.componentDidMount()}catch(c){ie(e,r,c)}}var i=e.return;try{qs(e)}catch(c){ie(e,i,c)}break;case 5:var s=e.return;try{qs(e)}catch(c){ie(e,s,c)}}}catch(c){ie(e,e.return,c)}if(e===t){D=null;break}var u=e.sibling;if(u!==null){u.return=e.return,D=u;break}D=e.return}}var Ig=Math.ceil,Jr=St.ReactCurrentDispatcher,Wl=St.ReactCurrentOwner,qe=St.ReactCurrentBatchConfig,J=0,de=null,le=null,he=0,Le=0,wn=$t(0),ue=0,Uo=null,ln=0,mi=0,Kl=0,vo=null,Re=null,Yl=0,$n=1/0,ut=null,Wr=!1,Js=null,Ft=null,rr=!1,Rt=null,Kr=0,yo=0,Ws=null,Cr=-1,_r=0;function xe(){return J&6?se():Cr!==-1?Cr:Cr=se()}function Vt(t){return t.mode&1?J&2&&he!==0?he&-he:ug.transition!==null?(_r===0&&(_r=$d()),_r):(t=K,t!==0||(t=window.event,t=t===void 0?16:Yd(t.type)),t):1}function je(t,e,n,o){if(50<yo)throw yo=0,Ws=null,Error(N(185));Vo(t,n,o),(!(J&2)||t!==de)&&(t===de&&(!(J&2)&&(mi|=n),ue===4&&Nt(t,he)),De(t,o),n===1&&J===0&&!(e.mode&1)&&($n=se()+500,ci&&qt()))}function De(t,e){var n=t.callbackNode;uh(t,e);var o=kr(t,t===de?he:0);if(o===0)n!==null&&Aa(n),t.callbackNode=null,t.callbackPriority=0;else if(e=o&-o,t.callbackPriority!==e){if(n!=null&&Aa(n),e===1)t.tag===0?ag(Eu.bind(null,t)):hf(Eu.bind(null,t)),rg(function(){!(J&6)&&qt()}),n=null;else{switch(qd(o)){case 1:n=Tl;break;case 4:n=bd;break;case 16:n=Pr;break;case 536870912:n=Bd;break;default:n=Pr}n=pp(n,sp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sp(t,e){if(Cr=-1,_r=0,J&6)throw Error(N(327));var n=t.callbackNode;if(Dn()&&t.callbackNode!==n)return null;var o=kr(t,t===de?he:0);if(o===0)return null;if(o&30||o&t.expiredLanes||e)e=Yr(t,o);else{e=o;var r=J;J|=2;var i=ap();(de!==t||he!==e)&&(ut=null,$n=se()+500,en(t,e));do try{Rg();break}catch(u){lp(t,u)}while(!0);Ll(),Jr.current=i,J=r,le!==null?e=0:(de=null,he=0,e=ue)}if(e!==0){if(e===2&&(r=Es(t),r!==0&&(o=r,e=Ks(t,r))),e===1)throw n=Uo,en(t,0),Nt(t,o),De(t,se()),n;if(e===6)Nt(t,o);else{if(r=t.current.alternate,!(o&30)&&!Ng(r)&&(e=Yr(t,o),e===2&&(i=Es(t),i!==0&&(o=i,e=Ks(t,i))),e===1))throw n=Uo,en(t,0),Nt(t,o),De(t,se()),n;switch(t.finishedWork=r,t.finishedLanes=o,e){case 0:case 1:throw Error(N(345));case 2:Yt(t,Re,ut);break;case 3:if(Nt(t,o),(o&130023424)===o&&(e=Yl+500-se(),10<e)){if(kr(t,0)!==0)break;if(r=t.suspendedLanes,(r&o)!==o){xe(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=As(Yt.bind(null,t,Re,ut),e);break}Yt(t,Re,ut);break;case 4:if(Nt(t,o),(o&4194240)===o)break;for(e=t.eventTimes,r=-1;0<o;){var s=31-Ze(o);i=1<<s,s=e[s],s>r&&(r=s),o&=~i}if(o=r,o=se()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Ig(o/1960))-o,10<o){t.timeoutHandle=As(Yt.bind(null,t,Re,ut),o);break}Yt(t,Re,ut);break;case 5:Yt(t,Re,ut);break;default:throw Error(N(329))}}}return De(t,se()),t.callbackNode===n?sp.bind(null,t):null}function Ks(t,e){var n=vo;return t.current.memoizedState.isDehydrated&&(en(t,e).flags|=256),t=Yr(t,e),t!==2&&(e=Re,Re=n,e!==null&&Ys(e)),t}function Ys(t){Re===null?Re=t:Re.push.apply(Re,t)}function Ng(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!nt(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nt(t,e){for(e&=~Kl,e&=~mi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ze(e),o=1<<n;t[n]=-1,e&=~o}}function Eu(t){if(J&6)throw Error(N(327));Dn();var e=kr(t,0);if(!(e&1))return De(t,se()),null;var n=Yr(t,e);if(t.tag!==0&&n===2){var o=Es(t);o!==0&&(e=o,n=Ks(t,o))}if(n===1)throw n=Uo,en(t,0),Nt(t,e),De(t,se()),n;if(n===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yt(t,Re,ut),De(t,se()),null}function Ql(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&($n=se()+500,ci&&qt())}}function an(t){Rt!==null&&Rt.tag===0&&!(J&6)&&Dn();var e=J;J|=1;var n=qe.transition,o=K;try{if(qe.transition=null,K=1,t)return t()}finally{K=o,qe.transition=n,J=e,!(J&6)&&qt()}}function Xl(){Le=wn.current,Z(wn)}function en(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,og(n)),le!==null)for(n=le.return;n!==null;){var o=n;switch(kl(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Fr();break;case 3:bn(),Z(ke),Z(Te),bl();break;case 5:Hl(o);break;case 4:bn();break;case 13:Z(ee);break;case 19:Z(ee);break;case 10:Ul(o.type._context);break;case 22:case 23:Xl()}n=n.return}if(de=t,le=t=Gt(t.current,null),he=Le=e,ue=0,Uo=null,Kl=mi=ln=0,Re=vo=null,Zt!==null){for(e=0;e<Zt.length;e++)if(n=Zt[e],o=n.interleaved,o!==null){n.interleaved=null;var r=o.next,i=n.pending;if(i!==null){var s=i.next;i.next=r,o.next=s}n.pending=o}Zt=null}return t}function lp(t,e){do{var n=le;try{if(Ll(),Sr.current=zr,Or){for(var o=te.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}Or=!1}if(sn=0,ce=ae=te=null,ho=!1,Mo=0,Wl.current=null,n===null||n.return===null){ue=1,Uo=e,le=null;break}e:{var i=t,s=n.return,u=n,c=e;if(e=he,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=lu(s);if(g!==null){g.flags&=-257,au(g,s,u,i,e),g.mode&1&&su(i,d,e),e=g,c=d;var S=e.updateQueue;if(S===null){var T=new Set;T.add(c),e.updateQueue=T}else S.add(c);break e}else{if(!(e&1)){su(i,d,e),Zl();break e}c=Error(N(426))}}else if(j&&u.mode&1){var C=lu(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),au(C,s,u,i,e),Ml(Bn(c,u));break e}}i=c=Bn(c,u),ue!==4&&(ue=2),vo===null?vo=[i]:vo.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Of(i,c,e);eu(i,y);break e;case 1:u=c;var v=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ft===null||!Ft.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=zf(i,u,e);eu(i,_);break e}}i=i.return}while(i!==null)}cp(n)}catch(w){e=w,le===n&&n!==null&&(le=n=n.return);continue}break}while(!0)}function ap(){var t=Jr.current;return Jr.current=zr,t===null?zr:t}function Zl(){(ue===0||ue===3||ue===2)&&(ue=4),de===null||!(ln&268435455)&&!(mi&268435455)||Nt(de,he)}function Yr(t,e){var n=J;J|=2;var o=ap();(de!==t||he!==e)&&(ut=null,en(t,e));do try{Ag();break}catch(r){lp(t,r)}while(!0);if(Ll(),J=n,Jr.current=o,le!==null)throw Error(N(261));return de=null,he=0,ue}function Ag(){for(;le!==null;)up(le)}function Rg(){for(;le!==null&&!eh();)up(le)}function up(t){var e=fp(t.alternate,t,Le);t.memoizedProps=t.pendingProps,e===null?cp(t):le=e,Wl.current=null}function cp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Cg(n,e),n!==null){n.flags&=32767,le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ue=6,le=null;return}}else if(n=Tg(n,e,Le),n!==null){le=n;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);ue===0&&(ue=5)}function Yt(t,e,n){var o=K,r=qe.transition;try{qe.transition=null,K=1,Pg(t,e,n,o)}finally{qe.transition=r,K=o}return null}function Pg(t,e,n,o){do Dn();while(Rt!==null);if(J&6)throw Error(N(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ch(t,i),t===de&&(le=de=null,he=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rr||(rr=!0,pp(Pr,function(){return Dn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qe.transition,qe.transition=null;var s=K;K=1;var u=J;J|=4,Wl.current=null,xg(t,n),rp(n,t),Qh(Is),Mr=!!ws,Is=ws=null,t.current=n,wg(n),th(),J=u,K=s,qe.transition=i}else t.current=n;if(rr&&(rr=!1,Rt=t,Kr=r),i=t.pendingLanes,i===0&&(Ft=null),rh(n.stateNode),De(t,se()),e!==null)for(o=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(Wr)throw Wr=!1,t=Js,Js=null,t;return Kr&1&&t.tag!==0&&Dn(),i=t.pendingLanes,i&1?t===Ws?yo++:(yo=0,Ws=t):yo=0,qt(),null}function Dn(){if(Rt!==null){var t=qd(Kr),e=qe.transition,n=K;try{if(qe.transition=null,K=16>t?16:t,Rt===null)var o=!1;else{if(t=Rt,Rt=null,Kr=0,J&6)throw Error(N(331));var r=J;for(J|=4,D=t.current;D!==null;){var i=D,s=i.child;if(D.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(D=d;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:go(8,f,i)}var m=f.child;if(m!==null)m.return=f,D=m;else for(;D!==null;){f=D;var p=f.sibling,g=f.return;if(tp(f),f===d){D=null;break}if(p!==null){p.return=g,D=p;break}D=g}}}var S=i.alternate;if(S!==null){var T=S.child;if(T!==null){S.child=null;do{var C=T.sibling;T.sibling=null,T=C}while(T!==null)}}D=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,D=s;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:go(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,D=y;break e}D=i.return}}var v=t.current;for(D=v;D!==null;){s=D;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,D=E;else e:for(s=v;D!==null;){if(u=D,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:pi(9,u)}}catch(w){ie(u,u.return,w)}if(u===s){D=null;break e}var _=u.sibling;if(_!==null){_.return=u.return,D=_;break e}D=u.return}}if(J=r,qt(),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(ii,t)}catch{}o=!0}return o}finally{K=n,qe.transition=e}}return!1}function Tu(t,e,n){e=Bn(n,e),e=Of(t,e,1),t=Ut(t,e,1),e=xe(),t!==null&&(Vo(t,1,e),De(t,e))}function ie(t,e,n){if(t.tag===3)Tu(t,t,n);else for(;e!==null;){if(e.tag===3){Tu(e,t,n);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ft===null||!Ft.has(o))){t=Bn(n,t),t=zf(e,t,1),e=Ut(e,t,1),t=xe(),e!==null&&(Vo(e,1,t),De(e,t));break}}e=e.return}}function kg(t,e,n){var o=t.pingCache;o!==null&&o.delete(e),e=xe(),t.pingedLanes|=t.suspendedLanes&n,de===t&&(he&n)===n&&(ue===4||ue===3&&(he&130023424)===he&&500>se()-Yl?en(t,0):Kl|=n),De(t,e)}function dp(t,e){e===0&&(t.mode&1?(e=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):e=1);var n=xe();t=gt(t,e),t!==null&&(Vo(t,e,n),De(t,n))}function Mg(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dp(t,n)}function Dg(t,e){var n=0;switch(t.tag){case 13:var o=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(N(314))}o!==null&&o.delete(e),dp(t,n)}var fp;fp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ke.current)Pe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pe=!1,Eg(t,e,n);Pe=!!(t.flags&131072)}else Pe=!1,j&&e.flags&1048576&&gf(e,Hr,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;Tr(t,e),t=e.pendingProps;var r=Vn(e,Te.current);Mn(e,n),r=$l(null,e,o,t,r,n);var i=ql();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Me(o)?(i=!0,Vr(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Vl(e),r.updater=fi,e.stateNode=r,r._reactInternals=e,Us(e,o,t,n),e=Gs(null,e,o,!0,i,n)):(e.tag=0,j&&i&&Pl(e),_e(null,e,r,n),e=e.child),e;case 16:o=e.elementType;e:{switch(Tr(t,e),t=e.pendingProps,r=o._init,o=r(o._payload),e.type=o,r=e.tag=Ug(o),t=Ye(o,t),r){case 0:e=Vs(null,e,o,t,n);break e;case 1:e=du(null,e,o,t,n);break e;case 11:e=uu(null,e,o,t,n);break e;case 14:e=cu(null,e,o,Ye(o.type,t),n);break e}throw Error(N(306,o,""))}return e;case 0:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Ye(o,r),Vs(t,e,o,r,n);case 1:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Ye(o,r),du(t,e,o,r,n);case 3:e:{if(Yf(e),t===null)throw Error(N(387));o=e.pendingProps,i=e.memoizedState,r=i.element,Cf(t,e),$r(e,o,null,n);var s=e.memoizedState;if(o=s.element,i.isDehydrated)if(i={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Bn(Error(N(423)),e),e=fu(t,e,o,n,r);break e}else if(o!==r){r=Bn(Error(N(424)),e),e=fu(t,e,o,n,r);break e}else for(Ue=Lt(e.stateNode.containerInfo.firstChild),Fe=e,j=!0,Xe=null,n=Ef(e,null,o,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gn(),o===r){e=vt(t,e,n);break e}_e(t,e,o,n)}e=e.child}return e;case 5:return _f(e),t===null&&Ms(e),o=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,s=r.children,Ns(o,r)?s=null:i!==null&&Ns(o,i)&&(e.flags|=32),Kf(t,e),_e(t,e,s,n),e.child;case 6:return t===null&&Ms(e),null;case 13:return Qf(t,e,n);case 4:return Gl(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=Hn(e,null,o,n):_e(t,e,o,n),e.child;case 11:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Ye(o,r),uu(t,e,o,r,n);case 7:return _e(t,e,e.pendingProps,n),e.child;case 8:return _e(t,e,e.pendingProps.children,n),e.child;case 12:return _e(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(o=e.type._context,r=e.pendingProps,i=e.memoizedProps,s=r.value,Q(br,o._currentValue),o._currentValue=s,i!==null)if(nt(i.value,s)){if(i.children===r.children&&!ke.current){e=vt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){s=i.child;for(var c=u.firstContext;c!==null;){if(c.context===o){if(i.tag===1){c=pt(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ds(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(N(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ds(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}_e(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,o=e.pendingProps.children,Mn(e,n),r=ze(r),o=o(r),e.flags|=1,_e(t,e,o,n),e.child;case 14:return o=e.type,r=Ye(o,e.pendingProps),r=Ye(o.type,r),cu(t,e,o,r,n);case 15:return Jf(t,e,e.type,e.pendingProps,n);case 17:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Ye(o,r),Tr(t,e),e.tag=1,Me(o)?(t=!0,Vr(e)):t=!1,Mn(e,n),qf(e,o,r),Us(e,o,r,n),Gs(null,e,o,!0,t,n);case 19:return Xf(t,e,n);case 22:return Wf(t,e,n)}throw Error(N(156,e.tag))};function pp(t,e){return Hd(t,e)}function Lg(t,e,n,o){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $e(t,e,n,o){return new Lg(t,e,n,o)}function jl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ug(t){if(typeof t=="function")return jl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yl)return 11;if(t===Sl)return 14}return 2}function Gt(t,e){var n=t.alternate;return n===null?(n=$e(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xr(t,e,n,o,r,i){var s=2;if(o=t,typeof t=="function")jl(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case hn:return tn(n.children,r,i,e);case vl:s=8,r|=8;break;case is:return t=$e(12,n,e,r|2),t.elementType=is,t.lanes=i,t;case ss:return t=$e(13,n,e,r),t.elementType=ss,t.lanes=i,t;case ls:return t=$e(19,n,e,r),t.elementType=ls,t.lanes=i,t;case Cd:return hi(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ed:s=10;break e;case Td:s=9;break e;case yl:s=11;break e;case Sl:s=14;break e;case xt:s=16,o=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=$e(s,n,e,r),e.elementType=t,e.type=o,e.lanes=i,e}function tn(t,e,n,o){return t=$e(7,t,o,e),t.lanes=n,t}function hi(t,e,n,o){return t=$e(22,t,o,e),t.elementType=Cd,t.lanes=n,t.stateNode={isHidden:!1},t}function Xi(t,e,n){return t=$e(6,t,null,e),t.lanes=n,t}function Zi(t,e,n){return e=$e(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Fg(t,e,n,o,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mi(0),this.expirationTimes=Mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ea(t,e,n,o,r,i,s,u,c){return t=new Fg(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=$e(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vl(i),t}function Vg(t,e,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mn,key:o==null?null:""+o,children:t,containerInfo:e,implementation:n}}function mp(t){if(!t)return bt;t=t._reactInternals;e:{if(cn(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Me(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var n=t.type;if(Me(n))return mf(t,n,e)}return e}function hp(t,e,n,o,r,i,s,u,c){return t=ea(n,o,!0,t,r,i,s,u,c),t.context=mp(null),n=t.current,o=xe(),r=Vt(n),i=pt(o,r),i.callback=e??null,Ut(n,i,r),t.current.lanes=r,Vo(t,r,o),De(t,o),t}function gi(t,e,n,o){var r=e.current,i=xe(),s=Vt(r);return n=mp(n),e.context===null?e.context=n:e.pendingContext=n,e=pt(i,s),e.payload={element:t},o=o===void 0?null:o,o!==null&&(e.callback=o),t=Ut(r,e,s),t!==null&&(je(t,r,s,i),yr(t,r,s)),s}function Qr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ta(t,e){Cu(t,e),(t=t.alternate)&&Cu(t,e)}function Gg(){return null}var gp=typeof reportError=="function"?reportError:function(t){console.error(t)};function na(t){this._internalRoot=t}vi.prototype.render=na.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));gi(t,e,null,null)};vi.prototype.unmount=na.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;an(function(){gi(null,t,null,null)}),e[ht]=null}};function vi(t){this._internalRoot=t}vi.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<It.length&&e!==0&&e<It[n].priority;n++);It.splice(n,0,t),n===0&&Kd(t)}};function oa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _u(){}function Hg(t,e,n,o,r){if(r){if(typeof o=="function"){var i=o;o=function(){var d=Qr(s);i.call(d)}}var s=hp(e,o,t,0,null,!1,!1,"",_u);return t._reactRootContainer=s,t[ht]=s.current,No(t.nodeType===8?t.parentNode:t),an(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof o=="function"){var u=o;o=function(){var d=Qr(c);u.call(d)}}var c=ea(t,0,!1,null,null,!1,!1,"",_u);return t._reactRootContainer=c,t[ht]=c.current,No(t.nodeType===8?t.parentNode:t),an(function(){gi(e,c,n,o)}),c}function Si(t,e,n,o,r){var i=n._reactRootContainer;if(i){var s=i;if(typeof r=="function"){var u=r;r=function(){var c=Qr(s);u.call(c)}}gi(e,s,t,r)}else s=Hg(n,e,t,r,o);return Qr(s)}Od=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=so(e.pendingLanes);n!==0&&(Cl(e,n|1),De(e,se()),!(J&6)&&($n=se()+500,qt()))}break;case 13:an(function(){var o=gt(t,1);if(o!==null){var r=xe();je(o,t,1,r)}}),ta(t,1)}};_l=function(t){if(t.tag===13){var e=gt(t,134217728);if(e!==null){var n=xe();je(e,t,134217728,n)}ta(t,134217728)}};zd=function(t){if(t.tag===13){var e=Vt(t),n=gt(t,e);if(n!==null){var o=xe();je(n,t,e,o)}ta(t,e)}};Jd=function(){return K};Wd=function(t,e){var n=K;try{return K=t,e()}finally{K=n}};vs=function(t,e,n){switch(e){case"input":if(cs(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var o=n[e];if(o!==t&&o.form===t.form){var r=ui(o);if(!r)throw Error(N(90));xd(o),cs(o,r)}}}break;case"textarea":Id(t,n);break;case"select":e=n.value,e!=null&&An(t,!!n.multiple,e,!1)}};Dd=Ql;Ld=an;var bg={usingClientEntryPoint:!1,Events:[Ho,Sn,ui,kd,Md,Ql]},no={findFiberByHostInstance:Xt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bg={bundleType:no.bundleType,version:no.version,rendererPackageName:no.rendererPackageName,rendererConfig:no.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:St.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vd(t),t===null?null:t.stateNode},findFiberByHostInstance:no.findFiberByHostInstance||Gg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ir=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ir.isDisabled&&ir.supportsFiber)try{ii=ir.inject(Bg),lt=ir}catch{}}Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bg;Ge.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oa(e))throw Error(N(200));return Vg(t,e,null,n)};Ge.createRoot=function(t,e){if(!oa(t))throw Error(N(299));var n=!1,o="",r=gp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=ea(t,1,!1,null,null,n,!1,o,r),t[ht]=e.current,No(t.nodeType===8?t.parentNode:t),new na(e)};Ge.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=Vd(e),t=t===null?null:t.stateNode,t};Ge.flushSync=function(t){return an(t)};Ge.hydrate=function(t,e,n){if(!yi(e))throw Error(N(200));return Si(null,t,e,!0,n)};Ge.hydrateRoot=function(t,e,n){if(!oa(t))throw Error(N(405));var o=n!=null&&n.hydratedSources||null,r=!1,i="",s=gp;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=hp(e,null,t,1,n??null,r,!1,i,s),t[ht]=e.current,No(t),o)for(t=0;t<o.length;t++)n=o[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new vi(e)};Ge.render=function(t,e,n){if(!yi(e))throw Error(N(200));return Si(null,t,e,!1,n)};Ge.unmountComponentAtNode=function(t){if(!yi(t))throw Error(N(40));return t._reactRootContainer?(an(function(){Si(null,null,t,!1,function(){t._reactRootContainer=null,t[ht]=null})}),!0):!1};Ge.unstable_batchedUpdates=Ql;Ge.unstable_renderSubtreeIntoContainer=function(t,e,n,o){if(!yi(n))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return Si(t,e,n,!1,o)};Ge.version="18.3.1-next-f1338f8080-20240426";function vp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vp)}catch(t){console.error(t)}}vp(),gd.exports=Ge;var $g=gd.exports,xu=$g;os.createRoot=xu.createRoot,os.hydrateRoot=xu.hydrateRoot;let sr;const qg=new Uint8Array(16);function Og(){if(!sr&&(sr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!sr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sr(qg)}const pe=[];for(let t=0;t<256;++t)pe.push((t+256).toString(16).slice(1));function zg(t,e=0){return pe[t[e+0]]+pe[t[e+1]]+pe[t[e+2]]+pe[t[e+3]]+"-"+pe[t[e+4]]+pe[t[e+5]]+"-"+pe[t[e+6]]+pe[t[e+7]]+"-"+pe[t[e+8]]+pe[t[e+9]]+"-"+pe[t[e+10]]+pe[t[e+11]]+pe[t[e+12]]+pe[t[e+13]]+pe[t[e+14]]+pe[t[e+15]]}const Jg=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wu={randomUUID:Jg};function ji(t,e,n){if(wu.randomUUID&&!t)return wu.randomUUID();t=t||{};const o=t.random||(t.rng||Og)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,zg(o)}const yp=b.createContext(void 0),Wg=({children:t})=>{const[e,n]=b.useState(""),[o,r]=b.useState(""),[i,s]=b.useState([]),[u,c]=b.useState("webtoon"),[d,f]=b.useState("16:9"),[m,p]=b.useState([]),[g,S]=b.useState([]),[T,C]=b.useState([]),[y,v]=b.useState(!0),[E,_]=b.useState(null);b.useEffect(()=>{if(i.length>0){const O=i.map(F=>`[${F.title}]
${F.content}`).join(`

`);r(O)}},[i]),b.useEffect(()=>{const O=localStorage.getItem("sb_api_key");O&&n(O);const F=localStorage.getItem("sb_project_data");if(F)try{const U=JSON.parse(F);r(U.script||""),U.scriptSegments&&U.scriptSegments.length>0?s(U.scriptSegments):U.script&&!U.scriptSegments&&s([{id:ji(),title:" ",content:U.script}]),c(U.selectedStyle||"webtoon"),p(U.scenes||[]),S(U.characters||[]),C(U.referenceImages||[]),U.globalAspectRatio&&f(U.globalAspectRatio)}catch(U){console.error("Failed to load project data",U)}},[]);const w=O=>{r(O),i.length===0&&s([{id:ji(),title:" ",content:O}])},x=(O,F)=>{const U={id:ji(),title:O,content:F};s(G=>[...G,U])},I=O=>{s(F=>F.filter(U=>U.id!==O))},A=(O,F)=>{s(U=>U.map(G=>G.id===O?{...G,content:F}:G))},P=()=>{s([]),r("")},k=()=>{const O=m.map(R=>({...R,generatedImageUrl:void 0})),F=g.map(R=>({...R,actions:R.actions.map(V=>({...V,generatedImageUrl:void 0}))})),U=T.map(R=>({...R,imageUrl:void 0})),G=JSON.stringify({script:o,scriptSegments:i,selectedStyle:u,scenes:O,characters:F,referenceImages:U,globalAspectRatio:d});try{localStorage.setItem("sb_project_data",G)}catch{console.warn("Still hitting storage limits, even with text only. Project might be too large.")}};b.useEffect(()=>{const O=setTimeout(k,2e3);return()=>clearTimeout(O)},[o,i,u,m,g,T,d]),b.useEffect(()=>{e&&localStorage.setItem("sb_api_key",e)},[e]);const L=()=>{r(""),s([]),p([]),S([]),C([]),localStorage.removeItem("sb_project_data"),Y(" .","success")},Y=(O,F="success")=>{_({message:O,type:F})},q=()=>_(null);return h.jsx(yp.Provider,{value:{apiKey:e,setApiKey:n,script:o,setScript:w,scriptSegments:i,addScriptSegment:x,removeScriptSegment:I,updateScriptSegment:A,clearScriptSegments:P,selectedStyle:u,setSelectedStyle:c,globalAspectRatio:d,setGlobalAspectRatio:f,scenes:m,setScenes:p,characters:g,setCharacters:S,referenceImages:T,setReferenceImages:C,isContinuityMode:y,setIsContinuityMode:v,saveProject:k,resetProject:L,toast:E,showToast:Y,closeToast:q},children:t})},Et=()=>{const t=b.useContext(yp);if(!t)throw new Error("useProject must be used within a ProjectProvider");return t};var Kg={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Yg,Qg;function Xg(){return{geminiUrl:Yg,vertexUrl:Qg}}function Zg(t,e,n,o){var r,i;if(!(t!=null&&t.baseUrl)){const s=Xg();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(i=s.geminiUrl)!==null&&i!==void 0?i:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tt{}function M(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function a(t,e,n){for(let i=0;i<e.length-1;i++){const s=e[i];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];a(f,e.slice(i+1),n[d])}else for(const d of c)a(d,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];a(c[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(u=>l(u,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function jg(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),i=o.split("."),s=new Set;let u=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){u=c;break}if(u!==-1&&i.length>u)for(let c=u;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Qs(t,r,i,0,s)}}function Qs(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const i=e[o];if(i.endsWith("[]")){const s=i.slice(0,-2),u=t;if(s in u&&Array.isArray(u[s]))for(const c of u[s])Qs(c,e,n,o+1,r)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,u=Object.keys(s).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(const d of u)c[d]=s[d];for(const[d,f]of Object.entries(c)){const m=[];for(const p of n.slice(o))p==="*"?m.push(d):m.push(p);a(s,m,f)}for(const d of u)delete s[d]}}else{const s=t;i in s&&Qs(s[i],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ra(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ev(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["operationName"],n);const o=l(t,["resourceName"]);return o!=null&&a(e,["_url","resourceName"],o),e}function tv(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],ov(s)),e}function nv(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],rv(s)),e}function ov(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>iv(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function rv(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>sv(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function iv(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],fv(n)),e}function sv(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],pv(n)),e}function lv(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function av(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function uv(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],cv(s)),e}function cv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function Sp(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],dv(s)),e}function dv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function fv(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],ra(o));const r=l(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function pv(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],ra(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Iu;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Iu||(Iu={}));var Nu;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Nu||(Nu={}));var Au;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Au||(Au={}));var Pt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Pt||(Pt={}));var Ru;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ru||(Ru={}));var Pu;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Pu||(Pu={}));var ku;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ku||(ku={}));var Mu;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Mu||(Mu={}));var Du;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Du||(Du={}));var Lu;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Lu||(Lu={}));var Uu;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Uu||(Uu={}));var Fu;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Fu||(Fu={}));var Vu;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Vu||(Vu={}));var Gu;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Gu||(Gu={}));var Hu;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Hu||(Hu={}));var bu;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(bu||(bu={}));var Bu;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Bu||(Bu={}));var $u;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})($u||($u={}));var qu;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(qu||(qu={}));var Xr;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Xr||(Xr={}));var Ou;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ou||(Ou={}));var zu;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(zu||(zu={}));var Ju;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ju||(Ju={}));var Xs;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xs||(Xs={}));var Wu;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Wu||(Wu={}));var Ku;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ku||(Ku={}));var Yu;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Yu||(Yu={}));var Qu;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Qu||(Qu={}));var Xu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Xu||(Xu={}));var Zu;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Zu||(Zu={}));var ju;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ju||(ju={}));var ec;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(ec||(ec={}));var tc;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(tc||(tc={}));var nc;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(nc||(nc={}));var oc;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(oc||(oc={}));var rc;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(rc||(rc={}));var ic;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ic||(ic={}));var sc;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(sc||(sc={}));var lc;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(lc||(lc={}));var ac;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ac||(ac={}));var uc;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(uc||(uc={}));var cc;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(cc||(cc={}));var dc;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(dc||(dc={}));var fc;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(fc||(fc={}));var pc;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(pc||(pc={}));var mc;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(mc||(mc={}));var hc;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(hc||(hc={}));var gc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(gc||(gc={}));var vc;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(vc||(vc={}));var yc;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(yc||(yc={}));var Sc;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Sc||(Sc={}));var Ec;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Ec||(Ec={}));var Tc;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Tc||(Tc={}));var Cc;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Cc||(Cc={}));var _c;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(_c||(_c={}));var In;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(In||(In={}));class Zs{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class oo{get text(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const m=[];for(const p of(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[g,S]of Object.entries(p))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(S!==null||S!==void 0)&&m.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const m of(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[p,g]of Object.entries(m))p!=="inlineData"&&(g!==null||g!==void 0)&&f.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,o,r,i,s,u,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,o,r,i,s,u,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class xc{}class wc{}class mv{}class hv{}class gv{}class vv{}class Ic{}class Nc{}class Ac{}class yv{}class Zr{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Zr;let r;const i=e;return n?r=nv(i):r=tv(i),Object.assign(o,r),o}}class Rc{}class Pc{}class kc{}class Mc{}class Sv{}class Ev{}class Tv{}class ia{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new ia,i=uv(e);return Object.assign(o,i),o}}class Cv{}class _v{}class xv{}class Dc{}class wv{get text(){var e,n,o;let r="",i=!1;const s=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,r+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,n,o;let r="";const i=[];for(const s of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&i.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Iv{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class sa{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new sa,i=Sp(e);return Object.assign(o,i),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Ep(t,e){const n=W(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Tp(t){return Array.isArray(t)?t.map(e=>jr(e)):[jr(t)]}function jr(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Cp(t){const e=jr(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _p(t){const e=jr(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Lc(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function xp(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Lc(e)):[Lc(t)]}function js(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Uc(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Fc(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ee(t){if(t==null)throw new Error("ContentUnion is required");return js(t)?t:{role:"user",parts:xp(t)}}function la(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=Ee(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=Ee(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ee(n)):[Ee(e)]}function Oe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Uc(t)||Fc(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ee(t)]}const e=[],n=[],o=js(t[0]);for(const r of t){const i=js(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(r);else{if(Uc(r)||Fc(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:xp(n)}),e}function Nv(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Pt).includes(n[0].toUpperCase())?n[0].toUpperCase():Pt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Pt).includes(o.toUpperCase())?o.toUpperCase():Pt.TYPE_UNSPECIFIED})}}function Ln(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&Nv(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Pt).includes(u.toUpperCase())?u.toUpperCase():Pt.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Ln(u);else if(o.includes(s)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(Ln(d))}e[s]=c}else if(r.includes(s)){const c={};for(const[d,f]of Object.entries(u))c[d]=Ln(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function aa(t){return Ln(t)}function ua(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ca(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Jn(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ln(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ln(e.response));return t}function Wn(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Av(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Ct(t,e){if(typeof e!="string")throw new Error("name must be a string");return Av(t,e,"cachedContents")}function wp(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ot(t){return ra(t)}function Rv(t){return t!=null&&typeof t=="object"&&"name"in t}function Pv(t){return t!=null&&typeof t=="object"&&"video"in t}function kv(t){return t!=null&&typeof t=="object"&&"uri"in t}function Ip(t){var e;let n;if(Rv(t)&&(n=t.name),!(kv(t)&&(n=t.uri,n===void 0))&&!(Pv(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Np(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Ap(t){for(const e of["models","tunedModels","publisherModels"])if(Mv(t,e))return t[e];return[]}function Mv(t,e){return t!==null&&typeof t=="object"&&e in t}function Dv(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Lv(t,e={}){const n=[],o=new Set;for(const r of t){const i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const s=Dv(r,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Rp(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Uv(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Pp(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let i=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Kn(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function kp(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fv(t){const e={},n=l(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);const o=l(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>gy(s))),a(e,["inlinedResponses"],i)}const r=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["inlinedEmbedContentResponses"],i)}return e}function Vv(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);const o=l(t,["gcsDestination","outputUriPrefix"]);o!=null&&a(e,["gcsUri"],o);const r=l(t,["bigqueryDestination","outputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function Gv(t){const e={},n=l(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);const o=l(t,["gcsUri"]);o!=null&&a(e,["gcsDestination","outputUriPrefix"],o);const r=l(t,["bigqueryUri"]);if(r!=null&&a(e,["bigqueryDestination","outputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function wr(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata","displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["metadata","state"]);r!=null&&a(e,["state"],kp(r));const i=l(t,["metadata","createTime"]);i!=null&&a(e,["createTime"],i);const s=l(t,["metadata","endTime"]);s!=null&&a(e,["endTime"],s);const u=l(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const c=l(t,["metadata","model"]);c!=null&&a(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&a(e,["dest"],Fv(Pp(d))),e}function el(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["state"]);r!=null&&a(e,["state"],kp(r));const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(e,["startTime"],u);const c=l(t,["endTime"]);c!=null&&a(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(e,["updateTime"],d);const f=l(t,["model"]);f!=null&&a(e,["model"],f);const m=l(t,["inputConfig"]);m!=null&&a(e,["src"],Hv(m));const p=l(t,["outputConfig"]);p!=null&&a(e,["dest"],Vv(Pp(p)));const g=l(t,["completionStats"]);return g!=null&&a(e,["completionStats"],g),e}function Hv(t){const e={},n=l(t,["instancesFormat"]);n!=null&&a(e,["format"],n);const o=l(t,["gcsSource","uris"]);o!=null&&a(e,["gcsUri"],o);const r=l(t,["bigquerySource","inputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function bv(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=l(e,["fileName"]);o!=null&&a(n,["fileName"],o);const r=l(e,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>hy(t,s))),a(n,["requests","requests"],i)}return n}function Bv(t){const e={},n=l(t,["format"]);n!=null&&a(e,["instancesFormat"],n);const o=l(t,["gcsUri"]);o!=null&&a(e,["gcsSource","uris"],o);const r=l(t,["bigqueryUri"]);if(r!=null&&a(e,["bigquerySource","inputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function $v(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function qv(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Kn(t,o)),n}function Ov(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Kn(t,o)),n}function zv(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const o=l(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],Jv(o));const r=l(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=l(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&a(e,["avgLogprobs"],s);const u=l(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=l(t,["index"]);c!=null&&a(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),a(e,["safetyRatings"],p)}const m=l(t,["urlContextMetadata"]);return m!=null&&a(e,["urlContextMetadata"],m),e}function Jv(t){const e={},n=l(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function Mp(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>_y(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function Wv(t,e){const n={},o=l(t,["displayName"]);if(e!==void 0&&o!=null&&a(e,["batch","displayName"],o),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Kv(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["dest"]);return e!==void 0&&r!=null&&a(e,["outputConfig"],Gv(Uv(r))),n}function Vc(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["src"]);r!=null&&a(n,["batch","inputConfig"],bv(t,Rp(t,r)));const i=l(e,["config"]);return i!=null&&Wv(i,n),n}function Yv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],W(t,o));const r=l(e,["src"]);r!=null&&a(n,["inputConfig"],Bv(Rp(t,r)));const i=l(e,["config"]);return i!=null&&Kv(i,n),n}function Qv(t,e){const n={},o=l(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["batch","displayName"],o),n}function Xv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["src"]);r!=null&&a(n,["batch","inputConfig"],ry(t,r));const i=l(e,["config"]);return i!=null&&Qv(i,n),n}function Zv(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Kn(t,o)),n}function jv(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Kn(t,o)),n}function ey(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);return i!=null&&a(e,["error"],i),e}function ty(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);return i!=null&&a(e,["error"],i),e}function ny(t,e){const n={},o=l(e,["contents"]);if(o!=null){let i=la(t,o);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["requests[]","request","content"],i)}const r=l(e,["config"]);return r!=null&&(a(n,["_self"],oy(r,n)),jg(n,{"requests[].*":"requests[].request.*"})),n}function oy(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ry(t,e){const n={},o=l(e,["fileName"]);o!=null&&a(n,["file_name"],o);const r=l(e,["inlinedRequests"]);return r!=null&&a(n,["requests"],ny(t,r)),n}function iy(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function sy(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ly(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const o=l(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ay(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Mp(Ee(r)));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const m=l(e,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const p=l(e,["logprobs"]);p!=null&&a(o,["logprobs"],p);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const S=l(e,["frequencyPenalty"]);S!=null&&a(o,["frequencyPenalty"],S);const T=l(e,["seed"]);T!=null&&a(o,["seed"],T);const C=l(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&a(o,["responseSchema"],aa(y));const v=l(e,["responseJsonSchema"]);if(v!=null&&a(o,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=l(e,["safetySettings"]);if(n!==void 0&&E!=null){let q=E;Array.isArray(q)&&(q=q.map(O=>xy(O))),a(n,["safetySettings"],q)}const _=l(e,["tools"]);if(n!==void 0&&_!=null){let q=Wn(_);Array.isArray(q)&&(q=q.map(O=>Iy(Jn(O)))),a(n,["tools"],q)}const w=l(e,["toolConfig"]);if(n!==void 0&&w!=null&&a(n,["toolConfig"],wy(w)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=l(e,["cachedContent"]);n!==void 0&&x!=null&&a(n,["cachedContent"],Ct(t,x));const I=l(e,["responseModalities"]);I!=null&&a(o,["responseModalities"],I);const A=l(e,["mediaResolution"]);A!=null&&a(o,["mediaResolution"],A);const P=l(e,["speechConfig"]);if(P!=null&&a(o,["speechConfig"],ua(P)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=l(e,["thinkingConfig"]);k!=null&&a(o,["thinkingConfig"],k);const L=l(e,["imageConfig"]);L!=null&&a(o,["imageConfig"],my(L));const Y=l(e,["enableEnhancedCivicAnswers"]);return Y!=null&&a(o,["enableEnhancedCivicAnswers"],Y),o}function uy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>zv(d))),a(e,["candidates"],c)}const r=l(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=l(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function cy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Kn(t,o)),n}function dy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Kn(t,o)),n}function fy(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function py(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function my(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function hy(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["request","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let u=Oe(r);Array.isArray(u)&&(u=u.map(c=>Mp(c))),a(n,["request","contents"],u)}const i=l(e,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(e,["config"]);return s!=null&&a(n,["request","generationConfig"],ay(t,s,l(n,["request"],{}))),n}function gy(t){const e={},n=l(t,["response"]);n!=null&&a(e,["response"],uy(n));const o=l(t,["error"]);return o!=null&&a(e,["error"],o),e}function vy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);if(e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function yy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const i=l(t,["filter"]);return e!==void 0&&i!=null&&a(e,["_query","filter"],i),n}function Sy(t){const e={},n=l(t,["config"]);return n!=null&&vy(n,e),e}function Ey(t){const e={},n=l(t,["config"]);return n!=null&&yy(n,e),e}function Ty(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>wr(s))),a(e,["batchJobs"],i)}return e}function Cy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>el(s))),a(e,["batchJobs"],i)}return e}function _y(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],iy(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],sy(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],$v(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const m=l(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const p=l(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function xy(t){const e={},n=l(t,["category"]);if(n!=null&&a(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=l(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function wy(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],ly(n));const o=l(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function Iy(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],fy(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],py(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yt;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(yt||(yt={}));class dn{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ny extends Tt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new dn(yt.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Vc(this.apiClient,e),o=n._url,r=M("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const m=Object.assign({},f);if(m.systemInstruction){const p=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=p,m.request=g}d.push(m)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(s)o.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Yv(this.apiClient,e);return u=M("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>el(f))}else{const d=Vc(this.apiClient,e);return u=M("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>wr(f))}}async createEmbeddingsInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Xv(this.apiClient,e);return i=M("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>wr(c))}}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=dy(this.apiClient,e);return u=M("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>el(f))}else{const d=cy(this.apiClient,e);return u=M("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>wr(f))}}async cancel(e){var n,o,r,i;let s="",u={};if(this.apiClient.isVertexAI()){const c=Ov(this.apiClient,e);s=M("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=qv(this.apiClient,e);s=M("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Ey(e);return u=M("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=Cy(f),p=new Dc;return Object.assign(p,m),p})}else{const d=Sy(e);return u=M("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=Ty(f),p=new Dc;return Object.assign(p,m),p})}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=jv(this.apiClient,e);return u=M("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>ty(f))}else{const d=Zv(this.apiClient,e);return u=M("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>ey(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ay(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Gc(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Xy(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function Ry(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let f=Oe(s);Array.isArray(f)&&(f=f.map(m=>Gc(m))),a(e,["contents"],f)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Gc(Ee(u)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>jy(m))),a(e,["tools"],f)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&a(e,["toolConfig"],Zy(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Py(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let m=Oe(s);Array.isArray(m)&&(m=m.map(p=>p)),a(e,["contents"],m)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Ee(u));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>e0(p))),a(e,["tools"],m)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&a(e,["toolConfig"],d);const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&a(e,["encryption_spec","kmsKeyName"],f),n}function ky(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],Ep(t,o));const r=l(e,["config"]);return r!=null&&Ry(r,n),n}function My(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],Ep(t,o));const r=l(e,["config"]);return r!=null&&Py(r,n),n}function Dy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ct(t,o)),n}function Ly(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ct(t,o)),n}function Uy(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Fy(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Vy(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Gy(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Hy(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const o=l(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function by(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function By(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ct(t,o)),n}function $y(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Ct(t,o)),n}function qy(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Oy(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function zy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function Jy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function Wy(t){const e={},n=l(t,["config"]);return n!=null&&zy(n,e),e}function Ky(t){const e={},n=l(t,["config"]);return n!=null&&Jy(n,e),e}function Yy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["cachedContents"],i)}return e}function Qy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["cachedContents"],i)}return e}function Xy(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],Vy(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],Gy(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],Ay(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const m=l(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const p=l(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function Zy(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],Hy(n));const o=l(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function jy(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],qy(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],Oy(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function e0(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>by(p))),a(e,["functionDeclarations"],m)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function t0(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function n0(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function o0(t,e){const n={},o=l(e,["name"]);o!=null&&a(n,["_url","name"],Ct(t,o));const r=l(e,["config"]);return r!=null&&t0(r,n),n}function r0(t,e){const n={},o=l(e,["name"]);o!=null&&a(n,["_url","name"],Ct(t,o));const r=l(e,["config"]);return r!=null&&n0(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i0 extends Tt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new dn(yt.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=My(this.apiClient,e);return u=M("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=ky(this.apiClient,e);return u=M("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=$y(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=By(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Ly(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=Fy(f),p=new kc;return Object.assign(p,m),p})}else{const d=Dy(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=Uy(f),p=new kc;return Object.assign(p,m),p})}}async update(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=r0(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=o0(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Ky(e);return u=M("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=Qy(f),p=new Mc;return Object.assign(p,m),p})}else{const d=Wy(e);return u=M("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=Yy(f),p=new Mc;return Object.assign(p,m),p})}}}function ei(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function Hc(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function B(t){return this instanceof B?(this.v=t,this):new B(t)}function et(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(S){return Promise.resolve(S).then(g,m)}}function u(g,S){o[g]&&(r[g]=function(T){return new Promise(function(C,y){i.push([g,T,C,y])>1||c(g,T)})},S&&(r[g]=S(r[g])))}function c(g,S){try{d(o[g](S))}catch(T){p(i[0][3],T)}}function d(g){g.value instanceof B?Promise.resolve(g.value.v).then(f,m):p(i[0][2],g)}function f(g){c("next",g)}function m(g){c("throw",g)}function p(g,S){g(S),i.shift(),i.length&&c(i[0][0],i[0][1])}}function tt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Hc=="function"?Hc(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=t[i]&&function(s){return new Promise(function(u,c){s=t[i](s),r(u,c,s.done,s.value)})}}function r(i,s,u,c){Promise.resolve(c).then(function(d){i({value:d,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s0(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Dp(n)}function Dp(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function l0(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bc(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let i=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),i&&!Dp(t[o])&&(i=!1),o++;i?e.push(...r):e.pop()}return e}class a0{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new u0(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class u0{constructor(e,n,o,r={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),l0(i)}async sendMessage(e){var n;await this.sendPromise;const o=Ee(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,u;const c=await r,d=(s=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];f!=null&&(p=(u=f.slice(m))!==null&&u!==void 0?u:[]);const g=d?[d]:[];this.recordHistory(o,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=Ee(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,o)}getHistory(e=!1){const n=e?bc(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return et(this,arguments,function*(){var r,i,s,u,c,d;const f=[];try{for(var m=!0,p=tt(e),g;g=yield B(p.next()),r=g.done,!r;m=!0){u=g.value,m=!1;const S=u;if(s0(S)){const T=(d=(c=S.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;T!==void 0&&f.push(T)}yield yield B(S)}}catch(S){i={error:S}}finally{try{!m&&!r&&(s=p.return)&&(yield B(s.call(p)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...bc(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ei extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ei.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c0(t){const e={},n=l(t,["file"]);return n!=null&&a(e,["file"],n),e}function d0(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function f0(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],Ip(n)),e}function p0(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function m0(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],Ip(n)),e}function h0(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function g0(t){const e={},n=l(t,["config"]);return n!=null&&h0(n,e),e}function v0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y0 extends Tt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new dn(yt.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=g0(e);return i=M("files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=v0(c),f=new Cv;return Object.assign(f,d),f})}}async createInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=c0(e);return i=M("upload/v1beta/files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=d0(c),f=new _v;return Object.assign(f,d),f})}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=m0(e);return i=M("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=f0(e);return i=M("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=p0(c),f=new xv;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ir(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function S0(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>U0(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function E0(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function T0(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C0(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function _0(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=l(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const r=l(t,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const i=l(t,["candidateCount"]);i!=null&&a(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&a(e,["enableAffectiveDialog"],s);const u=l(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=l(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const m=l(t,["presencePenalty"]);m!=null&&a(e,["presencePenalty"],m);const p=l(t,["responseLogprobs"]);p!=null&&a(e,["responseLogprobs"],p);const g=l(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const S=l(t,["responseModalities"]);S!=null&&a(e,["responseModalities"],S);const T=l(t,["responseSchema"]);T!=null&&a(e,["responseSchema"],T);const C=l(t,["routingConfig"]);C!=null&&a(e,["routingConfig"],C);const y=l(t,["seed"]);y!=null&&a(e,["seed"],y);const v=l(t,["speechConfig"]);v!=null&&a(e,["speechConfig"],Lp(v));const E=l(t,["stopSequences"]);E!=null&&a(e,["stopSequences"],E);const _=l(t,["temperature"]);_!=null&&a(e,["temperature"],_);const w=l(t,["thinkingConfig"]);w!=null&&a(e,["thinkingConfig"],w);const x=l(t,["topK"]);x!=null&&a(e,["topK"],x);const I=l(t,["topP"]);if(I!=null&&a(e,["topP"],I),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function x0(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function w0(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function I0(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],ca(m));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","thinkingConfig"],p);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=l(t,["systemInstruction"]);e!==void 0&&S!=null&&a(e,["setup","systemInstruction"],S0(Ee(S)));const T=l(t,["tools"]);if(e!==void 0&&T!=null){let x=Wn(T);Array.isArray(x)&&(x=x.map(I=>V0(Jn(I)))),a(e,["setup","tools"],x)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],F0(C));const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","inputAudioTranscription"],y);const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","outputAudioTranscription"],v);const E=l(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&a(e,["setup","realtimeInputConfig"],E);const _=l(t,["contextWindowCompression"]);e!==void 0&&_!=null&&a(e,["setup","contextWindowCompression"],_);const w=l(t,["proactivity"]);if(e!==void 0&&w!=null&&a(e,["setup","proactivity"],w),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function N0(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],_0(o));const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],Lp(ca(m)));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","thinkingConfig"],p);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=l(t,["systemInstruction"]);e!==void 0&&S!=null&&a(e,["setup","systemInstruction"],Ee(S));const T=l(t,["tools"]);if(e!==void 0&&T!=null){let I=Wn(T);Array.isArray(I)&&(I=I.map(A=>G0(Jn(A)))),a(e,["setup","tools"],I)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],C);const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","inputAudioTranscription"],y);const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","outputAudioTranscription"],v);const E=l(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&a(e,["setup","realtimeInputConfig"],E);const _=l(t,["contextWindowCompression"]);e!==void 0&&_!=null&&a(e,["setup","contextWindowCompression"],_);const w=l(t,["proactivity"]);e!==void 0&&w!=null&&a(e,["setup","proactivity"],w);const x=l(t,["explicitVadSignal"]);return e!==void 0&&x!=null&&a(e,["setup","explicitVadSignal"],x),n}function A0(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],W(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],I0(r,n)),n}function R0(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],W(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],N0(r,n)),n}function P0(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],n),e}function k0(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["weightedPrompts"],o)}return e}function M0(t){const e={},n=l(t,["media"]);if(n!=null){let d=Tp(n);Array.isArray(d)&&(d=d.map(f=>Ir(f))),a(e,["mediaChunks"],d)}const o=l(t,["audio"]);o!=null&&a(e,["audio"],Ir(_p(o)));const r=l(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=l(t,["video"]);i!=null&&a(e,["video"],Ir(Cp(i)));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=l(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function D0(t){const e={},n=l(t,["media"]);if(n!=null){let d=Tp(n);Array.isArray(d)&&(d=d.map(f=>f)),a(e,["mediaChunks"],d)}const o=l(t,["audio"]);o!=null&&a(e,["audio"],_p(o));const r=l(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=l(t,["video"]);i!=null&&a(e,["video"],Cp(i));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=l(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function L0(t){const e={},n=l(t,["setupComplete"]);n!=null&&a(e,["setupComplete"],n);const o=l(t,["serverContent"]);o!=null&&a(e,["serverContent"],o);const r=l(t,["toolCall"]);r!=null&&a(e,["toolCall"],r);const i=l(t,["toolCallCancellation"]);i!=null&&a(e,["toolCallCancellation"],i);const s=l(t,["usageMetadata"]);s!=null&&a(e,["usageMetadata"],H0(s));const u=l(t,["goAway"]);u!=null&&a(e,["goAway"],u);const c=l(t,["sessionResumptionUpdate"]);c!=null&&a(e,["sessionResumptionUpdate"],c);const d=l(t,["voiceActivityDetectionSignal"]);return d!=null&&a(e,["voiceActivityDetectionSignal"],d),e}function U0(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],E0(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],T0(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],Ir(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const m=l(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const p=l(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function F0(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Lp(t){const e={},n=l(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],n);const o=l(t,["languageCode"]);if(o!=null&&a(e,["languageCode"],o),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function V0(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],x0(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],w0(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function G0(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>C0(p))),a(e,["functionDeclarations"],m)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function H0(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const o=l(t,["cachedContentTokenCount"]);o!=null&&a(e,["cachedContentTokenCount"],o);const r=l(t,["candidatesTokenCount"]);r!=null&&a(e,["responseTokenCount"],r);const i=l(t,["toolUsePromptTokenCount"]);i!=null&&a(e,["toolUsePromptTokenCount"],i);const s=l(t,["thoughtsTokenCount"]);s!=null&&a(e,["thoughtsTokenCount"],s);const u=l(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const c=l(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["promptTokensDetails"],g)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["cacheTokensDetails"],g)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["responseTokensDetails"],g)}const m=l(t,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["toolUsePromptTokensDetails"],g)}const p=l(t,["trafficType"]);return p!=null&&a(e,["trafficType"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b0(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function B0(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const o=l(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],$0(o));const r=l(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=l(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&a(e,["avgLogprobs"],s);const u=l(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=l(t,["index"]);c!=null&&a(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),a(e,["safetyRatings"],p)}const m=l(t,["urlContextMetadata"]);return m!=null&&a(e,["urlContextMetadata"],m),e}function $0(t){const e={},n=l(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function q0(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let i=Oe(r);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["contents"],i)}return n}function O0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["tokensInfo"],r)}return e}function z0(t){const e={},n=l(t,["values"]);n!=null&&a(e,["values"],n);const o=l(t,["statistics"]);return o!=null&&a(e,["statistics"],J0(o)),e}function J0(t){const e={},n=l(t,["truncated"]);n!=null&&a(e,["truncated"],n);const o=l(t,["token_count"]);return o!=null&&a(e,["tokenCount"],o),e}function Ti(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>tE(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function W0(t){const e={},n=l(t,["controlType"]);n!=null&&a(e,["controlType"],n);const o=l(t,["enableControlImageComputation"]);return o!=null&&a(e,["computeControl"],o),e}function K0(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Y0(t,e){const n={},o=l(t,["systemInstruction"]);e!==void 0&&o!=null&&a(e,["systemInstruction"],Ee(o));const r=l(t,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>Hp(u))),a(e,["tools"],s)}const i=l(t,["generationConfig"]);return e!==void 0&&i!=null&&a(e,["generationConfig"],bS(i)),n}function Q0(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let s=Oe(r);Array.isArray(s)&&(s=s.map(u=>Ti(u))),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&K0(i),n}function X0(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let s=Oe(r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&Y0(i,n),n}function Z0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["totalTokens"]);o!=null&&a(e,["totalTokens"],o);const r=l(t,["cachedContentTokenCount"]);return r!=null&&a(e,["cachedContentTokenCount"],r),e}function j0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["totalTokens"]);return o!=null&&a(e,["totalTokens"],o),e}function eS(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],W(t,o)),n}function tS(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],W(t,o)),n}function nS(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function oS(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function rS(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const m=l(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&a(e,["parameters","includeSafetyAttributes"],m);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&a(e,["parameters","includeRaiReason"],p);const g=l(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const S=l(t,["outputMimeType"]);e!==void 0&&S!=null&&a(e,["parameters","outputOptions","mimeType"],S);const T=l(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&a(e,["parameters","outputOptions","compressionQuality"],T);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&a(e,["parameters","addWatermark"],C);const y=l(t,["labels"]);e!==void 0&&y!=null&&a(e,["labels"],y);const v=l(t,["editMode"]);e!==void 0&&v!=null&&a(e,["parameters","editMode"],v);const E=l(t,["baseSteps"]);return e!==void 0&&E!=null&&a(e,["parameters","editConfig","baseSteps"],E),n}function iS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["referenceImages"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>lE(c))),a(n,["instances[0]","referenceImages"],u)}const s=l(e,["config"]);return s!=null&&rS(s,n),n}function sS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>Ci(i))),a(e,["generatedImages"],r)}return e}function lS(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function aS(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["instances[]","task_type"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["instances[]","title"],r);const i=l(t,["outputDimensionality"]);e!==void 0&&i!=null&&a(e,["parameters","outputDimensionality"],i);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&a(e,["instances[]","mimeType"],s);const u=l(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function uS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let u=la(t,r);Array.isArray(u)&&(u=u.map(c=>c)),a(n,["requests[]","content"],u)}const i=l(e,["config"]);i!=null&&lS(i,n);const s=l(e,["model"]);return s!==void 0&&a(n,["requests[]","model"],W(t,s)),n}function cS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let s=la(t,r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["instances[]","content"],s)}const i=l(e,["config"]);return i!=null&&aS(i,n),n}function dS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["embeddings"],i)}const r=l(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function fS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions[]","embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>z0(s))),a(e,["embeddings"],i)}const r=l(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function pS(t){const e={},n=l(t,["endpoint"]);n!=null&&a(e,["name"],n);const o=l(t,["deployedModelId"]);return o!=null&&a(e,["deployedModelId"],o),e}function mS(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function hS(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gS(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const o=l(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function vS(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function yS(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Ti(Ee(r)));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const m=l(e,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const p=l(e,["logprobs"]);p!=null&&a(o,["logprobs"],p);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const S=l(e,["frequencyPenalty"]);S!=null&&a(o,["frequencyPenalty"],S);const T=l(e,["seed"]);T!=null&&a(o,["seed"],T);const C=l(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&a(o,["responseSchema"],aa(y));const v=l(e,["responseJsonSchema"]);if(v!=null&&a(o,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=l(e,["safetySettings"]);if(n!==void 0&&E!=null){let q=E;Array.isArray(q)&&(q=q.map(O=>aE(O))),a(n,["safetySettings"],q)}const _=l(e,["tools"]);if(n!==void 0&&_!=null){let q=Wn(_);Array.isArray(q)&&(q=q.map(O=>hE(Jn(O)))),a(n,["tools"],q)}const w=l(e,["toolConfig"]);if(n!==void 0&&w!=null&&a(n,["toolConfig"],mE(w)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=l(e,["cachedContent"]);n!==void 0&&x!=null&&a(n,["cachedContent"],Ct(t,x));const I=l(e,["responseModalities"]);I!=null&&a(o,["responseModalities"],I);const A=l(e,["mediaResolution"]);A!=null&&a(o,["mediaResolution"],A);const P=l(e,["speechConfig"]);if(P!=null&&a(o,["speechConfig"],ua(P)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=l(e,["thinkingConfig"]);k!=null&&a(o,["thinkingConfig"],k);const L=l(e,["imageConfig"]);L!=null&&a(o,["imageConfig"],zS(L));const Y=l(e,["enableEnhancedCivicAnswers"]);return Y!=null&&a(o,["enableEnhancedCivicAnswers"],Y),o}function SS(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Ee(r));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const m=l(e,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const p=l(e,["logprobs"]);p!=null&&a(o,["logprobs"],p);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const S=l(e,["frequencyPenalty"]);S!=null&&a(o,["frequencyPenalty"],S);const T=l(e,["seed"]);T!=null&&a(o,["seed"],T);const C=l(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&a(o,["responseSchema"],aa(y));const v=l(e,["responseJsonSchema"]);v!=null&&a(o,["responseJsonSchema"],v);const E=l(e,["routingConfig"]);E!=null&&a(o,["routingConfig"],E);const _=l(e,["modelSelectionConfig"]);_!=null&&a(o,["modelConfig"],_);const w=l(e,["safetySettings"]);if(n!==void 0&&w!=null){let U=w;Array.isArray(U)&&(U=U.map(G=>G)),a(n,["safetySettings"],U)}const x=l(e,["tools"]);if(n!==void 0&&x!=null){let U=Wn(x);Array.isArray(U)&&(U=U.map(G=>Hp(Jn(G)))),a(n,["tools"],U)}const I=l(e,["toolConfig"]);n!==void 0&&I!=null&&a(n,["toolConfig"],I);const A=l(e,["labels"]);n!==void 0&&A!=null&&a(n,["labels"],A);const P=l(e,["cachedContent"]);n!==void 0&&P!=null&&a(n,["cachedContent"],Ct(t,P));const k=l(e,["responseModalities"]);k!=null&&a(o,["responseModalities"],k);const L=l(e,["mediaResolution"]);L!=null&&a(o,["mediaResolution"],L);const Y=l(e,["speechConfig"]);Y!=null&&a(o,["speechConfig"],Gp(ua(Y)));const q=l(e,["audioTimestamp"]);q!=null&&a(o,["audioTimestamp"],q);const O=l(e,["thinkingConfig"]);O!=null&&a(o,["thinkingConfig"],O);const F=l(e,["imageConfig"]);if(F!=null&&a(o,["imageConfig"],JS(F)),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function Bc(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let s=Oe(r);Array.isArray(s)&&(s=s.map(u=>Ti(u))),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&a(n,["generationConfig"],yS(t,i,n)),n}function $c(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let s=Oe(r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&a(n,["generationConfig"],SS(t,i,n)),n}function qc(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>B0(d))),a(e,["candidates"],c)}const r=l(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=l(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function Oc(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["candidates"],d)}const r=l(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=l(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const s=l(t,["promptFeedback"]);s!=null&&a(e,["promptFeedback"],s);const u=l(t,["responseId"]);u!=null&&a(e,["responseId"],u);const c=l(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function ES(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["aspectRatio"]);e!==void 0&&r!=null&&a(e,["parameters","aspectRatio"],r);const i=l(t,["guidanceScale"]);if(e!==void 0&&i!=null&&a(e,["parameters","guidanceScale"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&a(e,["parameters","safetySetting"],s);const u=l(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&a(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&a(e,["parameters","includeRaiReason"],d);const f=l(t,["language"]);e!==void 0&&f!=null&&a(e,["parameters","language"],f);const m=l(t,["outputMimeType"]);e!==void 0&&m!=null&&a(e,["parameters","outputOptions","mimeType"],m);const p=l(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&a(e,["parameters","outputOptions","compressionQuality"],p),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=l(t,["imageSize"]);if(e!==void 0&&g!=null&&a(e,["parameters","sampleImageSize"],g),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function TS(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const m=l(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&a(e,["parameters","includeSafetyAttributes"],m);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&a(e,["parameters","includeRaiReason"],p);const g=l(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const S=l(t,["outputMimeType"]);e!==void 0&&S!=null&&a(e,["parameters","outputOptions","mimeType"],S);const T=l(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&a(e,["parameters","outputOptions","compressionQuality"],T);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&a(e,["parameters","addWatermark"],C);const y=l(t,["labels"]);e!==void 0&&y!=null&&a(e,["labels"],y);const v=l(t,["imageSize"]);e!==void 0&&v!=null&&a(e,["parameters","sampleImageSize"],v);const E=l(t,["enhancePrompt"]);return e!==void 0&&E!=null&&a(e,["parameters","enhancePrompt"],E),n}function CS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["config"]);return i!=null&&ES(i,n),n}function _S(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["config"]);return i!=null&&TS(i,n),n}function xS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>FS(s))),a(e,["generatedImages"],i)}const r=l(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],Fp(r)),e}function wS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Ci(s))),a(e,["generatedImages"],i)}const r=l(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],Vp(r)),e}function IS(t,e){const n={},o=l(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=l(t,["durationSeconds"]);if(e!==void 0&&r!=null&&a(e,["parameters","durationSeconds"],r),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&a(e,["parameters","aspectRatio"],i);const s=l(t,["resolution"]);e!==void 0&&s!=null&&a(e,["parameters","resolution"],s);const u=l(t,["personGeneration"]);if(e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&a(e,["parameters","negativePrompt"],c);const d=l(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&a(e,["parameters","enhancePrompt"],d),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=l(t,["lastFrame"]);e!==void 0&&f!=null&&a(e,["instances[0]","lastFrame"],_i(f));const m=l(t,["referenceImages"]);if(e!==void 0&&m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>AE(g))),a(e,["instances[0]","referenceImages"],p)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function NS(t,e){const n={},o=l(t,["numberOfVideos"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["fps"]);e!==void 0&&i!=null&&a(e,["parameters","fps"],i);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&a(e,["parameters","durationSeconds"],s);const u=l(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&a(e,["parameters","resolution"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const m=l(t,["pubsubTopic"]);e!==void 0&&m!=null&&a(e,["parameters","pubsubTopic"],m);const p=l(t,["negativePrompt"]);e!==void 0&&p!=null&&a(e,["parameters","negativePrompt"],p);const g=l(t,["enhancePrompt"]);e!==void 0&&g!=null&&a(e,["parameters","enhancePrompt"],g);const S=l(t,["generateAudio"]);e!==void 0&&S!=null&&a(e,["parameters","generateAudio"],S);const T=l(t,["lastFrame"]);e!==void 0&&T!=null&&a(e,["instances[0]","lastFrame"],ot(T));const C=l(t,["referenceImages"]);if(e!==void 0&&C!=null){let E=C;Array.isArray(E)&&(E=E.map(_=>RE(_))),a(e,["instances[0]","referenceImages"],E)}const y=l(t,["mask"]);e!==void 0&&y!=null&&a(e,["instances[0]","mask"],NE(y));const v=l(t,["compressionQuality"]);return e!==void 0&&v!=null&&a(e,["parameters","compressionQuality"],v),n}function AS(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],MS(s)),e}function RS(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],DS(s)),e}function PS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],_i(i));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],bp(s));const u=l(e,["source"]);u!=null&&LS(u,n);const c=l(e,["config"]);return c!=null&&IS(c,n),n}function kS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],ot(i));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],Bp(s));const u=l(e,["source"]);u!=null&&US(u,n);const c=l(e,["config"]);return c!=null&&NS(c,n),n}function MS(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>GS(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function DS(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>HS(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function LS(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],_i(r));const i=l(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],bp(i)),n}function US(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],ot(r));const i=l(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],Bp(i)),n}function FS(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],WS(n));const o=l(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=l(t,["_self"]);return r!=null&&a(e,["safetyAttributes"],Fp(r)),e}function Ci(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],Up(n));const o=l(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=l(t,["_self"]);r!=null&&a(e,["safetyAttributes"],Vp(r));const i=l(t,["prompt"]);return i!=null&&a(e,["enhancedPrompt"],i),e}function VS(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["mask"],Up(n));const o=l(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["labels"],r)}return e}function GS(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],wE(n)),e}function HS(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],IE(n)),e}function bS(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=l(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const r=l(t,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const i=l(t,["candidateCount"]);i!=null&&a(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&a(e,["enableAffectiveDialog"],s);const u=l(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=l(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const m=l(t,["presencePenalty"]);m!=null&&a(e,["presencePenalty"],m);const p=l(t,["responseLogprobs"]);p!=null&&a(e,["responseLogprobs"],p);const g=l(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const S=l(t,["responseModalities"]);S!=null&&a(e,["responseModalities"],S);const T=l(t,["responseSchema"]);T!=null&&a(e,["responseSchema"],T);const C=l(t,["routingConfig"]);C!=null&&a(e,["routingConfig"],C);const y=l(t,["seed"]);y!=null&&a(e,["seed"],y);const v=l(t,["speechConfig"]);v!=null&&a(e,["speechConfig"],Gp(v));const E=l(t,["stopSequences"]);E!=null&&a(e,["stopSequences"],E);const _=l(t,["temperature"]);_!=null&&a(e,["temperature"],_);const w=l(t,["thinkingConfig"]);w!=null&&a(e,["thinkingConfig"],w);const x=l(t,["topK"]);x!=null&&a(e,["topK"],x);const I=l(t,["topP"]);if(I!=null&&a(e,["topP"],I),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function BS(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],W(t,o)),n}function $S(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],W(t,o)),n}function qS(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function OS(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function zS(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function JS(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);o!=null&&a(e,["imageSize"],o);const r=l(t,["outputMimeType"]);r!=null&&a(e,["imageOutputOptions","mimeType"],r);const i=l(t,["outputCompressionQuality"]);return i!=null&&a(e,["imageOutputOptions","compressionQuality"],i),e}function WS(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],Ot(n));const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Up(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["imageBytes"],Ot(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function _i(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],Ot(n));const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function ot(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["imageBytes"]);o!=null&&a(e,["bytesBase64Encoded"],Ot(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function KS(t,e,n){const o={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Np(t,u)),o}function YS(t,e,n){const o={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Np(t,u)),o}function QS(t,e){const n={},o=l(e,["config"]);return o!=null&&KS(t,o,n),n}function XS(t,e){const n={},o=l(e,["config"]);return o!=null&&YS(t,o,n),n}function ZS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["_self"]);if(r!=null){let i=Ap(r);Array.isArray(i)&&(i=i.map(s=>tl(s))),a(e,["models"],i)}return e}function jS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["_self"]);if(r!=null){let i=Ap(r);Array.isArray(i)&&(i=i.map(s=>nl(s))),a(e,["models"],i)}return e}function eE(t){const e={},n=l(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);const o=l(t,["segmentationClasses"]);o!=null&&a(e,["maskClasses"],o);const r=l(t,["maskDilation"]);return r!=null&&a(e,["dilation"],r),e}function tl(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["version"]);i!=null&&a(e,["version"],i);const s=l(t,["_self"]);s!=null&&a(e,["tunedModelInfo"],gE(s));const u=l(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const c=l(t,["outputTokenLimit"]);c!=null&&a(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);d!=null&&a(e,["supportedActions"],d);const f=l(t,["temperature"]);f!=null&&a(e,["temperature"],f);const m=l(t,["maxTemperature"]);m!=null&&a(e,["maxTemperature"],m);const p=l(t,["topP"]);p!=null&&a(e,["topP"],p);const g=l(t,["topK"]);g!=null&&a(e,["topK"],g);const S=l(t,["thinking"]);return S!=null&&a(e,["thinking"],S),e}function nl(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["versionId"]);i!=null&&a(e,["version"],i);const s=l(t,["deployedModels"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>pS(p))),a(e,["endpoints"],m)}const u=l(t,["labels"]);u!=null&&a(e,["labels"],u);const c=l(t,["_self"]);c!=null&&a(e,["tunedModelInfo"],vE(c));const d=l(t,["defaultCheckpointId"]);d!=null&&a(e,["defaultCheckpointId"],d);const f=l(t,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(p=>p)),a(e,["checkpoints"],m)}return e}function tE(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],mS(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],hS(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],b0(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const m=l(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const p=l(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function nE(t){const e={},n=l(t,["productImage"]);return n!=null&&a(e,["image"],ot(n)),e}function oE(t,e){const n={},o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["baseSteps"]);e!==void 0&&r!=null&&a(e,["parameters","baseSteps"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const s=l(t,["seed"]);e!==void 0&&s!=null&&a(e,["parameters","seed"],s);const u=l(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&a(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&a(e,["parameters","addWatermark"],d);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&a(e,["parameters","outputOptions","mimeType"],f);const m=l(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&a(e,["parameters","outputOptions","compressionQuality"],m);const p=l(t,["enhancePrompt"]);e!==void 0&&p!=null&&a(e,["parameters","enhancePrompt"],p);const g=l(t,["labels"]);return e!==void 0&&g!=null&&a(e,["labels"],g),n}function rE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["source"]);r!=null&&sE(r,n);const i=l(e,["config"]);return i!=null&&oE(i,n),n}function iE(t){const e={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Ci(r))),a(e,["generatedImages"],o)}return e}function sE(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["personImage"]);e!==void 0&&r!=null&&a(e,["instances[0]","personImage","image"],ot(r));const i=l(t,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>nE(u))),a(e,["instances[0]","productImages"],s)}return n}function lE(t){const e={},n=l(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],ot(n));const o=l(t,["referenceId"]);o!=null&&a(e,["referenceId"],o);const r=l(t,["referenceType"]);r!=null&&a(e,["referenceType"],r);const i=l(t,["maskImageConfig"]);i!=null&&a(e,["maskImageConfig"],eE(i));const s=l(t,["controlImageConfig"]);s!=null&&a(e,["controlImageConfig"],W0(s));const u=l(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],u);const c=l(t,["subjectImageConfig"]);return c!=null&&a(e,["subjectImageConfig"],c),e}function Fp(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=l(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=l(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function Vp(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=l(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=l(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function aE(t){const e={},n=l(t,["category"]);if(n!=null&&a(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=l(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function uE(t){const e={},n=l(t,["image"]);return n!=null&&a(e,["image"],ot(n)),e}function cE(t,e){const n={},o=l(t,["mode"]);e!==void 0&&o!=null&&a(e,["parameters","mode"],o);const r=l(t,["maxPredictions"]);e!==void 0&&r!=null&&a(e,["parameters","maxPredictions"],r);const i=l(t,["confidenceThreshold"]);e!==void 0&&i!=null&&a(e,["parameters","confidenceThreshold"],i);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&a(e,["parameters","maskDilation"],s);const u=l(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u);const c=l(t,["labels"]);return e!==void 0&&c!=null&&a(e,["labels"],c),n}function dE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["source"]);r!=null&&pE(r,n);const i=l(e,["config"]);return i!=null&&cE(i,n),n}function fE(t){const e={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>VS(r))),a(e,["generatedMasks"],o)}return e}function pE(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],ot(r));const i=l(t,["scribbleImage"]);return e!==void 0&&i!=null&&a(e,["instances[0]","scribble"],uE(i)),n}function Gp(t){const e={},n=l(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],n);const o=l(t,["languageCode"]);if(o!=null&&a(e,["languageCode"],o),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function mE(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],gS(n));const o=l(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function hE(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],qS(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],OS(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function Hp(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>vS(p))),a(e,["functionDeclarations"],m)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function gE(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=l(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function vE(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=l(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function yE(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function SE(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function EE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","name"],W(t,o));const r=l(e,["config"]);return r!=null&&yE(r,n),n}function TE(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["config"]);return r!=null&&SE(r,n),n}function CE(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&a(e,["parameters","safetySetting"],r);const i=l(t,["personGeneration"]);e!==void 0&&i!=null&&a(e,["parameters","personGeneration"],i);const s=l(t,["includeRaiReason"]);e!==void 0&&s!=null&&a(e,["parameters","includeRaiReason"],s);const u=l(t,["outputMimeType"]);e!==void 0&&u!=null&&a(e,["parameters","outputOptions","mimeType"],u);const c=l(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&a(e,["parameters","outputOptions","compressionQuality"],c);const d=l(t,["enhanceInputImage"]);e!==void 0&&d!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=l(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const m=l(t,["labels"]);e!==void 0&&m!=null&&a(e,["labels"],m);const p=l(t,["numberOfImages"]);e!==void 0&&p!=null&&a(e,["parameters","sampleCount"],p);const g=l(t,["mode"]);return e!==void 0&&g!=null&&a(e,["parameters","mode"],g),n}function _E(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["image"]);r!=null&&a(n,["instances[0]","image"],ot(r));const i=l(e,["upscaleFactor"]);i!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=l(e,["config"]);return s!=null&&CE(s,n),n}function xE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>Ci(i))),a(e,["generatedImages"],r)}return e}function wE(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],Ot(o));const r=l(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function IE(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],Ot(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function NE(t){const e={},n=l(t,["image"]);n!=null&&a(e,["_self"],ot(n));const o=l(t,["maskMode"]);return o!=null&&a(e,["maskMode"],o),e}function AE(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],_i(n));const o=l(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function RE(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],ot(n));const o=l(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function bp(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["videoBytes"]);o!=null&&a(e,["encodedVideo"],Ot(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["encoding"],r),e}function Bp(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["videoBytes"]);o!=null&&a(e,["bytesBase64Encoded"],Ot(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PE(t,e){const n={},o=l(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["displayName"],o),n}function kE(t){const e={},n=l(t,["config"]);return n!=null&&PE(n,e),e}function ME(t,e){const n={},o=l(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function DE(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=l(t,["config"]);return o!=null&&ME(o,e),e}function LE(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function UE(t,e){const n={},o=l(t,["customMetadata"]);if(e!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["customMetadata"],i)}const r=l(t,["chunkingConfig"]);return e!==void 0&&r!=null&&a(e,["chunkingConfig"],r),n}function FE(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],GE(s)),e}function VE(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=l(t,["fileName"]);o!=null&&a(e,["fileName"],o);const r=l(t,["config"]);return r!=null&&UE(r,e),e}function GE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function HE(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function bE(t){const e={},n=l(t,["config"]);return n!=null&&HE(n,e),e}function BE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["fileSearchStores"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["fileSearchStores"],i)}return e}function $p(t,e){const n={},o=l(t,["mimeType"]);e!==void 0&&o!=null&&a(e,["mimeType"],o);const r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["customMetadata"]);if(e!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>c)),a(e,["customMetadata"],u)}const s=l(t,["chunkingConfig"]);return e!==void 0&&s!=null&&a(e,["chunkingConfig"],s),n}function $E(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=l(t,["config"]);return o!=null&&$p(o,e),e}function qE(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OE="Content-Type",zE="X-Server-Timeout",JE="User-Agent",ol="x-goog-api-client",WE="1.33.0",KE=`google-genai-sdk/${WE}`,YE="v1beta1",QE="v1beta";class XE{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:YE,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:QE,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))r.searchParams.append(s,String(u));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>i.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&ZE(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await zc(r),new Zs(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await zc(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return et(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield B(r.read());if(d){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(f,{stream:!0});try{const S=JSON.parse(m);if("error"in S){const T=JSON.parse(JSON.stringify(S.error)),C=T.status,y=T.code,v=`got status: ${C}. ${JSON.stringify(S)}`;if(y>=400&&y<600)throw new Ei({message:v,status:y})}}catch(S){if(S.name==="ApiError")throw S}s+=m;let p=-1,g=0;for(;;){p=-1,g=0;for(const C of c){const y=s.indexOf(C);y!==-1&&(p===-1||y<p)&&(p=y,g=C.length)}if(p===-1)break;const S=s.substring(0,p);s=s.substring(p+g);const T=S.trim();if(T.startsWith(u)){const C=T.substring(u.length).trim();try{const y=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield B(new Zs(y))}catch(y){throw new Error(`exception parsing stream chunk ${C}. ${y}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=KE+" "+this.clientOptions.userAgentExtra;return e[JE]=n,e[ol]=n,e[OE]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))o.append(r,i);e.timeout&&e.timeout>0&&o.append(zE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,s=await i.stat(e);r.sizeBytes=String(s.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const c={file:r},d=this.getFileName(e),f=M("upload/v1beta/files",c._url),m=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,o){var r;const i=this.clientOptions.uploader,s=await i.stat(n),u=String(s.size),c=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),m={};o!=null&&$p(o,m);const p=await this.fetchUploadUrl(d,u,c,f,m,o==null?void 0:o.httpOptions);return i.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,i,s){var u;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function zc(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Ei({message:r,status:n}):new Error(r)}}function ZE(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,s){const u=Object.assign({},i);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=o(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jE="mcp_used/unknown";let eT=!1;function qp(t){for(const e of t)if(tT(e)||typeof e=="object"&&"inputSchema"in e)return!0;return eT}function Op(t){var e;const n=(e=t[ol])!==null&&e!==void 0?e:"";t[ol]=(n+` ${jE}`).trimStart()}function tT(t){return t!==null&&typeof t=="object"&&t instanceof da}function nT(t){return et(this,arguments,function*(n,o=100){let r,i=0;for(;i<o;){const s=yield B(n.listTools({cursor:r}));for(const u of s.tools)yield yield B(u),i++;if(!s.nextCursor)break;r=s.nextCursor}})}class da{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new da(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var u=!0,c=(n=void 0,tt(nT(f))),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const m=r;s.push(m);const p=m.name;if(i[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);i[p]=f}}catch(m){n={error:m}}finally{try{!u&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),Lv(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function oT(t,e,n){const o=new Iv;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class rT{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=lT(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(E=>{d=E}),m=e.callbacks,p=function(){d({})},g=this.apiClient,S={onopen:p,onmessage:E=>{oT(g,m.onmessage,E)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(E){},onclose:(o=m==null?void 0:m.onclose)!==null&&o!==void 0?o:function(E){}},T=this.webSocketFactory.create(c,sT(s),S);T.connect(),await f;const v={setup:{model:W(this.apiClient,e.model)}};return T.send(JSON.stringify(v)),new iT(T,this.apiClient)}}class iT{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=k0(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=P0(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(In.PLAY)}pause(){this.sendPlaybackControl(In.PAUSE)}stop(){this.sendPlaybackControl(In.STOP)}resetContext(){this.sendPlaybackControl(In.RESET_CONTEXT)}close(){this.conn.close()}}function sT(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function lT(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aT="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function uT(t,e,n){const o=new wv;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const i=JSON.parse(r);if(t.isVertexAI()){const s=L0(i);Object.assign(o,s)}else Object.assign(o,i);e(o)}class cT{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new rT(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,i,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&qp(e.config.tools)&&Op(m);const p=mT(m);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f);else{const P=this.apiClient.getApiKey();let k="BidiGenerateContent",L="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",L="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${k}?${L}=${P}`}let g=()=>{};const S=new Promise(P=>{g=P}),T=e.callbacks,C=function(){var P;(P=T==null?void 0:T.onopen)===null||P===void 0||P.call(T),g({})},y=this.apiClient,v={onopen:C,onmessage:P=>{uT(y,T.onmessage,P)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(P){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(P){}},E=this.webSocketFactory.create(f,pT(p),v);E.connect(),await S;let _=W(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const P=this.apiClient.getProject(),k=this.apiClient.getLocation();_=`projects/${P}/locations/${k}/`+_}let w={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Xr.AUDIO]}:e.config.responseModalities=[Xr.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const x=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],I=[];for(const P of x)if(this.isCallableTool(P)){const k=P;I.push(await k.tool())}else I.push(P);I.length>0&&(e.config.tools=I);const A={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?w=R0(this.apiClient,A):w=A0(this.apiClient,A),delete w.config,E.send(JSON.stringify(w)),new fT(E,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const dT={turnComplete:!0};class fT{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Oe(n.turns),e.isVertexAI()||(o=o.map(r=>Ti(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(aT)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},dT),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:D0(e)}:n={realtimeInput:M0(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function pT(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function mT(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jc=10;function Wc(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Un(s)){r=!0;break}if(!r)return!0;const i=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Un(t){return"callTool"in t&&typeof t.callTool=="function"}function hT(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Un(r)))!==null&&o!==void 0?o:!1}function Kc(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(Un(o))return;const i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(r)}),n}function Yc(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gT extends Tt{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,i,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!hT(n)||Wc(n.config))return await this.generateContentInternal(c);const d=Kc(n);if(d.length>0){const T=d.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let f,m;const p=Oe(c.contents),g=(i=(r=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Jc;let S=0;for(;S<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const T=f.candidates[0].content,C=[];for(const y of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(Un(y)){const E=await y.callTool(f.functionCalls);C.push(...E)}S++,m={role:"user",parts:C},c.contents=Oe(c.contents),c.contents.push(T),c.contents.push(m),Yc(c.config)&&(p.push(T),p.push(m))}return Yc(c.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var o,r,i,s,u;if(this.maybeMoveToResponseJsonSchem(n),Wc(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const c=Kc(n);if(c.length>0){const m=c.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(u=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i;const s=[];if(o!=null&&o.generatedImages)for(const c of o.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:s.push(c);let u;return i?u={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new dn(yt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,s,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const s=await Promise.all(i.map(async c=>Un(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&qp(e.config.tools)){const c=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Op(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,o,r;const i=new Map;for(const s of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Un(s)){const u=s,c=await u.tool();for(const d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,u)}}return i}async processAfcStream(e){var n,o,r;const i=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Jc;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return function(d,f,m){return et(this,arguments,function*(){for(var p,g,S,T,C,y;u<i;){s&&(u++,s=!1);const w=yield B(d.processParamsMaybeAddMcpUsage(m)),x=yield B(d.generateContentStreamInternal(w)),I=[],A=[];try{for(var v=!0,E=(g=void 0,tt(x)),_;_=yield B(E.next()),p=_.done,!p;v=!0){T=_.value,v=!1;const P=T;if(yield yield B(P),P.candidates&&(!((C=P.candidates[0])===null||C===void 0)&&C.content)){A.push(P.candidates[0].content);for(const k of(y=P.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(u<i&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(k.functionCall.name)){const L=yield B(f.get(k.functionCall.name).callTool([k.functionCall]));I.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(P){g={error:P}}finally{try{!v&&!p&&(S=E.return)&&(yield B(S.call(E)))}finally{if(g)throw g.error}}if(I.length>0){s=!0;const P=new oo;P.candidates=[{content:{role:"user",parts:I}}],yield yield B(P);const k=[];k.push(...A),k.push({role:"user",parts:I});const L=Oe(m.contents).concat(k);m.contents=L}else break}})}(this,c,e)}async generateContentInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=$c(this.apiClient,e);return u=M("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=Oc(f),p=new oo;return Object.assign(p,m),p})}else{const d=Bc(this.apiClient,e);return u=M("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=qc(f),p=new oo;return Object.assign(p,m),p})}}async generateContentStreamInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=$c(this.apiClient,e);return u=M("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(m){return et(this,arguments,function*(){var p,g,S,T;try{for(var C=!0,y=tt(m),v;v=yield B(y.next()),p=v.done,!p;C=!0){T=v.value,C=!1;const E=T,_=Oc(yield B(E.json()));_.sdkHttpResponse={headers:E.headers};const w=new oo;Object.assign(w,_),yield yield B(w)}}catch(E){g={error:E}}finally{try{!C&&!p&&(S=y.return)&&(yield B(S.call(y)))}finally{if(g)throw g.error}}})})}else{const d=Bc(this.apiClient,e);return u=M("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(m){return et(this,arguments,function*(){var p,g,S,T;try{for(var C=!0,y=tt(m),v;v=yield B(y.next()),p=v.done,!p;C=!0){T=v.value,C=!1;const E=T,_=qc(yield B(E.json()));_.sdkHttpResponse={headers:E.headers};const w=new oo;Object.assign(w,_),yield yield B(w)}}catch(E){g={error:E}}finally{try{!C&&!p&&(S=y.return)&&(yield B(S.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=cS(this.apiClient,e);return u=M("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=fS(f),p=new xc;return Object.assign(p,m),p})}else{const d=uS(this.apiClient,e);return u=M("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=dS(f),p=new xc;return Object.assign(p,m),p})}}async generateImagesInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=_S(this.apiClient,e);return u=M("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=wS(f),p=new wc;return Object.assign(p,m),p})}else{const d=CS(this.apiClient,e);return u=M("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=xS(f),p=new wc;return Object.assign(p,m),p})}}async editImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=iS(this.apiClient,e);return i=M("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=sS(c),f=new mv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=_E(this.apiClient,e);return i=M("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=xE(c),f=new hv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=rE(this.apiClient,e);return i=M("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=iE(c),f=new gv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=dE(this.apiClient,e);return i=M("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=fE(c),f=new vv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=$S(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>nl(f))}else{const d=BS(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>tl(f))}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=XS(this.apiClient,e);return u=M("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=jS(f),p=new Ic;return Object.assign(p,m),p})}else{const d=QS(this.apiClient,e);return u=M("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=ZS(f),p=new Ic;return Object.assign(p,m),p})}}async update(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=TE(this.apiClient,e);return u=M("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>nl(f))}else{const d=EE(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>tl(f))}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=tS(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=oS(f),p=new Nc;return Object.assign(p,m),p})}else{const d=eS(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=nS(f),p=new Nc;return Object.assign(p,m),p})}}async countTokens(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=X0(this.apiClient,e);return u=M("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=j0(f),p=new Ac;return Object.assign(p,m),p})}else{const d=Q0(this.apiClient,e);return u=M("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=Z0(f),p=new Ac;return Object.assign(p,m),p})}}async computeTokens(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=q0(this.apiClient,e);return i=M("{model}:computeTokens",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=O0(c),f=new yv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=kS(this.apiClient,e);return u=M("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const m=RS(f),p=new Zr;return Object.assign(p,m),p})}else{const d=PS(this.apiClient,e);return u=M("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const m=AS(f),p=new Zr;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vT extends Tt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=av(e);return u=M("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}else{const d=lv(e);return u=M("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=ev(e);return i=M("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yT(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function ST(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>AT(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function ET(t,e,n){const o={},r=l(e,["expireTime"]);n!==void 0&&r!=null&&a(n,["expireTime"],r);const i=l(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&a(n,["newSessionExpireTime"],i);const s=l(e,["uses"]);n!==void 0&&s!=null&&a(n,["uses"],s);const u=l(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],NT(t,u));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),o}function TT(t,e){const n={},o=l(e,["config"]);return o!=null&&a(n,["config"],ET(t,o,n)),n}function CT(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function _T(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xT(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function wT(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function IT(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],ca(m));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","thinkingConfig"],p);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=l(t,["systemInstruction"]);e!==void 0&&S!=null&&a(e,["setup","systemInstruction"],ST(Ee(S)));const T=l(t,["tools"]);if(e!==void 0&&T!=null){let x=Wn(T);Array.isArray(x)&&(x=x.map(I=>PT(Jn(I)))),a(e,["setup","tools"],x)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],RT(C));const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","inputAudioTranscription"],y);const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","outputAudioTranscription"],v);const E=l(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&a(e,["setup","realtimeInputConfig"],E);const _=l(t,["contextWindowCompression"]);e!==void 0&&_!=null&&a(e,["setup","contextWindowCompression"],_);const w=l(t,["proactivity"]);if(e!==void 0&&w!=null&&a(e,["setup","proactivity"],w),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function NT(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],W(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],IT(r,n)),n}function AT(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],CT(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],_T(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],yT(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const m=l(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const p=l(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function RT(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function PT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=l(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=l(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],xT(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],wT(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kT(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(i=>`${n}.${i}`);e.push(...r)}else e.push(n)}return e.join(",")}function MT(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const i=o.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const i=kT(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class DT extends Tt{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=TT(this.apiClient,e);i=M("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=MT(u,e.config);return r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LT(t,e){const n={},o=l(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function UT(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=l(t,["config"]);return o!=null&&LT(o,e),e}function FT(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function VT(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function GT(t){const e={},n=l(t,["parent"]);n!=null&&a(e,["_url","parent"],n);const o=l(t,["config"]);return o!=null&&VT(o,e),e}function HT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["documents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bT extends Tt{constructor(e){super(),this.apiClient=e,this.list=async n=>new dn(yt.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=FT(e);return i=M("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=UT(e);r=M("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=GT(e);return i=M("{parent}/documents",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=HT(c),f=new Sv;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BT extends Tt{constructor(e,n=new bT(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new dn(yt.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kE(e);return i=M("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LE(e);return i=M("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=DE(e);r=M("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bE(e);return i=M("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=BE(c),f=new Ev;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$E(e);return i=M("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=qE(c),f=new Tv;return Object.assign(f,d),f})}}async importFile(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=VE(e);return i=M("{file_search_store_name}:importFile",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=FE(c),f=new ia;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let zp=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return zp=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const $T=()=>zp();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rl(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const il=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class We extends Error{}class we extends We{constructor(e,n,o,r){super(`${we.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new xi({message:o,cause:il(n)});const i=n;return e===400?new Wp(e,i,o,r):e===401?new Kp(e,i,o,r):e===403?new Yp(e,i,o,r):e===404?new Qp(e,i,o,r):e===409?new Xp(e,i,o,r):e===422?new Zp(e,i,o,r):e===429?new jp(e,i,o,r):e>=500?new em(e,i,o,r):new we(e,i,o,r)}}class sl extends we{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class xi extends we{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Jp extends xi{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Wp extends we{}class Kp extends we{}class Yp extends we{}class Qp extends we{}class Xp extends we{}class Zp extends we{}class jp extends we{}class em extends we{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qT=/^[a-z][a-z0-9+.-]*:/i,OT=t=>qT.test(t);let ll=t=>(ll=Array.isArray,ll(t));const zT=ll;let JT=zT;const Qc=JT;function WT(t){if(!t)return!0;for(const e in t)return!1;return!0}function KT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const YT=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new We(`${t} must be an integer`);if(e<0)throw new We(`${t} must be a positive integer`);return e},QT=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XT=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pn="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZT(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const jT=()=>{var t,e,n,o,r;const i=ZT();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pn,"X-Stainless-OS":Zc(Deno.build.os),"X-Stainless-Arch":Xc(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pn,"X-Stainless-OS":Zc((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Xc((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const s=eC();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function eC(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,i=o[2]||0,s=o[3]||0;return{browser:e,version:`${r}.${i}.${s}`}}}return null}const Xc=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Zc=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let lr;const tC=()=>lr??(lr=jT());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nC(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function tm(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function oC(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return tm({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function nm(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function rC(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iC=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const om=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function es(t,e,n){return om(),new File(t,e??"unknown_file",n)}function sC(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const lC=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rm=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",aC=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&rm(t),uC=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function cC(t,e,n){if(om(),t=await t,aC(t))return t instanceof File?t:es([await t.arrayBuffer()],t.name);if(uC(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),es(await al(r),e,n)}const o=await al(t);if(e||(e=sC(t)),!(n!=null&&n.type)){const r=o.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return es(o,e,n)}async function al(t){var e,n,o,r,i;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(rm(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(lC(t))try{for(var u=!0,c=tt(t),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const f=r;s.push(...await al(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}else{const f=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${dC(t)}`)}return s}function dC(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class im{constructor(e){this._client=e}}im._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sm(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const jc=Object.freeze(Object.create(null)),fC=(t=sm)=>function(n,...o){if(n.length===1)return n[0];let r=!1;const i=[],s=n.reduce((f,m,p)=>{var g,S,T;/[?#]/.test(m)&&(r=!0);const C=o[p];let y=(r?encodeURIComponent:t)(""+C);return p!==o.length&&(C==null||typeof C=="object"&&C.toString===((T=Object.getPrototypeOf((S=Object.getPrototypeOf((g=C.hasOwnProperty)!==null&&g!==void 0?g:jc))!==null&&S!==void 0?S:jc))===null||T===void 0?void 0:T.toString))&&(y=C+"",i.push({start:f.length+m.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),f+m+(p===o.length?"":y)},""),u=s.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(u))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,m)=>f.start-m.start),i.length>0){let f=0;const m=i.reduce((p,g)=>{const S=" ".repeat(g.start-f),T="^".repeat(g.length);return f=g.start+g.length,p+S+T},"");throw new We(`Path parameters result in path with invalid segments:
${i.map(p=>p.error).join(`
`)}
${s}
${m}`)}return s},ar=fC(sm);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lm extends im{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,i=ei(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new We("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new We("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ar`/${r}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(ar`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(ar`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const i=n??{},{api_version:s=this._client.apiVersion}=i,u=ei(i,["api_version"]);return this._client.get(ar`/${s}/interactions/${e}`,Object.assign(Object.assign({query:u},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}lm._key=Object.freeze(["interactions"]);class am extends lm{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pC(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let ur;function fa(t){let e;return(ur??(e=new globalThis.TextEncoder,ur=e.encode.bind(e)))(t)}let cr;function ed(t){let e;return(cr??(e=new globalThis.TextDecoder,cr=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wi{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?fa(e):e;this.buffer=pC([this.buffer,n]);const o=[];let r;for(;(r=mC(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(ed(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=ed(this.buffer.subarray(0,i));o.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}wi.NEWLINE_CHARS=new Set([`
`,"\r"]);wi.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function mC(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function hC(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ti={off:0,error:200,warn:300,info:400,debug:500},td=(t,e,n)=>{if(t){if(KT(ti,t))return t;Ce(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ti))}`)}};function ao(){}function dr(t,e,n){return!e||ti[t]>ti[n]?ao:e[t].bind(e)}const gC={error:ao,warn:ao,info:ao,debug:ao};let nd=new WeakMap;function Ce(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return gC;const r=nd.get(n);if(r&&r[0]===o)return r[1];const i={error:dr("error",n,o),warn:dr("warn",n,o),info:dr("info",n,o),debug:dr("debug",n,o)};return nd.set(n,[o,i]),i}const Qt=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nn{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const i=o?Ce(o):console;function s(){return et(this,arguments,function*(){var c,d,f,m;if(r)throw new We("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{try{for(var g=!0,S=tt(vC(e,n)),T;T=yield B(S.next()),c=T.done,!c;g=!0){m=T.value,g=!1;const C=m;if(!p)if(C.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield B(JSON.parse(C.data))}catch(y){throw i.error("Could not parse message into JSON:",C.data),i.error("From chunk:",C.raw),y}}}catch(C){d={error:C}}finally{try{!g&&!c&&(f=S.return)&&(yield B(f.call(S)))}finally{if(d)throw d.error}}p=!0}catch(C){if(rl(C))return yield B(void 0);throw C}finally{p||n.abort()}})}return new Nn(s,n,o)}static fromReadableStream(e,n,o){let r=!1;function i(){return et(this,arguments,function*(){var c,d,f,m;const p=new wi,g=nm(e);try{for(var S=!0,T=tt(g),C;C=yield B(T.next()),c=C.done,!c;S=!0){m=C.value,S=!1;const y=m;for(const v of p.decode(y))yield yield B(v)}}catch(y){d={error:y}}finally{try{!S&&!c&&(f=T.return)&&(yield B(f.call(T)))}finally{if(d)throw d.error}}for(const y of p.flush())yield yield B(y)})}function s(){return et(this,arguments,function*(){var c,d,f,m;if(r)throw new We("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{try{for(var g=!0,S=tt(i()),T;T=yield B(S.next()),c=T.done,!c;g=!0){m=T.value,g=!1;const C=m;p||C&&(yield yield B(JSON.parse(C)))}}catch(C){d={error:C}}finally{try{!g&&!c&&(f=S.return)&&(yield B(f.call(S)))}finally{if(d)throw d.error}}p=!0}catch(C){if(rl(C))return yield B(void 0);throw C}finally{p||n.abort()}})}return new Nn(s,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=i=>({next:()=>{if(i.length===0){const s=o.next();e.push(s),n.push(s)}return i.shift()}});return[new Nn(()=>r(e),this.controller,this.client),new Nn(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return tm({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:i}=await n.next();if(i)return o.close();const s=fa(JSON.stringify(r)+`
`);o.enqueue(s)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function vC(t,e){return et(this,arguments,function*(){var o,r,i,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new We("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new We("Attempted to iterate over a response with no body");const u=new SC,c=new wi,d=nm(t.body);try{for(var f=!0,m=tt(yC(d)),p;p=yield B(m.next()),o=p.done,!o;f=!0){s=p.value,f=!1;const g=s;for(const S of c.decode(g)){const T=u.decode(S);T&&(yield yield B(T))}}}catch(g){r={error:g}}finally{try{!f&&!o&&(i=m.return)&&(yield B(i.call(m)))}finally{if(r)throw r.error}}for(const g of c.flush()){const S=u.decode(g);S&&(yield yield B(S))}})}function yC(t){return et(this,arguments,function*(){var n,o,r,i;let s=new Uint8Array;try{for(var u=!0,c=tt(t),d;d=yield B(c.next()),n=d.done,!n;u=!0){i=d.value,u=!1;const f=i;if(f==null)continue;const m=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?fa(f):f;let p=new Uint8Array(s.length+m.length);p.set(s),p.set(m,s.length),s=p;let g;for(;(g=hC(s))!==-1;)yield yield B(s.slice(0,g)),s=s.slice(g)}}catch(f){o={error:f}}finally{try{!u&&!n&&(r=c.return)&&(yield B(r.call(c)))}finally{if(o)throw o.error}}s.length>0&&(yield yield B(s))})}class SC{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=EC(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function EC(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function TC(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:i}=e,s=await(async()=>{var u;if(e.options.stream)return Ce(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Nn.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(u=c==null?void 0:c.split(";")[0])===null||u===void 0?void 0:u.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return Ce(t).debug(`[${o}] response parsed`,Qt({retryOfRequestLogID:r,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pa extends Promise{constructor(e,n,o=TC){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new pa(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const um=Symbol("brand.privateNullableHeaders");function*CC(t){if(!t)return;if(um in t){const{values:o,nulls:r}=t;yield*o.entries();for(const i of r)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Qc(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const i=Qc(o[1])?o[1]:[o[1]];let s=!1;for(const u of i)u!==void 0&&(e&&!s&&(s=!0,yield[r,null]),yield[r,u])}}const ts=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[i,s]of CC(o)){const u=i.toLowerCase();r.has(u)||(e.delete(i),r.add(u)),s===null?(e.delete(i),n.add(u)):(e.append(i,s),n.delete(u))}}return{[um]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ns=t=>{var e,n,o,r,i,s;if(typeof globalThis.process<"u")return(o=(n=(e=Kg)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||i===void 0?void 0:i.call(r,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cm;class Ii{constructor(e){var n,o,r,i,s,u,c,d=e===void 0?{}:e,{baseURL:f=ns("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:m=(n=ns("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=d,g=ei(d,["baseURL","apiKey","apiVersion"]);const S=Object.assign(Object.assign({apiKey:m,apiVersion:p},g),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=S.baseURL,this.timeout=(o=S.timeout)!==null&&o!==void 0?o:Ii.DEFAULT_TIMEOUT,this.logger=(r=S.logger)!==null&&r!==void 0?r:console;const T="warn";this.logLevel=T,this.logLevel=(s=(i=td(S.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:td(ns("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:T,this.fetchOptions=S.fetchOptions,this.maxRetries=(u=S.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(c=S.fetch)!==null&&c!==void 0?c:nC(),this.encoder=iC,this._options=S,this.apiKey=m,this.apiVersion=p}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return ts([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new We(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${pn}`}defaultIdempotencyKey(){return`stainless-node-retry-${$T()}`}makeStatusError(e,n,o,r){return we.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,i=OT(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return WT(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new pa(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,i,s;const u=await e,c=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=c),await this.prepareOptions(u);const{req:d,url:f,timeout:m}=await this.buildRequest(u,{retryCount:c-n});await this.prepareRequest(d,{url:f,options:u});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=o===void 0?"":`, retryOf: ${o}`,S=Date.now();if(Ce(this).debug(`[${p}] sending request`,Qt({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:d.headers})),!((i=u.signal)===null||i===void 0)&&i.aborted)throw new sl;const T=new AbortController,C=await this.fetchWithTimeout(f,d,m,T).catch(il),y=Date.now();if(C instanceof globalThis.Error){const E=`retrying, ${n} attempts remaining`;if(!((s=u.signal)===null||s===void 0)&&s.aborted)throw new sl;const _=rl(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(n)return Ce(this).info(`[${p}] connection ${_?"timed out":"failed"} - ${E}`),Ce(this).debug(`[${p}] connection ${_?"timed out":"failed"} (${E})`,Qt({retryOfRequestLogID:o,url:f,durationMs:y-S,message:C.message})),this.retryRequest(u,n,o??p);throw Ce(this).info(`[${p}] connection ${_?"timed out":"failed"} - error; no more retries left`),Ce(this).debug(`[${p}] connection ${_?"timed out":"failed"} (error; no more retries left)`,Qt({retryOfRequestLogID:o,url:f,durationMs:y-S,message:C.message})),_?new Jp:new xi({cause:C})}const v=`[${p}${g}] ${d.method} ${f} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${y-S}ms`;if(!C.ok){const E=await this.shouldRetry(C);if(n&&E){const P=`retrying, ${n} attempts remaining`;return await rC(C.body),Ce(this).info(`${v} - ${P}`),Ce(this).debug(`[${p}] response error (${P})`,Qt({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:y-S})),this.retryRequest(u,n,o??p,C.headers)}const _=E?"error; no more retries left":"error; not retryable";Ce(this).info(`${v} - ${_}`);const w=await C.text().catch(P=>il(P).message),x=QT(w),I=x?void 0:w;throw Ce(this).debug(`[${p}] response error (${_})`,Qt({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,message:I,durationMs:Date.now()-S})),this.makeStatusError(C.status,x,I,C.headers)}return Ce(this).info(v),Ce(this).debug(`[${p}] response start`,Qt({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:y-S})),{response:C,options:u,controller:T,requestLogID:p,retryOfRequestLogID:o,startTime:S}}async fetchWithTimeout(e,n,o,r){const i=n||{},{signal:s,method:u}=i,c=ei(i,["signal","method"]);s&&s.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),o),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var i;let s;const u=r==null?void 0:r.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(s=d)}const c=r==null?void 0:r.get("retry-after");if(c&&!s){const d=parseFloat(c);Number.isNaN(d)?s=Date.parse(c)-Date.now():s=d*1e3}if(!(s&&0<=s&&s<60*1e3)){const d=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,d)}return await XT(s),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,s=Math.min(.5*Math.pow(2,i),8),u=1-Math.random()*.25;return s*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,i;const s=Object.assign({},e),{method:u,path:c,query:d,defaultBaseURL:f}=s,m=this.buildURL(c,d,f);"timeout"in s&&YT("timeout",s.timeout),s.timeout=(o=s.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:p,body:g}=this.buildBody({options:s}),S=await this.buildHeaders({options:e,method:u,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:S},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(i=s.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const s=ts([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),tC()),await this.authHeaders(e),this._options.defaultHeaders,o,e.headers]);return this.validateHeaders(s),s.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=ts([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:oC(e)}:this.encoder({body:e,headers:o})}}Ii.DEFAULT_TIMEOUT=6e4;class fe extends Ii{constructor(){super(...arguments),this.interactions=new am(this)}}cm=fe;fe.GeminiNextGenAPIClient=cm;fe.GeminiNextGenAPIClientError=We;fe.APIError=we;fe.APIConnectionError=xi;fe.APIConnectionTimeoutError=Jp;fe.APIUserAbortError=sl;fe.NotFoundError=Qp;fe.ConflictError=Xp;fe.RateLimitError=jp;fe.BadRequestError=Wp;fe.AuthenticationError=Kp;fe.InternalServerError=em;fe.PermissionDeniedError=Yp;fe.UnprocessableEntityError=Zp;fe.toFile=cC;fe.Interactions=am;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _C(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function xC(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function wC(t,e){const n={},o=l(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function IC(t,e){const n={},o=l(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function NC(t,e,n){const o={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&a(e,["displayName"],r),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&a(e,["tuningTask","hyperparameters","epochCount"],i);const s=l(t,["learningRateMultiplier"]);if(s!=null&&a(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=l(t,["batchSize"]);e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","batchSize"],u);const c=l(t,["learningRate"]);if(e!==void 0&&c!=null&&a(e,["tuningTask","hyperparameters","learningRate"],c),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function AC(t,e,n){const o={};let r=l(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec"],od(g))}else if(r==="PREFERENCE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec"],od(g))}const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&a(e,["tunedModelDisplayName"],i);const s=l(t,["description"]);e!==void 0&&s!=null&&a(e,["description"],s);let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=l(t,["labels"]);e!==void 0&&m!=null&&a(e,["labels"],m);const p=l(t,["beta"]);return e!==void 0&&p!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),o}function RC(t,e){const n={},o=l(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=l(t,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&bC(i);const s=l(t,["config"]);return s!=null&&NC(s,n),n}function PC(t,e){const n={},o=l(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=l(t,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&BC(i,n,e);const s=l(t,["config"]);return s!=null&&AC(s,n,e),n}function kC(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function MC(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function DC(t,e,n){const o={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&a(e,["_query","filter"],s),o}function LC(t,e,n){const o={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&a(e,["_query","filter"],s),o}function UC(t,e){const n={},o=l(t,["config"]);return o!=null&&DC(o,n),n}function FC(t,e){const n={},o=l(t,["config"]);return o!=null&&LC(o,n),n}function VC(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>dm(u))),a(n,["tuningJobs"],s)}return n}function GC(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>ul(u))),a(n,["tuningJobs"],s)}return n}function HC(t,e){const n={},o=l(t,["name"]);o!=null&&a(n,["model"],o);const r=l(t,["name"]);return r!=null&&a(n,["endpoint"],r),n}function bC(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=l(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(n,["examples","examples"],r)}return n}function BC(t,e,n){const o={};let r=l(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function dm(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["state"]);i!=null&&a(n,["state"],wp(i));const s=l(t,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(t,["tuningTask","startTime"]);u!=null&&a(n,["startTime"],u);const c=l(t,["tuningTask","completeTime"]);c!=null&&a(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=l(t,["description"]);f!=null&&a(n,["description"],f);const m=l(t,["baseModel"]);m!=null&&a(n,["baseModel"],m);const p=l(t,["_self"]);return p!=null&&a(n,["tunedModel"],HC(p)),n}function ul(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["state"]);i!=null&&a(n,["state"],wp(i));const s=l(t,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(n,["startTime"],u);const c=l(t,["endTime"]);c!=null&&a(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=l(t,["error"]);f!=null&&a(n,["error"],f);const m=l(t,["description"]);m!=null&&a(n,["description"],m);const p=l(t,["baseModel"]);p!=null&&a(n,["baseModel"],p);const g=l(t,["tunedModel"]);g!=null&&a(n,["tunedModel"],g);const S=l(t,["preTunedModel"]);S!=null&&a(n,["preTunedModel"],S);const T=l(t,["supervisedTuningSpec"]);T!=null&&a(n,["supervisedTuningSpec"],T);const C=l(t,["preferenceOptimizationSpec"]);C!=null&&a(n,["preferenceOptimizationSpec"],C);const y=l(t,["tuningDataStats"]);y!=null&&a(n,["tuningDataStats"],y);const v=l(t,["encryptionSpec"]);v!=null&&a(n,["encryptionSpec"],v);const E=l(t,["partnerModelTuningSpec"]);E!=null&&a(n,["partnerModelTuningSpec"],E);const _=l(t,["customBaseModel"]);_!=null&&a(n,["customBaseModel"],_);const w=l(t,["experiment"]);w!=null&&a(n,["experiment"],w);const x=l(t,["labels"]);x!=null&&a(n,["labels"],x);const I=l(t,["outputUri"]);I!=null&&a(n,["outputUri"],I);const A=l(t,["pipelineJob"]);A!=null&&a(n,["pipelineJob"],A);const P=l(t,["serviceAccount"]);P!=null&&a(n,["serviceAccount"],P);const k=l(t,["tunedModelDisplayName"]);k!=null&&a(n,["tunedModelDisplayName"],k);const L=l(t,["veoTuningSpec"]);return L!=null&&a(n,["veoTuningSpec"],L),n}function $C(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(t,["done"]);s!=null&&a(n,["done"],s);const u=l(t,["error"]);return u!=null&&a(n,["error"],u),n}function od(t,e){const n={},o=l(t,["gcsUri"]);o!=null&&a(n,["validationDatasetUri"],o);const r=l(t,["vertexDatasetResource"]);return r!=null&&a(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qC extends Tt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new dn(yt.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:Xs.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=MC(e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>ul(f))}else{const d=kC(e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>dm(f))}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=FC(e);return u=M("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=GC(f),p=new Rc;return Object.assign(p,m),p})}else{const d=UC(e);return u=M("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=VC(f),p=new Rc;return Object.assign(p,m),p})}}async cancel(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=xC(e);return u=M("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=IC(f),p=new Pc;return Object.assign(p,m),p})}else{const d=_C(e);return u=M("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=wC(f),p=new Pc;return Object.assign(p,m),p})}}async tuneInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=PC(e,e);return i=M("tuningJobs",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>ul(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=RC(e);return i=M("tunedModels",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>$C(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OC{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const zC=1024*1024*8,JC=3,WC=1e3,KC=2,ni="x-goog-upload-status";async function YC(t,e,n){var o;const r=await fm(t,e,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[ni])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function QC(t,e,n){var o;const r=await fm(t,e,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[ni])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Sp(i),u=new sa;return Object.assign(u,s),u}async function fm(t,e,n){var o,r;let i=0,s=0,u=new Zs(new Response),c="upload";for(i=t.size;s<i;){const d=Math.min(zC,i-s),f=t.slice(s,s+d);s+d>=i&&(c+=", finalize");let m=0,p=WC;for(;m<JC&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[ni]));)m++,await ZC(p),p=p*KC;if(s+=d,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[ni])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function XC(t){return{size:t.size,type:t.type}}function ZC(t){return new Promise(e=>setTimeout(e,t))}class jC{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YC(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QC(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XC(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e_{create(e,n,o){return new t_(e,n,o)}}class t_{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rd="x-goog-api-key";class n_{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(rd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(rd,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o_="gl-node/";class r_{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new fe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=Zg(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new n_(this.apiKey);this.apiClient=new XE({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:o_+"web",uploader:new jC,downloader:new OC}),this.models=new gT(this.apiClient),this.live=new cT(this.apiClient,r,new e_),this.batches=new Ny(this.apiClient),this.chats=new a0(this.models,this.apiClient),this.caches=new i0(this.apiClient),this.files=new y0(this.apiClient),this.operations=new vT(this.apiClient),this.authTokens=new DT(this.apiClient),this.tunings=new qC(this.apiClient),this.fileSearchStores=new BT(this.apiClient)}}const oi={webtoon:{name:"   ()",desc:"  ,   ",prompt:"Korean Joseon Dynasty historical webtoon style, thick ink outlines, authentic Hanbok and architecture, vibrant colors, manhwa style"},animation:{name:"  ",desc:" ,  ",prompt:"2D cell animation style, Korean folklore atmosphere, flat shading, clean lines, Studio Ghibli inspired but Korean Joseon aesthetics"},inkwash:{name:" ",desc:" ,  ,  ",prompt:"Traditional Korean ink wash painting (Sumukhwa), watercolor texture, brush strokes, artistic, hanji paper texture"},fantasy:{name:"  ",desc:" ,   ",prompt:"Oriental historical fantasy art, cinematic lighting, 8k resolution, realistic textures, detailed Joseon era costumes and props"}},Bo=t=>{if(!t)throw new Error("API   .   'API  '    .");return new r_({apiKey:t})},ma=t=>{try{let e=t.replace(/```json\s*/g,"").replace(/```\s*/g,"");return e=e.trim(),JSON.parse(e)}catch(e){throw console.error("JSON Parse Error:",e,"Raw Text:",t),new Error("AI    . (JSON  )")}},i_=`
  [STRICT ARCHITECTURAL RULES - JOSEON DYNASTY]
  1. ONDOL STRUCTURE (CRITICAL): 
     - Floors are NOT flat with the ground.
     - Kitchen floor is LOWER than the yard.
     - Yard (Madang) is ground level.
     - Room/Maru floor is RAISED approx 1 meter above the yard (High foundation).
     - To enter a room, one must step up onto a stone step (Seokgye) or wooden veranda (Toenmaru).
  2. MATERIALS:
     - Chogajip (Commoner): MUD walls, STRAW thatched roof, BRUSHWOOD gate (Saripmun) and fence (not stone).
     - Giwajip (Noble): WOODEN pillars, WHITE PLASTER walls, BLACK TILE roof.
     - Windows/Doors: Wooden lattice frames covered with WHITE RICE PAPER (Changhoji). NO glass.
  3. INTERIORS:
     - Floor: YELLOW OILED PAPER (Jangpan). DO NOT draw wooden planks inside the bedroom. Wood is ONLY for the Maru (hall).
     - Furniture: NO BEDS. Use thick cotton mattresses (Yo) and blankets on the floor. Low wooden tables.
  4. SPECIFIC LOCATIONS:
     - Choga Samgan: 3-bay structure. Kitchen - Main Room - Side Room. 
     - Jumak (Tavern): Open wooden hall (Pyeong-sang) in front for eating. Thatched roof.
     - Gwana/Podocheong: Large wooden gates, red/blue painted pillars (Dancheong), tile roofs, dirt courtyard.
`,s_=`
  [STRICT COSTUME RULES]
  1. SHOES:
     - Jipsin (Straw shoes): Must cover the toes like a loafer. NO FLIP-FLOPS (No thongs between toes).
     - Indoors: NO SHOES inside rooms or on the wooden maru. Barefoot or white socks (Beoseon).
  2. CLOTHING:
     - Jeogori (Top): Sleeves are curved like a crescent moon, tapering at the wrist.
     - Bags: NO LEATHER BAGS/BACKPACKS. Use cloth bundles (Bokjumeoni, Bojim).
  3. HAIR:
     - Men: Sangtu (Topknot) with headband (Manggeon).
     - Women: Low bun with Binyeo (hairpin) OR braided Daenggi (unmarried).
     - Gache (Wigs): Distinguish between Gisaeng (ornate, wide), Court Lady (rounded), and Royal (Gold leaf, massive).
`,nn=`
  CONTEXT: Korea, Joseon Dynasty (19th Century).
  ${i_}
  ${s_}
  NEGATIVE PROMPT: Modern items, electricity, cars, concrete, western clothes, beds, chairs, glass windows, paved roads, Japanese style shoes (Geta/Zori), Chinese queues, text, watermark, speech bubble.
`,l_=async(t,e,n=[])=>{const o=Bo(t),r=n.length>0?`EXISTING LOCATIONS: ${n.map(s=>`${s.location} (${s.description})`).join("; ")}`:"",i=`
    Analyze this Korean script for a Webtoon/Animation storyboard.
    ${nn}
    ${r}
    
    TASK: Break down the script into SCENES based on NARRATIVE BEATS & VISUAL EVENTS.
    
    [CRITICAL INSTRUCTION: HOW TO SPLIT SCENES]
    DO NOT just look at location names. Look at the ACTION and DRAMA.
    
    1. **Event-Based Splitting (Must Do):**
       - Even in the same room, if the *Conversation Topic* changes significantly, create a new scene.
       - Even in the same room, if a character *Enters or Exits*, create a new scene.
       - Even in the same room, if the *Emotion* shifts (e.g., Laughing -> Crying), create a new scene to change the lighting/angle.
    
    2. **Avoid Hard-Coding:**
       - Do not lump "At Deuksu's House" into one scene.
       - Is it the Gate? The Yard? The Kitchen? The Room?
       - If they walk from the Gate to the Room, that is TWO scenes.
    
    3. **Target Count:**
       - For ~3000 characters of script, I expect **20 to 30 scenes**.
       - If you generate less than 15, you are grouping too much. Split more aggressively based on character acting.
    
    [OUTPUT RULES]
    1. "location": Specific sub-location. e.g. "Deuksu's Room (Day)", "Village Well (Night)".
    2. "description": Visual description of the BACKGROUND ONLY. 
       - **Strictly Empty Background**. 
       - Do NOT describe the characters acting here.
       - Describe the walls, floor, lighting, weather, and props *in the background*.
    3. "scriptSegment": The dialogue/action belonging to this specific beat.
    
    Output JSON:
    [{ "sceneNumber": 1, "location": "Location Name", "scriptSegment": "Script lines...", "description": "Visual background description (English)", "timeOfDay": "Day/Night" }]
    
    SCRIPT:
    ${e.substring(0,3e4)}
  `;try{const s=await o.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json"}});if(s.text){const u=ma(s.text);if(Array.isArray(u))return u.map((c,d)=>({id:`scene-${Date.now()}-${d}`,...c}))}return[]}catch(s){throw console.error(s),new Error("  .  .")}},a_=async(t,e,n,o=[])=>{const r=Bo(t),s=`
    Analyze script for main characters based on the scene list.
    ${nn}
    
    AVAILABLE DESIGN OPTIONS (Use these exact values for 'suggestedDesign' if possible):
    - gender: "Male", "Female"
    - class: "Seonbi (Joseon Scholar)", "Bandit", "King of Joseon", "Queen of Joseon", "General", "Merchant", "Buddhist Monk", "Peasant", "Gisaeng", "Shaman (Mudang)", "Magistrate (Sato)", "Grim Reaper", "Mother figure", "Father figure"
    - race: "Human", "Dokkaebi", "Gumiho", "Virgin Ghost", "Tiger Spirit", "Dragon King"
    - hair: "Sangtu (Topknot)", "Daenggi-meori", "Binyeo Bun", "Grey hair Sangtu", "Grey hair Binyeo Bun", "Gisaeng Gache", "Loose long black hair", "Wild messy hair"
  
    
    TASK: 
    1. Identify main characters.
    2. Create a Detailed Profile for each (Age, Role, Visuals).
    3. Map them to the 'AVAILABLE DESIGN OPTIONS'.
    4. For EACH SCENE, define their action shot.
    
    [CRITICAL CAMERA & COMPOSITION RULES]
    1. **NO FULL BODY SHOTS** unless absolutely necessary. Default to **Medium Shot** or **Bust Shot**.
    2. **CLEAN BACKGROUND:** Prompt must include "Solid background, isolated subject, no background objects...".
    
    [OUTPUT RULES]
    1. "name": Korean Name.
    2. "visualGuide": A short Korean summary of their look. e.g. "50  ,  ,  ".
    3. "age": Estimated age as a number string (e.g. "45").
    4. "gender": "Male" or "Female".
    5. "suggestedDesign": Object containing keys 'class', 'race', 'hair', 'clothingColor' best matching the character.
    6. "description": English visual prompt for the character.
    
    SCENES LIST:
    ${JSON.stringify(n.map(u=>({no:u.sceneNumber,loc:u.location,seg:u.scriptSegment})))}

    Output JSON:
    [{
      "name": "Name (Korean)", 
      "visualGuide": "Korean Visual Description",
      "age": "20",
      "gender": "Female",
      "suggestedDesign": {
         "class": "Gisaeng",
         "hair": "Gisaeng Gache",
         "clothingColor": "Red and Gold"
      },
      "description": "English Appearance description", 
      "chromaKeyColor": "green",
      "actions": [{ 
         "sceneNumber": 1, 
         "action": "  ()", 
         "expression": "  ()", 
         "cameraAngle": "Medium Shot", 
         "prompt": "Medium shot of a [Appearance] [Action]..." 
      }]
    }]
  `;try{const u=await r.models.generateContent({model:"gemini-2.5-flash",contents:s,config:{responseMimeType:"application/json"}});if(u.text){const c=ma(u.text);if(Array.isArray(c))return c.map((d,f)=>({id:`char-${Date.now()}-${f}`,...d,actions:(d.actions||[]).map(m=>{var p;return{sceneId:((p=n.find(g=>g.sceneNumber===m.sceneNumber))==null?void 0:p.id)||"unknown",...m}})}))}return[]}catch(u){throw console.error(u),new Error("  . (JSON  )")}},u_=async(t,e,n)=>{const o=Bo(t),r=n.map(s=>`${s.name} (${s.description})`).join(", "),i=`
    Act as a Movie Director for a Korean Historical Drama.
    Create a 5-shot Opening Sequence.
    
    ${nn}
    CHARACTERS: ${r}
    
    OUTPUT JSON:
    [
      {
        "sequenceNumber": 1,
        "title": "Title",
        "visualPrompt": "Detailed visual prompt for the Keyframe Image.",
        "videoPrompt": "Veo Prompt describing motion."
      }
    ]
    
    SCRIPT:
    ${e.substring(0,3e4)}
  `;try{const s=await o.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json"}});if(s.text){const u=ma(s.text);if(Array.isArray(u))return u.map(c=>({id:`open-${Date.now()}-${c.sequenceNumber}`,...c}))}return[]}catch(s){throw console.error(s),new Error("  ")}},ha=async(t,e,n,o="16:9",r="background",i)=>{var f,m,p,g;const s=Bo(t),u=oi[n].prompt;let c="";if(r==="character")c=`
      ${u}.
      ${nn}.
      TASK: Generate a single character on a solid Green Screen (#00FF00).
      ${i?"CRITICAL: YOU MUST CLONE THE APPEARANCE OF THE REFERENCE IMAGE. Same face, same clothes, same hair. Only change the pose.":""}
      SUBJECT: ${e}
      CRITICAL COMPOSITION RULES:
      1. **FILL THE FRAME**: Subject should be large. Use Medium Shot or Close Up unless specified otherwise.
      2. **NO BACKGROUND OBJECTS**: No chairs, no tables, no floor textures, no walls. Just the character floating in green space.
      3. **NO CROPPING**: Do not cut off the top of the head.
      4. **HIGH QUALITY**: Sharp focus, detailed face.
    `;else if(r==="cinematic")c=`
      ${u}.
      ${nn}.
      TASK: Generate a Cinematic Keyframe / Movie Still.
      SCENE DESCRIPTION: ${e}
      CRITICAL:
      - This is a full scene with characters AND background.
      - Make it look dramatic and high quality.
      - If specific characters are mentioned, include them.
    `;else{const S=/(forest|mountain|river|field|wasteland|nature|wild|animal|boar|tiger|rock|cliff|tree)/i.test(e),T=/(house|village|home|room|kitchen|yard|building|palace|street|market|tavern)/i.test(e);c=`
      ${u}.
      ${nn}.
      TASK: Generate a BACKGROUND SCENERY IMAGE.
      LOCATION: ${e}
      CRITICAL REQUIREMENT: NO PEOPLE. NO CHARACTERS. NO HUMANS. NO GHOSTS. EMPTY SCENE.
      ${S&&!T?"CRITICAL: NATURAL SETTING ONLY. DO NOT ADD ANY BUILDINGS, HOUSES, OR STRUCTURES. Just pure nature.":"Ensure ONDOL structure (raised floors) for buildings. Follow Joseon architecture rules."}
      Focus on atmosphere and lighting.
    `}const d=[{text:c}];if(i&&r==="character"){const S=i.match(/^data:(.+);base64,(.+)$/);S&&d.unshift({inlineData:{mimeType:S[1],data:S[2]}})}try{const S=await s.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:d},config:{imageConfig:{aspectRatio:o}}});for(const T of((p=(m=(f=S.candidates)==null?void 0:f[0])==null?void 0:m.content)==null?void 0:p.parts)||[])if(T.inlineData)return`data:${T.inlineData.mimeType};base64,${T.inlineData.data}`;throw new Error("  .")}catch(S){throw console.error(S),(g=S.message)!=null&&g.includes("SAFETY")?new Error("  :    . (     )"):new Error("    .    .")}},c_=async(t,e,n)=>{var c,d,f;const o=Bo(t),r=oi[n].prompt,i=[`Age/Gender: ${e.gender}`,`Role/Class: ${e.class}`,e.race!=="Human"?`Species: ${e.race}`:"",e.hair!=="None"?`Hair: ${e.hair}`:"",e.headwear!=="None"?`Headwear: ${e.headwear}`:"",e.outer!=="None"?`Outerwear: ${e.outer}`:"",e.top!=="None"?`Top: ${e.top}`:"",e.bottom!=="None"?`Bottom: ${e.bottom}`:"",e.shoes!=="None"?`Shoes: ${e.shoes}`:"",e.accessories!=="None"?`Accessories: ${e.accessories}`:"",e.clothingColor?`Clothing Color Palette: ${e.clothingColor}`:""].filter(m=>m!=="").join(", "),s=e.backgroundColor==="Green Screen"?"Solid Chroma Key Green Background (#00FF00)":e.backgroundColor==="Blue Screen"?"Solid Chroma Key Blue Background (#0000FF)":e.backgroundColor==="Solid Black"?"Solid Black Background":"Solid White Background",u=`
    ${r}. Character Design Sheet. 
    ${nn}. 
    ${i}. 
    ${s}. 
    COMPOSITION: Full body shot, centered, front view.
    CRITICAL: NO background objects, NO text, NO speech bubbles, NO furniture.
    High quality, detailed face and costume.
  `;try{const m=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:u}]},config:{imageConfig:{aspectRatio:"9:16"}}});for(const p of((f=(d=(c=m.candidates)==null?void 0:c[0])==null?void 0:d.content)==null?void 0:f.parts)||[])if(p.inlineData)return`data:${p.inlineData.mimeType};base64,${p.inlineData.data}`;throw new Error("   ")}catch(m){throw console.error(m),new Error("     ")}},re={gender:[{label:"",value:"Male"},{label:"",value:"Female"}],class:[{label:" ()",value:"Seonbi (Joseon Scholar), noble, silk robes"},{label:"/",value:"Bandit, rough appearance, wild, animal skins"},{label:"/",value:"King of Joseon, Red Royal Robe (Gonryongpo)"},{label:"/",value:"Queen of Joseon, Royal ceremonial dress"},{label:"/",value:"General, Warrior, Military uniform (Cheollik)"},{label:"/",value:"Merchant, Peddler, carrying bundle on back"},{label:"",value:"Buddhist Monk, grey robes"},{label:"/",value:"Peasant, Commoner, White hemp clothes"},{label:"",value:"Gisaeng, colorful Hanbok, artistic"},{label:"",value:"Shaman (Mudang), colorful ritual clothing"},{label:"/",value:"Magistrate (Sato), Official uniform"},{label:"",value:"Grim Reaper (Jeoseung Saja), Black Hanbok, Black Gat"},{label:"/",value:"Mother figure, modest Hanbok"},{label:"/",value:"Father figure, traditional Hanbok"}],race:[{label:"",value:"Human"},{label:"",value:"Dokkaebi (Korean Goblin), holding club"},{label:"",value:"Gumiho (Nine-tailed Fox)"},{label:"",value:"Virgin Ghost (Cheonyeo Gwishin), white Sobok, messy hair"},{label:" ()",value:"Tiger Spirit, anthropomorphic"},{label:" (/)",value:"Dragon King (Turtle spirit)"}],hair:[{label:" ( )",value:"Sangtu (Topknot) with Manggeon headband"},{label:" ()",value:"Daenggi-meori (Long Braid)"},{label:"   ()",value:"Binyeo Bun (Low bun with silver hairpin)"},{label:"  ()",value:"Grey hair Sangtu (Topknot)"},{label:"   ()",value:"Grey hair Binyeo Bun"},{label:"  ()",value:"Gisaeng Gache (Large ornate wig)"},{label:"/ ",value:"Court Lady Gache (Rounded wig)"},{label:" ()",value:"Daesu-meori (Royal ceremonial wig with gold)"},{label:"  (/)",value:"Loose long black hair"},{label:" ()",value:"Wild messy hair"}],headwear:[{label:" ",value:"None"},{label:" (  )",value:"Gat (Black translucent horsehair hat)"},{label:" ()",value:"Jeongjagwan (Indoor scholar hat)"},{label:" ()",value:"Paeraengi (Bamboo hat)"},{label:" ()",value:"Jeonrip (Military hat with peacock feather)"},{label:" ()",value:"Ikseongwan (King black cap)"},{label:" ()",value:"Samo (Official black cap with wings)"},{label:" ( )",value:"Jokduri (Wedding headpiece)"},{label:" ()",value:"Jeonmo (Wide hat with butterfly decorations)"},{label:" ()",value:"Satgat (Conical straw hat)"},{label:" ()",value:"Nambawi (Winter cap)"}],outer:[{label:"  ()",value:"None"},{label:" ()",value:"Dopo (Scholar Robe with wide sleeves)"},{label:"",value:"Durumagi (Overcoat)"},{label:" ()",value:"Cheollik (Military Robe with pleated skirt)"},{label:"/",value:"Kwaeja (Long Vest)"},{label:" ( )",value:"Jangot (Coat worn over head)"},{label:"/ ()",value:"Hwarot/Wonsam (Ceremonial Robe)"},{label:" ()",value:"Sobok (White mourning clothes)"}],top:[{label:" ",value:"Jeogori (Traditional Jacket, curved sleeves)"},{label:" ",value:"Samhwejang Jeogori (Colorful cuffs and collar)"},{label:" ",value:"Saekdong Jeogori (Striped sleeves)"},{label:" ( )",value:"Jeoksam (Hemp shirt)"}],bottom:[{label:"  ()",value:"Baji (Wide trousers tied at ankles)"},{label:"  ()",value:"Chima (Full volume skirt)"},{label:" ()",value:"Seuran-chima (Skirt with gold leaf pattern)"},{label:" ( )",value:"Short Chima (Working class)"}],shoes:[{label:" ( )",value:"Jipsin (Straw shoes, covering toes like loafers)"},{label:" ()",value:"Taasahye (Leather shoes with patterns)"},{label:" ( )",value:"Mokhwa (Black velvet boots)"},{label:" ()",value:"Kkot-sin (Flower embroidered shoes)"},{label:"",value:"Barefoot"}],accessories:[{label:"",value:"None"},{label:" ()",value:"Gombangdae (Long pipe)"},{label:"",value:"Foldable Fan"},{label:" ()",value:"Hwando (Korean Sword)"},{label:" ()",value:"Cloth Bundle/Backpack (Bojim)"},{label:"",value:"Bokjumeoni (Lucky pouch)"},{label:"",value:"Norigae (Pendant)"},{label:"",value:"Eunjangdo (Silver knife)"},{label:"",value:"Wooden Walking Stick"}],bg:[{label:"  (Green)",value:"Green Screen"},{label:"  (Blue)",value:"Blue Screen"},{label:" ",value:"Solid White"},{label:" ",value:"Solid Black"}]},pm=({onClose:t,initialName:e="",initialDesign:n,initialAge:o="30"})=>{const{apiKey:r,selectedStyle:i,setReferenceImages:s,showToast:u}=Et(),[c,d]=b.useState(e),[f,m]=b.useState(o),[p,g]=b.useState({gender:(n==null?void 0:n.gender)||re.gender[0].value,class:(n==null?void 0:n.class)||re.class[0].value,race:(n==null?void 0:n.race)||re.race[0].value,hair:(n==null?void 0:n.hair)||re.hair[0].value,headwear:(n==null?void 0:n.headwear)||re.headwear[0].value,outer:(n==null?void 0:n.outer)||re.outer[0].value,top:(n==null?void 0:n.top)||re.top[0].value,bottom:(n==null?void 0:n.bottom)||re.bottom[0].value,shoes:(n==null?void 0:n.shoes)||re.shoes[0].value,accessories:(n==null?void 0:n.accessories)||re.accessories[0].value,clothingColor:(n==null?void 0:n.clothingColor)||"",backgroundColor:re.bg[0].value}),[S,T]=b.useState(!1),[C,y]=b.useState(null);b.useEffect(()=>{},[p.gender,f]);const v=(x,I)=>{g(A=>({...A,[x]:I}))},E=async()=>{if(!c.trim())return u("  ","warning");if(!f.trim())return u(" ","warning");if(!r)return u("API  ","warning");T(!0);try{const x={...p,gender:`${f} year old ${p.gender}`},I=await c_(r,x,i);y(I),u(" .   .","success")}catch(x){u(x.message,"error")}finally{T(!1)}},_=()=>{!C||!c||(s(x=>[...x.filter(A=>A.name!==c),{id:`ref-${Date.now()}`,name:c,imageUrl:C,description:`${f} ${p.class}`,design:{...p,gender:`${f} year old ${p.gender}`}}]),u(`'${c}'  .`,"success"),t())},w=(x,I,A)=>h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("label",{className:"text-xs text-slate-400 font-bold",children:x}),h.jsx("select",{value:p[I],onChange:P=>v(I,P.target.value),className:"bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-indigo-500",children:A.map((P,k)=>h.jsx("option",{value:P.value,children:P.label},k))})]});return h.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in overflow-y-auto",children:h.jsxs("div",{className:"bg-slate-800 w-full max-w-6xl h-[90vh] rounded-2xl border border-slate-600 shadow-2xl flex flex-col md:flex-row overflow-hidden",children:[h.jsxs("div",{className:"w-full md:w-1/2 p-6 overflow-y-auto border-r border-slate-700 custom-scrollbar",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[h.jsx("i",{className:"fas fa-user-edit text-indigo-400"}),"   "]}),h.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:h.jsx("i",{className:"fas fa-times text-xl"})})]}),n&&h.jsxs("div",{className:"mb-4 bg-indigo-900/40 border border-indigo-500/50 p-3 rounded-lg flex items-center gap-3",children:[h.jsx("i",{className:"fas fa-robot text-indigo-300 text-xl"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-indigo-200 text-sm font-bold",children:"AI   "}),h.jsx("p",{className:"text-xs text-indigo-400",children:"   , ,   ."})]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-bold text-slate-300 block mb-2",children:"  ( )"}),h.jsx("input",{type:"text",value:c,onChange:x=>d(x.target.value),placeholder:": , ",className:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white focus:ring-indigo-500 font-bold text-lg"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"col-span-2 flex gap-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:"1. "}),h.jsx("select",{value:p.gender,onChange:x=>v("gender",x.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white",children:re.gender.map((x,I)=>h.jsx("option",{value:x.value,children:x.label},I))})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"text-xs text-slate-400 font-bold mb-1 block",children:" ( )"}),h.jsx("input",{type:"number",value:f,onChange:x=>m(x.target.value),placeholder:": 60",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white"})]})]}),w("2. /","class",re.class),w("3. ","race",re.race),w("4.  ","hair",re.hair),w("5. /","headwear",re.headwear),w("6. ","outer",re.outer),w("7. ","top",re.top),w("8. ","bottom",re.bottom),w("9. ","shoes",re.shoes),w("10. /","accessories",re.accessories)]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-xs text-slate-400 font-bold",children:"11.   ( )"}),h.jsx("input",{type:"text",value:p.clothingColor,onChange:x=>v("clothingColor",x.target.value),placeholder:":    ,  ",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white"})]}),w("12.  ()","backgroundColor",re.bg),h.jsxs("button",{onClick:E,disabled:S,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 mt-4",children:[S?h.jsx("i",{className:"fas fa-spinner fa-spin"}):h.jsx("i",{className:"fas fa-paint-brush"}),"  "]})]})]}),h.jsxs("div",{className:"w-full md:w-1/2 p-6 bg-black flex flex-col items-center justify-center relative",children:[h.jsx("h3",{className:"text-slate-500 font-bold mb-4 absolute top-6 left-6",children:""}),h.jsx("div",{className:"w-full max-w-sm aspect-[9/16] bg-slate-900 rounded-lg overflow-hidden border border-slate-700 flex items-center justify-center mb-6",children:C?h.jsx("img",{src:C,alt:"Preview",className:"w-full h-full object-contain"}):h.jsxs("div",{className:"text-center text-slate-600",children:[h.jsx("i",{className:"fas fa-user-circle text-6xl mb-4"}),h.jsxs("p",{children:["  ",h.jsx("br",{}),"  ."]})]})}),C&&h.jsxs("div",{className:"flex gap-4 w-full max-w-sm",children:[h.jsxs("button",{onClick:_,className:"flex-1 bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold shadow-lg",children:[h.jsx("i",{className:"fas fa-save mr-2"}),"    ()"]}),h.jsx("a",{href:C,download:`${c}_reference.png`,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-3 rounded-lg border border-slate-600",children:h.jsx("i",{className:"fas fa-download"})})]})]})]})})},d_=({id:t,style:e,selected:n,onSelect:o})=>h.jsxs("div",{onClick:()=>o(t),className:`cursor-pointer rounded-xl p-4 border-2 transition-all h-full flex flex-col gap-2 relative overflow-hidden ${n?"border-indigo-500 bg-indigo-900/30 ring-2 ring-indigo-500/50":"border-slate-700 bg-slate-800 hover:border-slate-500"}`,children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:`text-lg font-bold ${n?"text-indigo-300":"text-slate-200"}`,children:e.name}),n&&h.jsx("i",{className:"fas fa-check-circle text-indigo-400 text-xl"})]}),h.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:e.desc})]}),f_=({selected:t,onChange:e})=>{const n=[{id:"16:9",label:" (16:9)",icon:"fa-tv"},{id:"9:16",label:" (9:16)",icon:"fa-mobile-alt"},{id:"1:1",label:" (1:1)",icon:"fa-square"}];return h.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(o=>h.jsxs("button",{onClick:()=>e(o.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium flex items-center gap-2 border transition-all ${t===o.id?"bg-indigo-600 text-white border-indigo-500 shadow-md":"bg-slate-800 text-slate-400 border-slate-700 hover:bg-slate-700"}`,children:[h.jsx("i",{className:`fas ${o.icon}`}),o.label]},o.id))})},p_=({onAnalyze:t,isAnalyzing:e})=>{const{script:n,scriptSegments:o,addScriptSegment:r,removeScriptSegment:i,clearScriptSegments:s,selectedStyle:u,setSelectedStyle:c,globalAspectRatio:d,setGlobalAspectRatio:f,isContinuityMode:m,setIsContinuityMode:p,referenceImages:g,setReferenceImages:S,showToast:T}=Et(),[C,y]=b.useState(!1),[v,E]=b.useState(""),[_,w]=b.useState(""),x=b.useRef(null),I=L=>{confirm("   ?")&&S(Y=>Y.filter(q=>q.id!==L))},A=()=>{x.current&&(x.current.value="",x.current.click())},P=L=>{var O;const Y=(O=L.target.files)==null?void 0:O[0];if(!Y)return;if(Y.size>5*1024*1024){T("   5MB  .","warning");return}const q=new FileReader;q.onload=F=>{var G;const U=(G=F.target)==null?void 0:G.result;U&&setTimeout(()=>{const R=prompt("   ? (: )");R&&(S(V=>[...V,{id:`ref-upload-${Date.now()}`,name:R,imageUrl:U,description:"Imported external character"}]),T("  .","success"))},50)},q.onerror=()=>{T("   .","error")},q.readAsDataURL(Y)},k=()=>{if(!v.trim()){T(" .","warning");return}const L=_.trim()||`Chapter ${o.length+1}`;r(L,v),E(""),w(""),T(`${L} !`,"success")};return h.jsxs("div",{className:"space-y-10 animate-fade-in",children:[h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[h.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"1"}),"  ( )"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"file",ref:x,onChange:P,accept:"image/*",className:"hidden"}),h.jsxs("button",{onClick:A,className:"bg-slate-700 hover:bg-slate-600 text-slate-200 px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 border border-slate-600",children:[h.jsx("i",{className:"fas fa-upload"}),"   "]}),h.jsxs("button",{onClick:()=>y(!0),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 shadow-lg",children:[h.jsx("i",{className:"fas fa-plus"}),"  "]})]})]}),g.length===0?h.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 border-dashed rounded-xl p-6 text-center text-slate-500",children:[h.jsx("i",{className:"fas fa-users text-4xl mb-3 opacity-30"}),h.jsx("p",{children:"   ."})]}):h.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 custom-scrollbar",children:g.map(L=>h.jsxs("div",{className:"min-w-[120px] bg-slate-800 rounded-lg border border-slate-700 p-2 relative group",children:[h.jsx("div",{className:"aspect-[3/4] bg-black rounded overflow-hidden mb-2 relative",children:h.jsx("img",{src:L.imageUrl,alt:L.name,className:"w-full h-full object-cover"})}),h.jsx("p",{className:"font-bold text-center text-white text-xs truncate",children:L.name}),h.jsx("button",{onClick:()=>I(L.id),className:"absolute top-1 right-1 bg-red-600 text-white w-5 h-5 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",children:h.jsx("i",{className:"fas fa-times text-[10px]"})})]},L.id))})]}),h.jsxs("section",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[h.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"2"}),"  ( )"]}),h.jsxs("div",{className:"text-slate-400 text-sm",children:["  : ",h.jsx("span",{className:"text-indigo-400 font-bold",children:n.length}),"  / ",o.length," "]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-slate-800 p-5 rounded-xl border border-slate-700 shadow-lg flex flex-col h-full",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"text-xs text-slate-400 font-bold block mb-1",children:"  ()"}),h.jsx("input",{type:"text",value:_,onChange:L=>w(L.target.value),placeholder:`Chapter ${o.length+1}`,className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-white focus:ring-indigo-500 text-sm"})]}),h.jsx("label",{className:"text-xs text-slate-400 font-bold block mb-1",children:" "}),h.jsx("textarea",{value:v,onChange:L=>E(L.target.value),placeholder:"    . (:    ...)",className:"w-full flex-grow min-h-[200px] bg-slate-900 text-base p-4 rounded-lg border border-slate-700 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-slate-100 placeholder-slate-500 resize-none mb-4"}),h.jsxs("button",{onClick:k,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-lg font-bold shadow-lg flex items-center justify-center gap-2 transition-all",children:[h.jsx("i",{className:"fas fa-plus-circle"}),"  "]})]}),h.jsxs("div",{className:"bg-slate-900/50 p-5 rounded-xl border border-slate-700 h-full flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("h3",{className:"text-lg font-bold text-slate-200",children:[h.jsx("i",{className:"fas fa-list-ol mr-2 text-indigo-400"}),"  "]}),o.length>0&&h.jsx("button",{onClick:()=>{confirm("  ?")&&s()},className:"text-xs text-red-400 hover:text-red-300 underline",children:" "})]}),h.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-3 pr-2",style:{maxHeight:"400px"},children:o.length===0?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600 opacity-50",children:[h.jsx("i",{className:"fas fa-book-open text-5xl mb-3"}),h.jsxs("p",{children:["  ",h.jsx("br",{}),"'' ."]})]}):o.map((L,Y)=>h.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-600 relative group hover:border-indigo-500 transition-colors",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"text-xs font-bold text-indigo-300 bg-indigo-900/50 px-2 py-0.5 rounded uppercase",children:L.title||`Chapter ${Y+1}`}),h.jsx("button",{onClick:()=>i(L.id),className:"text-slate-500 hover:text-red-500 p-1",children:h.jsx("i",{className:"fas fa-trash-alt"})})]}),h.jsx("p",{className:"text-sm text-slate-300 line-clamp-3",children:L.content})]},L.id))})]})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[h.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"3"}),""]}),h.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 mb-4",children:[h.jsxs("div",{className:"mb-2 font-bold text-slate-300 flex items-center gap-2",children:[h.jsx("i",{className:"fas fa-crop-alt"}),"  "]}),h.jsx(f_,{selected:d,onChange:f})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.keys(oi).map(L=>h.jsx(d_,{id:L,style:oi[L],selected:u===L,onSelect:c},L))})]}),h.jsxs("div",{className:"flex flex-col items-center gap-4 pt-8",children:[h.jsxs("label",{className:"flex items-center gap-3 bg-slate-800 px-6 py-3 rounded-full border border-slate-600 cursor-pointer hover:bg-slate-750 select-none",children:[h.jsx("input",{type:"checkbox",checked:m,onChange:L=>p(L.target.checked),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500 border-gray-300"}),h.jsx("span",{className:"text-lg font-bold text-indigo-300",children:"  "}),h.jsx("span",{className:"text-xs text-slate-400 border-l border-slate-600 pl-3",children:"      ."})]}),o.length===0&&h.jsx("p",{className:"text-red-400 text-sm font-bold animate-pulse",children:"   !"}),h.jsxs("button",{onClick:t,disabled:e||o.length===0,className:"bg-indigo-600 hover:bg-indigo-500 text-white text-xl font-bold px-12 py-5 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-3 w-full max-w-lg justify-center",children:[e?h.jsx("i",{className:"fas fa-spinner fa-spin"}):h.jsx("i",{className:"fas fa-magic"}),e?" ...":` ${o.length}   `]})]}),C&&h.jsx(pm,{onClose:()=>y(!1)})]})},m_=({onNext:t,isNextLoading:e})=>{const{scenes:n,setScenes:o,apiKey:r,selectedStyle:i,globalAspectRatio:s,showToast:u}=Et(),[c,d]=b.useState({}),f=async(p,g)=>{d(S=>({...S,[p]:!0}));try{const S=n.find(y=>y.id===p),T=(S==null?void 0:S.aspectRatio)||s,C=await ha(r,g,i,T,"background");o(y=>y.map(v=>v.id===p?{...v,generatedImageUrl:C,aspectRatio:T}:v)),u("  !","success")}catch(S){u(S.message,"error")}finally{d(S=>({...S,[p]:!1}))}},m=(p,g)=>{const S=document.createElement("a");S.href=p,S.download=g,S.click()};return h.jsxs("div",{className:"space-y-6 animate-fade-in",children:[h.jsxs("div",{className:"flex justify-between items-center bg-slate-800 p-6 rounded-xl border border-slate-700",children:[h.jsxs("h2",{className:"text-2xl font-bold text-white",children:["   (",n.length,")"]}),h.jsxs("button",{onClick:t,disabled:e,className:"bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-bold shadow-lg flex items-center gap-2",children:[e?h.jsx("i",{className:"fas fa-spinner fa-spin"}):h.jsx("i",{className:"fas fa-arrow-right"})," () "]})]}),h.jsx("div",{className:"space-y-12",children:n.map(p=>h.jsxs("div",{className:"bg-slate-800 rounded-2xl overflow-hidden border border-slate-700 shadow-xl",children:[h.jsxs("div",{className:"bg-slate-900/50 p-6 border-b border-slate-700",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsxs("span",{className:"bg-indigo-600 text-white px-3 py-1 rounded text-sm font-bold",children:["SCENE ",p.sceneNumber]}),h.jsx("h3",{className:"text-2xl font-bold text-white",children:p.location}),h.jsx("span",{className:"text-slate-400 text-sm border border-slate-600 px-2 py-0.5 rounded-full",children:p.timeOfDay})]}),h.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-600/50",children:[h.jsxs("p",{className:"text-indigo-300 text-sm font-bold mb-1",children:[h.jsx("i",{className:"fas fa-quote-left mr-2"})," "]}),h.jsx("p",{className:"text-lg text-slate-200",children:p.scriptSegment})]})]}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"relative w-full bg-black rounded-lg overflow-hidden border border-slate-700 mb-4 flex items-center justify-center",style:{minHeight:"400px"},children:[p.generatedImageUrl?h.jsx("img",{src:p.generatedImageUrl,alt:"Background",className:"max-w-full max-h-[600px] object-contain"}):h.jsxs("div",{className:"text-slate-600 flex flex-col items-center",children:[h.jsx("i",{className:"fas fa-image text-6xl mb-4 opacity-30"}),h.jsx("span",{children:" "})]}),c[p.id]&&h.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center backdrop-blur-sm",children:h.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-indigo-500"})})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>f(p.id,`${p.location}, ${p.description}, ${p.timeOfDay}`),disabled:c[p.id],className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg",children:p.generatedImageUrl?"  ":" "}),p.generatedImageUrl&&h.jsx("button",{onClick:()=>m(p.generatedImageUrl,`scene_${p.sceneNumber}_${p.location}.png`),className:"bg-slate-700 hover:bg-slate-600 text-white px-6 rounded-xl font-bold border border-slate-600",children:h.jsx("i",{className:"fas fa-download"})})]}),h.jsxs("details",{className:"mt-4 text-sm text-slate-500 cursor-pointer",children:[h.jsx("summary",{children:" "}),h.jsx("p",{className:"mt-2 p-2 bg-slate-900 rounded",children:p.description})]})]})]},p.id))})]})},h_=()=>{const{characters:t,setCharacters:e,scenes:n,apiKey:o,selectedStyle:r,globalAspectRatio:i,showToast:s,referenceImages:u,setReferenceImages:c}=Et(),[d,f]=b.useState({}),[m,p]=b.useState(null),[g,S]=b.useState(!1),[T,C]=b.useState(""),[y,v]=b.useState(void 0),[E,_]=b.useState("30"),w=b.useRef(null),[x,I]=b.useState(null),A=F=>{I(F),w.current&&(w.current.value="",w.current.click())},P=F=>{var R;const U=(R=F.target.files)==null?void 0:R[0];if(!U||!x)return;if(U.size>5*1024*1024){s("   5MB  .","warning");return}const G=new FileReader;G.onload=V=>{var $;const H=($=V.target)==null?void 0:$.result;H&&(c(oe=>[...oe.filter(Ae=>Ae.name!==x),{id:`ref-upload-${Date.now()}`,name:x,imageUrl:H,description:"Imported external character"}]),s(`'${x}'   .`,"success"),I(null))},G.onerror=()=>{s("   .","error"),I(null)},G.readAsDataURL(U)},k=F=>{confirm(`'${F}'   ?`)&&(c(U=>U.filter(G=>G.name!==F)),s("  .","success"))},L=(F,U,G)=>{C(F),v(U),_(G||"30"),S(!0)},Y=async(F,U)=>{const G=t.find($=>$.id===F),R=G==null?void 0:G.actions[U];if(!G||!R)return;const V=u.find($=>$.name===G.name),H=`${F}-${R.sceneNumber}`;f($=>({...$,[H]:!0}));try{const $=`Character: ${G.name}. Appearance: ${G.description}. Action: ${R.action}. Expression: ${R.expression}. Camera: ${R.cameraAngle}. ${R.prompt||""}`,oe=await ha(o,$,r,i,"character",V==null?void 0:V.imageUrl);e(zt=>zt.map(Ae=>{if(Ae.id!==F)return Ae;const Jt=[...Ae.actions];return Jt[U]={...Jt[U],generatedImageUrl:oe,aspectRatio:i},{...Ae,actions:Jt}})),s("  ","success")}catch($){s($.message,"error")}finally{f($=>({...$,[H]:!1}))}},q=(F,U)=>{const G=document.createElement("a");G.href=F,G.download=U,G.click()},O=(F,U,G)=>{e(R=>R.map(V=>{if(V.id!==F)return V;const H=[...V.actions];return H[U]={...H[U],prompt:G},{...V,actions:H}}))};return h.jsxs("div",{className:"space-y-8 animate-fade-in relative",children:[h.jsx("input",{type:"file",ref:w,onChange:P,accept:"image/*",className:"hidden"}),h.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[h.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  "}),h.jsxs("p",{className:"text-slate-400",children:[h.jsx("span",{className:"text-indigo-400 font-bold",children:"1:"}),"       .",h.jsx("br",{}),h.jsx("span",{className:"text-indigo-400 font-bold",children:"2:"}),"     ."]})]}),t.map(F=>{const U=u.find(G=>G.name===F.name);return h.jsxs("div",{className:"bg-slate-900 rounded-xl overflow-hidden border border-slate-700 shadow-lg",children:[h.jsxs("div",{className:"p-5 bg-slate-800 border-b border-slate-700 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[h.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-sm",children:""}),F.name]}),F.visualGuide&&h.jsxs("div",{className:"mt-2 bg-indigo-900/30 p-2 rounded border border-indigo-500/30 text-sm",children:[h.jsxs("span",{className:"text-indigo-300 font-bold mr-2",children:[h.jsx("i",{className:"fas fa-robot"})," AI  :"]}),h.jsx("span",{className:"text-slate-200",children:F.visualGuide})]}),!F.visualGuide&&h.jsx("p",{className:"text-slate-400 text-sm mt-1",children:F.description}),h.jsx("div",{className:"mt-2 flex gap-2",children:h.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-bold uppercase ${F.chromaKeyColor==="green"?"bg-green-900 text-green-300":"bg-white text-black"}`,children:F.chromaKeyColor==="green"?" ":" "})})]}),h.jsx("div",{className:"w-full md:w-auto flex items-center gap-4 bg-slate-900 p-3 rounded-xl border border-slate-600",children:U?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden border border-indigo-500 group",children:[h.jsx("img",{src:U.imageUrl,alt:"Ref",className:"w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:h.jsx("i",{className:"fas fa-check text-green-400"})})]}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-indigo-400",children:"   "}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>k(F.name),className:"text-xs bg-red-900/50 hover:bg-red-900 text-red-300 px-2 py-1 rounded border border-red-800",children:""}),h.jsx("button",{onClick:()=>A(F.name),className:"text-xs bg-slate-700 hover:bg-slate-600 text-slate-300 px-2 py-1 rounded border border-slate-600",children:""})]})]})]}):h.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[h.jsx("span",{className:"text-xs text-slate-500 font-bold mb-1",children:"   "}),h.jsxs("div",{className:"flex gap-2",children:[F.suggestedDesign?h.jsxs("button",{onClick:()=>L(F.name,F.suggestedDesign,F.age),className:"bg-indigo-600 hover:bg-indigo-500 text-white text-xs px-3 py-2 rounded-lg font-bold flex items-center gap-2 animate-pulse",children:[h.jsx("i",{className:"fas fa-magic"})," AI  "]}):h.jsxs("button",{onClick:()=>L(F.name),className:"bg-indigo-600 hover:bg-indigo-500 text-white text-xs px-3 py-2 rounded-lg font-bold flex items-center gap-2",children:[h.jsx("i",{className:"fas fa-magic"})," AI "]}),h.jsxs("button",{onClick:()=>A(F.name),className:"bg-slate-700 hover:bg-slate-600 text-slate-200 text-xs px-3 py-2 rounded-lg font-bold flex items-center gap-2 border border-slate-600",children:[h.jsx("i",{className:"fas fa-upload"})," "]})]})]})})]}),h.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-6 bg-slate-800/50",children:F.actions.map((G,R)=>{const V=`${F.id}-${G.sceneNumber}`,H=n.find($=>$.sceneNumber===G.sceneNumber);return h.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4 flex flex-col gap-4 relative",children:[h.jsxs("div",{className:"absolute top-0 right-0 bg-slate-700 text-slate-300 text-[10px] px-2 py-1 rounded-bl-lg border-l border-b border-slate-600",children:["SCENE ",G.sceneNumber]}),h.jsx("div",{className:"flex justify-between items-start mt-2",children:h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-indigo-400 font-bold mb-1",children:H==null?void 0:H.location}),h.jsx("p",{className:"font-bold text-white text-lg leading-tight",children:G.action}),h.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:[": ",G.expression," / : ",G.cameraAngle]})]})}),h.jsxs("div",{className:"relative w-full bg-slate-900 rounded-lg overflow-hidden border border-slate-600 flex items-center justify-center min-h-[300px]",children:[G.generatedImageUrl?h.jsx("img",{src:G.generatedImageUrl,alt:"Character",className:"max-w-full max-h-[400px] object-contain"}):h.jsxs("div",{className:"text-slate-600 flex flex-col items-center",children:[h.jsx("i",{className:"fas fa-user-ninja text-5xl mb-3 opacity-20"}),h.jsx("span",{className:"text-sm opacity-50",children:"   "}),!U&&h.jsx("span",{className:"text-xs text-red-400 mt-2 font-bold animate-pulse",children:"     !"})]}),d[V]&&h.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center backdrop-blur-sm z-10",children:h.jsx("i",{className:"fas fa-spinner fa-spin text-3xl text-indigo-500"})})]}),m===V?h.jsxs("div",{children:[h.jsx("textarea",{value:G.prompt||"",onChange:$=>O(F.id,R,$.target.value),className:"w-full bg-black/50 text-slate-200 text-sm p-2 rounded border border-indigo-500 h-24"}),h.jsx("button",{onClick:()=>p(null),className:"text-xs text-indigo-400 mt-1 hover:underline",children:" "})]}):h.jsxs("div",{className:"flex justify-between items-center bg-slate-900/50 p-2 rounded cursor-pointer hover:bg-slate-900 transition-colors",onClick:()=>p(V),children:[h.jsx("p",{className:"text-xs text-slate-500 truncate w-64",children:G.prompt||" "}),h.jsx("i",{className:"fas fa-pen text-xs text-slate-600"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>Y(F.id,R),disabled:d[V],className:`flex-1 py-3 rounded-lg font-bold shadow transition-colors flex items-center justify-center gap-2 ${U?"bg-indigo-600 hover:bg-indigo-500 text-white":"bg-slate-700 text-slate-400"}`,children:[U&&h.jsx("i",{className:"fas fa-link text-xs"}),G.generatedImageUrl?" ":" "]}),G.generatedImageUrl&&h.jsx("button",{onClick:()=>q(G.generatedImageUrl,`${F.name}_scene${G.sceneNumber}.png`),className:"bg-green-600 hover:bg-green-500 text-white px-4 rounded-lg",children:h.jsx("i",{className:"fas fa-download"})})]})]},V)})})]},F.id)}),g&&h.jsx(pm,{onClose:()=>S(!1),initialName:T,initialDesign:y,initialAge:E})]})},g_=()=>{const{script:t,characters:e,apiKey:n,selectedStyle:o,globalAspectRatio:r,showToast:i}=Et(),[s,u]=b.useState(!1),[c,d]=b.useState([]),[f,m]=b.useState({}),p=async()=>{if(!t)return i(" .","warning");if(!n)return i("API  .","warning");u(!0);try{const T=await u_(n,t,e);d(T),i("  .   !","success")}catch(T){i(T.message,"error")}finally{u(!1)}},g=async T=>{m(C=>({...C,[T.id]:!0}));try{const C=await ha(n,T.visualPrompt,o,r,"cinematic");d(y=>y.map(v=>v.id===T.id?{...v,generatedImageUrl:C}:v)),i(`${T.sequenceNumber}   `,"success")}catch(C){i(C.message,"error")}finally{m(C=>({...C,[T.id]:!1}))}},S=(T,C)=>{const y=document.createElement("a");y.href=T,y.download=C,y.click()};return h.jsxs("div",{className:"space-y-8 animate-fade-in pb-20",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500"}),h.jsxs("div",{className:"z-10 mb-4 md:mb-0",children:[h.jsxs("h2",{className:"text-3xl font-extrabold text-white mb-2 flex items-center gap-3",children:[h.jsx("i",{className:"fas fa-film text-red-500"}),"   "]}),h.jsxs("p",{className:"text-slate-400",children:["   ",h.jsx("span",{className:"text-red-400 font-bold",children:"(Hooking)"}),"  .",h.jsx("br",{}),"    ",h.jsx("strong",{children:"Veo"}),"  ."]})]}),h.jsxs("button",{onClick:p,disabled:s,className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white px-8 py-4 rounded-full font-bold text-lg shadow-lg shadow-red-900/50 flex items-center gap-3 transition-all transform hover:scale-105",children:[s?h.jsx("i",{className:"fas fa-spinner fa-spin"}):h.jsx("i",{className:"fas fa-magic"}),"   (AI)"]})]}),c.length>0&&h.jsxs("div",{className:"space-y-0",children:[c.map((T,C)=>h.jsxs("div",{className:"relative pl-8 md:pl-12 py-6 group",children:[h.jsx("div",{className:"absolute left-4 md:left-6 top-0 bottom-0 w-0.5 bg-slate-700 group-last:bottom-auto group-last:h-1/2"}),h.jsx("div",{className:"absolute left-2 md:left-4 top-12 w-4 h-4 md:w-5 md:h-5 rounded-full bg-slate-900 border-4 border-indigo-500 z-10 shadow-lg shadow-indigo-500/50"}),h.jsx("div",{className:"bg-slate-900 rounded-xl border border-slate-700 overflow-hidden hover:border-indigo-500 transition-colors",children:h.jsxs("div",{className:"flex flex-col md:flex-row",children:[h.jsxs("div",{className:"w-full md:w-2/5 bg-black relative min-h-[250px] flex items-center justify-center border-r border-slate-800",children:[T.generatedImageUrl?h.jsx("img",{src:T.generatedImageUrl,alt:T.title,className:"w-full h-full object-cover"}):h.jsxs("div",{className:"text-center p-6",children:[h.jsx("i",{className:"fas fa-clapperboard text-4xl text-slate-700 mb-3"}),h.jsx("p",{className:"text-slate-500 text-sm",children:"  "})]}),h.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-3",children:[h.jsxs("button",{onClick:()=>g(T),disabled:f[T.id],className:"bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-2 rounded-full font-bold shadow-lg flex items-center gap-2",children:[f[T.id]?h.jsx("i",{className:"fas fa-spinner fa-spin"}):h.jsx("i",{className:"fas fa-paint-brush"}),T.generatedImageUrl?"  ":" "]}),T.generatedImageUrl&&h.jsxs("button",{onClick:()=>S(T.generatedImageUrl,`opening_shot_${T.sequenceNumber}.png`),className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-full font-bold shadow-lg flex items-center gap-2",children:[h.jsx("i",{className:"fas fa-download"})," "]})]})]}),h.jsx("div",{className:"w-full md:w-3/5 p-6 flex flex-col justify-between",children:h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[h.jsxs("span",{className:"text-indigo-400",children:["#",T.sequenceNumber]})," ",T.title]}),C<c.length-1&&h.jsxs("span",{className:"text-xs bg-slate-800 text-slate-400 px-2 py-1 rounded border border-slate-700",children:["   ",h.jsx("i",{className:"fas fa-arrow-down ml-1"})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-700",children:[h.jsxs("p",{className:"text-xs font-bold text-slate-400 mb-1 uppercase",children:[h.jsx("i",{className:"fas fa-image mr-1"}),"   "]}),h.jsx("p",{className:"text-sm text-slate-300 line-clamp-3 hover:line-clamp-none transition-all cursor-help",children:T.visualPrompt})]}),h.jsxs("div",{className:"bg-indigo-900/20 p-3 rounded-lg border border-indigo-500/30",children:[h.jsxs("div",{className:"flex justify-between items-center mb-1",children:[h.jsxs("p",{className:"text-xs font-bold text-indigo-300 uppercase",children:[h.jsx("i",{className:"fas fa-video mr-1"})," Veo  "]}),h.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(T.videoPrompt),i(" ","success")},className:"text-xs text-indigo-400 hover:text-white",children:[h.jsx("i",{className:"fas fa-copy"})," "]})]}),h.jsx("p",{className:"text-sm text-indigo-200 font-mono",children:T.videoPrompt}),h.jsx("p",{className:"text-[10px] text-indigo-400/70 mt-2",children:"* Veo  (Start)   (End)    ."})]})]})]})})]})})]},T.id)),h.jsx("div",{className:"pl-8 md:pl-12 pb-8",children:h.jsx("div",{className:"bg-slate-800/50 border border-slate-700 border-dashed rounded-xl p-4 text-center",children:h.jsxs("p",{className:"text-slate-400 text-sm",children:[h.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"})," 5   (Cliffhanger).      ."]})})})]}),c.length===0&&!s&&h.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-600",children:[h.jsx("i",{className:"fas fa-film text-6xl mb-4 opacity-20"}),h.jsx("p",{className:"text-lg",children:"    ."})]})]})},v_=()=>{const{toast:t,closeToast:e}=Et();if(!t)return null;const n={success:"bg-green-600",error:"bg-red-600",warning:"bg-yellow-600"};return h.jsxs("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 ${n[t.type]} text-white px-6 py-3 rounded-full shadow-2xl z-[100] flex items-center gap-3 animate-fade-in-up cursor-pointer`,onClick:e,children:[h.jsx("i",{className:`fas ${t.type==="success"?"fa-check-circle":t.type==="warning"?"fa-exclamation-triangle":"fa-times-circle"}`}),h.jsx("span",{className:"font-medium",children:t.message})]})},y_=({onOpenApiKey:t})=>{const{apiKey:e}=Et();return h.jsxs("header",{className:"bg-slate-900 border-b border-slate-700 p-4 flex items-center justify-between sticky top-0 z-50 shadow-md",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg",children:""}),h.jsxs("h1",{className:"text-2xl font-bold text-white tracking-wide",children:["  ",h.jsx("span",{className:"text-xs text-slate-500 font-normal ml-2",children:"Ver 2.0 (Joseon Ed.)"})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[e&&h.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-slate-800 px-3 py-1.5 rounded-full border border-slate-600 mr-2",children:[h.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"}),h.jsx("span",{className:"text-xs text-slate-300 font-medium",children:""})]}),h.jsxs("button",{onClick:t,className:"bg-slate-800 hover:bg-slate-700 text-slate-200 px-4 py-2 rounded-lg border border-slate-600 flex items-center gap-2 transition-all text-sm font-medium",children:[h.jsx("i",{className:`fas fa-key ${e?"text-green-500":"text-yellow-500"}`}),e?"API  ":"API  "]})]})]})},fr=({active:t,label:e,icon:n,onClick:o,disabled:r})=>h.jsxs("button",{onClick:o,disabled:r,className:`flex-1 py-4 text-lg font-bold flex items-center justify-center gap-3 transition-all ${t?"bg-indigo-600 text-white shadow-inner border-b-4 border-indigo-800":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white border-b-4 border-slate-900"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx("i",{className:`fas ${n} text-xl`}),e]}),S_=({isOpen:t,onClose:e})=>{const{apiKey:n,setApiKey:o,showToast:r}=Et(),[i,s]=b.useState(n);return t?h.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:h.jsxs("div",{className:"bg-slate-800 w-full max-w-md p-8 rounded-2xl border border-slate-600 shadow-2xl relative",children:[h.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:h.jsx("i",{className:"fas fa-times text-xl"})}),h.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[h.jsx("i",{className:"fas fa-key text-yellow-500"})," API  "]}),h.jsx("p",{className:"text-slate-300 mb-6 text-sm",children:"Google AI Studio  Gemini API Key ."}),h.jsx("input",{type:"password",value:i,onChange:u=>s(u.target.value),placeholder:"AIzaSy...",className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-4 text-white focus:ring-2 focus:ring-indigo-500 mb-6 font-mono"}),h.jsx("button",{onClick:()=>{i?(o(i),e(),r(".","success")):r(" .","warning")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg",children:"  "}),h.jsx("div",{className:"mt-6 pt-4 border-t border-slate-700 text-center",children:h.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-400 text-sm",children:"API  "})})]})}):null},E_=()=>{const{apiKey:t,script:e,scenes:n,characters:o,setScenes:r,setCharacters:i,isContinuityMode:s,showToast:u,resetProject:c}=Et(),[d,f]=b.useState("script"),[m,p]=b.useState(!1),[g,S]=b.useState(!1),[T,C]=b.useState(!1),y=async()=>{if(!t)return p(!0);if(!e.trim())return u(" !","warning");S(!0);try{const w=(await l_(t,e,s?n:[])).map((x,I)=>({...x,id:`scene-${Date.now()}-${I}`}));s?r(x=>[...x,...w]):(r(w),i([])),f("sintong"),u(` ! ${w.length} `,"success")}catch(E){u(E.message,"error")}finally{S(!1)}},v=async()=>{if(!t)return p(!0);C(!0);try{const _=await a_(t,e,n,s?o:[]);i(s?w=>{const x=[...w];return _.forEach(I=>{const A=x.findIndex(P=>P.name===I.name);A>=0?x[A].actions.push(...I.actions):x.push(I)}),x}:_),f("bangtong"),u("  !","success")}catch(E){u(E.message,"error")}finally{C(!1)}};return h.jsxs("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 font-sans selection:bg-indigo-500 selection:text-white pb-20",children:[h.jsx(y_,{onOpenApiKey:()=>p(!0)}),h.jsxs("div",{className:"flex border-b border-slate-700 sticky top-[72px] z-40 bg-[#0f172a]",children:[h.jsx(fr,{active:d==="script",onClick:()=>f("script"),label:"1. /",icon:"fa-file-alt"}),h.jsx(fr,{active:d==="bangtong",onClick:()=>f("bangtong"),label:"2. ()",icon:"fa-user-ninja"}),h.jsx(fr,{active:d==="sintong",onClick:()=>f("sintong"),label:"3. ()",icon:"fa-mountain"}),h.jsx(fr,{active:d==="opening",onClick:()=>f("opening"),label:"4. ",icon:"fa-film"})]}),h.jsxs("main",{className:"max-w-6xl mx-auto p-6 min-h-[calc(100vh-140px)]",children:[d==="script"&&h.jsx(p_,{onAnalyze:y,isAnalyzing:g}),d==="sintong"&&h.jsx(m_,{onNext:v,isNextLoading:T}),d==="bangtong"&&h.jsx(h_,{}),d==="opening"&&h.jsx(g_,{})]}),h.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:h.jsxs("button",{onClick:c,className:"bg-red-900/80 hover:bg-red-900 text-red-200 px-4 py-2 rounded-full text-xs border border-red-700 backdrop-blur",children:[h.jsx("i",{className:"fas fa-trash mr-1"}),"  "]})}),h.jsx(v_,{}),h.jsx(S_,{isOpen:m,onClose:()=>p(!1)})]})},T_=()=>h.jsx(Wg,{children:h.jsx(E_,{})}),mm=document.getElementById("root");if(!mm)throw new Error("Could not find root element to mount to");const C_=os.createRoot(mm);C_.render(h.jsx(km.StrictMode,{children:h.jsx(T_,{})}));
