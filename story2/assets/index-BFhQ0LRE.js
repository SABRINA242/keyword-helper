(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function pm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rd={exports:{}},oi={},id={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lo=Symbol.for("react.element"),mm=Symbol.for("react.portal"),hm=Symbol.for("react.fragment"),gm=Symbol.for("react.strict_mode"),vm=Symbol.for("react.profiler"),ym=Symbol.for("react.provider"),Sm=Symbol.for("react.context"),Em=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),Cm=Symbol.for("react.memo"),_m=Symbol.for("react.lazy"),ha=Symbol.iterator;function wm(t){return t===null||typeof t!="object"?null:(t=ha&&t[ha]||t["@@iterator"],typeof t=="function"?t:null)}var sd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ld=Object.assign,ad={};function qn(t,e,n){this.props=t,this.context=e,this.refs=ad,this.updater=n||sd}qn.prototype.isReactComponent={};qn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ud(){}ud.prototype=qn.prototype;function cl(t,e,n){this.props=t,this.context=e,this.refs=ad,this.updater=n||sd}var dl=cl.prototype=new ud;dl.constructor=cl;ld(dl,qn.prototype);dl.isPureReactComponent=!0;var ga=Array.isArray,cd=Object.prototype.hasOwnProperty,fl={current:null},dd={key:!0,ref:!0,__self:!0,__source:!0};function fd(t,e,n){var o,r={},i=null,l=null;if(e!=null)for(o in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)cd.call(e,o)&&!dd.hasOwnProperty(o)&&(r[o]=e[o]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(o in u=t.defaultProps,u)r[o]===void 0&&(r[o]=u[o]);return{$$typeof:Lo,type:t,key:i,ref:l,props:r,_owner:fl.current}}function xm(t,e){return{$$typeof:Lo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lo}function Im(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var va=/\/+/g;function Ai(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Im(""+t.key):e.toString(36)}function fr(t,e,n,o,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Lo:case mm:l=!0}}if(l)return l=t,r=r(l),t=o===""?"."+Ai(l,0):o,ga(r)?(n="",t!=null&&(n=t.replace(va,"$&/")+"/"),fr(r,e,n,"",function(d){return d})):r!=null&&(pl(r)&&(r=xm(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(va,"$&/")+"/")+t)),e.push(r)),1;if(l=0,o=o===""?".":o+":",ga(t))for(var u=0;u<t.length;u++){i=t[u];var c=o+Ai(i,u);l+=fr(i,e,n,c,r)}else if(c=wm(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=o+Ai(i,u++),l+=fr(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function bo(t,e,n){if(t==null)return t;var o=[],r=0;return fr(t,o,"","",function(i){return e.call(n,i,r++)}),o}function Am(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ie={current:null},pr={transition:null},Nm={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:pr,ReactCurrentOwner:fl};function pd(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:bo,forEach:function(t,e,n){bo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bo(t,function(){e++}),e},toArray:function(t){return bo(t,function(e){return e})||[]},only:function(t){if(!pl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};B.Component=qn;B.Fragment=hm;B.Profiler=vm;B.PureComponent=cl;B.StrictMode=gm;B.Suspense=Tm;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nm;B.act=pd;B.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=ld({},t.props),r=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=fl.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)cd.call(e,c)&&!dd.hasOwnProperty(c)&&(o[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:Lo,type:t.type,key:r,ref:i,props:o,_owner:l}};B.createContext=function(t){return t={$$typeof:Sm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ym,_context:t},t.Consumer=t};B.createElement=fd;B.createFactory=function(t){var e=fd.bind(null,t);return e.type=t,e};B.createRef=function(){return{current:null}};B.forwardRef=function(t){return{$$typeof:Em,render:t}};B.isValidElement=pl;B.lazy=function(t){return{$$typeof:_m,_payload:{_status:-1,_result:t},_init:Am}};B.memo=function(t,e){return{$$typeof:Cm,type:t,compare:e===void 0?null:e}};B.startTransition=function(t){var e=pr.transition;pr.transition={};try{t()}finally{pr.transition=e}};B.unstable_act=pd;B.useCallback=function(t,e){return Ie.current.useCallback(t,e)};B.useContext=function(t){return Ie.current.useContext(t)};B.useDebugValue=function(){};B.useDeferredValue=function(t){return Ie.current.useDeferredValue(t)};B.useEffect=function(t,e){return Ie.current.useEffect(t,e)};B.useId=function(){return Ie.current.useId()};B.useImperativeHandle=function(t,e,n){return Ie.current.useImperativeHandle(t,e,n)};B.useInsertionEffect=function(t,e){return Ie.current.useInsertionEffect(t,e)};B.useLayoutEffect=function(t,e){return Ie.current.useLayoutEffect(t,e)};B.useMemo=function(t,e){return Ie.current.useMemo(t,e)};B.useReducer=function(t,e,n){return Ie.current.useReducer(t,e,n)};B.useRef=function(t){return Ie.current.useRef(t)};B.useState=function(t){return Ie.current.useState(t)};B.useSyncExternalStore=function(t,e,n){return Ie.current.useSyncExternalStore(t,e,n)};B.useTransition=function(){return Ie.current.useTransition()};B.version="18.3.1";id.exports=B;var H=id.exports;const Rm=pm(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm=H,km=Symbol.for("react.element"),Mm=Symbol.for("react.fragment"),Dm=Object.prototype.hasOwnProperty,Lm=Pm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Um={key:!0,ref:!0,__self:!0,__source:!0};function md(t,e,n){var o,r={},i=null,l=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(o in e)Dm.call(e,o)&&!Um.hasOwnProperty(o)&&(r[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)r[o]===void 0&&(r[o]=e[o]);return{$$typeof:km,type:t,key:i,ref:l,props:r,_owner:Lm.current}}oi.Fragment=Mm;oi.jsx=md;oi.jsxs=md;rd.exports=oi;var v=rd.exports,os={},hd={exports:{}},Ve={},gd={exports:{}},vd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,U){var G=M.length;M.push(U);e:for(;0<G;){var oe=G-1>>>1,ae=M[oe];if(0<r(ae,U))M[oe]=U,M[G]=ae,G=oe;else break e}}function n(M){return M.length===0?null:M[0]}function o(M){if(M.length===0)return null;var U=M[0],G=M.pop();if(G!==U){M[0]=G;e:for(var oe=0,ae=M.length,Bo=ae>>>1;oe<Bo;){var zt=2*(oe+1)-1,Ii=M[zt],Jt=zt+1,qo=M[Jt];if(0>r(Ii,G))Jt<ae&&0>r(qo,Ii)?(M[oe]=qo,M[Jt]=G,oe=Jt):(M[oe]=Ii,M[zt]=G,oe=zt);else if(Jt<ae&&0>r(qo,G))M[oe]=qo,M[Jt]=G,oe=Jt;else break e}}return U}function r(M,U){var G=M.sortIndex-U.sortIndex;return G!==0?G:M.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],d=[],f=1,m=null,p=3,g=!1,T=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var U=n(d);U!==null;){if(U.callback===null)o(d);else if(U.startTime<=M)o(d),U.sortIndex=U.expirationTime,e(c,U);else break;U=n(d)}}function _(M){if(E=!1,S(M),!T)if(n(c)!==null)T=!0,V(w);else{var U=n(d);U!==null&&ge(_,U.startTime-M)}}function w(M,U){T=!1,E&&(E=!1,h(R),R=-1),g=!0;var G=p;try{for(S(U),m=n(c);m!==null&&(!(m.expirationTime>U)||M&&!F());){var oe=m.callback;if(typeof oe=="function"){m.callback=null,p=m.priorityLevel;var ae=oe(m.expirationTime<=U);U=t.unstable_now(),typeof ae=="function"?m.callback=ae:m===n(c)&&o(c),S(U)}else o(c);m=n(c)}if(m!==null)var Bo=!0;else{var zt=n(d);zt!==null&&ge(_,zt.startTime-U),Bo=!1}return Bo}finally{m=null,p=G,g=!1}}var x=!1,I=null,R=-1,P=5,A=-1;function F(){return!(t.unstable_now()-A<P)}function j(){if(I!==null){var M=t.unstable_now();A=M;var U=!0;try{U=I(!0,M)}finally{U?b():(x=!1,I=null)}}else x=!1}var b;if(typeof y=="function")b=function(){y(j)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ne=q.port2;q.port1.onmessage=j,b=function(){ne.postMessage(null)}}else b=function(){C(j,0)};function V(M){I=M,x||(x=!0,b())}function ge(M,U){R=C(function(){M(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){T||g||(T=!0,V(w))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var G=p;p=U;try{return M()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=p;p=M;try{return U()}finally{p=G}},t.unstable_scheduleCallback=function(M,U,G){var oe=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?oe+G:oe):G=oe,M){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=G+ae,M={id:f++,callback:U,priorityLevel:M,startTime:G,expirationTime:ae,sortIndex:-1},G>oe?(M.sortIndex=G,e(d,M),n(c)===null&&M===n(d)&&(E?(h(R),R=-1):E=!0,ge(_,G-oe))):(M.sortIndex=ae,e(c,M),T||g||(T=!0,V(w))),M},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(M){var U=p;return function(){var G=p;p=U;try{return M.apply(this,arguments)}finally{p=G}}}})(vd);gd.exports=vd;var Fm=gd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=H,Fe=Fm;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yd=new Set,vo={};function sn(t,e){Dn(t,e),Dn(t+"Capture",e)}function Dn(t,e){for(vo[t]=e,t=0;t<e.length;t++)yd.add(e[t])}var pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rs=Object.prototype.hasOwnProperty,Gm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ya={},Sa={};function Hm(t){return rs.call(Sa,t)?!0:rs.call(ya,t)?!1:Gm.test(t)?Sa[t]=!0:(ya[t]=!0,!1)}function Bm(t,e,n,o){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qm(t,e,n,o){if(e===null||typeof e>"u"||Bm(t,e,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ae(t,e,n,o,r,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var he={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){he[t]=new Ae(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];he[e]=new Ae(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){he[t]=new Ae(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){he[t]=new Ae(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){he[t]=new Ae(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){he[t]=new Ae(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){he[t]=new Ae(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){he[t]=new Ae(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){he[t]=new Ae(t,5,!1,t.toLowerCase(),null,!1,!1)});var ml=/[\-:]([a-z])/g;function hl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ml,hl);he[e]=new Ae(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ml,hl);he[e]=new Ae(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ml,hl);he[e]=new Ae(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){he[t]=new Ae(t,1,!1,t.toLowerCase(),null,!1,!1)});he.xlinkHref=new Ae("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){he[t]=new Ae(t,1,!1,t.toLowerCase(),null,!0,!0)});function gl(t,e,n,o){var r=he.hasOwnProperty(e)?he[e]:null;(r!==null?r.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qm(e,n,r,o)&&(n=null),o||r===null?Hm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,o=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,o?t.setAttributeNS(o,e,n):t.setAttribute(e,n))))}var yt=Vm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$o=Symbol.for("react.element"),dn=Symbol.for("react.portal"),fn=Symbol.for("react.fragment"),vl=Symbol.for("react.strict_mode"),is=Symbol.for("react.profiler"),Sd=Symbol.for("react.provider"),Ed=Symbol.for("react.context"),yl=Symbol.for("react.forward_ref"),ss=Symbol.for("react.suspense"),ls=Symbol.for("react.suspense_list"),Sl=Symbol.for("react.memo"),_t=Symbol.for("react.lazy"),Td=Symbol.for("react.offscreen"),Ea=Symbol.iterator;function Wn(t){return t===null||typeof t!="object"?null:(t=Ea&&t[Ea]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Object.assign,Ni;function no(t){if(Ni===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ni=e&&e[1]||""}return`
`+Ni+t}var Ri=!1;function Pi(t,e){if(!t||Ri)return"";Ri=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var o=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){o=d}t.call(e.prototype)}else{try{throw Error()}catch(d){o=d}t()}}catch(d){if(d&&o&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=o.stack.split(`
`),l=r.length-1,u=i.length-1;1<=l&&0<=u&&r[l]!==i[u];)u--;for(;1<=l&&0<=u;l--,u--)if(r[l]!==i[u]){if(l!==1||u!==1)do if(l--,u--,0>u||r[l]!==i[u]){var c=`
`+r[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=u);break}}}finally{Ri=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?no(t):""}function bm(t){switch(t.tag){case 5:return no(t.type);case 16:return no("Lazy");case 13:return no("Suspense");case 19:return no("SuspenseList");case 0:case 2:case 15:return t=Pi(t.type,!1),t;case 11:return t=Pi(t.type.render,!1),t;case 1:return t=Pi(t.type,!0),t;default:return""}}function as(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fn:return"Fragment";case dn:return"Portal";case is:return"Profiler";case vl:return"StrictMode";case ss:return"Suspense";case ls:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ed:return(t.displayName||"Context")+".Consumer";case Sd:return(t._context.displayName||"Context")+".Provider";case yl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sl:return e=t.displayName||null,e!==null?e:as(t.type)||"Memo";case _t:e=t._payload,t=t._init;try{return as(t(e))}catch{}}return null}function $m(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return as(e);case 8:return e===vl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zm(t){var e=Cd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){o=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(l){o=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zo(t){t._valueTracker||(t._valueTracker=zm(t))}function _d(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),o="";return t&&(o=Cd(t)?t.checked?"true":"false":t.value),t=o,t!==n?(e.setValue(t),!0):!1}function Ir(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function us(t,e){var n=e.checked;return Z({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ta(t,e){var n=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;n=Gt(e.value!=null?e.value:n),t._wrapperState={initialChecked:o,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wd(t,e){e=e.checked,e!=null&&gl(t,"checked",e,!1)}function cs(t,e){wd(t,e);var n=Gt(e.value),o=e.type;if(n!=null)o==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ds(t,e.type,n):e.hasOwnProperty("defaultValue")&&ds(t,e.type,Gt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ca(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ds(t,e,n){(e!=="number"||Ir(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var oo=Array.isArray;function xn(t,e,n,o){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&o&&(t[n].defaultSelected=!0)}else{for(n=""+Gt(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,o&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function fs(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return Z({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _a(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(N(92));if(oo(n)){if(1<n.length)throw Error(N(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gt(n)}}function xd(t,e){var n=Gt(e.value),o=Gt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),o!=null&&(t.defaultValue=""+o)}function wa(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Id(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ps(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Id(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jo,Ad=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,o,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,o,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jo=Jo||document.createElement("div"),Jo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var lo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jm=["Webkit","ms","Moz","O"];Object.keys(lo).forEach(function(t){Jm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lo[e]=lo[t]})});function Nd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||lo.hasOwnProperty(t)&&lo[t]?(""+e).trim():e+"px"}function Rd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var o=n.indexOf("--")===0,r=Nd(n,e[n],o);n==="float"&&(n="cssFloat"),o?t.setProperty(n,r):t[n]=r}}var Om=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ms(t,e){if(e){if(Om[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function hs(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gs=null;function El(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vs=null,In=null,An=null;function xa(t){if(t=Vo(t)){if(typeof vs!="function")throw Error(N(280));var e=t.stateNode;e&&(e=ai(e),vs(t.stateNode,t.type,e))}}function Pd(t){In?An?An.push(t):An=[t]:In=t}function kd(){if(In){var t=In,e=An;if(An=In=null,xa(t),e)for(t=0;t<e.length;t++)xa(e[t])}}function Md(t,e){return t(e)}function Dd(){}var ki=!1;function Ld(t,e,n){if(ki)return t(e,n);ki=!0;try{return Md(t,e,n)}finally{ki=!1,(In!==null||An!==null)&&(Dd(),kd())}}function So(t,e){var n=t.stateNode;if(n===null)return null;var o=ai(n);if(o===null)return null;n=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(N(231,e,typeof n));return n}var ys=!1;if(pt)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){ys=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{ys=!1}function Wm(t,e,n,o,r,i,l,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ao=!1,Ar=null,Nr=!1,Ss=null,Km={onError:function(t){ao=!0,Ar=t}};function Ym(t,e,n,o,r,i,l,u,c){ao=!1,Ar=null,Wm.apply(Km,arguments)}function Qm(t,e,n,o,r,i,l,u,c){if(Ym.apply(this,arguments),ao){if(ao){var d=Ar;ao=!1,Ar=null}else throw Error(N(198));Nr||(Nr=!0,Ss=d)}}function ln(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ud(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ia(t){if(ln(t)!==t)throw Error(N(188))}function Xm(t){var e=t.alternate;if(!e){if(e=ln(t),e===null)throw Error(N(188));return e!==t?null:t}for(var n=t,o=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(o=r.return,o!==null){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Ia(r),t;if(i===o)return Ia(r),e;i=i.sibling}throw Error(N(188))}if(n.return!==o.return)n=r,o=i;else{for(var l=!1,u=r.child;u;){if(u===n){l=!0,n=r,o=i;break}if(u===o){l=!0,o=r,n=i;break}u=u.sibling}if(!l){for(u=i.child;u;){if(u===n){l=!0,n=i,o=r;break}if(u===o){l=!0,o=i,n=r;break}u=u.sibling}if(!l)throw Error(N(189))}}if(n.alternate!==o)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?t:e}function Fd(t){return t=Xm(t),t!==null?Vd(t):null}function Vd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vd(t);if(e!==null)return e;t=t.sibling}return null}var Gd=Fe.unstable_scheduleCallback,Aa=Fe.unstable_cancelCallback,Zm=Fe.unstable_shouldYield,jm=Fe.unstable_requestPaint,re=Fe.unstable_now,eh=Fe.unstable_getCurrentPriorityLevel,Tl=Fe.unstable_ImmediatePriority,Hd=Fe.unstable_UserBlockingPriority,Rr=Fe.unstable_NormalPriority,th=Fe.unstable_LowPriority,Bd=Fe.unstable_IdlePriority,ri=null,st=null;function nh(t){if(st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(ri,t,void 0,(t.current.flags&128)===128)}catch{}}var Xe=Math.clz32?Math.clz32:ih,oh=Math.log,rh=Math.LN2;function ih(t){return t>>>=0,t===0?32:31-(oh(t)/rh|0)|0}var Oo=64,Wo=4194304;function ro(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pr(t,e){var n=t.pendingLanes;if(n===0)return 0;var o=0,r=t.suspendedLanes,i=t.pingedLanes,l=n&268435455;if(l!==0){var u=l&~r;u!==0?o=ro(u):(i&=l,i!==0&&(o=ro(i)))}else l=n&~r,l!==0?o=ro(l):i!==0&&(o=ro(i));if(o===0)return 0;if(e!==0&&e!==o&&!(e&r)&&(r=o&-o,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(o&4&&(o|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=o;0<e;)n=31-Xe(e),r=1<<n,o|=t[n],e&=~r;return o}function sh(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lh(t,e){for(var n=t.suspendedLanes,o=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-Xe(i),u=1<<l,c=r[l];c===-1?(!(u&n)||u&o)&&(r[l]=sh(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Es(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qd(){var t=Oo;return Oo<<=1,!(Oo&4194240)&&(Oo=64),t}function Mi(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xe(e),t[e]=n}function ah(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Xe(n),i=1<<r;e[r]=0,o[r]=-1,t[r]=-1,n&=~i}}function Cl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var o=31-Xe(n),r=1<<o;r&e|t[o]&e&&(t[o]|=e),n&=~r}}var J=0;function bd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $d,_l,zd,Jd,Od,Ts=!1,Ko=[],Pt=null,kt=null,Mt=null,Eo=new Map,To=new Map,xt=[],uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Na(t,e){switch(t){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Eo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":To.delete(e.pointerId)}}function Yn(t,e,n,o,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Vo(e),e!==null&&_l(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function ch(t,e,n,o,r){switch(e){case"focusin":return Pt=Yn(Pt,t,e,n,o,r),!0;case"dragenter":return kt=Yn(kt,t,e,n,o,r),!0;case"mouseover":return Mt=Yn(Mt,t,e,n,o,r),!0;case"pointerover":var i=r.pointerId;return Eo.set(i,Yn(Eo.get(i)||null,t,e,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,To.set(i,Yn(To.get(i)||null,t,e,n,o,r)),!0}return!1}function Wd(t){var e=Yt(t.target);if(e!==null){var n=ln(e);if(n!==null){if(e=n.tag,e===13){if(e=Ud(n),e!==null){t.blockedOn=e,Od(t.priority,function(){zd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cs(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var o=new n.constructor(n.type,n);gs=o,n.target.dispatchEvent(o),gs=null}else return e=Vo(n),e!==null&&_l(e),t.blockedOn=n,!1;e.shift()}return!0}function Ra(t,e,n){mr(t)&&n.delete(e)}function dh(){Ts=!1,Pt!==null&&mr(Pt)&&(Pt=null),kt!==null&&mr(kt)&&(kt=null),Mt!==null&&mr(Mt)&&(Mt=null),Eo.forEach(Ra),To.forEach(Ra)}function Qn(t,e){t.blockedOn===e&&(t.blockedOn=null,Ts||(Ts=!0,Fe.unstable_scheduleCallback(Fe.unstable_NormalPriority,dh)))}function Co(t){function e(r){return Qn(r,t)}if(0<Ko.length){Qn(Ko[0],t);for(var n=1;n<Ko.length;n++){var o=Ko[n];o.blockedOn===t&&(o.blockedOn=null)}}for(Pt!==null&&Qn(Pt,t),kt!==null&&Qn(kt,t),Mt!==null&&Qn(Mt,t),Eo.forEach(e),To.forEach(e),n=0;n<xt.length;n++)o=xt[n],o.blockedOn===t&&(o.blockedOn=null);for(;0<xt.length&&(n=xt[0],n.blockedOn===null);)Wd(n),n.blockedOn===null&&xt.shift()}var Nn=yt.ReactCurrentBatchConfig,kr=!0;function fh(t,e,n,o){var r=J,i=Nn.transition;Nn.transition=null;try{J=1,wl(t,e,n,o)}finally{J=r,Nn.transition=i}}function ph(t,e,n,o){var r=J,i=Nn.transition;Nn.transition=null;try{J=4,wl(t,e,n,o)}finally{J=r,Nn.transition=i}}function wl(t,e,n,o){if(kr){var r=Cs(t,e,n,o);if(r===null)bi(t,e,o,Mr,n),Na(t,o);else if(ch(r,t,e,n,o))o.stopPropagation();else if(Na(t,o),e&4&&-1<uh.indexOf(t)){for(;r!==null;){var i=Vo(r);if(i!==null&&$d(i),i=Cs(t,e,n,o),i===null&&bi(t,e,o,Mr,n),i===r)break;r=i}r!==null&&o.stopPropagation()}else bi(t,e,o,null,n)}}var Mr=null;function Cs(t,e,n,o){if(Mr=null,t=El(o),t=Yt(t),t!==null)if(e=ln(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ud(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mr=t,null}function Kd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eh()){case Tl:return 1;case Hd:return 4;case Rr:case th:return 16;case Bd:return 536870912;default:return 16}default:return 16}}var At=null,xl=null,hr=null;function Yd(){if(hr)return hr;var t,e=xl,n=e.length,o,r="value"in At?At.value:At.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(o=1;o<=l&&e[n-o]===r[i-o];o++);return hr=r.slice(t,1<o?1-o:void 0)}function gr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yo(){return!0}function Pa(){return!1}function Ge(t){function e(n,o,r,i,l){this._reactName=n,this._targetInst=r,this.type=o,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yo:Pa,this.isPropagationStopped=Pa,this}return Z(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yo)},persist:function(){},isPersistent:Yo}),e}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=Ge(bn),Fo=Z({},bn,{view:0,detail:0}),mh=Ge(Fo),Di,Li,Xn,ii=Z({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Al,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xn&&(Xn&&t.type==="mousemove"?(Di=t.screenX-Xn.screenX,Li=t.screenY-Xn.screenY):Li=Di=0,Xn=t),Di)},movementY:function(t){return"movementY"in t?t.movementY:Li}}),ka=Ge(ii),hh=Z({},ii,{dataTransfer:0}),gh=Ge(hh),vh=Z({},Fo,{relatedTarget:0}),Ui=Ge(vh),yh=Z({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sh=Ge(yh),Eh=Z({},bn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Th=Ge(Eh),Ch=Z({},bn,{data:0}),Ma=Ge(Ch),_h={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ih(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xh[t])?!!e[t]:!1}function Al(){return Ih}var Ah=Z({},Fo,{key:function(t){if(t.key){var e=_h[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Al,charCode:function(t){return t.type==="keypress"?gr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nh=Ge(Ah),Rh=Z({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Da=Ge(Rh),Ph=Z({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Al}),kh=Ge(Ph),Mh=Z({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dh=Ge(Mh),Lh=Z({},ii,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Uh=Ge(Lh),Fh=[9,13,27,32],Nl=pt&&"CompositionEvent"in window,uo=null;pt&&"documentMode"in document&&(uo=document.documentMode);var Vh=pt&&"TextEvent"in window&&!uo,Qd=pt&&(!Nl||uo&&8<uo&&11>=uo),La=" ",Ua=!1;function Xd(t,e){switch(t){case"keyup":return Fh.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pn=!1;function Gh(t,e){switch(t){case"compositionend":return Zd(e);case"keypress":return e.which!==32?null:(Ua=!0,La);case"textInput":return t=e.data,t===La&&Ua?null:t;default:return null}}function Hh(t,e){if(pn)return t==="compositionend"||!Nl&&Xd(t,e)?(t=Yd(),hr=xl=At=null,pn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qd&&e.locale!=="ko"?null:e.data;default:return null}}var Bh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fa(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bh[t.type]:e==="textarea"}function jd(t,e,n,o){Pd(o),e=Dr(e,"onChange"),0<e.length&&(n=new Il("onChange","change",null,n,o),t.push({event:n,listeners:e}))}var co=null,_o=null;function qh(t){df(t,0)}function si(t){var e=gn(t);if(_d(e))return t}function bh(t,e){if(t==="change")return e}var ef=!1;if(pt){var Fi;if(pt){var Vi="oninput"in document;if(!Vi){var Va=document.createElement("div");Va.setAttribute("oninput","return;"),Vi=typeof Va.oninput=="function"}Fi=Vi}else Fi=!1;ef=Fi&&(!document.documentMode||9<document.documentMode)}function Ga(){co&&(co.detachEvent("onpropertychange",tf),_o=co=null)}function tf(t){if(t.propertyName==="value"&&si(_o)){var e=[];jd(e,_o,t,El(t)),Ld(qh,e)}}function $h(t,e,n){t==="focusin"?(Ga(),co=e,_o=n,co.attachEvent("onpropertychange",tf)):t==="focusout"&&Ga()}function zh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return si(_o)}function Jh(t,e){if(t==="click")return si(e)}function Oh(t,e){if(t==="input"||t==="change")return si(e)}function Wh(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tt=typeof Object.is=="function"?Object.is:Wh;function wo(t,e){if(tt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!rs.call(e,r)||!tt(t[r],e[r]))return!1}return!0}function Ha(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ba(t,e){var n=Ha(t);t=0;for(var o;n;){if(n.nodeType===3){if(o=t+n.textContent.length,t<=e&&o>=e)return{node:n,offset:e-t};t=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ha(n)}}function nf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function of(){for(var t=window,e=Ir();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ir(t.document)}return e}function Rl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Kh(t){var e=of(),n=t.focusedElem,o=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nf(n.ownerDocument.documentElement,n)){if(o!==null&&Rl(n)){if(e=o.start,t=o.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=o.end===void 0?i:Math.min(o.end,r),!t.extend&&i>o&&(r=o,o=i,i=r),r=Ba(n,i);var l=Ba(n,o);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>o?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yh=pt&&"documentMode"in document&&11>=document.documentMode,mn=null,_s=null,fo=null,ws=!1;function qa(t,e,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ws||mn==null||mn!==Ir(o)||(o=mn,"selectionStart"in o&&Rl(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),fo&&wo(fo,o)||(fo=o,o=Dr(_s,"onSelect"),0<o.length&&(e=new Il("onSelect","select",null,e,n),t.push({event:e,listeners:o}),e.target=mn)))}function Qo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hn={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionend:Qo("Transition","TransitionEnd")},Gi={},rf={};pt&&(rf=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);function li(t){if(Gi[t])return Gi[t];if(!hn[t])return t;var e=hn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rf)return Gi[t]=e[n];return t}var sf=li("animationend"),lf=li("animationiteration"),af=li("animationstart"),uf=li("transitionend"),cf=new Map,ba="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bt(t,e){cf.set(t,e),sn(e,[t])}for(var Hi=0;Hi<ba.length;Hi++){var Bi=ba[Hi],Qh=Bi.toLowerCase(),Xh=Bi[0].toUpperCase()+Bi.slice(1);Bt(Qh,"on"+Xh)}Bt(sf,"onAnimationEnd");Bt(lf,"onAnimationIteration");Bt(af,"onAnimationStart");Bt("dblclick","onDoubleClick");Bt("focusin","onFocus");Bt("focusout","onBlur");Bt(uf,"onTransitionEnd");Dn("onMouseEnter",["mouseout","mouseover"]);Dn("onMouseLeave",["mouseout","mouseover"]);Dn("onPointerEnter",["pointerout","pointerover"]);Dn("onPointerLeave",["pointerout","pointerover"]);sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sn("onBeforeInput",["compositionend","keypress","textInput","paste"]);sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zh=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function $a(t,e,n){var o=t.type||"unknown-event";t.currentTarget=n,Qm(o,e,void 0,t),t.currentTarget=null}function df(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var o=t[n],r=o.event;o=o.listeners;e:{var i=void 0;if(e)for(var l=o.length-1;0<=l;l--){var u=o[l],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&r.isPropagationStopped())break e;$a(r,u,d),i=c}else for(l=0;l<o.length;l++){if(u=o[l],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&r.isPropagationStopped())break e;$a(r,u,d),i=c}}}if(Nr)throw t=Ss,Nr=!1,Ss=null,t}function W(t,e){var n=e[Rs];n===void 0&&(n=e[Rs]=new Set);var o=t+"__bubble";n.has(o)||(ff(e,t,2,!1),n.add(o))}function qi(t,e,n){var o=0;e&&(o|=4),ff(n,t,o,e)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function xo(t){if(!t[Xo]){t[Xo]=!0,yd.forEach(function(n){n!=="selectionchange"&&(Zh.has(n)||qi(n,!1,t),qi(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xo]||(e[Xo]=!0,qi("selectionchange",!1,e))}}function ff(t,e,n,o){switch(Kd(e)){case 1:var r=fh;break;case 4:r=ph;break;default:r=wl}n=r.bind(null,e,n,t),r=void 0,!ys||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),o?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function bi(t,e,n,o,r){var i=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var l=o.tag;if(l===3||l===4){var u=o.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(l===4)for(l=o.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;l=l.return}for(;u!==null;){if(l=Yt(u),l===null)return;if(c=l.tag,c===5||c===6){o=i=l;continue e}u=u.parentNode}}o=o.return}Ld(function(){var d=i,f=El(n),m=[];e:{var p=cf.get(t);if(p!==void 0){var g=Il,T=t;switch(t){case"keypress":if(gr(n)===0)break e;case"keydown":case"keyup":g=Nh;break;case"focusin":T="focus",g=Ui;break;case"focusout":T="blur",g=Ui;break;case"beforeblur":case"afterblur":g=Ui;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ka;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=gh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=kh;break;case sf:case lf:case af:g=Sh;break;case uf:g=Dh;break;case"scroll":g=mh;break;case"wheel":g=Uh;break;case"copy":case"cut":case"paste":g=Th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Da}var E=(e&4)!==0,C=!E&&t==="scroll",h=E?p!==null?p+"Capture":null:p;E=[];for(var y=d,S;y!==null;){S=y;var _=S.stateNode;if(S.tag===5&&_!==null&&(S=_,h!==null&&(_=So(y,h),_!=null&&E.push(Io(y,_,S)))),C)break;y=y.return}0<E.length&&(p=new g(p,T,null,n,f),m.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==gs&&(T=n.relatedTarget||n.fromElement)&&(Yt(T)||T[mt]))break e;if((g||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,g?(T=n.relatedTarget||n.toElement,g=d,T=T?Yt(T):null,T!==null&&(C=ln(T),T!==C||T.tag!==5&&T.tag!==6)&&(T=null)):(g=null,T=d),g!==T)){if(E=ka,_="onMouseLeave",h="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(E=Da,_="onPointerLeave",h="onPointerEnter",y="pointer"),C=g==null?p:gn(g),S=T==null?p:gn(T),p=new E(_,y+"leave",g,n,f),p.target=C,p.relatedTarget=S,_=null,Yt(f)===d&&(E=new E(h,y+"enter",T,n,f),E.target=S,E.relatedTarget=C,_=E),C=_,g&&T)t:{for(E=g,h=T,y=0,S=E;S;S=un(S))y++;for(S=0,_=h;_;_=un(_))S++;for(;0<y-S;)E=un(E),y--;for(;0<S-y;)h=un(h),S--;for(;y--;){if(E===h||h!==null&&E===h.alternate)break t;E=un(E),h=un(h)}E=null}else E=null;g!==null&&za(m,p,g,E,!1),T!==null&&C!==null&&za(m,C,T,E,!0)}}e:{if(p=d?gn(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var w=bh;else if(Fa(p))if(ef)w=Oh;else{w=zh;var x=$h}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=Jh);if(w&&(w=w(t,d))){jd(m,w,n,f);break e}x&&x(t,p,d),t==="focusout"&&(x=p._wrapperState)&&x.controlled&&p.type==="number"&&ds(p,"number",p.value)}switch(x=d?gn(d):window,t){case"focusin":(Fa(x)||x.contentEditable==="true")&&(mn=x,_s=d,fo=null);break;case"focusout":fo=_s=mn=null;break;case"mousedown":ws=!0;break;case"contextmenu":case"mouseup":case"dragend":ws=!1,qa(m,n,f);break;case"selectionchange":if(Yh)break;case"keydown":case"keyup":qa(m,n,f)}var I;if(Nl)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else pn?Xd(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Qd&&n.locale!=="ko"&&(pn||R!=="onCompositionStart"?R==="onCompositionEnd"&&pn&&(I=Yd()):(At=f,xl="value"in At?At.value:At.textContent,pn=!0)),x=Dr(d,R),0<x.length&&(R=new Ma(R,t,null,n,f),m.push({event:R,listeners:x}),I?R.data=I:(I=Zd(n),I!==null&&(R.data=I)))),(I=Vh?Gh(t,n):Hh(t,n))&&(d=Dr(d,"onBeforeInput"),0<d.length&&(f=new Ma("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=I))}df(m,e)})}function Io(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dr(t,e){for(var n=e+"Capture",o=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=So(t,n),i!=null&&o.unshift(Io(t,i,r)),i=So(t,e),i!=null&&o.push(Io(t,i,r))),t=t.return}return o}function un(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function za(t,e,n,o,r){for(var i=e._reactName,l=[];n!==null&&n!==o;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===o)break;u.tag===5&&d!==null&&(u=d,r?(c=So(n,i),c!=null&&l.unshift(Io(n,c,u))):r||(c=So(n,i),c!=null&&l.push(Io(n,c,u)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var jh=/\r\n?/g,eg=/\u0000|\uFFFD/g;function Ja(t){return(typeof t=="string"?t:""+t).replace(jh,`
`).replace(eg,"")}function Zo(t,e,n){if(e=Ja(e),Ja(t)!==e&&n)throw Error(N(425))}function Lr(){}var xs=null,Is=null;function As(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ns=typeof setTimeout=="function"?setTimeout:void 0,tg=typeof clearTimeout=="function"?clearTimeout:void 0,Oa=typeof Promise=="function"?Promise:void 0,ng=typeof queueMicrotask=="function"?queueMicrotask:typeof Oa<"u"?function(t){return Oa.resolve(null).then(t).catch(og)}:Ns;function og(t){setTimeout(function(){throw t})}function $i(t,e){var n=e,o=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(o===0){t.removeChild(r),Co(e);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=r}while(n);Co(e)}function Dt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wa(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $n=Math.random().toString(36).slice(2),it="__reactFiber$"+$n,Ao="__reactProps$"+$n,mt="__reactContainer$"+$n,Rs="__reactEvents$"+$n,rg="__reactListeners$"+$n,ig="__reactHandles$"+$n;function Yt(t){var e=t[it];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mt]||n[it]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wa(t);t!==null;){if(n=t[it])return n;t=Wa(t)}return e}t=n,n=t.parentNode}return null}function Vo(t){return t=t[it]||t[mt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function ai(t){return t[Ao]||null}var Ps=[],vn=-1;function qt(t){return{current:t}}function K(t){0>vn||(t.current=Ps[vn],Ps[vn]=null,vn--)}function O(t,e){vn++,Ps[vn]=t.current,t.current=e}var Ht={},Te=qt(Ht),Pe=qt(!1),en=Ht;function Ln(t,e){var n=t.type.contextTypes;if(!n)return Ht;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ke(t){return t=t.childContextTypes,t!=null}function Ur(){K(Pe),K(Te)}function Ka(t,e,n){if(Te.current!==Ht)throw Error(N(168));O(Te,e),O(Pe,n)}function pf(t,e,n){var o=t.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var r in o)if(!(r in e))throw Error(N(108,$m(t)||"Unknown",r));return Z({},n,o)}function Fr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ht,en=Te.current,O(Te,t),O(Pe,Pe.current),!0}function Ya(t,e,n){var o=t.stateNode;if(!o)throw Error(N(169));n?(t=pf(t,e,en),o.__reactInternalMemoizedMergedChildContext=t,K(Pe),K(Te),O(Te,t)):K(Pe),O(Pe,n)}var ut=null,ui=!1,zi=!1;function mf(t){ut===null?ut=[t]:ut.push(t)}function sg(t){ui=!0,mf(t)}function bt(){if(!zi&&ut!==null){zi=!0;var t=0,e=J;try{var n=ut;for(J=1;t<n.length;t++){var o=n[t];do o=o(!0);while(o!==null)}ut=null,ui=!1}catch(r){throw ut!==null&&(ut=ut.slice(t+1)),Gd(Tl,bt),r}finally{J=e,zi=!1}}return null}var yn=[],Sn=0,Vr=null,Gr=0,He=[],Be=0,tn=null,ct=1,dt="";function Ot(t,e){yn[Sn++]=Gr,yn[Sn++]=Vr,Vr=t,Gr=e}function hf(t,e,n){He[Be++]=ct,He[Be++]=dt,He[Be++]=tn,tn=t;var o=ct;t=dt;var r=32-Xe(o)-1;o&=~(1<<r),n+=1;var i=32-Xe(e)+r;if(30<i){var l=r-r%5;i=(o&(1<<l)-1).toString(32),o>>=l,r-=l,ct=1<<32-Xe(e)+r|n<<r|o,dt=i+t}else ct=1<<i|n<<r|o,dt=t}function Pl(t){t.return!==null&&(Ot(t,1),hf(t,1,0))}function kl(t){for(;t===Vr;)Vr=yn[--Sn],yn[Sn]=null,Gr=yn[--Sn],yn[Sn]=null;for(;t===tn;)tn=He[--Be],He[Be]=null,dt=He[--Be],He[Be]=null,ct=He[--Be],He[Be]=null}var Ue=null,Le=null,Y=!1,Qe=null;function gf(t,e){var n=qe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qa(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ue=t,Le=Dt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ue=t,Le=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=tn!==null?{id:ct,overflow:dt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ue=t,Le=null,!0):!1;default:return!1}}function ks(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ms(t){if(Y){var e=Le;if(e){var n=e;if(!Qa(t,e)){if(ks(t))throw Error(N(418));e=Dt(n.nextSibling);var o=Ue;e&&Qa(t,e)?gf(o,n):(t.flags=t.flags&-4097|2,Y=!1,Ue=t)}}else{if(ks(t))throw Error(N(418));t.flags=t.flags&-4097|2,Y=!1,Ue=t}}}function Xa(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ue=t}function jo(t){if(t!==Ue)return!1;if(!Y)return Xa(t),Y=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!As(t.type,t.memoizedProps)),e&&(e=Le)){if(ks(t))throw vf(),Error(N(418));for(;e;)gf(t,e),e=Dt(e.nextSibling)}if(Xa(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Le=Dt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Le=null}}else Le=Ue?Dt(t.stateNode.nextSibling):null;return!0}function vf(){for(var t=Le;t;)t=Dt(t.nextSibling)}function Un(){Le=Ue=null,Y=!1}function Ml(t){Qe===null?Qe=[t]:Qe.push(t)}var lg=yt.ReactCurrentBatchConfig;function Zn(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var o=n.stateNode}if(!o)throw Error(N(147,t));var r=o,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var u=r.refs;l===null?delete u[i]:u[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,t))}return t}function er(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Za(t){var e=t._init;return e(t._payload)}function yf(t){function e(h,y){if(t){var S=h.deletions;S===null?(h.deletions=[y],h.flags|=16):S.push(y)}}function n(h,y){if(!t)return null;for(;y!==null;)e(h,y),y=y.sibling;return null}function o(h,y){for(h=new Map;y!==null;)y.key!==null?h.set(y.key,y):h.set(y.index,y),y=y.sibling;return h}function r(h,y){return h=Vt(h,y),h.index=0,h.sibling=null,h}function i(h,y,S){return h.index=S,t?(S=h.alternate,S!==null?(S=S.index,S<y?(h.flags|=2,y):S):(h.flags|=2,y)):(h.flags|=1048576,y)}function l(h){return t&&h.alternate===null&&(h.flags|=2),h}function u(h,y,S,_){return y===null||y.tag!==6?(y=Xi(S,h.mode,_),y.return=h,y):(y=r(y,S),y.return=h,y)}function c(h,y,S,_){var w=S.type;return w===fn?f(h,y,S.props.children,_,S.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_t&&Za(w)===y.type)?(_=r(y,S.props),_.ref=Zn(h,y,S),_.return=h,_):(_=_r(S.type,S.key,S.props,null,h.mode,_),_.ref=Zn(h,y,S),_.return=h,_)}function d(h,y,S,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=Zi(S,h.mode,_),y.return=h,y):(y=r(y,S.children||[]),y.return=h,y)}function f(h,y,S,_,w){return y===null||y.tag!==7?(y=jt(S,h.mode,_,w),y.return=h,y):(y=r(y,S),y.return=h,y)}function m(h,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Xi(""+y,h.mode,S),y.return=h,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case $o:return S=_r(y.type,y.key,y.props,null,h.mode,S),S.ref=Zn(h,null,y),S.return=h,S;case dn:return y=Zi(y,h.mode,S),y.return=h,y;case _t:var _=y._init;return m(h,_(y._payload),S)}if(oo(y)||Wn(y))return y=jt(y,h.mode,S,null),y.return=h,y;er(h,y)}return null}function p(h,y,S,_){var w=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return w!==null?null:u(h,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $o:return S.key===w?c(h,y,S,_):null;case dn:return S.key===w?d(h,y,S,_):null;case _t:return w=S._init,p(h,y,w(S._payload),_)}if(oo(S)||Wn(S))return w!==null?null:f(h,y,S,_,null);er(h,S)}return null}function g(h,y,S,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return h=h.get(S)||null,u(y,h,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $o:return h=h.get(_.key===null?S:_.key)||null,c(y,h,_,w);case dn:return h=h.get(_.key===null?S:_.key)||null,d(y,h,_,w);case _t:var x=_._init;return g(h,y,S,x(_._payload),w)}if(oo(_)||Wn(_))return h=h.get(S)||null,f(y,h,_,w,null);er(y,_)}return null}function T(h,y,S,_){for(var w=null,x=null,I=y,R=y=0,P=null;I!==null&&R<S.length;R++){I.index>R?(P=I,I=null):P=I.sibling;var A=p(h,I,S[R],_);if(A===null){I===null&&(I=P);break}t&&I&&A.alternate===null&&e(h,I),y=i(A,y,R),x===null?w=A:x.sibling=A,x=A,I=P}if(R===S.length)return n(h,I),Y&&Ot(h,R),w;if(I===null){for(;R<S.length;R++)I=m(h,S[R],_),I!==null&&(y=i(I,y,R),x===null?w=I:x.sibling=I,x=I);return Y&&Ot(h,R),w}for(I=o(h,I);R<S.length;R++)P=g(I,h,R,S[R],_),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?R:P.key),y=i(P,y,R),x===null?w=P:x.sibling=P,x=P);return t&&I.forEach(function(F){return e(h,F)}),Y&&Ot(h,R),w}function E(h,y,S,_){var w=Wn(S);if(typeof w!="function")throw Error(N(150));if(S=w.call(S),S==null)throw Error(N(151));for(var x=w=null,I=y,R=y=0,P=null,A=S.next();I!==null&&!A.done;R++,A=S.next()){I.index>R?(P=I,I=null):P=I.sibling;var F=p(h,I,A.value,_);if(F===null){I===null&&(I=P);break}t&&I&&F.alternate===null&&e(h,I),y=i(F,y,R),x===null?w=F:x.sibling=F,x=F,I=P}if(A.done)return n(h,I),Y&&Ot(h,R),w;if(I===null){for(;!A.done;R++,A=S.next())A=m(h,A.value,_),A!==null&&(y=i(A,y,R),x===null?w=A:x.sibling=A,x=A);return Y&&Ot(h,R),w}for(I=o(h,I);!A.done;R++,A=S.next())A=g(I,h,R,A.value,_),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?R:A.key),y=i(A,y,R),x===null?w=A:x.sibling=A,x=A);return t&&I.forEach(function(j){return e(h,j)}),Y&&Ot(h,R),w}function C(h,y,S,_){if(typeof S=="object"&&S!==null&&S.type===fn&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case $o:e:{for(var w=S.key,x=y;x!==null;){if(x.key===w){if(w=S.type,w===fn){if(x.tag===7){n(h,x.sibling),y=r(x,S.props.children),y.return=h,h=y;break e}}else if(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_t&&Za(w)===x.type){n(h,x.sibling),y=r(x,S.props),y.ref=Zn(h,x,S),y.return=h,h=y;break e}n(h,x);break}else e(h,x);x=x.sibling}S.type===fn?(y=jt(S.props.children,h.mode,_,S.key),y.return=h,h=y):(_=_r(S.type,S.key,S.props,null,h.mode,_),_.ref=Zn(h,y,S),_.return=h,h=_)}return l(h);case dn:e:{for(x=S.key;y!==null;){if(y.key===x)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(h,y.sibling),y=r(y,S.children||[]),y.return=h,h=y;break e}else{n(h,y);break}else e(h,y);y=y.sibling}y=Zi(S,h.mode,_),y.return=h,h=y}return l(h);case _t:return x=S._init,C(h,y,x(S._payload),_)}if(oo(S))return T(h,y,S,_);if(Wn(S))return E(h,y,S,_);er(h,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(h,y.sibling),y=r(y,S),y.return=h,h=y):(n(h,y),y=Xi(S,h.mode,_),y.return=h,h=y),l(h)):n(h,y)}return C}var Fn=yf(!0),Sf=yf(!1),Hr=qt(null),Br=null,En=null,Dl=null;function Ll(){Dl=En=Br=null}function Ul(t){var e=Hr.current;K(Hr),t._currentValue=e}function Ds(t,e,n){for(;t!==null;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===n)break;t=t.return}}function Rn(t,e){Br=t,Dl=En=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Re=!0),t.firstContext=null)}function ze(t){var e=t._currentValue;if(Dl!==t)if(t={context:t,memoizedValue:e,next:null},En===null){if(Br===null)throw Error(N(308));En=t,Br.dependencies={lanes:0,firstContext:t}}else En=En.next=t;return e}var Qt=null;function Fl(t){Qt===null?Qt=[t]:Qt.push(t)}function Ef(t,e,n,o){var r=e.interleaved;return r===null?(n.next=n,Fl(e)):(n.next=r.next,r.next=n),e.interleaved=n,ht(t,o)}function ht(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wt=!1;function Vl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ft(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lt(t,e,n){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,$&2){var r=o.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),o.pending=e,ht(t,n)}return r=o.interleaved,r===null?(e.next=e,Fl(o)):(e.next=r.next,r.next=e),o.interleaved=e,ht(t,n)}function vr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,Cl(t,n)}}function ja(t,e){var n=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qr(t,e,n,o){var r=t.updateQueue;wt=!1;var i=r.firstBaseUpdate,l=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==l&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=r.baseState;l=0,f=d=c=null,u=i;do{var p=u.lane,g=u.eventTime;if((o&p)===p){f!==null&&(f=f.next={eventTime:g,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var T=t,E=u;switch(p=e,g=n,E.tag){case 1:if(T=E.payload,typeof T=="function"){m=T.call(g,m,p);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=E.payload,p=typeof T=="function"?T.call(g,m,p):T,p==null)break e;m=Z({},m,p);break e;case 2:wt=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[u]:p.push(u))}else g={eventTime:g,lane:p,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=g,c=m):f=f.next=g,l|=p;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;p=u,u=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(f===null&&(c=m),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);on|=l,t.lanes=l,t.memoizedState=m}}function eu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var o=t[e],r=o.callback;if(r!==null){if(o.callback=null,o=n,typeof r!="function")throw Error(N(191,r));r.call(o)}}}var Go={},lt=qt(Go),No=qt(Go),Ro=qt(Go);function Xt(t){if(t===Go)throw Error(N(174));return t}function Gl(t,e){switch(O(Ro,e),O(No,t),O(lt,Go),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ps(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ps(e,t)}K(lt),O(lt,e)}function Vn(){K(lt),K(No),K(Ro)}function Cf(t){Xt(Ro.current);var e=Xt(lt.current),n=ps(e,t.type);e!==n&&(O(No,t),O(lt,n))}function Hl(t){No.current===t&&(K(lt),K(No))}var Q=qt(0);function br(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ji=[];function Bl(){for(var t=0;t<Ji.length;t++)Ji[t]._workInProgressVersionPrimary=null;Ji.length=0}var yr=yt.ReactCurrentDispatcher,Oi=yt.ReactCurrentBatchConfig,nn=0,X=null,se=null,ue=null,$r=!1,po=!1,Po=0,ag=0;function ve(){throw Error(N(321))}function ql(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tt(t[n],e[n]))return!1;return!0}function bl(t,e,n,o,r,i){if(nn=i,X=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yr.current=t===null||t.memoizedState===null?fg:pg,t=n(o,r),po){i=0;do{if(po=!1,Po=0,25<=i)throw Error(N(301));i+=1,ue=se=null,e.updateQueue=null,yr.current=mg,t=n(o,r)}while(po)}if(yr.current=zr,e=se!==null&&se.next!==null,nn=0,ue=se=X=null,$r=!1,e)throw Error(N(300));return t}function $l(){var t=Po!==0;return Po=0,t}function rt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?X.memoizedState=ue=t:ue=ue.next=t,ue}function Je(){if(se===null){var t=X.alternate;t=t!==null?t.memoizedState:null}else t=se.next;var e=ue===null?X.memoizedState:ue.next;if(e!==null)ue=e,se=t;else{if(t===null)throw Error(N(310));se=t,t={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},ue===null?X.memoizedState=ue=t:ue=ue.next=t}return ue}function ko(t,e){return typeof e=="function"?e(t):e}function Wi(t){var e=Je(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var o=se,r=o.baseQueue,i=n.pending;if(i!==null){if(r!==null){var l=r.next;r.next=i.next,i.next=l}o.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,o=o.baseState;var u=l=null,c=null,d=i;do{var f=d.lane;if((nn&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),o=d.hasEagerState?d.eagerState:t(o,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=m,l=o):c=c.next=m,X.lanes|=f,on|=f}d=d.next}while(d!==null&&d!==i);c===null?l=o:c.next=u,tt(o,e.memoizedState)||(Re=!0),e.memoizedState=o,e.baseState=l,e.baseQueue=c,n.lastRenderedState=o}if(t=n.interleaved,t!==null){r=t;do i=r.lane,X.lanes|=i,on|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ki(t){var e=Je(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var o=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do i=t(i,l.action),l=l.next;while(l!==r);tt(i,e.memoizedState)||(Re=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,o]}function _f(){}function wf(t,e){var n=X,o=Je(),r=e(),i=!tt(o.memoizedState,r);if(i&&(o.memoizedState=r,Re=!0),o=o.queue,zl(Af.bind(null,n,o,t),[t]),o.getSnapshot!==e||i||ue!==null&&ue.memoizedState.tag&1){if(n.flags|=2048,Mo(9,If.bind(null,n,o,r,e),void 0,null),ce===null)throw Error(N(349));nn&30||xf(n,e,r)}return r}function xf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function If(t,e,n,o){e.value=n,e.getSnapshot=o,Nf(e)&&Rf(t)}function Af(t,e,n){return n(function(){Nf(e)&&Rf(t)})}function Nf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tt(t,n)}catch{return!0}}function Rf(t){var e=ht(t,1);e!==null&&Ze(e,t,1,-1)}function tu(t){var e=rt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:t},e.queue=t,t=t.dispatch=dg.bind(null,X,t),[e.memoizedState,t]}function Mo(t,e,n,o){return t={tag:t,create:e,destroy:n,deps:o,next:null},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(o=n.next,n.next=t,t.next=o,e.lastEffect=t)),t}function Pf(){return Je().memoizedState}function Sr(t,e,n,o){var r=rt();X.flags|=t,r.memoizedState=Mo(1|e,n,void 0,o===void 0?null:o)}function ci(t,e,n,o){var r=Je();o=o===void 0?null:o;var i=void 0;if(se!==null){var l=se.memoizedState;if(i=l.destroy,o!==null&&ql(o,l.deps)){r.memoizedState=Mo(e,n,i,o);return}}X.flags|=t,r.memoizedState=Mo(1|e,n,i,o)}function nu(t,e){return Sr(8390656,8,t,e)}function zl(t,e){return ci(2048,8,t,e)}function kf(t,e){return ci(4,2,t,e)}function Mf(t,e){return ci(4,4,t,e)}function Df(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Lf(t,e,n){return n=n!=null?n.concat([t]):null,ci(4,4,Df.bind(null,e,t),n)}function Jl(){}function Uf(t,e){var n=Je();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&ql(e,o[1])?o[0]:(n.memoizedState=[t,e],t)}function Ff(t,e){var n=Je();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&ql(e,o[1])?o[0]:(t=t(),n.memoizedState=[t,e],t)}function Vf(t,e,n){return nn&21?(tt(n,e)||(n=qd(),X.lanes|=n,on|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Re=!0),t.memoizedState=n)}function ug(t,e){var n=J;J=n!==0&&4>n?n:4,t(!0);var o=Oi.transition;Oi.transition={};try{t(!1),e()}finally{J=n,Oi.transition=o}}function Gf(){return Je().memoizedState}function cg(t,e,n){var o=Ft(t);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},Hf(t))Bf(e,n);else if(n=Ef(t,e,n,o),n!==null){var r=we();Ze(n,t,o,r),qf(n,e,o)}}function dg(t,e,n){var o=Ft(t),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hf(t))Bf(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,u=i(l,n);if(r.hasEagerState=!0,r.eagerState=u,tt(u,l)){var c=e.interleaved;c===null?(r.next=r,Fl(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=Ef(t,e,r,o),n!==null&&(r=we(),Ze(n,t,o,r),qf(n,e,o))}}function Hf(t){var e=t.alternate;return t===X||e!==null&&e===X}function Bf(t,e){po=$r=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qf(t,e,n){if(n&4194240){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,Cl(t,n)}}var zr={readContext:ze,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useInsertionEffect:ve,useLayoutEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useMutableSource:ve,useSyncExternalStore:ve,useId:ve,unstable_isNewReconciler:!1},fg={readContext:ze,useCallback:function(t,e){return rt().memoizedState=[t,e===void 0?null:e],t},useContext:ze,useEffect:nu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sr(4194308,4,Df.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sr(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sr(4,2,t,e)},useMemo:function(t,e){var n=rt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var o=rt();return e=n!==void 0?n(e):e,o.memoizedState=o.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},o.queue=t,t=t.dispatch=cg.bind(null,X,t),[o.memoizedState,t]},useRef:function(t){var e=rt();return t={current:t},e.memoizedState=t},useState:tu,useDebugValue:Jl,useDeferredValue:function(t){return rt().memoizedState=t},useTransition:function(){var t=tu(!1),e=t[0];return t=ug.bind(null,t[1]),rt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var o=X,r=rt();if(Y){if(n===void 0)throw Error(N(407));n=n()}else{if(n=e(),ce===null)throw Error(N(349));nn&30||xf(o,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,nu(Af.bind(null,o,i,t),[t]),o.flags|=2048,Mo(9,If.bind(null,o,i,n,e),void 0,null),n},useId:function(){var t=rt(),e=ce.identifierPrefix;if(Y){var n=dt,o=ct;n=(o&~(1<<32-Xe(o)-1)).toString(32)+n,e=":"+e+"R"+n,n=Po++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ag++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pg={readContext:ze,useCallback:Uf,useContext:ze,useEffect:zl,useImperativeHandle:Lf,useInsertionEffect:kf,useLayoutEffect:Mf,useMemo:Ff,useReducer:Wi,useRef:Pf,useState:function(){return Wi(ko)},useDebugValue:Jl,useDeferredValue:function(t){var e=Je();return Vf(e,se.memoizedState,t)},useTransition:function(){var t=Wi(ko)[0],e=Je().memoizedState;return[t,e]},useMutableSource:_f,useSyncExternalStore:wf,useId:Gf,unstable_isNewReconciler:!1},mg={readContext:ze,useCallback:Uf,useContext:ze,useEffect:zl,useImperativeHandle:Lf,useInsertionEffect:kf,useLayoutEffect:Mf,useMemo:Ff,useReducer:Ki,useRef:Pf,useState:function(){return Ki(ko)},useDebugValue:Jl,useDeferredValue:function(t){var e=Je();return se===null?e.memoizedState=t:Vf(e,se.memoizedState,t)},useTransition:function(){var t=Ki(ko)[0],e=Je().memoizedState;return[t,e]},useMutableSource:_f,useSyncExternalStore:wf,useId:Gf,unstable_isNewReconciler:!1};function Ke(t,e){if(t&&t.defaultProps){e=Z({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ls(t,e,n,o){e=t.memoizedState,n=n(o,e),n=n==null?e:Z({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var di={isMounted:function(t){return(t=t._reactInternals)?ln(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var o=we(),r=Ft(t),i=ft(o,r);i.payload=e,n!=null&&(i.callback=n),e=Lt(t,i,r),e!==null&&(Ze(e,t,r,o),vr(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var o=we(),r=Ft(t),i=ft(o,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Lt(t,i,r),e!==null&&(Ze(e,t,r,o),vr(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=we(),o=Ft(t),r=ft(n,o);r.tag=2,e!=null&&(r.callback=e),e=Lt(t,r,o),e!==null&&(Ze(e,t,o,n),vr(e,t,o))}};function ou(t,e,n,o,r,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,i,l):e.prototype&&e.prototype.isPureReactComponent?!wo(n,o)||!wo(r,i):!0}function bf(t,e,n){var o=!1,r=Ht,i=e.contextType;return typeof i=="object"&&i!==null?i=ze(i):(r=ke(e)?en:Te.current,o=e.contextTypes,i=(o=o!=null)?Ln(t,r):Ht),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=di,t.stateNode=e,e._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function ru(t,e,n,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,o),e.state!==t&&di.enqueueReplaceState(e,e.state,null)}function Us(t,e,n,o){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Vl(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=ze(i):(i=ke(e)?en:Te.current,r.context=Ln(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ls(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&di.enqueueReplaceState(r,r.state,null),qr(t,n,r,o),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Gn(t,e){try{var n="",o=e;do n+=bm(o),o=o.return;while(o);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Yi(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fs(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hg=typeof WeakMap=="function"?WeakMap:Map;function $f(t,e,n){n=ft(-1,n),n.tag=3,n.payload={element:null};var o=e.value;return n.callback=function(){Or||(Or=!0,Os=o),Fs(t,e)},n}function zf(t,e,n){n=ft(-1,n),n.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var r=e.value;n.payload=function(){return o(r)},n.callback=function(){Fs(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Fs(t,e),typeof o!="function"&&(Ut===null?Ut=new Set([this]):Ut.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function iu(t,e,n){var o=t.pingCache;if(o===null){o=t.pingCache=new hg;var r=new Set;o.set(e,r)}else r=o.get(e),r===void 0&&(r=new Set,o.set(e,r));r.has(n)||(r.add(n),t=Rg.bind(null,t,e,n),e.then(t,t))}function su(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lu(t,e,n,o,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ft(-1,1),e.tag=2,Lt(n,e,1))),n.lanes|=1),t)}var gg=yt.ReactCurrentOwner,Re=!1;function _e(t,e,n,o){e.child=t===null?Sf(e,null,n,o):Fn(e,t.child,n,o)}function au(t,e,n,o,r){n=n.render;var i=e.ref;return Rn(e,r),o=bl(t,e,n,o,i,r),n=$l(),t!==null&&!Re?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gt(t,e,r)):(Y&&n&&Pl(e),e.flags|=1,_e(t,e,o,r),e.child)}function uu(t,e,n,o,r){if(t===null){var i=n.type;return typeof i=="function"&&!jl(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Jf(t,e,i,o,r)):(t=_r(n.type,null,o,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(l,o)&&t.ref===e.ref)return gt(t,e,r)}return e.flags|=1,t=Vt(i,o),t.ref=e.ref,t.return=e,e.child=t}function Jf(t,e,n,o,r){if(t!==null){var i=t.memoizedProps;if(wo(i,o)&&t.ref===e.ref)if(Re=!1,e.pendingProps=o=i,(t.lanes&r)!==0)t.flags&131072&&(Re=!0);else return e.lanes=t.lanes,gt(t,e,r)}return Vs(t,e,n,o,r)}function Of(t,e,n){var o=e.pendingProps,r=o.children,i=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},O(Cn,De),De|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,O(Cn,De),De|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=i!==null?i.baseLanes:n,O(Cn,De),De|=o}else i!==null?(o=i.baseLanes|n,e.memoizedState=null):o=n,O(Cn,De),De|=o;return _e(t,e,r,n),e.child}function Wf(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vs(t,e,n,o,r){var i=ke(n)?en:Te.current;return i=Ln(e,i),Rn(e,r),n=bl(t,e,n,o,i,r),o=$l(),t!==null&&!Re?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gt(t,e,r)):(Y&&o&&Pl(e),e.flags|=1,_e(t,e,n,r),e.child)}function cu(t,e,n,o,r){if(ke(n)){var i=!0;Fr(e)}else i=!1;if(Rn(e,r),e.stateNode===null)Er(t,e),bf(e,n,o),Us(e,n,o,r),o=!0;else if(t===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=ze(d):(d=ke(n)?en:Te.current,d=Ln(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==o||c!==d)&&ru(e,l,o,d),wt=!1;var p=e.memoizedState;l.state=p,qr(e,o,l,r),c=e.memoizedState,u!==o||p!==c||Pe.current||wt?(typeof f=="function"&&(Ls(e,n,f,o),c=e.memoizedState),(u=wt||ou(e,n,u,o,p,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=c),l.props=o,l.state=c,l.context=d,o=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{l=e.stateNode,Tf(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:Ke(e.type,u),l.props=d,m=e.pendingProps,p=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=ze(c):(c=ke(n)?en:Te.current,c=Ln(e,c));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==m||p!==c)&&ru(e,l,o,c),wt=!1,p=e.memoizedState,l.state=p,qr(e,o,l,r);var T=e.memoizedState;u!==m||p!==T||Pe.current||wt?(typeof g=="function"&&(Ls(e,n,g,o),T=e.memoizedState),(d=wt||ou(e,n,d,o,p,T,c)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(o,T,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(o,T,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=T),l.props=o,l.state=T,l.context=c,o=d):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),o=!1)}return Gs(t,e,n,o,i,r)}function Gs(t,e,n,o,r,i){Wf(t,e);var l=(e.flags&128)!==0;if(!o&&!l)return r&&Ya(e,n,!1),gt(t,e,i);o=e.stateNode,gg.current=e;var u=l&&typeof n.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,t!==null&&l?(e.child=Fn(e,t.child,null,i),e.child=Fn(e,null,u,i)):_e(t,e,u,i),e.memoizedState=o.state,r&&Ya(e,n,!0),e.child}function Kf(t){var e=t.stateNode;e.pendingContext?Ka(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ka(t,e.context,!1),Gl(t,e.containerInfo)}function du(t,e,n,o,r){return Un(),Ml(r),e.flags|=256,_e(t,e,n,o),e.child}var Hs={dehydrated:null,treeContext:null,retryLane:0};function Bs(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yf(t,e,n){var o=e.pendingProps,r=Q.current,i=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),O(Q,r&1),t===null)return Ms(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=o.children,t=o.fallback,i?(o=e.mode,i=e.child,l={mode:"hidden",children:l},!(o&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=mi(l,o,0,null),t=jt(t,o,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Bs(n),e.memoizedState=Hs,t):Ol(e,l));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return vg(t,e,l,o,u,r,n);if(i){i=o.fallback,l=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:o.children};return!(l&1)&&e.child!==r?(o=e.child,o.childLanes=0,o.pendingProps=c,e.deletions=null):(o=Vt(r,c),o.subtreeFlags=r.subtreeFlags&14680064),u!==null?i=Vt(u,i):(i=jt(i,l,n,null),i.flags|=2),i.return=e,o.return=e,o.sibling=i,e.child=o,o=i,i=e.child,l=t.child.memoizedState,l=l===null?Bs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~n,e.memoizedState=Hs,o}return i=t.child,t=i.sibling,o=Vt(i,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=n),o.return=e,o.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=o,e.memoizedState=null,o}function Ol(t,e){return e=mi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tr(t,e,n,o){return o!==null&&Ml(o),Fn(e,t.child,null,n),t=Ol(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vg(t,e,n,o,r,i,l){if(n)return e.flags&256?(e.flags&=-257,o=Yi(Error(N(422))),tr(t,e,l,o)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=o.fallback,r=e.mode,o=mi({mode:"visible",children:o.children},r,0,null),i=jt(i,r,l,null),i.flags|=2,o.return=e,i.return=e,o.sibling=i,e.child=o,e.mode&1&&Fn(e,t.child,null,l),e.child.memoizedState=Bs(l),e.memoizedState=Hs,i);if(!(e.mode&1))return tr(t,e,l,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var u=o.dgst;return o=u,i=Error(N(419)),o=Yi(i,o,void 0),tr(t,e,l,o)}if(u=(l&t.childLanes)!==0,Re||u){if(o=ce,o!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|l)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,ht(t,r),Ze(o,t,r,-1))}return Zl(),o=Yi(Error(N(421))),tr(t,e,l,o)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Pg.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Le=Dt(r.nextSibling),Ue=e,Y=!0,Qe=null,t!==null&&(He[Be++]=ct,He[Be++]=dt,He[Be++]=tn,ct=t.id,dt=t.overflow,tn=e),e=Ol(e,o.children),e.flags|=4096,e)}function fu(t,e,n){t.lanes|=e;var o=t.alternate;o!==null&&(o.lanes|=e),Ds(t.return,e,n)}function Qi(t,e,n,o,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function Qf(t,e,n){var o=e.pendingProps,r=o.revealOrder,i=o.tail;if(_e(t,e,o.children,n),o=Q.current,o&2)o=o&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fu(t,n,e);else if(t.tag===19)fu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(O(Q,o),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&br(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Qi(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&br(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Qi(e,!0,n,null,i);break;case"together":Qi(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Er(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),on|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,n=Vt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yg(t,e,n){switch(e.tag){case 3:Kf(e),Un();break;case 5:Cf(e);break;case 1:ke(e.type)&&Fr(e);break;case 4:Gl(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,r=e.memoizedProps.value;O(Hr,o._currentValue),o._currentValue=r;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(O(Q,Q.current&1),e.flags|=128,null):n&e.child.childLanes?Yf(t,e,n):(O(Q,Q.current&1),t=gt(t,e,n),t!==null?t.sibling:null);O(Q,Q.current&1);break;case 19:if(o=(n&e.childLanes)!==0,t.flags&128){if(o)return Qf(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),O(Q,Q.current),o)break;return null;case 22:case 23:return e.lanes=0,Of(t,e,n)}return gt(t,e,n)}var Xf,qs,Zf,jf;Xf=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qs=function(){};Zf=function(t,e,n,o){var r=t.memoizedProps;if(r!==o){t=e.stateNode,Xt(lt.current);var i=null;switch(n){case"input":r=us(t,r),o=us(t,o),i=[];break;case"select":r=Z({},r,{value:void 0}),o=Z({},o,{value:void 0}),i=[];break;case"textarea":r=fs(t,r),o=fs(t,o),i=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=Lr)}ms(n,o);var l;n=null;for(d in r)if(!o.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var u=r[d];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in o){var c=o[d];if(u=r!=null?r[d]:void 0,o.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(vo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&W("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};jf=function(t,e,n,o){n!==o&&(e.flags|=4)};function jn(t,e){if(!Y)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,o=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=o,t.childLanes=n,e}function Sg(t,e,n){var o=e.pendingProps;switch(kl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(e),null;case 1:return ke(e.type)&&Ur(),ye(e),null;case 3:return o=e.stateNode,Vn(),K(Pe),K(Te),Bl(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(jo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qe!==null&&(Ys(Qe),Qe=null))),qs(t,e),ye(e),null;case 5:Hl(e);var r=Xt(Ro.current);if(n=e.type,t!==null&&e.stateNode!=null)Zf(t,e,n,o,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(N(166));return ye(e),null}if(t=Xt(lt.current),jo(e)){o=e.stateNode,n=e.type;var i=e.memoizedProps;switch(o[it]=e,o[Ao]=i,t=(e.mode&1)!==0,n){case"dialog":W("cancel",o),W("close",o);break;case"iframe":case"object":case"embed":W("load",o);break;case"video":case"audio":for(r=0;r<io.length;r++)W(io[r],o);break;case"source":W("error",o);break;case"img":case"image":case"link":W("error",o),W("load",o);break;case"details":W("toggle",o);break;case"input":Ta(o,i),W("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},W("invalid",o);break;case"textarea":_a(o,i),W("invalid",o)}ms(n,i),r=null;for(var l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="children"?typeof u=="string"?o.textContent!==u&&(i.suppressHydrationWarning!==!0&&Zo(o.textContent,u,t),r=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Zo(o.textContent,u,t),r=["children",""+u]):vo.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&W("scroll",o)}switch(n){case"input":zo(o),Ca(o,i,!0);break;case"textarea":zo(o),wa(o);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(o.onclick=Lr)}o=r,e.updateQueue=o,o!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Id(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=l.createElement(n,{is:o.is}):(t=l.createElement(n),n==="select"&&(l=t,o.multiple?l.multiple=!0:o.size&&(l.size=o.size))):t=l.createElementNS(t,n),t[it]=e,t[Ao]=o,Xf(t,e,!1,!1),e.stateNode=t;e:{switch(l=hs(n,o),n){case"dialog":W("cancel",t),W("close",t),r=o;break;case"iframe":case"object":case"embed":W("load",t),r=o;break;case"video":case"audio":for(r=0;r<io.length;r++)W(io[r],t);r=o;break;case"source":W("error",t),r=o;break;case"img":case"image":case"link":W("error",t),W("load",t),r=o;break;case"details":W("toggle",t),r=o;break;case"input":Ta(t,o),r=us(t,o),W("invalid",t);break;case"option":r=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},r=Z({},o,{value:void 0}),W("invalid",t);break;case"textarea":_a(t,o),r=fs(t,o),W("invalid",t);break;default:r=o}ms(n,r),u=r;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?Rd(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ad(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&yo(t,c):typeof c=="number"&&yo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&W("scroll",t):c!=null&&gl(t,i,c,l))}switch(n){case"input":zo(t),Ca(t,o,!1);break;case"textarea":zo(t),wa(t);break;case"option":o.value!=null&&t.setAttribute("value",""+Gt(o.value));break;case"select":t.multiple=!!o.multiple,i=o.value,i!=null?xn(t,!!o.multiple,i,!1):o.defaultValue!=null&&xn(t,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Lr)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ye(e),null;case 6:if(t&&e.stateNode!=null)jf(t,e,t.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(N(166));if(n=Xt(Ro.current),Xt(lt.current),jo(e)){if(o=e.stateNode,n=e.memoizedProps,o[it]=e,(i=o.nodeValue!==n)&&(t=Ue,t!==null))switch(t.tag){case 3:Zo(o.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zo(o.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[it]=e,e.stateNode=o}return ye(e),null;case 13:if(K(Q),o=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Y&&Le!==null&&e.mode&1&&!(e.flags&128))vf(),Un(),e.flags|=98560,i=!1;else if(i=jo(e),o!==null&&o.dehydrated!==null){if(t===null){if(!i)throw Error(N(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[it]=e}else Un(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ye(e),i=!1}else Qe!==null&&(Ys(Qe),Qe=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(t===null||Q.current&1?le===0&&(le=3):Zl())),e.updateQueue!==null&&(e.flags|=4),ye(e),null);case 4:return Vn(),qs(t,e),t===null&&xo(e.stateNode.containerInfo),ye(e),null;case 10:return Ul(e.type._context),ye(e),null;case 17:return ke(e.type)&&Ur(),ye(e),null;case 19:if(K(Q),i=e.memoizedState,i===null)return ye(e),null;if(o=(e.flags&128)!==0,l=i.rendering,l===null)if(o)jn(i,!1);else{if(le!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=br(t),l!==null){for(e.flags|=128,jn(i,!1),o=l.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=n,n=e.child;n!==null;)i=n,t=o,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return O(Q,Q.current&1|2),e.child}t=t.sibling}i.tail!==null&&re()>Hn&&(e.flags|=128,o=!0,jn(i,!1),e.lanes=4194304)}else{if(!o)if(t=br(l),t!==null){if(e.flags|=128,o=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Y)return ye(e),null}else 2*re()-i.renderingStartTime>Hn&&n!==1073741824&&(e.flags|=128,o=!0,jn(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(n=i.last,n!==null?n.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=re(),e.sibling=null,n=Q.current,O(Q,o?n&1|2:n&1),e):(ye(e),null);case 22:case 23:return Xl(),o=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?De&1073741824&&(ye(e),e.subtreeFlags&6&&(e.flags|=8192)):ye(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function Eg(t,e){switch(kl(e),e.tag){case 1:return ke(e.type)&&Ur(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vn(),K(Pe),K(Te),Bl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hl(e),null;case 13:if(K(Q),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));Un()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return K(Q),null;case 4:return Vn(),null;case 10:return Ul(e.type._context),null;case 22:case 23:return Xl(),null;case 24:return null;default:return null}}var nr=!1,Se=!1,Tg=typeof WeakSet=="function"?WeakSet:Set,D=null;function Tn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){te(t,e,o)}else n.current=null}function bs(t,e,n){try{n()}catch(o){te(t,e,o)}}var pu=!1;function Cg(t,e){if(xs=kr,t=of(),Rl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var r=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,u=-1,c=-1,d=0,f=0,m=t,p=null;t:for(;;){for(var g;m!==n||r!==0&&m.nodeType!==3||(u=l+r),m!==i||o!==0&&m.nodeType!==3||(c=l+o),m.nodeType===3&&(l+=m.nodeValue.length),(g=m.firstChild)!==null;)p=m,m=g;for(;;){if(m===t)break t;if(p===n&&++d===r&&(u=l),p===i&&++f===o&&(c=l),(g=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=g}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Is={focusedElem:t,selectionRange:n},kr=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var E=T.memoizedProps,C=T.memoizedState,h=e.stateNode,y=h.getSnapshotBeforeUpdate(e.elementType===e.type?E:Ke(e.type,E),C);h.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(_){te(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return T=pu,pu=!1,T}function mo(t,e,n){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&bs(e,n,i)}r=r.next}while(r!==o)}}function fi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var o=n.create;n.destroy=o()}n=n.next}while(n!==e)}}function $s(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ep(t){var e=t.alternate;e!==null&&(t.alternate=null,ep(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[it],delete e[Ao],delete e[Rs],delete e[rg],delete e[ig])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tp(t){return t.tag===5||t.tag===3||t.tag===4}function mu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zs(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lr));else if(o!==4&&(t=t.child,t!==null))for(zs(t,e,n),t=t.sibling;t!==null;)zs(t,e,n),t=t.sibling}function Js(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(Js(t,e,n),t=t.sibling;t!==null;)Js(t,e,n),t=t.sibling}var pe=null,Ye=!1;function Ct(t,e,n){for(n=n.child;n!==null;)np(t,e,n),n=n.sibling}function np(t,e,n){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(ri,n)}catch{}switch(n.tag){case 5:Se||Tn(n,e);case 6:var o=pe,r=Ye;pe=null,Ct(t,e,n),pe=o,Ye=r,pe!==null&&(Ye?(t=pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pe.removeChild(n.stateNode));break;case 18:pe!==null&&(Ye?(t=pe,n=n.stateNode,t.nodeType===8?$i(t.parentNode,n):t.nodeType===1&&$i(t,n),Co(t)):$i(pe,n.stateNode));break;case 4:o=pe,r=Ye,pe=n.stateNode.containerInfo,Ye=!0,Ct(t,e,n),pe=o,Ye=r;break;case 0:case 11:case 14:case 15:if(!Se&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var i=r,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&bs(n,e,l),r=r.next}while(r!==o)}Ct(t,e,n);break;case 1:if(!Se&&(Tn(n,e),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){te(n,e,u)}Ct(t,e,n);break;case 21:Ct(t,e,n);break;case 22:n.mode&1?(Se=(o=Se)||n.memoizedState!==null,Ct(t,e,n),Se=o):Ct(t,e,n);break;default:Ct(t,e,n)}}function hu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Tg),e.forEach(function(o){var r=kg.bind(null,t,o);n.has(o)||(n.add(o),o.then(r,r))})}}function We(t,e){var n=e.deletions;if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];try{var i=t,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:pe=u.stateNode,Ye=!1;break e;case 3:pe=u.stateNode.containerInfo,Ye=!0;break e;case 4:pe=u.stateNode.containerInfo,Ye=!0;break e}u=u.return}if(pe===null)throw Error(N(160));np(i,l,r),pe=null,Ye=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){te(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)op(e,t),e=e.sibling}function op(t,e){var n=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(We(e,t),ot(t),o&4){try{mo(3,t,t.return),fi(3,t)}catch(E){te(t,t.return,E)}try{mo(5,t,t.return)}catch(E){te(t,t.return,E)}}break;case 1:We(e,t),ot(t),o&512&&n!==null&&Tn(n,n.return);break;case 5:if(We(e,t),ot(t),o&512&&n!==null&&Tn(n,n.return),t.flags&32){var r=t.stateNode;try{yo(r,"")}catch(E){te(t,t.return,E)}}if(o&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,l=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&wd(r,i),hs(u,l);var d=hs(u,i);for(l=0;l<c.length;l+=2){var f=c[l],m=c[l+1];f==="style"?Rd(r,m):f==="dangerouslySetInnerHTML"?Ad(r,m):f==="children"?yo(r,m):gl(r,f,m,d)}switch(u){case"input":cs(r,i);break;case"textarea":xd(r,i);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?xn(r,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?xn(r,!!i.multiple,i.defaultValue,!0):xn(r,!!i.multiple,i.multiple?[]:"",!1))}r[Ao]=i}catch(E){te(t,t.return,E)}}break;case 6:if(We(e,t),ot(t),o&4){if(t.stateNode===null)throw Error(N(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(E){te(t,t.return,E)}}break;case 3:if(We(e,t),ot(t),o&4&&n!==null&&n.memoizedState.isDehydrated)try{Co(e.containerInfo)}catch(E){te(t,t.return,E)}break;case 4:We(e,t),ot(t);break;case 13:We(e,t),ot(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Yl=re())),o&4&&hu(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Se=(d=Se)||f,We(e,t),Se=d):We(e,t),ot(t),o&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(D=t,f=t.child;f!==null;){for(m=D=f;D!==null;){switch(p=D,g=p.child,p.tag){case 0:case 11:case 14:case 15:mo(4,p,p.return);break;case 1:Tn(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){o=p,n=p.return;try{e=o,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(E){te(o,n,E)}}break;case 5:Tn(p,p.return);break;case 22:if(p.memoizedState!==null){vu(m);continue}}g!==null?(g.return=p,D=g):vu(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{r=m.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Nd("display",l))}catch(E){te(t,t.return,E)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(E){te(t,t.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:We(e,t),ot(t),o&4&&hu(t);break;case 21:break;default:We(e,t),ot(t)}}function ot(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tp(n)){var o=n;break e}n=n.return}throw Error(N(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(yo(r,""),o.flags&=-33);var i=mu(t);Js(t,i,r);break;case 3:case 4:var l=o.stateNode.containerInfo,u=mu(t);zs(t,u,l);break;default:throw Error(N(161))}}catch(c){te(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _g(t,e,n){D=t,rp(t)}function rp(t,e,n){for(var o=(t.mode&1)!==0;D!==null;){var r=D,i=r.child;if(r.tag===22&&o){var l=r.memoizedState!==null||nr;if(!l){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Se;u=nr;var d=Se;if(nr=l,(Se=c)&&!d)for(D=r;D!==null;)l=D,c=l.child,l.tag===22&&l.memoizedState!==null?yu(r):c!==null?(c.return=l,D=c):yu(r);for(;i!==null;)D=i,rp(i),i=i.sibling;D=r,nr=u,Se=d}gu(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,D=i):gu(t)}}function gu(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Se||fi(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!Se)if(n===null)o.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Ke(e.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&eu(e,i,o);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}eu(e,l,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Co(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Se||e.flags&512&&$s(e)}catch(p){te(e,e.return,p)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function vu(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function yu(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fi(4,e)}catch(c){te(e,n,c)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var r=e.return;try{o.componentDidMount()}catch(c){te(e,r,c)}}var i=e.return;try{$s(e)}catch(c){te(e,i,c)}break;case 5:var l=e.return;try{$s(e)}catch(c){te(e,l,c)}}}catch(c){te(e,e.return,c)}if(e===t){D=null;break}var u=e.sibling;if(u!==null){u.return=e.return,D=u;break}D=e.return}}var wg=Math.ceil,Jr=yt.ReactCurrentDispatcher,Wl=yt.ReactCurrentOwner,be=yt.ReactCurrentBatchConfig,$=0,ce=null,ie=null,me=0,De=0,Cn=qt(0),le=0,Do=null,on=0,pi=0,Kl=0,ho=null,Ne=null,Yl=0,Hn=1/0,at=null,Or=!1,Os=null,Ut=null,or=!1,Nt=null,Wr=0,go=0,Ws=null,Tr=-1,Cr=0;function we(){return $&6?re():Tr!==-1?Tr:Tr=re()}function Ft(t){return t.mode&1?$&2&&me!==0?me&-me:lg.transition!==null?(Cr===0&&(Cr=qd()),Cr):(t=J,t!==0||(t=window.event,t=t===void 0?16:Kd(t.type)),t):1}function Ze(t,e,n,o){if(50<go)throw go=0,Ws=null,Error(N(185));Uo(t,n,o),(!($&2)||t!==ce)&&(t===ce&&(!($&2)&&(pi|=n),le===4&&It(t,me)),Me(t,o),n===1&&$===0&&!(e.mode&1)&&(Hn=re()+500,ui&&bt()))}function Me(t,e){var n=t.callbackNode;lh(t,e);var o=Pr(t,t===ce?me:0);if(o===0)n!==null&&Aa(n),t.callbackNode=null,t.callbackPriority=0;else if(e=o&-o,t.callbackPriority!==e){if(n!=null&&Aa(n),e===1)t.tag===0?sg(Su.bind(null,t)):mf(Su.bind(null,t)),ng(function(){!($&6)&&bt()}),n=null;else{switch(bd(o)){case 1:n=Tl;break;case 4:n=Hd;break;case 16:n=Rr;break;case 536870912:n=Bd;break;default:n=Rr}n=fp(n,ip.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ip(t,e){if(Tr=-1,Cr=0,$&6)throw Error(N(327));var n=t.callbackNode;if(Pn()&&t.callbackNode!==n)return null;var o=Pr(t,t===ce?me:0);if(o===0)return null;if(o&30||o&t.expiredLanes||e)e=Kr(t,o);else{e=o;var r=$;$|=2;var i=lp();(ce!==t||me!==e)&&(at=null,Hn=re()+500,Zt(t,e));do try{Ag();break}catch(u){sp(t,u)}while(!0);Ll(),Jr.current=i,$=r,ie!==null?e=0:(ce=null,me=0,e=le)}if(e!==0){if(e===2&&(r=Es(t),r!==0&&(o=r,e=Ks(t,r))),e===1)throw n=Do,Zt(t,0),It(t,o),Me(t,re()),n;if(e===6)It(t,o);else{if(r=t.current.alternate,!(o&30)&&!xg(r)&&(e=Kr(t,o),e===2&&(i=Es(t),i!==0&&(o=i,e=Ks(t,i))),e===1))throw n=Do,Zt(t,0),It(t,o),Me(t,re()),n;switch(t.finishedWork=r,t.finishedLanes=o,e){case 0:case 1:throw Error(N(345));case 2:Wt(t,Ne,at);break;case 3:if(It(t,o),(o&130023424)===o&&(e=Yl+500-re(),10<e)){if(Pr(t,0)!==0)break;if(r=t.suspendedLanes,(r&o)!==o){we(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Ns(Wt.bind(null,t,Ne,at),e);break}Wt(t,Ne,at);break;case 4:if(It(t,o),(o&4194240)===o)break;for(e=t.eventTimes,r=-1;0<o;){var l=31-Xe(o);i=1<<l,l=e[l],l>r&&(r=l),o&=~i}if(o=r,o=re()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*wg(o/1960))-o,10<o){t.timeoutHandle=Ns(Wt.bind(null,t,Ne,at),o);break}Wt(t,Ne,at);break;case 5:Wt(t,Ne,at);break;default:throw Error(N(329))}}}return Me(t,re()),t.callbackNode===n?ip.bind(null,t):null}function Ks(t,e){var n=ho;return t.current.memoizedState.isDehydrated&&(Zt(t,e).flags|=256),t=Kr(t,e),t!==2&&(e=Ne,Ne=n,e!==null&&Ys(e)),t}function Ys(t){Ne===null?Ne=t:Ne.push.apply(Ne,t)}function xg(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!tt(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function It(t,e){for(e&=~Kl,e&=~pi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xe(e),o=1<<n;t[n]=-1,e&=~o}}function Su(t){if($&6)throw Error(N(327));Pn();var e=Pr(t,0);if(!(e&1))return Me(t,re()),null;var n=Kr(t,e);if(t.tag!==0&&n===2){var o=Es(t);o!==0&&(e=o,n=Ks(t,o))}if(n===1)throw n=Do,Zt(t,0),It(t,e),Me(t,re()),n;if(n===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wt(t,Ne,at),Me(t,re()),null}function Ql(t,e){var n=$;$|=1;try{return t(e)}finally{$=n,$===0&&(Hn=re()+500,ui&&bt())}}function rn(t){Nt!==null&&Nt.tag===0&&!($&6)&&Pn();var e=$;$|=1;var n=be.transition,o=J;try{if(be.transition=null,J=1,t)return t()}finally{J=o,be.transition=n,$=e,!($&6)&&bt()}}function Xl(){De=Cn.current,K(Cn)}function Zt(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tg(n)),ie!==null)for(n=ie.return;n!==null;){var o=n;switch(kl(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Ur();break;case 3:Vn(),K(Pe),K(Te),Bl();break;case 5:Hl(o);break;case 4:Vn();break;case 13:K(Q);break;case 19:K(Q);break;case 10:Ul(o.type._context);break;case 22:case 23:Xl()}n=n.return}if(ce=t,ie=t=Vt(t.current,null),me=De=e,le=0,Do=null,Kl=pi=on=0,Ne=ho=null,Qt!==null){for(e=0;e<Qt.length;e++)if(n=Qt[e],o=n.interleaved,o!==null){n.interleaved=null;var r=o.next,i=n.pending;if(i!==null){var l=i.next;i.next=r,o.next=l}n.pending=o}Qt=null}return t}function sp(t,e){do{var n=ie;try{if(Ll(),yr.current=zr,$r){for(var o=X.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}$r=!1}if(nn=0,ue=se=X=null,po=!1,Po=0,Wl.current=null,n===null||n.return===null){le=1,Do=e,ie=null;break}e:{var i=t,l=n.return,u=n,c=e;if(e=me,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=su(l);if(g!==null){g.flags&=-257,lu(g,l,u,i,e),g.mode&1&&iu(i,d,e),e=g,c=d;var T=e.updateQueue;if(T===null){var E=new Set;E.add(c),e.updateQueue=E}else T.add(c);break e}else{if(!(e&1)){iu(i,d,e),Zl();break e}c=Error(N(426))}}else if(Y&&u.mode&1){var C=su(l);if(C!==null){!(C.flags&65536)&&(C.flags|=256),lu(C,l,u,i,e),Ml(Gn(c,u));break e}}i=c=Gn(c,u),le!==4&&(le=2),ho===null?ho=[i]:ho.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var h=$f(i,c,e);ja(i,h);break e;case 1:u=c;var y=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ut===null||!Ut.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=zf(i,u,e);ja(i,_);break e}}i=i.return}while(i!==null)}up(n)}catch(w){e=w,ie===n&&n!==null&&(ie=n=n.return);continue}break}while(!0)}function lp(){var t=Jr.current;return Jr.current=zr,t===null?zr:t}function Zl(){(le===0||le===3||le===2)&&(le=4),ce===null||!(on&268435455)&&!(pi&268435455)||It(ce,me)}function Kr(t,e){var n=$;$|=2;var o=lp();(ce!==t||me!==e)&&(at=null,Zt(t,e));do try{Ig();break}catch(r){sp(t,r)}while(!0);if(Ll(),$=n,Jr.current=o,ie!==null)throw Error(N(261));return ce=null,me=0,le}function Ig(){for(;ie!==null;)ap(ie)}function Ag(){for(;ie!==null&&!Zm();)ap(ie)}function ap(t){var e=dp(t.alternate,t,De);t.memoizedProps=t.pendingProps,e===null?up(t):ie=e,Wl.current=null}function up(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Eg(n,e),n!==null){n.flags&=32767,ie=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{le=6,ie=null;return}}else if(n=Sg(n,e,De),n!==null){ie=n;return}if(e=e.sibling,e!==null){ie=e;return}ie=e=t}while(e!==null);le===0&&(le=5)}function Wt(t,e,n){var o=J,r=be.transition;try{be.transition=null,J=1,Ng(t,e,n,o)}finally{be.transition=r,J=o}return null}function Ng(t,e,n,o){do Pn();while(Nt!==null);if($&6)throw Error(N(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ah(t,i),t===ce&&(ie=ce=null,me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||or||(or=!0,fp(Rr,function(){return Pn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=be.transition,be.transition=null;var l=J;J=1;var u=$;$|=4,Wl.current=null,Cg(t,n),op(n,t),Kh(Is),kr=!!xs,Is=xs=null,t.current=n,_g(n),jm(),$=u,J=l,be.transition=i}else t.current=n;if(or&&(or=!1,Nt=t,Wr=r),i=t.pendingLanes,i===0&&(Ut=null),nh(n.stateNode),Me(t,re()),e!==null)for(o=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(Or)throw Or=!1,t=Os,Os=null,t;return Wr&1&&t.tag!==0&&Pn(),i=t.pendingLanes,i&1?t===Ws?go++:(go=0,Ws=t):go=0,bt(),null}function Pn(){if(Nt!==null){var t=bd(Wr),e=be.transition,n=J;try{if(be.transition=null,J=16>t?16:t,Nt===null)var o=!1;else{if(t=Nt,Nt=null,Wr=0,$&6)throw Error(N(331));var r=$;for($|=4,D=t.current;D!==null;){var i=D,l=i.child;if(D.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(D=d;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:mo(8,f,i)}var m=f.child;if(m!==null)m.return=f,D=m;else for(;D!==null;){f=D;var p=f.sibling,g=f.return;if(ep(f),f===d){D=null;break}if(p!==null){p.return=g,D=p;break}D=g}}}var T=i.alternate;if(T!==null){var E=T.child;if(E!==null){T.child=null;do{var C=E.sibling;E.sibling=null,E=C}while(E!==null)}}D=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,D=l;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:mo(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,D=h;break e}D=i.return}}var y=t.current;for(D=y;D!==null;){l=D;var S=l.child;if(l.subtreeFlags&2064&&S!==null)S.return=l,D=S;else e:for(l=y;D!==null;){if(u=D,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:fi(9,u)}}catch(w){te(u,u.return,w)}if(u===l){D=null;break e}var _=u.sibling;if(_!==null){_.return=u.return,D=_;break e}D=u.return}}if($=r,bt(),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(ri,t)}catch{}o=!0}return o}finally{J=n,be.transition=e}}return!1}function Eu(t,e,n){e=Gn(n,e),e=$f(t,e,1),t=Lt(t,e,1),e=we(),t!==null&&(Uo(t,1,e),Me(t,e))}function te(t,e,n){if(t.tag===3)Eu(t,t,n);else for(;e!==null;){if(e.tag===3){Eu(e,t,n);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ut===null||!Ut.has(o))){t=Gn(n,t),t=zf(e,t,1),e=Lt(e,t,1),t=we(),e!==null&&(Uo(e,1,t),Me(e,t));break}}e=e.return}}function Rg(t,e,n){var o=t.pingCache;o!==null&&o.delete(e),e=we(),t.pingedLanes|=t.suspendedLanes&n,ce===t&&(me&n)===n&&(le===4||le===3&&(me&130023424)===me&&500>re()-Yl?Zt(t,0):Kl|=n),Me(t,e)}function cp(t,e){e===0&&(t.mode&1?(e=Wo,Wo<<=1,!(Wo&130023424)&&(Wo=4194304)):e=1);var n=we();t=ht(t,e),t!==null&&(Uo(t,e,n),Me(t,n))}function Pg(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cp(t,n)}function kg(t,e){var n=0;switch(t.tag){case 13:var o=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(N(314))}o!==null&&o.delete(e),cp(t,n)}var dp;dp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pe.current)Re=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Re=!1,yg(t,e,n);Re=!!(t.flags&131072)}else Re=!1,Y&&e.flags&1048576&&hf(e,Gr,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;Er(t,e),t=e.pendingProps;var r=Ln(e,Te.current);Rn(e,n),r=bl(null,e,o,t,r,n);var i=$l();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ke(o)?(i=!0,Fr(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Vl(e),r.updater=di,e.stateNode=r,r._reactInternals=e,Us(e,o,t,n),e=Gs(null,e,o,!0,i,n)):(e.tag=0,Y&&i&&Pl(e),_e(null,e,r,n),e=e.child),e;case 16:o=e.elementType;e:{switch(Er(t,e),t=e.pendingProps,r=o._init,o=r(o._payload),e.type=o,r=e.tag=Dg(o),t=Ke(o,t),r){case 0:e=Vs(null,e,o,t,n);break e;case 1:e=cu(null,e,o,t,n);break e;case 11:e=au(null,e,o,t,n);break e;case 14:e=uu(null,e,o,Ke(o.type,t),n);break e}throw Error(N(306,o,""))}return e;case 0:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Ke(o,r),Vs(t,e,o,r,n);case 1:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Ke(o,r),cu(t,e,o,r,n);case 3:e:{if(Kf(e),t===null)throw Error(N(387));o=e.pendingProps,i=e.memoizedState,r=i.element,Tf(t,e),qr(e,o,null,n);var l=e.memoizedState;if(o=l.element,i.isDehydrated)if(i={element:o,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Gn(Error(N(423)),e),e=du(t,e,o,n,r);break e}else if(o!==r){r=Gn(Error(N(424)),e),e=du(t,e,o,n,r);break e}else for(Le=Dt(e.stateNode.containerInfo.firstChild),Ue=e,Y=!0,Qe=null,n=Sf(e,null,o,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Un(),o===r){e=gt(t,e,n);break e}_e(t,e,o,n)}e=e.child}return e;case 5:return Cf(e),t===null&&Ms(e),o=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,l=r.children,As(o,r)?l=null:i!==null&&As(o,i)&&(e.flags|=32),Wf(t,e),_e(t,e,l,n),e.child;case 6:return t===null&&Ms(e),null;case 13:return Yf(t,e,n);case 4:return Gl(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=Fn(e,null,o,n):_e(t,e,o,n),e.child;case 11:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Ke(o,r),au(t,e,o,r,n);case 7:return _e(t,e,e.pendingProps,n),e.child;case 8:return _e(t,e,e.pendingProps.children,n),e.child;case 12:return _e(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(o=e.type._context,r=e.pendingProps,i=e.memoizedProps,l=r.value,O(Hr,o._currentValue),o._currentValue=l,i!==null)if(tt(i.value,l)){if(i.children===r.children&&!Pe.current){e=gt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){l=i.child;for(var c=u.firstContext;c!==null;){if(c.context===o){if(i.tag===1){c=ft(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ds(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(N(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),Ds(l,n,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}_e(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,o=e.pendingProps.children,Rn(e,n),r=ze(r),o=o(r),e.flags|=1,_e(t,e,o,n),e.child;case 14:return o=e.type,r=Ke(o,e.pendingProps),r=Ke(o.type,r),uu(t,e,o,r,n);case 15:return Jf(t,e,e.type,e.pendingProps,n);case 17:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:Ke(o,r),Er(t,e),e.tag=1,ke(o)?(t=!0,Fr(e)):t=!1,Rn(e,n),bf(e,o,r),Us(e,o,r,n),Gs(null,e,o,!0,t,n);case 19:return Qf(t,e,n);case 22:return Of(t,e,n)}throw Error(N(156,e.tag))};function fp(t,e){return Gd(t,e)}function Mg(t,e,n,o){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qe(t,e,n,o){return new Mg(t,e,n,o)}function jl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dg(t){if(typeof t=="function")return jl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yl)return 11;if(t===Sl)return 14}return 2}function Vt(t,e){var n=t.alternate;return n===null?(n=qe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _r(t,e,n,o,r,i){var l=2;if(o=t,typeof t=="function")jl(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case fn:return jt(n.children,r,i,e);case vl:l=8,r|=8;break;case is:return t=qe(12,n,e,r|2),t.elementType=is,t.lanes=i,t;case ss:return t=qe(13,n,e,r),t.elementType=ss,t.lanes=i,t;case ls:return t=qe(19,n,e,r),t.elementType=ls,t.lanes=i,t;case Td:return mi(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sd:l=10;break e;case Ed:l=9;break e;case yl:l=11;break e;case Sl:l=14;break e;case _t:l=16,o=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=qe(l,n,e,r),e.elementType=t,e.type=o,e.lanes=i,e}function jt(t,e,n,o){return t=qe(7,t,o,e),t.lanes=n,t}function mi(t,e,n,o){return t=qe(22,t,o,e),t.elementType=Td,t.lanes=n,t.stateNode={isHidden:!1},t}function Xi(t,e,n){return t=qe(6,t,null,e),t.lanes=n,t}function Zi(t,e,n){return e=qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Lg(t,e,n,o,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mi(0),this.expirationTimes=Mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ea(t,e,n,o,r,i,l,u,c){return t=new Lg(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qe(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vl(i),t}function Ug(t,e,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dn,key:o==null?null:""+o,children:t,containerInfo:e,implementation:n}}function pp(t){if(!t)return Ht;t=t._reactInternals;e:{if(ln(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var n=t.type;if(ke(n))return pf(t,n,e)}return e}function mp(t,e,n,o,r,i,l,u,c){return t=ea(n,o,!0,t,r,i,l,u,c),t.context=pp(null),n=t.current,o=we(),r=Ft(n),i=ft(o,r),i.callback=e??null,Lt(n,i,r),t.current.lanes=r,Uo(t,r,o),Me(t,o),t}function hi(t,e,n,o){var r=e.current,i=we(),l=Ft(r);return n=pp(n),e.context===null?e.context=n:e.pendingContext=n,e=ft(i,l),e.payload={element:t},o=o===void 0?null:o,o!==null&&(e.callback=o),t=Lt(r,e,l),t!==null&&(Ze(t,r,l,i),vr(t,r,l)),l}function Yr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ta(t,e){Tu(t,e),(t=t.alternate)&&Tu(t,e)}function Fg(){return null}var hp=typeof reportError=="function"?reportError:function(t){console.error(t)};function na(t){this._internalRoot=t}gi.prototype.render=na.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));hi(t,e,null,null)};gi.prototype.unmount=na.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;rn(function(){hi(null,t,null,null)}),e[mt]=null}};function gi(t){this._internalRoot=t}gi.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xt.length&&e!==0&&e<xt[n].priority;n++);xt.splice(n,0,t),n===0&&Wd(t)}};function oa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cu(){}function Vg(t,e,n,o,r){if(r){if(typeof o=="function"){var i=o;o=function(){var d=Yr(l);i.call(d)}}var l=mp(e,o,t,0,null,!1,!1,"",Cu);return t._reactRootContainer=l,t[mt]=l.current,xo(t.nodeType===8?t.parentNode:t),rn(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof o=="function"){var u=o;o=function(){var d=Yr(c);u.call(d)}}var c=ea(t,0,!1,null,null,!1,!1,"",Cu);return t._reactRootContainer=c,t[mt]=c.current,xo(t.nodeType===8?t.parentNode:t),rn(function(){hi(e,c,n,o)}),c}function yi(t,e,n,o,r){var i=n._reactRootContainer;if(i){var l=i;if(typeof r=="function"){var u=r;r=function(){var c=Yr(l);u.call(c)}}hi(e,l,t,r)}else l=Vg(n,e,t,r,o);return Yr(l)}$d=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ro(e.pendingLanes);n!==0&&(Cl(e,n|1),Me(e,re()),!($&6)&&(Hn=re()+500,bt()))}break;case 13:rn(function(){var o=ht(t,1);if(o!==null){var r=we();Ze(o,t,1,r)}}),ta(t,1)}};_l=function(t){if(t.tag===13){var e=ht(t,134217728);if(e!==null){var n=we();Ze(e,t,134217728,n)}ta(t,134217728)}};zd=function(t){if(t.tag===13){var e=Ft(t),n=ht(t,e);if(n!==null){var o=we();Ze(n,t,e,o)}ta(t,e)}};Jd=function(){return J};Od=function(t,e){var n=J;try{return J=t,e()}finally{J=n}};vs=function(t,e,n){switch(e){case"input":if(cs(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var o=n[e];if(o!==t&&o.form===t.form){var r=ai(o);if(!r)throw Error(N(90));_d(o),cs(o,r)}}}break;case"textarea":xd(t,n);break;case"select":e=n.value,e!=null&&xn(t,!!n.multiple,e,!1)}};Md=Ql;Dd=rn;var Gg={usingClientEntryPoint:!1,Events:[Vo,gn,ai,Pd,kd,Ql]},eo={findFiberByHostInstance:Yt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hg={bundleType:eo.bundleType,version:eo.version,rendererPackageName:eo.rendererPackageName,rendererConfig:eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fd(t),t===null?null:t.stateNode},findFiberByHostInstance:eo.findFiberByHostInstance||Fg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rr.isDisabled&&rr.supportsFiber)try{ri=rr.inject(Hg),st=rr}catch{}}Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gg;Ve.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oa(e))throw Error(N(200));return Ug(t,e,null,n)};Ve.createRoot=function(t,e){if(!oa(t))throw Error(N(299));var n=!1,o="",r=hp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=ea(t,1,!1,null,null,n,!1,o,r),t[mt]=e.current,xo(t.nodeType===8?t.parentNode:t),new na(e)};Ve.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=Fd(e),t=t===null?null:t.stateNode,t};Ve.flushSync=function(t){return rn(t)};Ve.hydrate=function(t,e,n){if(!vi(e))throw Error(N(200));return yi(null,t,e,!0,n)};Ve.hydrateRoot=function(t,e,n){if(!oa(t))throw Error(N(405));var o=n!=null&&n.hydratedSources||null,r=!1,i="",l=hp;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=mp(e,null,t,1,n??null,r,!1,i,l),t[mt]=e.current,xo(t),o)for(t=0;t<o.length;t++)n=o[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new gi(e)};Ve.render=function(t,e,n){if(!vi(e))throw Error(N(200));return yi(null,t,e,!1,n)};Ve.unmountComponentAtNode=function(t){if(!vi(t))throw Error(N(40));return t._reactRootContainer?(rn(function(){yi(null,null,t,!1,function(){t._reactRootContainer=null,t[mt]=null})}),!0):!1};Ve.unstable_batchedUpdates=Ql;Ve.unstable_renderSubtreeIntoContainer=function(t,e,n,o){if(!vi(n))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return yi(t,e,n,!1,o)};Ve.version="18.3.1-next-f1338f8080-20240426";function gp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gp)}catch(t){console.error(t)}}gp(),hd.exports=Ve;var Bg=hd.exports,_u=Bg;os.createRoot=_u.createRoot,os.hydrateRoot=_u.hydrateRoot;let ir;const qg=new Uint8Array(16);function bg(){if(!ir&&(ir=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ir))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ir(qg)}const fe=[];for(let t=0;t<256;++t)fe.push((t+256).toString(16).slice(1));function $g(t,e=0){return fe[t[e+0]]+fe[t[e+1]]+fe[t[e+2]]+fe[t[e+3]]+"-"+fe[t[e+4]]+fe[t[e+5]]+"-"+fe[t[e+6]]+fe[t[e+7]]+"-"+fe[t[e+8]]+fe[t[e+9]]+"-"+fe[t[e+10]]+fe[t[e+11]]+fe[t[e+12]]+fe[t[e+13]]+fe[t[e+14]]+fe[t[e+15]]}const zg=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wu={randomUUID:zg};function ji(t,e,n){if(wu.randomUUID&&!t)return wu.randomUUID();t=t||{};const o=t.random||(t.rng||bg)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,$g(o)}const vp=H.createContext(void 0),Jg=({children:t})=>{const[e,n]=H.useState(""),[o,r]=H.useState(""),[i,l]=H.useState([]),[u,c]=H.useState("webtoon"),[d,f]=H.useState("16:9"),[m,p]=H.useState([]),[g,T]=H.useState([]),[E,C]=H.useState([]),[h,y]=H.useState(!0),[S,_]=H.useState(null);H.useEffect(()=>{if(i.length>0){const q=i.map(ne=>`[${ne.title}]
${ne.content}`).join(`

`);r(q)}else i.length===0&&o.length>0},[i]),H.useEffect(()=>{const q=localStorage.getItem("sb_api_key");q&&n(q);const ne=localStorage.getItem("sb_project_data");if(ne)try{const V=JSON.parse(ne);r(V.script||""),V.scriptSegments&&V.scriptSegments.length>0?l(V.scriptSegments):V.script&&!V.scriptSegments&&l([{id:ji(),title:" ",content:V.script}]),c(V.selectedStyle||"webtoon"),p(V.scenes||[]),T(V.characters||[]),C(V.referenceImages||[]),V.globalAspectRatio&&f(V.globalAspectRatio)}catch(V){console.error("Failed to load project data",V)}},[]);const w=q=>{r(q),i.length===0&&l([{id:ji(),title:" ",content:q}])},x=(q,ne)=>{const V={id:ji(),title:q,content:ne};l(ge=>[...ge,V])},I=q=>{l(ne=>ne.filter(V=>V.id!==q))},R=(q,ne)=>{l(V=>V.map(ge=>ge.id===q?{...ge,content:ne}:ge))},P=()=>{l([]),r("")},A=()=>{const q=JSON.stringify({script:o,scriptSegments:i,selectedStyle:u,scenes:m,characters:g,referenceImages:E,globalAspectRatio:d});try{localStorage.setItem("sb_project_data",q)}catch{console.warn("Storage full, saving text only")}};H.useEffect(()=>{const q=setTimeout(A,2e3);return()=>clearTimeout(q)},[o,i,u,m,g,E,d]),H.useEffect(()=>{e&&localStorage.setItem("sb_api_key",e)},[e]);const F=()=>{r(""),l([]),p([]),T([]),C([]),localStorage.removeItem("sb_project_data"),j(" .","success")},j=(q,ne="success")=>{_({message:q,type:ne})},b=()=>_(null);return v.jsx(vp.Provider,{value:{apiKey:e,setApiKey:n,script:o,setScript:w,scriptSegments:i,addScriptSegment:x,removeScriptSegment:I,updateScriptSegment:R,clearScriptSegments:P,selectedStyle:u,setSelectedStyle:c,globalAspectRatio:d,setGlobalAspectRatio:f,scenes:m,setScenes:p,characters:g,setCharacters:T,referenceImages:E,setReferenceImages:C,isContinuityMode:h,setIsContinuityMode:y,saveProject:A,resetProject:F,toast:S,showToast:j,closeToast:b},children:t})},St=()=>{const t=H.useContext(vp);if(!t)throw new Error("useProject must be used within a ProjectProvider");return t};var Og={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Wg,Kg;function Yg(){return{geminiUrl:Wg,vertexUrl:Kg}}function Qg(t,e,n,o){var r,i;if(!(t!=null&&t.baseUrl)){const l=Yg();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:n:(i=l.geminiUrl)!==null&&i!==void 0?i:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Et{}function k(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function a(t,e,n){for(let i=0;i<e.length-1;i++){const l=e[i];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];a(f,e.slice(i+1),n[d])}else for(const d of c)a(d,e.slice(i+1),n)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];a(c[0],e.slice(i+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function s(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const l=t[i];return Array.isArray(l)?l.map(u=>s(u,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function Xg(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),i=o.split("."),l=new Set;let u=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){u=c;break}if(u!==-1&&i.length>u)for(let c=u;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&l.add(d)}Qs(t,r,i,0,l)}}function Qs(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const i=e[o];if(i.endsWith("[]")){const l=i.slice(0,-2),u=t;if(l in u&&Array.isArray(u[l]))for(const c of u[l])Qs(c,e,n,o+1,r)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,u=Object.keys(l).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(const d of u)c[d]=l[d];for(const[d,f]of Object.entries(c)){const m=[];for(const p of n.slice(o))p==="*"?m.push(d):m.push(p);a(l,m,f)}for(const d of u)delete l[d]}}else{const l=t;i in l&&Qs(l[i],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ra(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zg(t){const e={},n=s(t,["operationName"]);n!=null&&a(e,["operationName"],n);const o=s(t,["resourceName"]);return o!=null&&a(e,["_url","resourceName"],o),e}function jg(t){const e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);const o=s(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=s(t,["done"]);r!=null&&a(e,["done"],r);const i=s(t,["error"]);i!=null&&a(e,["error"],i);const l=s(t,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],tv(l)),e}function ev(t){const e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);const o=s(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=s(t,["done"]);r!=null&&a(e,["done"],r);const i=s(t,["error"]);i!=null&&a(e,["error"],i);const l=s(t,["response"]);return l!=null&&a(e,["response"],nv(l)),e}function tv(t){const e={},n=s(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>ov(l))),a(e,["generatedVideos"],i)}const o=s(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=s(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function nv(t){const e={},n=s(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>rv(l))),a(e,["generatedVideos"],i)}const o=s(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=s(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function ov(t){const e={},n=s(t,["video"]);return n!=null&&a(e,["video"],cv(n)),e}function rv(t){const e={},n=s(t,["_self"]);return n!=null&&a(e,["video"],dv(n)),e}function iv(t){const e={},n=s(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function sv(t){const e={},n=s(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function lv(t){const e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);const o=s(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=s(t,["done"]);r!=null&&a(e,["done"],r);const i=s(t,["error"]);i!=null&&a(e,["error"],i);const l=s(t,["response"]);return l!=null&&a(e,["response"],av(l)),e}function av(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["parent"]);o!=null&&a(e,["parent"],o);const r=s(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function yp(t){const e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);const o=s(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=s(t,["done"]);r!=null&&a(e,["done"],r);const i=s(t,["error"]);i!=null&&a(e,["error"],i);const l=s(t,["response"]);return l!=null&&a(e,["response"],uv(l)),e}function uv(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["parent"]);o!=null&&a(e,["parent"],o);const r=s(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function cv(t){const e={},n=s(t,["uri"]);n!=null&&a(e,["uri"],n);const o=s(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],ra(o));const r=s(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function dv(t){const e={},n=s(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=s(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],ra(o));const r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xu;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xu||(xu={}));var Iu;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Iu||(Iu={}));var Au;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Au||(Au={}));var Rt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Rt||(Rt={}));var Nu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Nu||(Nu={}));var Ru;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ru||(Ru={}));var Pu;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Pu||(Pu={}));var ku;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ku||(ku={}));var Mu;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Mu||(Mu={}));var Du;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Du||(Du={}));var Lu;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Lu||(Lu={}));var Uu;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Uu||(Uu={}));var Fu;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Fu||(Fu={}));var Vu;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Vu||(Vu={}));var Gu;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Gu||(Gu={}));var Hu;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Hu||(Hu={}));var Bu;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Bu||(Bu={}));var qu;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(qu||(qu={}));var bu;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(bu||(bu={}));var Qr;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Qr||(Qr={}));var $u;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})($u||($u={}));var zu;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(zu||(zu={}));var Ju;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ju||(Ju={}));var Xs;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xs||(Xs={}));var Ou;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ou||(Ou={}));var Wu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Wu||(Wu={}));var Ku;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Ku||(Ku={}));var Yu;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Yu||(Yu={}));var Qu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Qu||(Qu={}));var Xu;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Xu||(Xu={}));var Zu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Zu||(Zu={}));var ju;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(ju||(ju={}));var ec;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ec||(ec={}));var tc;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(tc||(tc={}));var nc;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nc||(nc={}));var oc;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(oc||(oc={}));var rc;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rc||(rc={}));var ic;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ic||(ic={}));var sc;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(sc||(sc={}));var lc;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(lc||(lc={}));var ac;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ac||(ac={}));var uc;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(uc||(uc={}));var cc;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(cc||(cc={}));var dc;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(dc||(dc={}));var fc;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(fc||(fc={}));var pc;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(pc||(pc={}));var mc;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(mc||(mc={}));var hc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(hc||(hc={}));var gc;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gc||(gc={}));var vc;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(vc||(vc={}));var yc;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yc||(yc={}));var Sc;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Sc||(Sc={}));var Ec;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ec||(Ec={}));var Tc;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Tc||(Tc={}));var Cc;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Cc||(Cc={}));var _n;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(_n||(_n={}));class Zs{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class to{get text(){var e,n,o,r,i,l,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const m=[];for(const p of(c=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[g,T]of Object.entries(p))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(T!==null||T!==void 0)&&m.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,o,r,i,l,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const m of(c=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[p,g]of Object.entries(m))p!=="inlineData"&&(g!==null||g!==void 0)&&f.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,o,r,i,l,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,o,r,i,l,u,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,o,r,i,l,u,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class _c{}class wc{}class fv{}class pv{}class mv{}class hv{}class xc{}class Ic{}class Ac{}class gv{}class Xr{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Xr;let r;const i=e;return n?r=ev(i):r=jg(i),Object.assign(o,r),o}}class Nc{}class Rc{}class Pc{}class kc{}class vv{}class yv{}class Sv{}class ia{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new ia,i=lv(e);return Object.assign(o,i),o}}class Ev{}class Tv{}class Cv{}class Mc{}class _v{get text(){var e,n,o;let r="",i=!1;const l=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&l.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,r+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,n,o;let r="";const i=[];for(const l of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,c]of Object.entries(l))u!=="inlineData"&&c!==null&&i.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class wv{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class sa{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new sa,i=yp(e);return Object.assign(o,i),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Sp(t,e){const n=z(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Ep(t){return Array.isArray(t)?t.map(e=>Zr(e)):[Zr(t)]}function Zr(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Tp(t){const e=Zr(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Cp(t){const e=Zr(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dc(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function _p(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Dc(e)):[Dc(t)]}function js(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Lc(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Uc(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ee(t){if(t==null)throw new Error("ContentUnion is required");return js(t)?t:{role:"user",parts:_p(t)}}function la(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=Ee(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=Ee(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ee(n)):[Ee(e)]}function $e(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Lc(t)||Uc(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ee(t)]}const e=[],n=[],o=js(t[0]);for(const r of t){const i=js(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(r);else{if(Lc(r)||Uc(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:_p(n)}),e}function xv(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Rt).includes(n[0].toUpperCase())?n[0].toUpperCase():Rt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Rt).includes(o.toUpperCase())?o.toUpperCase():Rt.TYPE_UNSPECIFIED})}}function kn(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&xv(t.type,e);for(const[l,u]of Object.entries(t))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Rt).includes(u.toUpperCase())?u.toUpperCase():Rt.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=kn(u);else if(o.includes(l)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(kn(d))}e[l]=c}else if(r.includes(l)){const c={};for(const[d,f]of Object.entries(u))c[d]=kn(f);e[l]=c}else{if(l==="additionalProperties")continue;e[l]=u}return e}function aa(t){return kn(t)}function ua(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ca(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function zn(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=kn(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=kn(e.response));return t}function Jn(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Iv(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Tt(t,e){if(typeof e!="string")throw new Error("name must be a string");return Iv(t,e,"cachedContents")}function wp(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function $t(t){return ra(t)}function Av(t){return t!=null&&typeof t=="object"&&"name"in t}function Nv(t){return t!=null&&typeof t=="object"&&"video"in t}function Rv(t){return t!=null&&typeof t=="object"&&"uri"in t}function xp(t){var e;let n;if(Av(t)&&(n=t.name),!(Rv(t)&&(n=t.uri,n===void 0))&&!(Nv(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Ip(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Ap(t){for(const e of["models","tunedModels","publisherModels"])if(Pv(t,e))return t[e];return[]}function Pv(t,e){return t!==null&&typeof t=="object"&&e in t}function kv(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Mv(t,e={}){const n=[],o=new Set;for(const r of t){const i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const l=kv(r,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Np(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Dv(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Rp(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let i=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const c=l.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function On(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Pp(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lv(t){const e={},n=s(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);const o=s(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>my(l))),a(e,["inlinedResponses"],i)}const r=s(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["inlinedEmbedContentResponses"],i)}return e}function Uv(t){const e={},n=s(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);const o=s(t,["gcsDestination","outputUriPrefix"]);o!=null&&a(e,["gcsUri"],o);const r=s(t,["bigqueryDestination","outputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function Fv(t){const e={},n=s(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);const o=s(t,["gcsUri"]);o!=null&&a(e,["gcsDestination","outputUriPrefix"],o);const r=s(t,["bigqueryUri"]);if(r!=null&&a(e,["bigqueryDestination","outputUri"],r),s(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(s(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function wr(t){const e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);const o=s(t,["metadata","displayName"]);o!=null&&a(e,["displayName"],o);const r=s(t,["metadata","state"]);r!=null&&a(e,["state"],Pp(r));const i=s(t,["metadata","createTime"]);i!=null&&a(e,["createTime"],i);const l=s(t,["metadata","endTime"]);l!=null&&a(e,["endTime"],l);const u=s(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const c=s(t,["metadata","model"]);c!=null&&a(e,["model"],c);const d=s(t,["metadata","output"]);return d!=null&&a(e,["dest"],Lv(Rp(d))),e}function el(t){const e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);const o=s(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=s(t,["state"]);r!=null&&a(e,["state"],Pp(r));const i=s(t,["error"]);i!=null&&a(e,["error"],i);const l=s(t,["createTime"]);l!=null&&a(e,["createTime"],l);const u=s(t,["startTime"]);u!=null&&a(e,["startTime"],u);const c=s(t,["endTime"]);c!=null&&a(e,["endTime"],c);const d=s(t,["updateTime"]);d!=null&&a(e,["updateTime"],d);const f=s(t,["model"]);f!=null&&a(e,["model"],f);const m=s(t,["inputConfig"]);m!=null&&a(e,["src"],Vv(m));const p=s(t,["outputConfig"]);p!=null&&a(e,["dest"],Uv(Rp(p)));const g=s(t,["completionStats"]);return g!=null&&a(e,["completionStats"],g),e}function Vv(t){const e={},n=s(t,["instancesFormat"]);n!=null&&a(e,["format"],n);const o=s(t,["gcsSource","uris"]);o!=null&&a(e,["gcsUri"],o);const r=s(t,["bigquerySource","inputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function Gv(t,e){const n={};if(s(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=s(e,["fileName"]);o!=null&&a(n,["fileName"],o);const r=s(e,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>py(t,l))),a(n,["requests","requests"],i)}return n}function Hv(t){const e={},n=s(t,["format"]);n!=null&&a(e,["instancesFormat"],n);const o=s(t,["gcsUri"]);o!=null&&a(e,["gcsSource","uris"],o);const r=s(t,["bigqueryUri"]);if(r!=null&&a(e,["bigquerySource","inputUri"],r),s(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Bv(t){const e={},n=s(t,["data"]);if(n!=null&&a(e,["data"],n),s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function qv(t,e){const n={},o=s(e,["name"]);return o!=null&&a(n,["_url","name"],On(t,o)),n}function bv(t,e){const n={},o=s(e,["name"]);return o!=null&&a(n,["_url","name"],On(t,o)),n}function $v(t){const e={},n=s(t,["content"]);n!=null&&a(e,["content"],n);const o=s(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],zv(o));const r=s(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=s(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const l=s(t,["avgLogprobs"]);l!=null&&a(e,["avgLogprobs"],l);const u=s(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=s(t,["index"]);c!=null&&a(e,["index"],c);const d=s(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=s(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),a(e,["safetyRatings"],p)}const m=s(t,["urlContextMetadata"]);return m!=null&&a(e,["urlContextMetadata"],m),e}function zv(t){const e={},n=s(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function kp(t){const e={},n=s(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Ty(i))),a(e,["parts"],r)}const o=s(t,["role"]);return o!=null&&a(e,["role"],o),e}function Jv(t,e){const n={},o=s(t,["displayName"]);if(e!==void 0&&o!=null&&a(e,["batch","displayName"],o),s(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Ov(t,e){const n={},o=s(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=s(t,["dest"]);return e!==void 0&&r!=null&&a(e,["outputConfig"],Fv(Dv(r))),n}function Fc(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["src"]);r!=null&&a(n,["batch","inputConfig"],Gv(t,Np(t,r)));const i=s(e,["config"]);return i!=null&&Jv(i,n),n}function Wv(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["model"],z(t,o));const r=s(e,["src"]);r!=null&&a(n,["inputConfig"],Hv(Np(t,r)));const i=s(e,["config"]);return i!=null&&Ov(i,n),n}function Kv(t,e){const n={},o=s(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["batch","displayName"],o),n}function Yv(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["src"]);r!=null&&a(n,["batch","inputConfig"],ny(t,r));const i=s(e,["config"]);return i!=null&&Kv(i,n),n}function Qv(t,e){const n={},o=s(e,["name"]);return o!=null&&a(n,["_url","name"],On(t,o)),n}function Xv(t,e){const n={},o=s(e,["name"]);return o!=null&&a(n,["_url","name"],On(t,o)),n}function Zv(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["name"]);o!=null&&a(e,["name"],o);const r=s(t,["done"]);r!=null&&a(e,["done"],r);const i=s(t,["error"]);return i!=null&&a(e,["error"],i),e}function jv(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["name"]);o!=null&&a(e,["name"],o);const r=s(t,["done"]);r!=null&&a(e,["done"],r);const i=s(t,["error"]);return i!=null&&a(e,["error"],i),e}function ey(t,e){const n={},o=s(e,["contents"]);if(o!=null){let i=la(t,o);Array.isArray(i)&&(i=i.map(l=>l)),a(n,["requests[]","request","content"],i)}const r=s(e,["config"]);return r!=null&&(a(n,["_self"],ty(r,n)),Xg(n,{"requests[].*":"requests[].request.*"})),n}function ty(t,e){const n={},o=s(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=s(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=s(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),s(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ny(t,e){const n={},o=s(e,["fileName"]);o!=null&&a(n,["file_name"],o);const r=s(e,["inlinedRequests"]);return r!=null&&a(n,["requests"],ey(t,r)),n}function oy(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function ry(t){const e={},n=s(t,["id"]);n!=null&&a(e,["id"],n);const o=s(t,["args"]);o!=null&&a(e,["args"],o);const r=s(t,["name"]);if(r!=null&&a(e,["name"],r),s(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iy(t){const e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);const o=s(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),s(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sy(t,e,n){const o={},r=s(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],kp(Ee(r)));const i=s(e,["temperature"]);i!=null&&a(o,["temperature"],i);const l=s(e,["topP"]);l!=null&&a(o,["topP"],l);const u=s(e,["topK"]);u!=null&&a(o,["topK"],u);const c=s(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=s(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=s(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const m=s(e,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const p=s(e,["logprobs"]);p!=null&&a(o,["logprobs"],p);const g=s(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const T=s(e,["frequencyPenalty"]);T!=null&&a(o,["frequencyPenalty"],T);const E=s(e,["seed"]);E!=null&&a(o,["seed"],E);const C=s(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const h=s(e,["responseSchema"]);h!=null&&a(o,["responseSchema"],aa(h));const y=s(e,["responseJsonSchema"]);if(y!=null&&a(o,["responseJsonSchema"],y),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=s(e,["safetySettings"]);if(n!==void 0&&S!=null){let b=S;Array.isArray(b)&&(b=b.map(q=>Cy(q))),a(n,["safetySettings"],b)}const _=s(e,["tools"]);if(n!==void 0&&_!=null){let b=Jn(_);Array.isArray(b)&&(b=b.map(q=>wy(zn(q)))),a(n,["tools"],b)}const w=s(e,["toolConfig"]);if(n!==void 0&&w!=null&&a(n,["toolConfig"],_y(w)),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=s(e,["cachedContent"]);n!==void 0&&x!=null&&a(n,["cachedContent"],Tt(t,x));const I=s(e,["responseModalities"]);I!=null&&a(o,["responseModalities"],I);const R=s(e,["mediaResolution"]);R!=null&&a(o,["mediaResolution"],R);const P=s(e,["speechConfig"]);if(P!=null&&a(o,["speechConfig"],ua(P)),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=s(e,["thinkingConfig"]);A!=null&&a(o,["thinkingConfig"],A);const F=s(e,["imageConfig"]);F!=null&&a(o,["imageConfig"],fy(F));const j=s(e,["enableEnhancedCivicAnswers"]);return j!=null&&a(o,["enableEnhancedCivicAnswers"],j),o}function ly(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>$v(d))),a(e,["candidates"],c)}const r=s(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=s(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const l=s(t,["responseId"]);l!=null&&a(e,["responseId"],l);const u=s(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function ay(t,e){const n={},o=s(e,["name"]);return o!=null&&a(n,["_url","name"],On(t,o)),n}function uy(t,e){const n={},o=s(e,["name"]);return o!=null&&a(n,["_url","name"],On(t,o)),n}function cy(t){const e={};if(s(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=s(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function dy(t){const e={};if(s(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function fy(t){const e={},n=s(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=s(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),s(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(s(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function py(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["request","model"],z(t,o));const r=s(e,["contents"]);if(r!=null){let u=$e(r);Array.isArray(u)&&(u=u.map(c=>kp(c))),a(n,["request","contents"],u)}const i=s(e,["metadata"]);i!=null&&a(n,["metadata"],i);const l=s(e,["config"]);return l!=null&&a(n,["request","generationConfig"],sy(t,l,s(n,["request"],{}))),n}function my(t){const e={},n=s(t,["response"]);n!=null&&a(e,["response"],ly(n));const o=s(t,["error"]);return o!=null&&a(e,["error"],o),e}function hy(t,e){const n={},o=s(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=s(t,["pageToken"]);if(e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),s(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function gy(t,e){const n={},o=s(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=s(t,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const i=s(t,["filter"]);return e!==void 0&&i!=null&&a(e,["_query","filter"],i),n}function vy(t){const e={},n=s(t,["config"]);return n!=null&&hy(n,e),e}function yy(t){const e={},n=s(t,["config"]);return n!=null&&gy(n,e),e}function Sy(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=s(t,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>wr(l))),a(e,["batchJobs"],i)}return e}function Ey(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=s(t,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>el(l))),a(e,["batchJobs"],i)}return e}function Ty(t){const e={},n=s(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=s(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=s(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=s(t,["fileData"]);i!=null&&a(e,["fileData"],oy(i));const l=s(t,["functionCall"]);l!=null&&a(e,["functionCall"],ry(l));const u=s(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=s(t,["inlineData"]);c!=null&&a(e,["inlineData"],Bv(c));const d=s(t,["text"]);d!=null&&a(e,["text"],d);const f=s(t,["thought"]);f!=null&&a(e,["thought"],f);const m=s(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const p=s(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function Cy(t){const e={},n=s(t,["category"]);if(n!=null&&a(e,["category"],n),s(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=s(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function _y(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],iy(n));const o=s(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function wy(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=s(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=s(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const l=s(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=s(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],cy(u));const c=s(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],dy(c));const d=s(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vt;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(vt||(vt={}));class an{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!o||Object.keys(o).length===0?l={config:{}}:typeof o=="object"?l=Object.assign({},o):l=o,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(i=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xy extends Et{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new an(vt.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Fc(this.apiClient,e),o=n._url,r=k("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const m=Object.assign({},f);if(m.systemInstruction){const p=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=p,m.request=g}d.push(m)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const i=this.getGcsUri(e),l=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(l)o.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Wv(this.apiClient,e);return u=k("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>el(f))}else{const d=Fc(this.apiClient,e);return u=k("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>wr(f))}}async createEmbeddingsInternal(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Yv(this.apiClient,e);return i=k("{model}:asyncBatchEmbedContent",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>wr(c))}}async get(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=uy(this.apiClient,e);return u=k("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>el(f))}else{const d=ay(this.apiClient,e);return u=k("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>wr(f))}}async cancel(e){var n,o,r,i;let l="",u={};if(this.apiClient.isVertexAI()){const c=bv(this.apiClient,e);l=k("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=qv(this.apiClient,e);l=k("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=yy(e);return u=k("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=Ey(f),p=new Mc;return Object.assign(p,m),p})}else{const d=vy(e);return u=k("batches",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=Sy(f),p=new Mc;return Object.assign(p,m),p})}}async delete(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Xv(this.apiClient,e);return u=k("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>jv(f))}else{const d=Qv(this.apiClient,e);return u=k("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>Zv(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iy(t){const e={},n=s(t,["data"]);if(n!=null&&a(e,["data"],n),s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Vc(t){const e={},n=s(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Yy(i))),a(e,["parts"],r)}const o=s(t,["role"]);return o!=null&&a(e,["role"],o),e}function Ay(t,e){const n={},o=s(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=s(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=s(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const l=s(t,["contents"]);if(e!==void 0&&l!=null){let f=$e(l);Array.isArray(f)&&(f=f.map(m=>Vc(m))),a(e,["contents"],f)}const u=s(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Vc(Ee(u)));const c=s(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>Xy(m))),a(e,["tools"],f)}const d=s(t,["toolConfig"]);if(e!==void 0&&d!=null&&a(e,["toolConfig"],Qy(d)),s(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Ny(t,e){const n={},o=s(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=s(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=s(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const l=s(t,["contents"]);if(e!==void 0&&l!=null){let m=$e(l);Array.isArray(m)&&(m=m.map(p=>p)),a(e,["contents"],m)}const u=s(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Ee(u));const c=s(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>Zy(p))),a(e,["tools"],m)}const d=s(t,["toolConfig"]);e!==void 0&&d!=null&&a(e,["toolConfig"],d);const f=s(t,["kmsKeyName"]);return e!==void 0&&f!=null&&a(e,["encryption_spec","kmsKeyName"],f),n}function Ry(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["model"],Sp(t,o));const r=s(e,["config"]);return r!=null&&Ay(r,n),n}function Py(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["model"],Sp(t,o));const r=s(e,["config"]);return r!=null&&Ny(r,n),n}function ky(t,e){const n={},o=s(e,["name"]);return o!=null&&a(n,["_url","name"],Tt(t,o)),n}function My(t,e){const n={},o=s(e,["name"]);return o!=null&&a(n,["_url","name"],Tt(t,o)),n}function Dy(t){const e={},n=s(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Ly(t){const e={},n=s(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Uy(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Fy(t){const e={},n=s(t,["id"]);n!=null&&a(e,["id"],n);const o=s(t,["args"]);o!=null&&a(e,["args"],o);const r=s(t,["name"]);if(r!=null&&a(e,["name"],r),s(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Vy(t){const e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);const o=s(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),s(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Gy(t){const e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(t,["description"]);n!=null&&a(e,["description"],n);const o=s(t,["name"]);o!=null&&a(e,["name"],o);const r=s(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=s(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const l=s(t,["response"]);l!=null&&a(e,["response"],l);const u=s(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function Hy(t,e){const n={},o=s(e,["name"]);return o!=null&&a(n,["_url","name"],Tt(t,o)),n}function By(t,e){const n={},o=s(e,["name"]);return o!=null&&a(n,["_url","name"],Tt(t,o)),n}function qy(t){const e={};if(s(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=s(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function by(t){const e={};if(s(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function $y(t,e){const n={},o=s(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=s(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function zy(t,e){const n={},o=s(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=s(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function Jy(t){const e={},n=s(t,["config"]);return n!=null&&$y(n,e),e}function Oy(t){const e={},n=s(t,["config"]);return n!=null&&zy(n,e),e}function Wy(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=s(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["cachedContents"],i)}return e}function Ky(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=s(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["cachedContents"],i)}return e}function Yy(t){const e={},n=s(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=s(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=s(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=s(t,["fileData"]);i!=null&&a(e,["fileData"],Uy(i));const l=s(t,["functionCall"]);l!=null&&a(e,["functionCall"],Fy(l));const u=s(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=s(t,["inlineData"]);c!=null&&a(e,["inlineData"],Iy(c));const d=s(t,["text"]);d!=null&&a(e,["text"],d);const f=s(t,["thought"]);f!=null&&a(e,["thought"],f);const m=s(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const p=s(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function Qy(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],Vy(n));const o=s(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function Xy(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=s(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=s(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const l=s(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=s(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],qy(u));const c=s(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],by(c));const d=s(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function Zy(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Gy(p))),a(e,["functionDeclarations"],m)}const o=s(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=s(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=s(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),s(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=s(t,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=s(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=s(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=s(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=s(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function jy(t,e){const n={},o=s(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=s(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function e0(t,e){const n={},o=s(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=s(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function t0(t,e){const n={},o=s(e,["name"]);o!=null&&a(n,["_url","name"],Tt(t,o));const r=s(e,["config"]);return r!=null&&jy(r,n),n}function n0(t,e){const n={},o=s(e,["name"]);o!=null&&a(n,["_url","name"],Tt(t,o));const r=s(e,["config"]);return r!=null&&e0(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o0 extends Et{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new an(vt.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Py(this.apiClient,e);return u=k("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const d=Ry(this.apiClient,e);return u=k("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async get(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=By(this.apiClient,e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const d=Hy(this.apiClient,e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async delete(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=My(this.apiClient,e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=Ly(f),p=new Pc;return Object.assign(p,m),p})}else{const d=ky(this.apiClient,e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=Dy(f),p=new Pc;return Object.assign(p,m),p})}}async update(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=n0(this.apiClient,e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const d=t0(this.apiClient,e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async listInternal(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Oy(e);return u=k("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=Ky(f),p=new kc;return Object.assign(p,m),p})}else{const d=Jy(e);return u=k("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=Wy(f),p=new kc;return Object.assign(p,m),p})}}}function jr(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function Gc(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function L(t){return this instanceof L?(this.v=t,this):new L(t)}function je(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(g){return function(T){return Promise.resolve(T).then(g,m)}}function u(g,T){o[g]&&(r[g]=function(E){return new Promise(function(C,h){i.push([g,E,C,h])>1||c(g,E)})},T&&(r[g]=T(r[g])))}function c(g,T){try{d(o[g](T))}catch(E){p(i[0][3],E)}}function d(g){g.value instanceof L?Promise.resolve(g.value.v).then(f,m):p(i[0][2],g)}function f(g){c("next",g)}function m(g){c("throw",g)}function p(g,T){g(T),i.shift(),i.length&&c(i[0][0],i[0][1])}}function et(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Gc=="function"?Gc(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=t[i]&&function(l){return new Promise(function(u,c){l=t[i](l),r(u,c,l.done,l.value)})}}function r(i,l,u,c){Promise.resolve(c).then(function(d){i({value:d,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r0(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Mp(n)}function Mp(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function i0(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Hc(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let i=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),i&&!Mp(t[o])&&(i=!1),o++;i?e.push(...r):e.pop()}return e}class s0{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new l0(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class l0{constructor(e,n,o,r={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),i0(i)}async sendMessage(e){var n;await this.sendPromise;const o=Ee(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,l,u;const c=await r,d=(l=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content,f=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];f!=null&&(p=(u=f.slice(m))!==null&&u!==void 0?u:[]);const g=d?[d]:[];this.recordHistory(o,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=Ee(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,o)}getHistory(e=!1){const n=e?Hc(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return je(this,arguments,function*(){var r,i,l,u,c,d;const f=[];try{for(var m=!0,p=et(e),g;g=yield L(p.next()),r=g.done,!r;m=!0){u=g.value,m=!1;const T=u;if(r0(T)){const E=(d=(c=T.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;E!==void 0&&f.push(E)}yield yield L(T)}}catch(T){i={error:T}}finally{try{!m&&!r&&(l=p.return)&&(yield L(l.call(p)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Hc(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Si extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Si.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a0(t){const e={},n=s(t,["file"]);return n!=null&&a(e,["file"],n),e}function u0(t){const e={},n=s(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function c0(t){const e={},n=s(t,["name"]);return n!=null&&a(e,["_url","file"],xp(n)),e}function d0(t){const e={},n=s(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function f0(t){const e={},n=s(t,["name"]);return n!=null&&a(e,["_url","file"],xp(n)),e}function p0(t,e){const n={},o=s(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=s(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function m0(t){const e={},n=s(t,["config"]);return n!=null&&p0(n,e),e}function h0(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=s(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g0 extends Et{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new an(vt.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=m0(e);return i=k("files",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=h0(c),f=new Ev;return Object.assign(f,d),f})}}async createInternal(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=a0(e);return i=k("upload/v1beta/files",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=u0(c),f=new Tv;return Object.assign(f,d),f})}}async get(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=f0(e);return i=k("files/{file}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=c0(e);return i=k("files/{file}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=d0(c),f=new Cv;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xr(t){const e={},n=s(t,["data"]);if(n!=null&&a(e,["data"],n),s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function v0(t){const e={},n=s(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>D0(i))),a(e,["parts"],r)}const o=s(t,["role"]);return o!=null&&a(e,["role"],o),e}function y0(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function S0(t){const e={},n=s(t,["id"]);n!=null&&a(e,["id"],n);const o=s(t,["args"]);o!=null&&a(e,["args"],o);const r=s(t,["name"]);if(r!=null&&a(e,["name"],r),s(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function E0(t){const e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(t,["description"]);n!=null&&a(e,["description"],n);const o=s(t,["name"]);o!=null&&a(e,["name"],o);const r=s(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=s(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const l=s(t,["response"]);l!=null&&a(e,["response"],l);const u=s(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function T0(t){const e={},n=s(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=s(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const r=s(t,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const i=s(t,["candidateCount"]);i!=null&&a(e,["candidateCount"],i);const l=s(t,["enableAffectiveDialog"]);l!=null&&a(e,["enableAffectiveDialog"],l);const u=s(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=s(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=s(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=s(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const m=s(t,["presencePenalty"]);m!=null&&a(e,["presencePenalty"],m);const p=s(t,["responseLogprobs"]);p!=null&&a(e,["responseLogprobs"],p);const g=s(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const T=s(t,["responseModalities"]);T!=null&&a(e,["responseModalities"],T);const E=s(t,["responseSchema"]);E!=null&&a(e,["responseSchema"],E);const C=s(t,["routingConfig"]);C!=null&&a(e,["routingConfig"],C);const h=s(t,["seed"]);h!=null&&a(e,["seed"],h);const y=s(t,["speechConfig"]);y!=null&&a(e,["speechConfig"],Dp(y));const S=s(t,["stopSequences"]);S!=null&&a(e,["stopSequences"],S);const _=s(t,["temperature"]);_!=null&&a(e,["temperature"],_);const w=s(t,["thinkingConfig"]);w!=null&&a(e,["thinkingConfig"],w);const x=s(t,["topK"]);x!=null&&a(e,["topK"],x);const I=s(t,["topP"]);if(I!=null&&a(e,["topP"],I),s(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function C0(t){const e={};if(s(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=s(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function _0(t){const e={};if(s(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function w0(t,e){const n={},o=s(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=s(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=s(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const l=s(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=s(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=s(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=s(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=s(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const m=s(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],ca(m));const p=s(t,["thinkingConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","thinkingConfig"],p);const g=s(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const T=s(t,["systemInstruction"]);e!==void 0&&T!=null&&a(e,["setup","systemInstruction"],v0(Ee(T)));const E=s(t,["tools"]);if(e!==void 0&&E!=null){let x=Jn(E);Array.isArray(x)&&(x=x.map(I=>U0(zn(I)))),a(e,["setup","tools"],x)}const C=s(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],L0(C));const h=s(t,["inputAudioTranscription"]);e!==void 0&&h!=null&&a(e,["setup","inputAudioTranscription"],h);const y=s(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","outputAudioTranscription"],y);const S=s(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&a(e,["setup","realtimeInputConfig"],S);const _=s(t,["contextWindowCompression"]);e!==void 0&&_!=null&&a(e,["setup","contextWindowCompression"],_);const w=s(t,["proactivity"]);if(e!==void 0&&w!=null&&a(e,["setup","proactivity"],w),s(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function x0(t,e){const n={},o=s(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],T0(o));const r=s(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=s(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const l=s(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=s(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=s(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=s(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=s(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const m=s(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],Dp(ca(m)));const p=s(t,["thinkingConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","thinkingConfig"],p);const g=s(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const T=s(t,["systemInstruction"]);e!==void 0&&T!=null&&a(e,["setup","systemInstruction"],Ee(T));const E=s(t,["tools"]);if(e!==void 0&&E!=null){let I=Jn(E);Array.isArray(I)&&(I=I.map(R=>F0(zn(R)))),a(e,["setup","tools"],I)}const C=s(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],C);const h=s(t,["inputAudioTranscription"]);e!==void 0&&h!=null&&a(e,["setup","inputAudioTranscription"],h);const y=s(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","outputAudioTranscription"],y);const S=s(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&a(e,["setup","realtimeInputConfig"],S);const _=s(t,["contextWindowCompression"]);e!==void 0&&_!=null&&a(e,["setup","contextWindowCompression"],_);const w=s(t,["proactivity"]);e!==void 0&&w!=null&&a(e,["setup","proactivity"],w);const x=s(t,["explicitVadSignal"]);return e!==void 0&&x!=null&&a(e,["setup","explicitVadSignal"],x),n}function I0(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["setup","model"],z(t,o));const r=s(e,["config"]);return r!=null&&a(n,["config"],w0(r,n)),n}function A0(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["setup","model"],z(t,o));const r=s(e,["config"]);return r!=null&&a(n,["config"],x0(r,n)),n}function N0(t){const e={},n=s(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],n),e}function R0(t){const e={},n=s(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["weightedPrompts"],o)}return e}function P0(t){const e={},n=s(t,["media"]);if(n!=null){let d=Ep(n);Array.isArray(d)&&(d=d.map(f=>xr(f))),a(e,["mediaChunks"],d)}const o=s(t,["audio"]);o!=null&&a(e,["audio"],xr(Cp(o)));const r=s(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=s(t,["video"]);i!=null&&a(e,["video"],xr(Tp(i)));const l=s(t,["text"]);l!=null&&a(e,["text"],l);const u=s(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=s(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function k0(t){const e={},n=s(t,["media"]);if(n!=null){let d=Ep(n);Array.isArray(d)&&(d=d.map(f=>f)),a(e,["mediaChunks"],d)}const o=s(t,["audio"]);o!=null&&a(e,["audio"],Cp(o));const r=s(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=s(t,["video"]);i!=null&&a(e,["video"],Tp(i));const l=s(t,["text"]);l!=null&&a(e,["text"],l);const u=s(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=s(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function M0(t){const e={},n=s(t,["setupComplete"]);n!=null&&a(e,["setupComplete"],n);const o=s(t,["serverContent"]);o!=null&&a(e,["serverContent"],o);const r=s(t,["toolCall"]);r!=null&&a(e,["toolCall"],r);const i=s(t,["toolCallCancellation"]);i!=null&&a(e,["toolCallCancellation"],i);const l=s(t,["usageMetadata"]);l!=null&&a(e,["usageMetadata"],V0(l));const u=s(t,["goAway"]);u!=null&&a(e,["goAway"],u);const c=s(t,["sessionResumptionUpdate"]);c!=null&&a(e,["sessionResumptionUpdate"],c);const d=s(t,["voiceActivityDetectionSignal"]);return d!=null&&a(e,["voiceActivityDetectionSignal"],d),e}function D0(t){const e={},n=s(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=s(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=s(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=s(t,["fileData"]);i!=null&&a(e,["fileData"],y0(i));const l=s(t,["functionCall"]);l!=null&&a(e,["functionCall"],S0(l));const u=s(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=s(t,["inlineData"]);c!=null&&a(e,["inlineData"],xr(c));const d=s(t,["text"]);d!=null&&a(e,["text"],d);const f=s(t,["thought"]);f!=null&&a(e,["thought"],f);const m=s(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const p=s(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function L0(t){const e={},n=s(t,["handle"]);if(n!=null&&a(e,["handle"],n),s(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Dp(t){const e={},n=s(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],n);const o=s(t,["languageCode"]);if(o!=null&&a(e,["languageCode"],o),s(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function U0(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=s(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=s(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const l=s(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=s(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],C0(u));const c=s(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],_0(c));const d=s(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function F0(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>E0(p))),a(e,["functionDeclarations"],m)}const o=s(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=s(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=s(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),s(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=s(t,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=s(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=s(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=s(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=s(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function V0(t){const e={},n=s(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const o=s(t,["cachedContentTokenCount"]);o!=null&&a(e,["cachedContentTokenCount"],o);const r=s(t,["candidatesTokenCount"]);r!=null&&a(e,["responseTokenCount"],r);const i=s(t,["toolUsePromptTokenCount"]);i!=null&&a(e,["toolUsePromptTokenCount"],i);const l=s(t,["thoughtsTokenCount"]);l!=null&&a(e,["thoughtsTokenCount"],l);const u=s(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const c=s(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(T=>T)),a(e,["promptTokensDetails"],g)}const d=s(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(T=>T)),a(e,["cacheTokensDetails"],g)}const f=s(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(T=>T)),a(e,["responseTokensDetails"],g)}const m=s(t,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(T=>T)),a(e,["toolUsePromptTokensDetails"],g)}const p=s(t,["trafficType"]);return p!=null&&a(e,["trafficType"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G0(t){const e={},n=s(t,["data"]);if(n!=null&&a(e,["data"],n),s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function H0(t){const e={},n=s(t,["content"]);n!=null&&a(e,["content"],n);const o=s(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],B0(o));const r=s(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=s(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const l=s(t,["avgLogprobs"]);l!=null&&a(e,["avgLogprobs"],l);const u=s(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=s(t,["index"]);c!=null&&a(e,["index"],c);const d=s(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=s(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),a(e,["safetyRatings"],p)}const m=s(t,["urlContextMetadata"]);return m!=null&&a(e,["urlContextMetadata"],m),e}function B0(t){const e={},n=s(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function q0(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["contents"]);if(r!=null){let i=$e(r);Array.isArray(i)&&(i=i.map(l=>l)),a(n,["contents"],i)}return n}function b0(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["tokensInfo"],r)}return e}function $0(t){const e={},n=s(t,["values"]);n!=null&&a(e,["values"],n);const o=s(t,["statistics"]);return o!=null&&a(e,["statistics"],z0(o)),e}function z0(t){const e={},n=s(t,["truncated"]);n!=null&&a(e,["truncated"],n);const o=s(t,["token_count"]);return o!=null&&a(e,["tokenCount"],o),e}function Ei(t){const e={},n=s(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>jS(i))),a(e,["parts"],r)}const o=s(t,["role"]);return o!=null&&a(e,["role"],o),e}function J0(t){const e={},n=s(t,["controlType"]);n!=null&&a(e,["controlType"],n);const o=s(t,["enableControlImageComputation"]);return o!=null&&a(e,["computeControl"],o),e}function O0(t){const e={};if(s(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function W0(t,e){const n={},o=s(t,["systemInstruction"]);e!==void 0&&o!=null&&a(e,["systemInstruction"],Ee(o));const r=s(t,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Gp(u))),a(e,["tools"],l)}const i=s(t,["generationConfig"]);return e!==void 0&&i!=null&&a(e,["generationConfig"],GS(i)),n}function K0(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["contents"]);if(r!=null){let l=$e(r);Array.isArray(l)&&(l=l.map(u=>Ei(u))),a(n,["contents"],l)}const i=s(e,["config"]);return i!=null&&O0(i),n}function Y0(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["contents"]);if(r!=null){let l=$e(r);Array.isArray(l)&&(l=l.map(u=>u)),a(n,["contents"],l)}const i=s(e,["config"]);return i!=null&&W0(i,n),n}function Q0(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["totalTokens"]);o!=null&&a(e,["totalTokens"],o);const r=s(t,["cachedContentTokenCount"]);return r!=null&&a(e,["cachedContentTokenCount"],r),e}function X0(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["totalTokens"]);return o!=null&&a(e,["totalTokens"],o),e}function Z0(t,e){const n={},o=s(e,["model"]);return o!=null&&a(n,["_url","name"],z(t,o)),n}function j0(t,e){const n={},o=s(e,["model"]);return o!=null&&a(n,["_url","name"],z(t,o)),n}function eS(t){const e={},n=s(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function tS(t){const e={},n=s(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function nS(t,e){const n={},o=s(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=s(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=s(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const l=s(t,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);const u=s(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=s(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=s(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=s(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const m=s(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&a(e,["parameters","includeSafetyAttributes"],m);const p=s(t,["includeRaiReason"]);e!==void 0&&p!=null&&a(e,["parameters","includeRaiReason"],p);const g=s(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const T=s(t,["outputMimeType"]);e!==void 0&&T!=null&&a(e,["parameters","outputOptions","mimeType"],T);const E=s(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&a(e,["parameters","outputOptions","compressionQuality"],E);const C=s(t,["addWatermark"]);e!==void 0&&C!=null&&a(e,["parameters","addWatermark"],C);const h=s(t,["labels"]);e!==void 0&&h!=null&&a(e,["labels"],h);const y=s(t,["editMode"]);e!==void 0&&y!=null&&a(e,["parameters","editMode"],y);const S=s(t,["baseSteps"]);return e!==void 0&&S!=null&&a(e,["parameters","editConfig","baseSteps"],S),n}function oS(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=s(e,["referenceImages"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>iE(c))),a(n,["instances[0]","referenceImages"],u)}const l=s(e,["config"]);return l!=null&&nS(l,n),n}function rS(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>Ti(i))),a(e,["generatedImages"],r)}return e}function iS(t,e){const n={},o=s(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=s(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=s(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),s(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function sS(t,e){const n={},o=s(t,["taskType"]);e!==void 0&&o!=null&&a(e,["instances[]","task_type"],o);const r=s(t,["title"]);e!==void 0&&r!=null&&a(e,["instances[]","title"],r);const i=s(t,["outputDimensionality"]);e!==void 0&&i!=null&&a(e,["parameters","outputDimensionality"],i);const l=s(t,["mimeType"]);e!==void 0&&l!=null&&a(e,["instances[]","mimeType"],l);const u=s(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function lS(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["contents"]);if(r!=null){let u=la(t,r);Array.isArray(u)&&(u=u.map(c=>c)),a(n,["requests[]","content"],u)}const i=s(e,["config"]);i!=null&&iS(i,n);const l=s(e,["model"]);return l!==void 0&&a(n,["requests[]","model"],z(t,l)),n}function aS(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["contents"]);if(r!=null){let l=la(t,r);Array.isArray(l)&&(l=l.map(u=>u)),a(n,["instances[]","content"],l)}const i=s(e,["config"]);return i!=null&&sS(i,n),n}function uS(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["embeddings"],i)}const r=s(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function cS(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["predictions[]","embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>$0(l))),a(e,["embeddings"],i)}const r=s(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function dS(t){const e={},n=s(t,["endpoint"]);n!=null&&a(e,["name"],n);const o=s(t,["deployedModelId"]);return o!=null&&a(e,["deployedModelId"],o),e}function fS(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function pS(t){const e={},n=s(t,["id"]);n!=null&&a(e,["id"],n);const o=s(t,["args"]);o!=null&&a(e,["args"],o);const r=s(t,["name"]);if(r!=null&&a(e,["name"],r),s(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mS(t){const e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);const o=s(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),s(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hS(t){const e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(t,["description"]);n!=null&&a(e,["description"],n);const o=s(t,["name"]);o!=null&&a(e,["name"],o);const r=s(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=s(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const l=s(t,["response"]);l!=null&&a(e,["response"],l);const u=s(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function gS(t,e,n){const o={},r=s(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Ei(Ee(r)));const i=s(e,["temperature"]);i!=null&&a(o,["temperature"],i);const l=s(e,["topP"]);l!=null&&a(o,["topP"],l);const u=s(e,["topK"]);u!=null&&a(o,["topK"],u);const c=s(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=s(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=s(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const m=s(e,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const p=s(e,["logprobs"]);p!=null&&a(o,["logprobs"],p);const g=s(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const T=s(e,["frequencyPenalty"]);T!=null&&a(o,["frequencyPenalty"],T);const E=s(e,["seed"]);E!=null&&a(o,["seed"],E);const C=s(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const h=s(e,["responseSchema"]);h!=null&&a(o,["responseSchema"],aa(h));const y=s(e,["responseJsonSchema"]);if(y!=null&&a(o,["responseJsonSchema"],y),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=s(e,["safetySettings"]);if(n!==void 0&&S!=null){let b=S;Array.isArray(b)&&(b=b.map(q=>sE(q))),a(n,["safetySettings"],b)}const _=s(e,["tools"]);if(n!==void 0&&_!=null){let b=Jn(_);Array.isArray(b)&&(b=b.map(q=>pE(zn(q)))),a(n,["tools"],b)}const w=s(e,["toolConfig"]);if(n!==void 0&&w!=null&&a(n,["toolConfig"],fE(w)),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=s(e,["cachedContent"]);n!==void 0&&x!=null&&a(n,["cachedContent"],Tt(t,x));const I=s(e,["responseModalities"]);I!=null&&a(o,["responseModalities"],I);const R=s(e,["mediaResolution"]);R!=null&&a(o,["mediaResolution"],R);const P=s(e,["speechConfig"]);if(P!=null&&a(o,["speechConfig"],ua(P)),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=s(e,["thinkingConfig"]);A!=null&&a(o,["thinkingConfig"],A);const F=s(e,["imageConfig"]);F!=null&&a(o,["imageConfig"],$S(F));const j=s(e,["enableEnhancedCivicAnswers"]);return j!=null&&a(o,["enableEnhancedCivicAnswers"],j),o}function vS(t,e,n){const o={},r=s(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Ee(r));const i=s(e,["temperature"]);i!=null&&a(o,["temperature"],i);const l=s(e,["topP"]);l!=null&&a(o,["topP"],l);const u=s(e,["topK"]);u!=null&&a(o,["topK"],u);const c=s(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=s(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=s(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const m=s(e,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const p=s(e,["logprobs"]);p!=null&&a(o,["logprobs"],p);const g=s(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const T=s(e,["frequencyPenalty"]);T!=null&&a(o,["frequencyPenalty"],T);const E=s(e,["seed"]);E!=null&&a(o,["seed"],E);const C=s(e,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const h=s(e,["responseSchema"]);h!=null&&a(o,["responseSchema"],aa(h));const y=s(e,["responseJsonSchema"]);y!=null&&a(o,["responseJsonSchema"],y);const S=s(e,["routingConfig"]);S!=null&&a(o,["routingConfig"],S);const _=s(e,["modelSelectionConfig"]);_!=null&&a(o,["modelConfig"],_);const w=s(e,["safetySettings"]);if(n!==void 0&&w!=null){let V=w;Array.isArray(V)&&(V=V.map(ge=>ge)),a(n,["safetySettings"],V)}const x=s(e,["tools"]);if(n!==void 0&&x!=null){let V=Jn(x);Array.isArray(V)&&(V=V.map(ge=>Gp(zn(ge)))),a(n,["tools"],V)}const I=s(e,["toolConfig"]);n!==void 0&&I!=null&&a(n,["toolConfig"],I);const R=s(e,["labels"]);n!==void 0&&R!=null&&a(n,["labels"],R);const P=s(e,["cachedContent"]);n!==void 0&&P!=null&&a(n,["cachedContent"],Tt(t,P));const A=s(e,["responseModalities"]);A!=null&&a(o,["responseModalities"],A);const F=s(e,["mediaResolution"]);F!=null&&a(o,["mediaResolution"],F);const j=s(e,["speechConfig"]);j!=null&&a(o,["speechConfig"],Vp(ua(j)));const b=s(e,["audioTimestamp"]);b!=null&&a(o,["audioTimestamp"],b);const q=s(e,["thinkingConfig"]);q!=null&&a(o,["thinkingConfig"],q);const ne=s(e,["imageConfig"]);if(ne!=null&&a(o,["imageConfig"],zS(ne)),s(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function Bc(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["contents"]);if(r!=null){let l=$e(r);Array.isArray(l)&&(l=l.map(u=>Ei(u))),a(n,["contents"],l)}const i=s(e,["config"]);return i!=null&&a(n,["generationConfig"],gS(t,i,n)),n}function qc(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["contents"]);if(r!=null){let l=$e(r);Array.isArray(l)&&(l=l.map(u=>u)),a(n,["contents"],l)}const i=s(e,["config"]);return i!=null&&a(n,["generationConfig"],vS(t,i,n)),n}function bc(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>H0(d))),a(e,["candidates"],c)}const r=s(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=s(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const l=s(t,["responseId"]);l!=null&&a(e,["responseId"],l);const u=s(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function $c(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["candidates"],d)}const r=s(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=s(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const l=s(t,["promptFeedback"]);l!=null&&a(e,["promptFeedback"],l);const u=s(t,["responseId"]);u!=null&&a(e,["responseId"],u);const c=s(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function yS(t,e){const n={};if(s(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=s(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=s(t,["aspectRatio"]);e!==void 0&&r!=null&&a(e,["parameters","aspectRatio"],r);const i=s(t,["guidanceScale"]);if(e!==void 0&&i!=null&&a(e,["parameters","guidanceScale"],i),s(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=s(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&a(e,["parameters","safetySetting"],l);const u=s(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const c=s(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&a(e,["parameters","includeSafetyAttributes"],c);const d=s(t,["includeRaiReason"]);e!==void 0&&d!=null&&a(e,["parameters","includeRaiReason"],d);const f=s(t,["language"]);e!==void 0&&f!=null&&a(e,["parameters","language"],f);const m=s(t,["outputMimeType"]);e!==void 0&&m!=null&&a(e,["parameters","outputOptions","mimeType"],m);const p=s(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&a(e,["parameters","outputOptions","compressionQuality"],p),s(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(s(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=s(t,["imageSize"]);if(e!==void 0&&g!=null&&a(e,["parameters","sampleImageSize"],g),s(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function SS(t,e){const n={},o=s(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=s(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=s(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const l=s(t,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);const u=s(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=s(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=s(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=s(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const m=s(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&a(e,["parameters","includeSafetyAttributes"],m);const p=s(t,["includeRaiReason"]);e!==void 0&&p!=null&&a(e,["parameters","includeRaiReason"],p);const g=s(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const T=s(t,["outputMimeType"]);e!==void 0&&T!=null&&a(e,["parameters","outputOptions","mimeType"],T);const E=s(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&a(e,["parameters","outputOptions","compressionQuality"],E);const C=s(t,["addWatermark"]);e!==void 0&&C!=null&&a(e,["parameters","addWatermark"],C);const h=s(t,["labels"]);e!==void 0&&h!=null&&a(e,["labels"],h);const y=s(t,["imageSize"]);e!==void 0&&y!=null&&a(e,["parameters","sampleImageSize"],y);const S=s(t,["enhancePrompt"]);return e!==void 0&&S!=null&&a(e,["parameters","enhancePrompt"],S),n}function ES(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=s(e,["config"]);return i!=null&&yS(i,n),n}function TS(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=s(e,["config"]);return i!=null&&SS(i,n),n}function CS(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>LS(l))),a(e,["generatedImages"],i)}const r=s(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],Up(r)),e}function _S(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>Ti(l))),a(e,["generatedImages"],i)}const r=s(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],Fp(r)),e}function wS(t,e){const n={},o=s(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o),s(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=s(t,["durationSeconds"]);if(e!==void 0&&r!=null&&a(e,["parameters","durationSeconds"],r),s(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=s(t,["aspectRatio"]);e!==void 0&&i!=null&&a(e,["parameters","aspectRatio"],i);const l=s(t,["resolution"]);e!==void 0&&l!=null&&a(e,["parameters","resolution"],l);const u=s(t,["personGeneration"]);if(e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u),s(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=s(t,["negativePrompt"]);e!==void 0&&c!=null&&a(e,["parameters","negativePrompt"],c);const d=s(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&a(e,["parameters","enhancePrompt"],d),s(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=s(t,["lastFrame"]);e!==void 0&&f!=null&&a(e,["instances[0]","lastFrame"],Ci(f));const m=s(t,["referenceImages"]);if(e!==void 0&&m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>IE(g))),a(e,["instances[0]","referenceImages"],p)}if(s(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(s(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function xS(t,e){const n={},o=s(t,["numberOfVideos"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=s(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=s(t,["fps"]);e!==void 0&&i!=null&&a(e,["parameters","fps"],i);const l=s(t,["durationSeconds"]);e!==void 0&&l!=null&&a(e,["parameters","durationSeconds"],l);const u=s(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const c=s(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);const d=s(t,["resolution"]);e!==void 0&&d!=null&&a(e,["parameters","resolution"],d);const f=s(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const m=s(t,["pubsubTopic"]);e!==void 0&&m!=null&&a(e,["parameters","pubsubTopic"],m);const p=s(t,["negativePrompt"]);e!==void 0&&p!=null&&a(e,["parameters","negativePrompt"],p);const g=s(t,["enhancePrompt"]);e!==void 0&&g!=null&&a(e,["parameters","enhancePrompt"],g);const T=s(t,["generateAudio"]);e!==void 0&&T!=null&&a(e,["parameters","generateAudio"],T);const E=s(t,["lastFrame"]);e!==void 0&&E!=null&&a(e,["instances[0]","lastFrame"],nt(E));const C=s(t,["referenceImages"]);if(e!==void 0&&C!=null){let S=C;Array.isArray(S)&&(S=S.map(_=>AE(_))),a(e,["instances[0]","referenceImages"],S)}const h=s(t,["mask"]);e!==void 0&&h!=null&&a(e,["instances[0]","mask"],xE(h));const y=s(t,["compressionQuality"]);return e!==void 0&&y!=null&&a(e,["parameters","compressionQuality"],y),n}function IS(t){const e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);const o=s(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=s(t,["done"]);r!=null&&a(e,["done"],r);const i=s(t,["error"]);i!=null&&a(e,["error"],i);const l=s(t,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],PS(l)),e}function AS(t){const e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);const o=s(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=s(t,["done"]);r!=null&&a(e,["done"],r);const i=s(t,["error"]);i!=null&&a(e,["error"],i);const l=s(t,["response"]);return l!=null&&a(e,["response"],kS(l)),e}function NS(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=s(e,["image"]);i!=null&&a(n,["instances[0]","image"],Ci(i));const l=s(e,["video"]);l!=null&&a(n,["instances[0]","video"],Hp(l));const u=s(e,["source"]);u!=null&&MS(u,n);const c=s(e,["config"]);return c!=null&&wS(c,n),n}function RS(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=s(e,["image"]);i!=null&&a(n,["instances[0]","image"],nt(i));const l=s(e,["video"]);l!=null&&a(n,["instances[0]","video"],Bp(l));const u=s(e,["source"]);u!=null&&DS(u,n);const c=s(e,["config"]);return c!=null&&xS(c,n),n}function PS(t){const e={},n=s(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>FS(l))),a(e,["generatedVideos"],i)}const o=s(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=s(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function kS(t){const e={},n=s(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>VS(l))),a(e,["generatedVideos"],i)}const o=s(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=s(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function MS(t,e){const n={},o=s(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=s(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],Ci(r));const i=s(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],Hp(i)),n}function DS(t,e){const n={},o=s(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=s(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],nt(r));const i=s(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],Bp(i)),n}function LS(t){const e={},n=s(t,["_self"]);n!=null&&a(e,["image"],JS(n));const o=s(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=s(t,["_self"]);return r!=null&&a(e,["safetyAttributes"],Up(r)),e}function Ti(t){const e={},n=s(t,["_self"]);n!=null&&a(e,["image"],Lp(n));const o=s(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=s(t,["_self"]);r!=null&&a(e,["safetyAttributes"],Fp(r));const i=s(t,["prompt"]);return i!=null&&a(e,["enhancedPrompt"],i),e}function US(t){const e={},n=s(t,["_self"]);n!=null&&a(e,["mask"],Lp(n));const o=s(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["labels"],r)}return e}function FS(t){const e={},n=s(t,["video"]);return n!=null&&a(e,["video"],_E(n)),e}function VS(t){const e={},n=s(t,["_self"]);return n!=null&&a(e,["video"],wE(n)),e}function GS(t){const e={},n=s(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=s(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const r=s(t,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const i=s(t,["candidateCount"]);i!=null&&a(e,["candidateCount"],i);const l=s(t,["enableAffectiveDialog"]);l!=null&&a(e,["enableAffectiveDialog"],l);const u=s(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=s(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=s(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=s(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const m=s(t,["presencePenalty"]);m!=null&&a(e,["presencePenalty"],m);const p=s(t,["responseLogprobs"]);p!=null&&a(e,["responseLogprobs"],p);const g=s(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const T=s(t,["responseModalities"]);T!=null&&a(e,["responseModalities"],T);const E=s(t,["responseSchema"]);E!=null&&a(e,["responseSchema"],E);const C=s(t,["routingConfig"]);C!=null&&a(e,["routingConfig"],C);const h=s(t,["seed"]);h!=null&&a(e,["seed"],h);const y=s(t,["speechConfig"]);y!=null&&a(e,["speechConfig"],Vp(y));const S=s(t,["stopSequences"]);S!=null&&a(e,["stopSequences"],S);const _=s(t,["temperature"]);_!=null&&a(e,["temperature"],_);const w=s(t,["thinkingConfig"]);w!=null&&a(e,["thinkingConfig"],w);const x=s(t,["topK"]);x!=null&&a(e,["topK"],x);const I=s(t,["topP"]);if(I!=null&&a(e,["topP"],I),s(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function HS(t,e){const n={},o=s(e,["model"]);return o!=null&&a(n,["_url","name"],z(t,o)),n}function BS(t,e){const n={},o=s(e,["model"]);return o!=null&&a(n,["_url","name"],z(t,o)),n}function qS(t){const e={};if(s(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=s(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function bS(t){const e={};if(s(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function $S(t){const e={},n=s(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=s(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),s(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(s(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function zS(t){const e={},n=s(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=s(t,["imageSize"]);o!=null&&a(e,["imageSize"],o);const r=s(t,["outputMimeType"]);r!=null&&a(e,["imageOutputOptions","mimeType"],r);const i=s(t,["outputCompressionQuality"]);return i!=null&&a(e,["imageOutputOptions","compressionQuality"],i),e}function JS(t){const e={},n=s(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],$t(n));const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Lp(t){const e={},n=s(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=s(t,["bytesBase64Encoded"]);o!=null&&a(e,["imageBytes"],$t(o));const r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function Ci(t){const e={};if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=s(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],$t(n));const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function nt(t){const e={},n=s(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=s(t,["imageBytes"]);o!=null&&a(e,["bytesBase64Encoded"],$t(o));const r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function OS(t,e,n){const o={},r=s(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=s(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const l=s(e,["filter"]);n!==void 0&&l!=null&&a(n,["_query","filter"],l);const u=s(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Ip(t,u)),o}function WS(t,e,n){const o={},r=s(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=s(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const l=s(e,["filter"]);n!==void 0&&l!=null&&a(n,["_query","filter"],l);const u=s(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Ip(t,u)),o}function KS(t,e){const n={},o=s(e,["config"]);return o!=null&&OS(t,o,n),n}function YS(t,e){const n={},o=s(e,["config"]);return o!=null&&WS(t,o,n),n}function QS(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=s(t,["_self"]);if(r!=null){let i=Ap(r);Array.isArray(i)&&(i=i.map(l=>tl(l))),a(e,["models"],i)}return e}function XS(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=s(t,["_self"]);if(r!=null){let i=Ap(r);Array.isArray(i)&&(i=i.map(l=>nl(l))),a(e,["models"],i)}return e}function ZS(t){const e={},n=s(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);const o=s(t,["segmentationClasses"]);o!=null&&a(e,["maskClasses"],o);const r=s(t,["maskDilation"]);return r!=null&&a(e,["dilation"],r),e}function tl(t){const e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);const o=s(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=s(t,["description"]);r!=null&&a(e,["description"],r);const i=s(t,["version"]);i!=null&&a(e,["version"],i);const l=s(t,["_self"]);l!=null&&a(e,["tunedModelInfo"],mE(l));const u=s(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const c=s(t,["outputTokenLimit"]);c!=null&&a(e,["outputTokenLimit"],c);const d=s(t,["supportedGenerationMethods"]);d!=null&&a(e,["supportedActions"],d);const f=s(t,["temperature"]);f!=null&&a(e,["temperature"],f);const m=s(t,["maxTemperature"]);m!=null&&a(e,["maxTemperature"],m);const p=s(t,["topP"]);p!=null&&a(e,["topP"],p);const g=s(t,["topK"]);g!=null&&a(e,["topK"],g);const T=s(t,["thinking"]);return T!=null&&a(e,["thinking"],T),e}function nl(t){const e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);const o=s(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=s(t,["description"]);r!=null&&a(e,["description"],r);const i=s(t,["versionId"]);i!=null&&a(e,["version"],i);const l=s(t,["deployedModels"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(p=>dS(p))),a(e,["endpoints"],m)}const u=s(t,["labels"]);u!=null&&a(e,["labels"],u);const c=s(t,["_self"]);c!=null&&a(e,["tunedModelInfo"],hE(c));const d=s(t,["defaultCheckpointId"]);d!=null&&a(e,["defaultCheckpointId"],d);const f=s(t,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(p=>p)),a(e,["checkpoints"],m)}return e}function jS(t){const e={},n=s(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=s(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=s(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=s(t,["fileData"]);i!=null&&a(e,["fileData"],fS(i));const l=s(t,["functionCall"]);l!=null&&a(e,["functionCall"],pS(l));const u=s(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=s(t,["inlineData"]);c!=null&&a(e,["inlineData"],G0(c));const d=s(t,["text"]);d!=null&&a(e,["text"],d);const f=s(t,["thought"]);f!=null&&a(e,["thought"],f);const m=s(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const p=s(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function eE(t){const e={},n=s(t,["productImage"]);return n!=null&&a(e,["image"],nt(n)),e}function tE(t,e){const n={},o=s(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=s(t,["baseSteps"]);e!==void 0&&r!=null&&a(e,["parameters","baseSteps"],r);const i=s(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const l=s(t,["seed"]);e!==void 0&&l!=null&&a(e,["parameters","seed"],l);const u=s(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const c=s(t,["personGeneration"]);e!==void 0&&c!=null&&a(e,["parameters","personGeneration"],c);const d=s(t,["addWatermark"]);e!==void 0&&d!=null&&a(e,["parameters","addWatermark"],d);const f=s(t,["outputMimeType"]);e!==void 0&&f!=null&&a(e,["parameters","outputOptions","mimeType"],f);const m=s(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&a(e,["parameters","outputOptions","compressionQuality"],m);const p=s(t,["enhancePrompt"]);e!==void 0&&p!=null&&a(e,["parameters","enhancePrompt"],p);const g=s(t,["labels"]);return e!==void 0&&g!=null&&a(e,["labels"],g),n}function nE(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["source"]);r!=null&&rE(r,n);const i=s(e,["config"]);return i!=null&&tE(i,n),n}function oE(t){const e={},n=s(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Ti(r))),a(e,["generatedImages"],o)}return e}function rE(t,e){const n={},o=s(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=s(t,["personImage"]);e!==void 0&&r!=null&&a(e,["instances[0]","personImage","image"],nt(r));const i=s(t,["productImages"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>eE(u))),a(e,["instances[0]","productImages"],l)}return n}function iE(t){const e={},n=s(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],nt(n));const o=s(t,["referenceId"]);o!=null&&a(e,["referenceId"],o);const r=s(t,["referenceType"]);r!=null&&a(e,["referenceType"],r);const i=s(t,["maskImageConfig"]);i!=null&&a(e,["maskImageConfig"],ZS(i));const l=s(t,["controlImageConfig"]);l!=null&&a(e,["controlImageConfig"],J0(l));const u=s(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],u);const c=s(t,["subjectImageConfig"]);return c!=null&&a(e,["subjectImageConfig"],c),e}function Up(t){const e={},n=s(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=s(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=s(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function Fp(t){const e={},n=s(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=s(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=s(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function sE(t){const e={},n=s(t,["category"]);if(n!=null&&a(e,["category"],n),s(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=s(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function lE(t){const e={},n=s(t,["image"]);return n!=null&&a(e,["image"],nt(n)),e}function aE(t,e){const n={},o=s(t,["mode"]);e!==void 0&&o!=null&&a(e,["parameters","mode"],o);const r=s(t,["maxPredictions"]);e!==void 0&&r!=null&&a(e,["parameters","maxPredictions"],r);const i=s(t,["confidenceThreshold"]);e!==void 0&&i!=null&&a(e,["parameters","confidenceThreshold"],i);const l=s(t,["maskDilation"]);e!==void 0&&l!=null&&a(e,["parameters","maskDilation"],l);const u=s(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u);const c=s(t,["labels"]);return e!==void 0&&c!=null&&a(e,["labels"],c),n}function uE(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["source"]);r!=null&&dE(r,n);const i=s(e,["config"]);return i!=null&&aE(i,n),n}function cE(t){const e={},n=s(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>US(r))),a(e,["generatedMasks"],o)}return e}function dE(t,e){const n={},o=s(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=s(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],nt(r));const i=s(t,["scribbleImage"]);return e!==void 0&&i!=null&&a(e,["instances[0]","scribble"],lE(i)),n}function Vp(t){const e={},n=s(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],n);const o=s(t,["languageCode"]);if(o!=null&&a(e,["languageCode"],o),s(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function fE(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],mS(n));const o=s(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function pE(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=s(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=s(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const l=s(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=s(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],qS(u));const c=s(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],bS(c));const d=s(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function Gp(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>hS(p))),a(e,["functionDeclarations"],m)}const o=s(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=s(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=s(t,["computerUse"]);if(i!=null&&a(e,["computerUse"],i),s(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=s(t,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=s(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=s(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=s(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=s(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function mE(t){const e={},n=s(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const o=s(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=s(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function hE(t){const e={},n=s(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);const o=s(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=s(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function gE(t,e){const n={},o=s(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=s(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=s(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function vE(t,e){const n={},o=s(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=s(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=s(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function yE(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","name"],z(t,o));const r=s(e,["config"]);return r!=null&&gE(r,n),n}function SE(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["config"]);return r!=null&&vE(r,n),n}function EE(t,e){const n={},o=s(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=s(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&a(e,["parameters","safetySetting"],r);const i=s(t,["personGeneration"]);e!==void 0&&i!=null&&a(e,["parameters","personGeneration"],i);const l=s(t,["includeRaiReason"]);e!==void 0&&l!=null&&a(e,["parameters","includeRaiReason"],l);const u=s(t,["outputMimeType"]);e!==void 0&&u!=null&&a(e,["parameters","outputOptions","mimeType"],u);const c=s(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&a(e,["parameters","outputOptions","compressionQuality"],c);const d=s(t,["enhanceInputImage"]);e!==void 0&&d!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=s(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const m=s(t,["labels"]);e!==void 0&&m!=null&&a(e,["labels"],m);const p=s(t,["numberOfImages"]);e!==void 0&&p!=null&&a(e,["parameters","sampleCount"],p);const g=s(t,["mode"]);return e!==void 0&&g!=null&&a(e,["parameters","mode"],g),n}function TE(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["_url","model"],z(t,o));const r=s(e,["image"]);r!=null&&a(n,["instances[0]","image"],nt(r));const i=s(e,["upscaleFactor"]);i!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],i);const l=s(e,["config"]);return l!=null&&EE(l,n),n}function CE(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>Ti(i))),a(e,["generatedImages"],r)}return e}function _E(t){const e={},n=s(t,["uri"]);n!=null&&a(e,["uri"],n);const o=s(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],$t(o));const r=s(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function wE(t){const e={},n=s(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=s(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],$t(o));const r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function xE(t){const e={},n=s(t,["image"]);n!=null&&a(e,["_self"],nt(n));const o=s(t,["maskMode"]);return o!=null&&a(e,["maskMode"],o),e}function IE(t){const e={},n=s(t,["image"]);n!=null&&a(e,["image"],Ci(n));const o=s(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function AE(t){const e={},n=s(t,["image"]);n!=null&&a(e,["image"],nt(n));const o=s(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function Hp(t){const e={},n=s(t,["uri"]);n!=null&&a(e,["uri"],n);const o=s(t,["videoBytes"]);o!=null&&a(e,["encodedVideo"],$t(o));const r=s(t,["mimeType"]);return r!=null&&a(e,["encoding"],r),e}function Bp(t){const e={},n=s(t,["uri"]);n!=null&&a(e,["gcsUri"],n);const o=s(t,["videoBytes"]);o!=null&&a(e,["bytesBase64Encoded"],$t(o));const r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NE(t,e){const n={},o=s(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["displayName"],o),n}function RE(t){const e={},n=s(t,["config"]);return n!=null&&NE(n,e),e}function PE(t,e){const n={},o=s(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function kE(t){const e={},n=s(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=s(t,["config"]);return o!=null&&PE(o,e),e}function ME(t){const e={},n=s(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function DE(t,e){const n={},o=s(t,["customMetadata"]);if(e!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["customMetadata"],i)}const r=s(t,["chunkingConfig"]);return e!==void 0&&r!=null&&a(e,["chunkingConfig"],r),n}function LE(t){const e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);const o=s(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=s(t,["done"]);r!=null&&a(e,["done"],r);const i=s(t,["error"]);i!=null&&a(e,["error"],i);const l=s(t,["response"]);return l!=null&&a(e,["response"],FE(l)),e}function UE(t){const e={},n=s(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=s(t,["fileName"]);o!=null&&a(e,["fileName"],o);const r=s(t,["config"]);return r!=null&&DE(r,e),e}function FE(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["parent"]);o!=null&&a(e,["parent"],o);const r=s(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function VE(t,e){const n={},o=s(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=s(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function GE(t){const e={},n=s(t,["config"]);return n!=null&&VE(n,e),e}function HE(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=s(t,["fileSearchStores"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["fileSearchStores"],i)}return e}function qp(t,e){const n={},o=s(t,["mimeType"]);e!==void 0&&o!=null&&a(e,["mimeType"],o);const r=s(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=s(t,["customMetadata"]);if(e!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>c)),a(e,["customMetadata"],u)}const l=s(t,["chunkingConfig"]);return e!==void 0&&l!=null&&a(e,["chunkingConfig"],l),n}function BE(t){const e={},n=s(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=s(t,["config"]);return o!=null&&qp(o,e),e}function qE(t){const e={},n=s(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bE="Content-Type",$E="X-Server-Timeout",zE="User-Agent",ol="x-goog-api-client",JE="1.33.0",OE=`google-genai-sdk/${JE}`,WE="v1beta1",KE="v1beta";class YE{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:WE,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:KE,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))r.searchParams.append(l,String(u));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const i=new AbortController,l=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>i.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=l}return n&&n.extraBody!==null&&QE(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await zc(r),new Zs(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await zc(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return je(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield L(r.read());if(d){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(f,{stream:!0});try{const T=JSON.parse(m);if("error"in T){const E=JSON.parse(JSON.stringify(T.error)),C=E.status,h=E.code,y=`got status: ${C}. ${JSON.stringify(T)}`;if(h>=400&&h<600)throw new Si({message:y,status:h})}}catch(T){if(T.name==="ApiError")throw T}l+=m;let p=-1,g=0;for(;;){p=-1,g=0;for(const C of c){const h=l.indexOf(C);h!==-1&&(p===-1||h<p)&&(p=h,g=C.length)}if(p===-1)break;const T=l.substring(0,p);l=l.substring(p+g);const E=T.trim();if(E.startsWith(u)){const C=E.substring(u.length).trim();try{const h=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield L(new Zs(h))}catch(h){throw new Error(`exception parsing stream chunk ${C}. ${h}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=OE+" "+this.clientOptions.userAgentExtra;return e[zE]=n,e[ol]=n,e[bE]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))o.append(r,i);e.timeout&&e.timeout>0&&o.append($E,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,l=await i.stat(e);r.sizeBytes=String(l.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const c={file:r},d=this.getFileName(e),f=k("upload/v1beta/files",c._url),m=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,o){var r;const i=this.clientOptions.uploader,l=await i.stat(n),u=String(l.size),c=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),m={};o!=null&&qp(o,m);const p=await this.fetchUploadUrl(d,u,c,f,m,o==null?void 0:o.httpOptions);return i.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,i,l){var u;let c={};l?c=l:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function zc(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Si({message:r,status:n}):new Error(r)}}function QE(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,l){const u=Object.assign({},i);for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c)){const d=l[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=o(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XE="mcp_used/unknown";let ZE=!1;function bp(t){for(const e of t)if(jE(e)||typeof e=="object"&&"inputSchema"in e)return!0;return ZE}function $p(t){var e;const n=(e=t[ol])!==null&&e!==void 0?e:"";t[ol]=(n+` ${XE}`).trimStart()}function jE(t){return t!==null&&typeof t=="object"&&t instanceof da}function eT(t){return je(this,arguments,function*(n,o=100){let r,i=0;for(;i<o;){const l=yield L(n.listTools({cursor:r}));for(const u of l.tools)yield yield L(u),i++;if(!l.nextCursor)break;r=l.nextCursor}})}class da{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new da(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const i={},l=[];for(const f of this.mcpClients)try{for(var u=!0,c=(n=void 0,et(eT(f))),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const m=r;l.push(m);const p=m.name;if(i[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);i[p]=f}}catch(m){n={error:m}}finally{try{!u&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),Mv(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const l=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function tT(t,e,n){const o=new wv;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class nT{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),l=iT(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(S=>{d=S}),m=e.callbacks,p=function(){d({})},g=this.apiClient,T={onopen:p,onmessage:S=>{tT(g,m.onmessage,S)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(S){},onclose:(o=m==null?void 0:m.onclose)!==null&&o!==void 0?o:function(S){}},E=this.webSocketFactory.create(c,rT(l),T);E.connect(),await f;const y={setup:{model:z(this.apiClient,e.model)}};return E.send(JSON.stringify(y)),new oT(E,this.apiClient)}}class oT{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=R0(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=N0(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(_n.PLAY)}pause(){this.sendPlaybackControl(_n.PAUSE)}stop(){this.sendPlaybackControl(_n.STOP)}resetContext(){this.sendPlaybackControl(_n.RESET_CONTEXT)}close(){this.conn.close()}}function rT(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function iT(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sT="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function lT(t,e,n){const o=new _v;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const i=JSON.parse(r);if(t.isVertexAI()){const l=M0(i);Object.assign(o,l)}else Object.assign(o,i);e(o)}class aT{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new nT(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,i,l,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&bp(e.config.tools)&&$p(m);const p=fT(m);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f);else{const P=this.apiClient.getApiKey();let A="BidiGenerateContent",F="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),A="BidiGenerateContentConstrained",F="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${A}?${F}=${P}`}let g=()=>{};const T=new Promise(P=>{g=P}),E=e.callbacks,C=function(){var P;(P=E==null?void 0:E.onopen)===null||P===void 0||P.call(E),g({})},h=this.apiClient,y={onopen:C,onmessage:P=>{lT(h,E.onmessage,P)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(P){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(P){}},S=this.webSocketFactory.create(f,dT(p),y);S.connect(),await T;let _=z(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const P=this.apiClient.getProject(),A=this.apiClient.getLocation();_=`projects/${P}/locations/${A}/`+_}let w={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Qr.AUDIO]}:e.config.responseModalities=[Qr.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const x=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],I=[];for(const P of x)if(this.isCallableTool(P)){const A=P;I.push(await A.tool())}else I.push(P);I.length>0&&(e.config.tools=I);const R={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?w=A0(this.apiClient,R):w=I0(this.apiClient,R),delete w.config,S.send(JSON.stringify(w)),new cT(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const uT={turnComplete:!0};class cT{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=$e(n.turns),e.isVertexAI()||(o=o.map(r=>Ei(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(sT)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},uT),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:k0(e)}:n={realtimeInput:P0(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function dT(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function fT(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jc=10;function Oc(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Mn(l)){r=!0;break}if(!r)return!0;const i=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Mn(t){return"callTool"in t&&typeof t.callTool=="function"}function pT(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Mn(r)))!==null&&o!==void 0?o:!1}function Wc(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(Mn(o))return;const i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(r)}),n}function Kc(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mT extends Et{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,i,l,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!pT(n)||Oc(n.config))return await this.generateContentInternal(c);const d=Wc(n);if(d.length>0){const E=d.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let f,m;const p=$e(c.contents),g=(i=(r=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Jc;let T=0;for(;T<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const E=f.candidates[0].content,C=[];for(const h of(u=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(Mn(h)){const S=await h.callTool(f.functionCalls);C.push(...S)}T++,m={role:"user",parts:C},c.contents=$e(c.contents),c.contents.push(E),c.contents.push(m),Kc(c.config)&&(p.push(E),p.push(m))}return Kc(c.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var o,r,i,l,u;if(this.maybeMoveToResponseJsonSchem(n),Oc(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const c=Wc(n);if(c.length>0){const m=c.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(u=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i;const l=[];if(o!=null&&o.generatedImages)for(const c of o.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:l.push(c);let u;return i?u={generatedImages:l,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:l,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((o=l.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new an(vt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,l,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(i=n.source)===null||i===void 0?void 0:i.video)===null||l===void 0)&&l.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const l=await Promise.all(i.map(async c=>Mn(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&bp(e.config.tools)){const c=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),$p(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,o,r;const i=new Map;for(const l of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Mn(l)){const u=l,c=await u.tool();for(const d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,u)}}return i}async processAfcStream(e){var n,o,r;const i=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Jc;let l=!1,u=0;const c=await this.initAfcToolsMap(e);return function(d,f,m){return je(this,arguments,function*(){for(var p,g,T,E,C,h;u<i;){l&&(u++,l=!1);const w=yield L(d.processParamsMaybeAddMcpUsage(m)),x=yield L(d.generateContentStreamInternal(w)),I=[],R=[];try{for(var y=!0,S=(g=void 0,et(x)),_;_=yield L(S.next()),p=_.done,!p;y=!0){E=_.value,y=!1;const P=E;if(yield yield L(P),P.candidates&&(!((C=P.candidates[0])===null||C===void 0)&&C.content)){R.push(P.candidates[0].content);for(const A of(h=P.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<i&&A.functionCall){if(!A.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(A.functionCall.name)){const F=yield L(f.get(A.functionCall.name).callTool([A.functionCall]));I.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${A.functionCall.name}`)}}}}catch(P){g={error:P}}finally{try{!y&&!p&&(T=S.return)&&(yield L(T.call(S)))}finally{if(g)throw g.error}}if(I.length>0){l=!0;const P=new to;P.candidates=[{content:{role:"user",parts:I}}],yield yield L(P);const A=[];A.push(...R),A.push({role:"user",parts:I});const F=$e(m.contents).concat(A);m.contents=F}else break}})}(this,c,e)}async generateContentInternal(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=qc(this.apiClient,e);return u=k("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=$c(f),p=new to;return Object.assign(p,m),p})}else{const d=Bc(this.apiClient,e);return u=k("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=bc(f),p=new to;return Object.assign(p,m),p})}}async generateContentStreamInternal(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=qc(this.apiClient,e);return u=k("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(m){return je(this,arguments,function*(){var p,g,T,E;try{for(var C=!0,h=et(m),y;y=yield L(h.next()),p=y.done,!p;C=!0){E=y.value,C=!1;const S=E,_=$c(yield L(S.json()));_.sdkHttpResponse={headers:S.headers};const w=new to;Object.assign(w,_),yield yield L(w)}}catch(S){g={error:S}}finally{try{!C&&!p&&(T=h.return)&&(yield L(T.call(h)))}finally{if(g)throw g.error}}})})}else{const d=Bc(this.apiClient,e);return u=k("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(m){return je(this,arguments,function*(){var p,g,T,E;try{for(var C=!0,h=et(m),y;y=yield L(h.next()),p=y.done,!p;C=!0){E=y.value,C=!1;const S=E,_=bc(yield L(S.json()));_.sdkHttpResponse={headers:S.headers};const w=new to;Object.assign(w,_),yield yield L(w)}}catch(S){g={error:S}}finally{try{!C&&!p&&(T=h.return)&&(yield L(T.call(h)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=aS(this.apiClient,e);return u=k("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=cS(f),p=new _c;return Object.assign(p,m),p})}else{const d=lS(this.apiClient,e);return u=k("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=uS(f),p=new _c;return Object.assign(p,m),p})}}async generateImagesInternal(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=TS(this.apiClient,e);return u=k("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=_S(f),p=new wc;return Object.assign(p,m),p})}else{const d=ES(this.apiClient,e);return u=k("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=CS(f),p=new wc;return Object.assign(p,m),p})}}async editImageInternal(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=oS(this.apiClient,e);return i=k("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=rS(c),f=new fv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=TE(this.apiClient,e);return i=k("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=CE(c),f=new pv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=nE(this.apiClient,e);return i=k("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=oE(c),f=new mv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=uE(this.apiClient,e);return i=k("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=cE(c),f=new hv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=BS(this.apiClient,e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>nl(f))}else{const d=HS(this.apiClient,e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>tl(f))}}async listInternal(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=YS(this.apiClient,e);return u=k("{models_url}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=XS(f),p=new xc;return Object.assign(p,m),p})}else{const d=KS(this.apiClient,e);return u=k("{models_url}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=QS(f),p=new xc;return Object.assign(p,m),p})}}async update(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=SE(this.apiClient,e);return u=k("{model}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>nl(f))}else{const d=yE(this.apiClient,e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>tl(f))}}async delete(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=j0(this.apiClient,e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=tS(f),p=new Ic;return Object.assign(p,m),p})}else{const d=Z0(this.apiClient,e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=eS(f),p=new Ic;return Object.assign(p,m),p})}}async countTokens(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Y0(this.apiClient,e);return u=k("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=X0(f),p=new Ac;return Object.assign(p,m),p})}else{const d=K0(this.apiClient,e);return u=k("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=Q0(f),p=new Ac;return Object.assign(p,m),p})}}async computeTokens(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=q0(this.apiClient,e);return i=k("{model}:computeTokens",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=b0(c),f=new gv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=RS(this.apiClient,e);return u=k("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{const m=AS(f),p=new Xr;return Object.assign(p,m),p})}else{const d=NS(this.apiClient,e);return u=k("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>{const m=IS(f),p=new Xr;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hT extends Et{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=sv(e);return u=k("{operationName}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l}else{const d=iv(e);return u=k("{operationName}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l}}async fetchPredictVideosOperationInternal(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=Zg(e);return i=k("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gT(t){const e={},n=s(t,["data"]);if(n!=null&&a(e,["data"],n),s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function vT(t){const e={},n=s(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>IT(i))),a(e,["parts"],r)}const o=s(t,["role"]);return o!=null&&a(e,["role"],o),e}function yT(t,e,n){const o={},r=s(e,["expireTime"]);n!==void 0&&r!=null&&a(n,["expireTime"],r);const i=s(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&a(n,["newSessionExpireTime"],i);const l=s(e,["uses"]);n!==void 0&&l!=null&&a(n,["uses"],l);const u=s(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],xT(t,u));const c=s(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),o}function ST(t,e){const n={},o=s(e,["config"]);return o!=null&&a(n,["config"],yT(t,o,n)),n}function ET(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=s(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function TT(t){const e={},n=s(t,["id"]);n!=null&&a(e,["id"],n);const o=s(t,["args"]);o!=null&&a(e,["args"],o);const r=s(t,["name"]);if(r!=null&&a(e,["name"],r),s(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CT(t){const e={};if(s(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=s(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function _T(t){const e={};if(s(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function wT(t,e){const n={},o=s(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=s(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=s(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const l=s(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=s(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=s(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=s(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=s(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const m=s(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],ca(m));const p=s(t,["thinkingConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","thinkingConfig"],p);const g=s(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const T=s(t,["systemInstruction"]);e!==void 0&&T!=null&&a(e,["setup","systemInstruction"],vT(Ee(T)));const E=s(t,["tools"]);if(e!==void 0&&E!=null){let x=Jn(E);Array.isArray(x)&&(x=x.map(I=>NT(zn(I)))),a(e,["setup","tools"],x)}const C=s(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],AT(C));const h=s(t,["inputAudioTranscription"]);e!==void 0&&h!=null&&a(e,["setup","inputAudioTranscription"],h);const y=s(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","outputAudioTranscription"],y);const S=s(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&a(e,["setup","realtimeInputConfig"],S);const _=s(t,["contextWindowCompression"]);e!==void 0&&_!=null&&a(e,["setup","contextWindowCompression"],_);const w=s(t,["proactivity"]);if(e!==void 0&&w!=null&&a(e,["setup","proactivity"],w),s(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function xT(t,e){const n={},o=s(e,["model"]);o!=null&&a(n,["setup","model"],z(t,o));const r=s(e,["config"]);return r!=null&&a(n,["config"],wT(r,n)),n}function IT(t){const e={},n=s(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=s(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=s(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=s(t,["fileData"]);i!=null&&a(e,["fileData"],ET(i));const l=s(t,["functionCall"]);l!=null&&a(e,["functionCall"],TT(l));const u=s(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=s(t,["inlineData"]);c!=null&&a(e,["inlineData"],gT(c));const d=s(t,["text"]);d!=null&&a(e,["text"],d);const f=s(t,["thought"]);f!=null&&a(e,["thought"],f);const m=s(t,["thoughtSignature"]);m!=null&&a(e,["thoughtSignature"],m);const p=s(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function AT(t){const e={},n=s(t,["handle"]);if(n!=null&&a(e,["handle"],n),s(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function NT(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),a(e,["functionDeclarations"],f)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=s(t,["computerUse"]);r!=null&&a(e,["computerUse"],r);const i=s(t,["fileSearch"]);i!=null&&a(e,["fileSearch"],i);const l=s(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=s(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],CT(u));const c=s(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],_T(c));const d=s(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RT(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(i=>`${n}.${i}`);e.push(...r)}else e.push(n)}return e.join(",")}function PT(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const i=o.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const i=RT(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(d=>l.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class kT extends Et{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=ST(this.apiClient,e);i=k("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const c=PT(u,e.config);return r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MT(t,e){const n={},o=s(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function DT(t){const e={},n=s(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=s(t,["config"]);return o!=null&&MT(o,e),e}function LT(t){const e={},n=s(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function UT(t,e){const n={},o=s(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=s(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function FT(t){const e={},n=s(t,["parent"]);n!=null&&a(e,["_url","parent"],n);const o=s(t,["config"]);return o!=null&&UT(o,e),e}function VT(t){const e={},n=s(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=s(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=s(t,["documents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),a(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GT extends Et{constructor(e){super(),this.apiClient=e,this.list=async n=>new an(vt.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LT(e);return i=k("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=DT(e);r=k("{name}",l._url),i=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=FT(e);return i=k("{parent}/documents",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=VT(c),f=new vv;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HT extends Et{constructor(e,n=new GT(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new an(vt.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=RE(e);return i=k("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ME(e);return i=k("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=kE(e);r=k("{name}",l._url),i=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=GE(e);return i=k("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=HE(c),f=new yv;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=BE(e);return i=k("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=qE(c),f=new Sv;return Object.assign(f,d),f})}}async importFile(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=UE(e);return i=k("{file_search_store_name}:importFile",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=LE(c),f=new ia;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let zp=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return zp=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const BT=()=>zp();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rl(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const il=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oe extends Error{}class xe extends Oe{constructor(e,n,o,r){super(`${xe.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new _i({message:o,cause:il(n)});const i=n;return e===400?new Op(e,i,o,r):e===401?new Wp(e,i,o,r):e===403?new Kp(e,i,o,r):e===404?new Yp(e,i,o,r):e===409?new Qp(e,i,o,r):e===422?new Xp(e,i,o,r):e===429?new Zp(e,i,o,r):e>=500?new jp(e,i,o,r):new xe(e,i,o,r)}}class sl extends xe{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class _i extends xe{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Jp extends _i{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Op extends xe{}class Wp extends xe{}class Kp extends xe{}class Yp extends xe{}class Qp extends xe{}class Xp extends xe{}class Zp extends xe{}class jp extends xe{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qT=/^[a-z][a-z0-9+.-]*:/i,bT=t=>qT.test(t);let ll=t=>(ll=Array.isArray,ll(t));const $T=ll;let zT=$T;const Yc=zT;function JT(t){if(!t)return!0;for(const e in t)return!1;return!0}function OT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const WT=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Oe(`${t} must be an integer`);if(e<0)throw new Oe(`${t} must be a positive integer`);return e},KT=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YT=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cn="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QT(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const XT=()=>{var t,e,n,o,r;const i=QT();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cn,"X-Stainless-OS":Xc(Deno.build.os),"X-Stainless-Arch":Qc(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cn,"X-Stainless-OS":Xc((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Qc((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const l=ZT();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ZT(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,i=o[2]||0,l=o[3]||0;return{browser:e,version:`${r}.${i}.${l}`}}}return null}const Qc=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Xc=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let sr;const jT=()=>sr??(sr=XT());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eC(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function em(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function tC(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return em({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function tm(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function nC(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oC=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nm=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function es(t,e,n){return nm(),new File(t,e??"unknown_file",n)}function rC(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const iC=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const om=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",sC=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&om(t),lC=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function aC(t,e,n){if(nm(),t=await t,sC(t))return t instanceof File?t:es([await t.arrayBuffer()],t.name);if(lC(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),es(await al(r),e,n)}const o=await al(t);if(e||(e=rC(t)),!(n!=null&&n.type)){const r=o.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return es(o,e,n)}async function al(t){var e,n,o,r,i;let l=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)l.push(t);else if(om(t))l.push(t instanceof Blob?t:await t.arrayBuffer());else if(iC(t))try{for(var u=!0,c=et(t),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const f=r;l.push(...await al(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}else{const f=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${uC(t)}`)}return l}function uC(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rm{constructor(e){this._client=e}}rm._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function im(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Zc=Object.freeze(Object.create(null)),cC=(t=im)=>function(n,...o){if(n.length===1)return n[0];let r=!1;const i=[],l=n.reduce((f,m,p)=>{var g,T,E;/[?#]/.test(m)&&(r=!0);const C=o[p];let h=(r?encodeURIComponent:t)(""+C);return p!==o.length&&(C==null||typeof C=="object"&&C.toString===((E=Object.getPrototypeOf((T=Object.getPrototypeOf((g=C.hasOwnProperty)!==null&&g!==void 0?g:Zc))!==null&&T!==void 0?T:Zc))===null||E===void 0?void 0:E.toString))&&(h=C+"",i.push({start:f.length+m.length,length:h.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),f+m+(p===o.length?"":h)},""),u=l.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(u))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,m)=>f.start-m.start),i.length>0){let f=0;const m=i.reduce((p,g)=>{const T=" ".repeat(g.start-f),E="^".repeat(g.length);return f=g.start+g.length,p+T+E},"");throw new Oe(`Path parameters result in path with invalid segments:
${i.map(p=>p.error).join(`
`)}
${l}
${m}`)}return l},lr=cC(im);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sm extends rm{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,i=jr(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new Oe("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new Oe("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(lr`/${r}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(lr`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(lr`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const i=n??{},{api_version:l=this._client.apiVersion}=i,u=jr(i,["api_version"]);return this._client.get(lr`/${l}/interactions/${e}`,Object.assign(Object.assign({query:u},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}sm._key=Object.freeze(["interactions"]);class lm extends sm{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dC(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let ar;function fa(t){let e;return(ar??(e=new globalThis.TextEncoder,ar=e.encode.bind(e)))(t)}let ur;function jc(t){let e;return(ur??(e=new globalThis.TextDecoder,ur=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wi{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?fa(e):e;this.buffer=dC([this.buffer,n]);const o=[];let r;for(;(r=fC(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(jc(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,l=jc(this.buffer.subarray(0,i));o.push(l),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}wi.NEWLINE_CHARS=new Set([`
`,"\r"]);wi.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function fC(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function pC(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ei={off:0,error:200,warn:300,info:400,debug:500},ed=(t,e,n)=>{if(t){if(OT(ei,t))return t;Ce(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ei))}`)}};function so(){}function cr(t,e,n){return!e||ei[t]>ei[n]?so:e[t].bind(e)}const mC={error:so,warn:so,info:so,debug:so};let td=new WeakMap;function Ce(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return mC;const r=td.get(n);if(r&&r[0]===o)return r[1];const i={error:cr("error",n,o),warn:cr("warn",n,o),info:cr("info",n,o),debug:cr("debug",n,o)};return td.set(n,[o,i]),i}const Kt=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wn{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const i=o?Ce(o):console;function l(){return je(this,arguments,function*(){var c,d,f,m;if(r)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{try{for(var g=!0,T=et(hC(e,n)),E;E=yield L(T.next()),c=E.done,!c;g=!0){m=E.value,g=!1;const C=m;if(!p)if(C.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield L(JSON.parse(C.data))}catch(h){throw i.error("Could not parse message into JSON:",C.data),i.error("From chunk:",C.raw),h}}}catch(C){d={error:C}}finally{try{!g&&!c&&(f=T.return)&&(yield L(f.call(T)))}finally{if(d)throw d.error}}p=!0}catch(C){if(rl(C))return yield L(void 0);throw C}finally{p||n.abort()}})}return new wn(l,n,o)}static fromReadableStream(e,n,o){let r=!1;function i(){return je(this,arguments,function*(){var c,d,f,m;const p=new wi,g=tm(e);try{for(var T=!0,E=et(g),C;C=yield L(E.next()),c=C.done,!c;T=!0){m=C.value,T=!1;const h=m;for(const y of p.decode(h))yield yield L(y)}}catch(h){d={error:h}}finally{try{!T&&!c&&(f=E.return)&&(yield L(f.call(E)))}finally{if(d)throw d.error}}for(const h of p.flush())yield yield L(h)})}function l(){return je(this,arguments,function*(){var c,d,f,m;if(r)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{try{for(var g=!0,T=et(i()),E;E=yield L(T.next()),c=E.done,!c;g=!0){m=E.value,g=!1;const C=m;p||C&&(yield yield L(JSON.parse(C)))}}catch(C){d={error:C}}finally{try{!g&&!c&&(f=T.return)&&(yield L(f.call(T)))}finally{if(d)throw d.error}}p=!0}catch(C){if(rl(C))return yield L(void 0);throw C}finally{p||n.abort()}})}return new wn(l,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=i=>({next:()=>{if(i.length===0){const l=o.next();e.push(l),n.push(l)}return i.shift()}});return[new wn(()=>r(e),this.controller,this.client),new wn(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return em({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:i}=await n.next();if(i)return o.close();const l=fa(JSON.stringify(r)+`
`);o.enqueue(l)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function hC(t,e){return je(this,arguments,function*(){var o,r,i,l;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Oe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Oe("Attempted to iterate over a response with no body");const u=new vC,c=new wi,d=tm(t.body);try{for(var f=!0,m=et(gC(d)),p;p=yield L(m.next()),o=p.done,!o;f=!0){l=p.value,f=!1;const g=l;for(const T of c.decode(g)){const E=u.decode(T);E&&(yield yield L(E))}}}catch(g){r={error:g}}finally{try{!f&&!o&&(i=m.return)&&(yield L(i.call(m)))}finally{if(r)throw r.error}}for(const g of c.flush()){const T=u.decode(g);T&&(yield yield L(T))}})}function gC(t){return je(this,arguments,function*(){var n,o,r,i;let l=new Uint8Array;try{for(var u=!0,c=et(t),d;d=yield L(c.next()),n=d.done,!n;u=!0){i=d.value,u=!1;const f=i;if(f==null)continue;const m=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?fa(f):f;let p=new Uint8Array(l.length+m.length);p.set(l),p.set(m,l.length),l=p;let g;for(;(g=pC(l))!==-1;)yield yield L(l.slice(0,g)),l=l.slice(g)}}catch(f){o={error:f}}finally{try{!u&&!n&&(r=c.return)&&(yield L(r.call(c)))}finally{if(o)throw o.error}}l.length>0&&(yield yield L(l))})}class vC{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=yC(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function yC(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function SC(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:i}=e,l=await(async()=>{var u;if(e.options.stream)return Ce(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):wn.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(u=c==null?void 0:c.split(";")[0])===null||u===void 0?void 0:u.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return Ce(t).debug(`[${o}] response parsed`,Kt({retryOfRequestLogID:r,url:n.url,status:n.status,body:l,durationMs:Date.now()-i})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pa extends Promise{constructor(e,n,o=SC){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new pa(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const am=Symbol("brand.privateNullableHeaders");function*EC(t){if(!t)return;if(am in t){const{values:o,nulls:r}=t;yield*o.entries();for(const i of r)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Yc(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const i=Yc(o[1])?o[1]:[o[1]];let l=!1;for(const u of i)u!==void 0&&(e&&!l&&(l=!0,yield[r,null]),yield[r,u])}}const ts=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[i,l]of EC(o)){const u=i.toLowerCase();r.has(u)||(e.delete(i),r.add(u)),l===null?(e.delete(i),n.add(u)):(e.append(i,l),n.delete(u))}}return{[am]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ns=t=>{var e,n,o,r,i,l;if(typeof globalThis.process<"u")return(o=(n=(e=Og)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(l=(i=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||i===void 0?void 0:i.call(r,t))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var um;class xi{constructor(e){var n,o,r,i,l,u,c,d=e===void 0?{}:e,{baseURL:f=ns("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:m=(n=ns("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=d,g=jr(d,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:m,apiVersion:p},g),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(o=T.timeout)!==null&&o!==void 0?o:xi.DEFAULT_TIMEOUT,this.logger=(r=T.logger)!==null&&r!==void 0?r:console;const E="warn";this.logLevel=E,this.logLevel=(l=(i=ed(T.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:ed(ns("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:E,this.fetchOptions=T.fetchOptions,this.maxRetries=(u=T.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(c=T.fetch)!==null&&c!==void 0?c:eC(),this.encoder=oC,this._options=T,this.apiKey=m,this.apiVersion=p}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return ts([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new Oe(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${cn}`}defaultIdempotencyKey(){return`stainless-node-retry-${BT()}`}makeStatusError(e,n,o,r){return xe.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,i=bT(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return JT(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new pa(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,i,l;const u=await e,c=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=c),await this.prepareOptions(u);const{req:d,url:f,timeout:m}=await this.buildRequest(u,{retryCount:c-n});await this.prepareRequest(d,{url:f,options:u});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=o===void 0?"":`, retryOf: ${o}`,T=Date.now();if(Ce(this).debug(`[${p}] sending request`,Kt({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:d.headers})),!((i=u.signal)===null||i===void 0)&&i.aborted)throw new sl;const E=new AbortController,C=await this.fetchWithTimeout(f,d,m,E).catch(il),h=Date.now();if(C instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(!((l=u.signal)===null||l===void 0)&&l.aborted)throw new sl;const _=rl(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(n)return Ce(this).info(`[${p}] connection ${_?"timed out":"failed"} - ${S}`),Ce(this).debug(`[${p}] connection ${_?"timed out":"failed"} (${S})`,Kt({retryOfRequestLogID:o,url:f,durationMs:h-T,message:C.message})),this.retryRequest(u,n,o??p);throw Ce(this).info(`[${p}] connection ${_?"timed out":"failed"} - error; no more retries left`),Ce(this).debug(`[${p}] connection ${_?"timed out":"failed"} (error; no more retries left)`,Kt({retryOfRequestLogID:o,url:f,durationMs:h-T,message:C.message})),_?new Jp:new _i({cause:C})}const y=`[${p}${g}] ${d.method} ${f} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${h-T}ms`;if(!C.ok){const S=await this.shouldRetry(C);if(n&&S){const P=`retrying, ${n} attempts remaining`;return await nC(C.body),Ce(this).info(`${y} - ${P}`),Ce(this).debug(`[${p}] response error (${P})`,Kt({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:h-T})),this.retryRequest(u,n,o??p,C.headers)}const _=S?"error; no more retries left":"error; not retryable";Ce(this).info(`${y} - ${_}`);const w=await C.text().catch(P=>il(P).message),x=KT(w),I=x?void 0:w;throw Ce(this).debug(`[${p}] response error (${_})`,Kt({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,message:I,durationMs:Date.now()-T})),this.makeStatusError(C.status,x,I,C.headers)}return Ce(this).info(y),Ce(this).debug(`[${p}] response start`,Kt({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:h-T})),{response:C,options:u,controller:E,requestLogID:p,retryOfRequestLogID:o,startTime:T}}async fetchWithTimeout(e,n,o,r){const i=n||{},{signal:l,method:u}=i,c=jr(i,["signal","method"]);l&&l.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),o),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var i;let l;const u=r==null?void 0:r.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(l=d)}const c=r==null?void 0:r.get("retry-after");if(c&&!l){const d=parseFloat(c);Number.isNaN(d)?l=Date.parse(c)-Date.now():l=d*1e3}if(!(l&&0<=l&&l<60*1e3)){const d=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,d)}return await YT(l),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,l=Math.min(.5*Math.pow(2,i),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,i;const l=Object.assign({},e),{method:u,path:c,query:d,defaultBaseURL:f}=l,m=this.buildURL(c,d,f);"timeout"in l&&WT("timeout",l.timeout),l.timeout=(o=l.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:p,body:g}=this.buildBody({options:l}),T=await this.buildHeaders({options:e,method:u,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:T},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(i=l.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:l.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const l=ts([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),jT()),await this.authHeaders(e),this._options.defaultHeaders,o,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=ts([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:tC(e)}:this.encoder({body:e,headers:o})}}xi.DEFAULT_TIMEOUT=6e4;class de extends xi{constructor(){super(...arguments),this.interactions=new lm(this)}}um=de;de.GeminiNextGenAPIClient=um;de.GeminiNextGenAPIClientError=Oe;de.APIError=xe;de.APIConnectionError=_i;de.APIConnectionTimeoutError=Jp;de.APIUserAbortError=sl;de.NotFoundError=Yp;de.ConflictError=Qp;de.RateLimitError=Zp;de.BadRequestError=Op;de.AuthenticationError=Wp;de.InternalServerError=jp;de.PermissionDeniedError=Kp;de.UnprocessableEntityError=Xp;de.toFile=aC;de.Interactions=lm;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TC(t,e){const n={},o=s(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function CC(t,e){const n={},o=s(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function _C(t,e){const n={},o=s(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function wC(t,e){const n={},o=s(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function xC(t,e,n){const o={};if(s(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=s(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&a(e,["displayName"],r),s(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=s(t,["epochCount"]);e!==void 0&&i!=null&&a(e,["tuningTask","hyperparameters","epochCount"],i);const l=s(t,["learningRateMultiplier"]);if(l!=null&&a(o,["tuningTask","hyperparameters","learningRateMultiplier"],l),s(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(s(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=s(t,["batchSize"]);e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","batchSize"],u);const c=s(t,["learningRate"]);if(e!==void 0&&c!=null&&a(e,["tuningTask","hyperparameters","learningRate"],c),s(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(s(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function IC(t,e,n){const o={};let r=s(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const g=s(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec"],nd(g))}else if(r==="PREFERENCE_TUNING"){const g=s(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec"],nd(g))}const i=s(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&a(e,["tunedModelDisplayName"],i);const l=s(t,["description"]);e!==void 0&&l!=null&&a(e,["description"],l);let u=s(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=s(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=s(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=s(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=s(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=s(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=s(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=s(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){const g=s(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=s(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=s(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=s(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(s(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=s(t,["labels"]);e!==void 0&&m!=null&&a(e,["labels"],m);const p=s(t,["beta"]);return e!==void 0&&p!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),o}function AC(t,e){const n={},o=s(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=s(t,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=s(t,["trainingDataset"]);i!=null&&GC(i);const l=s(t,["config"]);return l!=null&&xC(l,n),n}function NC(t,e){const n={},o=s(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=s(t,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=s(t,["trainingDataset"]);i!=null&&HC(i,n,e);const l=s(t,["config"]);return l!=null&&IC(l,n,e),n}function RC(t,e){const n={},o=s(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function PC(t,e){const n={},o=s(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function kC(t,e,n){const o={},r=s(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=s(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const l=s(t,["filter"]);return e!==void 0&&l!=null&&a(e,["_query","filter"],l),o}function MC(t,e,n){const o={},r=s(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=s(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const l=s(t,["filter"]);return e!==void 0&&l!=null&&a(e,["_query","filter"],l),o}function DC(t,e){const n={},o=s(t,["config"]);return o!=null&&kC(o,n),n}function LC(t,e){const n={},o=s(t,["config"]);return o!=null&&MC(o,n),n}function UC(t,e){const n={},o=s(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=s(t,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=s(t,["tunedModels"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>cm(u))),a(n,["tuningJobs"],l)}return n}function FC(t,e){const n={},o=s(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=s(t,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=s(t,["tuningJobs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>ul(u))),a(n,["tuningJobs"],l)}return n}function VC(t,e){const n={},o=s(t,["name"]);o!=null&&a(n,["model"],o);const r=s(t,["name"]);return r!=null&&a(n,["endpoint"],r),n}function GC(t,e){const n={};if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=s(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(n,["examples","examples"],r)}return n}function HC(t,e,n){const o={};let r=s(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=s(t,["gcsUri"]);e!==void 0&&l!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=s(t,["gcsUri"]);e!==void 0&&l!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let i=s(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const l=s(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(i==="PREFERENCE_TUNING"){const l=s(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(s(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function cm(t,e){const n={},o=s(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=s(t,["name"]);r!=null&&a(n,["name"],r);const i=s(t,["state"]);i!=null&&a(n,["state"],wp(i));const l=s(t,["createTime"]);l!=null&&a(n,["createTime"],l);const u=s(t,["tuningTask","startTime"]);u!=null&&a(n,["startTime"],u);const c=s(t,["tuningTask","completeTime"]);c!=null&&a(n,["endTime"],c);const d=s(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=s(t,["description"]);f!=null&&a(n,["description"],f);const m=s(t,["baseModel"]);m!=null&&a(n,["baseModel"],m);const p=s(t,["_self"]);return p!=null&&a(n,["tunedModel"],VC(p)),n}function ul(t,e){const n={},o=s(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=s(t,["name"]);r!=null&&a(n,["name"],r);const i=s(t,["state"]);i!=null&&a(n,["state"],wp(i));const l=s(t,["createTime"]);l!=null&&a(n,["createTime"],l);const u=s(t,["startTime"]);u!=null&&a(n,["startTime"],u);const c=s(t,["endTime"]);c!=null&&a(n,["endTime"],c);const d=s(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=s(t,["error"]);f!=null&&a(n,["error"],f);const m=s(t,["description"]);m!=null&&a(n,["description"],m);const p=s(t,["baseModel"]);p!=null&&a(n,["baseModel"],p);const g=s(t,["tunedModel"]);g!=null&&a(n,["tunedModel"],g);const T=s(t,["preTunedModel"]);T!=null&&a(n,["preTunedModel"],T);const E=s(t,["supervisedTuningSpec"]);E!=null&&a(n,["supervisedTuningSpec"],E);const C=s(t,["preferenceOptimizationSpec"]);C!=null&&a(n,["preferenceOptimizationSpec"],C);const h=s(t,["tuningDataStats"]);h!=null&&a(n,["tuningDataStats"],h);const y=s(t,["encryptionSpec"]);y!=null&&a(n,["encryptionSpec"],y);const S=s(t,["partnerModelTuningSpec"]);S!=null&&a(n,["partnerModelTuningSpec"],S);const _=s(t,["customBaseModel"]);_!=null&&a(n,["customBaseModel"],_);const w=s(t,["experiment"]);w!=null&&a(n,["experiment"],w);const x=s(t,["labels"]);x!=null&&a(n,["labels"],x);const I=s(t,["outputUri"]);I!=null&&a(n,["outputUri"],I);const R=s(t,["pipelineJob"]);R!=null&&a(n,["pipelineJob"],R);const P=s(t,["serviceAccount"]);P!=null&&a(n,["serviceAccount"],P);const A=s(t,["tunedModelDisplayName"]);A!=null&&a(n,["tunedModelDisplayName"],A);const F=s(t,["veoTuningSpec"]);return F!=null&&a(n,["veoTuningSpec"],F),n}function BC(t,e){const n={},o=s(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=s(t,["name"]);r!=null&&a(n,["name"],r);const i=s(t,["metadata"]);i!=null&&a(n,["metadata"],i);const l=s(t,["done"]);l!=null&&a(n,["done"],l);const u=s(t,["error"]);return u!=null&&a(n,["error"],u),n}function nd(t,e){const n={},o=s(t,["gcsUri"]);o!=null&&a(n,["validationDatasetUri"],o);const r=s(t,["vertexDatasetResource"]);return r!=null&&a(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qC extends Et{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new an(vt.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let l="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?l=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(l=i.name.split("/operations/")[0]),{name:l,state:Xs.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=PC(e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>ul(f))}else{const d=RC(e);return u=k("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>cm(f))}}async listInternal(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=LC(e);return u=k("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=FC(f),p=new Nc;return Object.assign(p,m),p})}else{const d=DC(e);return u=k("tunedModels",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=UC(f),p=new Nc;return Object.assign(p,m),p})}}async cancel(e){var n,o,r,i;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=CC(e);return u=k("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=wC(f),p=new Rc;return Object.assign(p,m),p})}else{const d=TC(e);return u=k("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const m=_C(f),p=new Rc;return Object.assign(p,m),p})}}async tuneInternal(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=NC(e,e);return i=k("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>ul(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=AC(e);return i=k("tunedModels",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>BC(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bC{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const $C=1024*1024*8,zC=3,JC=1e3,OC=2,ti="x-goog-upload-status";async function WC(t,e,n){var o;const r=await dm(t,e,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[ti])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function KC(t,e,n){var o;const r=await dm(t,e,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[ti])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=yp(i),u=new sa;return Object.assign(u,l),u}async function dm(t,e,n){var o,r;let i=0,l=0,u=new Zs(new Response),c="upload";for(i=t.size;l<i;){const d=Math.min($C,i-l),f=t.slice(l,l+d);l+d>=i&&(c+=", finalize");let m=0,p=JC;for(;m<zC&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(l),"Content-Length":String(d)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[ti]));)m++,await QC(p),p=p*OC;if(l+=d,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[ti])!=="active")break;if(i<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function YC(t){return{size:t.size,type:t.type}}function QC(t){return new Promise(e=>setTimeout(e,t))}class XC{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WC(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KC(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YC(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZC{create(e,n,o){return new jC(e,n,o)}}class jC{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const od="x-goog-api-key";class e_{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(od)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(od,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t_="gl-node/";class n_{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new de({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=Qg(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new e_(this.apiKey);this.apiClient=new YE({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:t_+"web",uploader:new XC,downloader:new bC}),this.models=new mT(this.apiClient),this.live=new aT(this.apiClient,r,new ZC),this.batches=new xy(this.apiClient),this.chats=new s0(this.models,this.apiClient),this.caches=new o0(this.apiClient),this.files=new g0(this.apiClient),this.operations=new hT(this.apiClient),this.authTokens=new kT(this.apiClient),this.tunings=new qC(this.apiClient),this.fileSearchStores=new HT(this.apiClient)}}const ni={webtoon:{name:"   ()",desc:"  ,   ",prompt:"Korean Joseon Dynasty historical webtoon style, thick ink outlines, authentic Hanbok and architecture, vibrant colors, manhwa style"},animation:{name:"  ",desc:" ,  ",prompt:"2D cell animation style, Korean folklore atmosphere, flat shading, clean lines, Studio Ghibli inspired but Korean Joseon aesthetics"},inkwash:{name:" ",desc:" ,  ,  ",prompt:"Traditional Korean ink wash painting (Sumukhwa), watercolor texture, brush strokes, artistic, hanji paper texture"},fantasy:{name:"  ",desc:" ,   ",prompt:"Oriental historical fantasy art, cinematic lighting, 8k resolution, realistic textures, detailed Joseon era costumes and props"}},Ho=t=>{if(!t)throw new Error("API   .   'API  '    .");return new n_({apiKey:t})},o_=`
  [STRICT ARCHITECTURAL RULES - JOSEON DYNASTY]
  1. ONDOL STRUCTURE (CRITICAL): 
     - Floors are NOT flat with the ground.
     - Kitchen floor is LOWER than the yard.
     - Yard (Madang) is ground level.
     - Room/Maru floor is RAISED approx 1 meter above the yard (High foundation).
     - To enter a room, one must step up onto a stone step (Seokgye) or wooden veranda (Toenmaru).
  2. MATERIALS:
     - Chogajip (Commoner): MUD walls, STRAW thatched roof, BRUSHWOOD gate (Saripmun) and fence (not stone).
     - Giwajip (Noble): WOODEN pillars, WHITE PLASTER walls, BLACK TILE roof.
     - Windows/Doors: Wooden lattice frames covered with WHITE RICE PAPER (Changhoji). NO glass.
  3. INTERIORS:
     - Floor: YELLOW OILED PAPER (Jangpan). DO NOT draw wooden planks inside the bedroom. Wood is ONLY for the Maru (hall).
     - Furniture: NO BEDS. Use thick cotton mattresses (Yo) and blankets on the floor. Low wooden tables.
  4. SPECIFIC LOCATIONS:
     - Choga Samgan: 3-bay structure. Kitchen - Main Room - Side Room. 
     - Jumak (Tavern): Open wooden hall (Pyeong-sang) in front for eating. Thatched roof.
     - Gwana/Podocheong: Large wooden gates, red/blue painted pillars (Dancheong), tile roofs, dirt courtyard.
`,r_=`
  [STRICT COSTUME RULES]
  1. SHOES:
     - Jipsin (Straw shoes): Must cover the toes like a loafer. NO FLIP-FLOPS (No thongs between toes).
     - Indoors: NO SHOES inside rooms or on the wooden maru. Barefoot or white socks (Beoseon).
  2. CLOTHING:
     - Jeogori (Top): Sleeves are curved like a crescent moon, tapering at the wrist.
     - Bags: NO LEATHER BAGS/BACKPACKS. Use cloth bundles (Bokjumeoni, Bojim).
  3. HAIR:
     - Men: Sangtu (Topknot) with headband (Manggeon).
     - Women: Low bun with Binyeo (hairpin) OR braided Daenggi (unmarried).
     - Gache (Wigs): Distinguish between Gisaeng (ornate, wide), Court Lady (rounded), and Royal (Gold leaf, massive).
`,Bn=`
  CONTEXT: Korea, Joseon Dynasty (19th Century).
  ${o_}
  ${r_}
  NEGATIVE PROMPT: Modern items, electricity, cars, concrete, western clothes, beds, chairs, glass windows, paved roads, Japanese style shoes (Geta/Zori), Chinese queues.
`,i_=async(t,e,n=[])=>{const o=Ho(t),r=n.length>0?`EXISTING LOCATIONS: ${n.map(l=>`${l.location} (${l.description})`).join("; ")}`:"",i=`
    Analyze this Korean script for a historical drama storyboard.
    ${Bn}
    ${r}
    
    TASK: Extract distinct locations where events happen.
    - Identify specific architecture types: Choga Samgan, Jumak, Gwana, Palace, Gibang, etc.
    - Describe the scene adhering to the ONDOL structure (raised floors).
    - Differentiate rooms (Kitchen vs Room vs Yard).
    
    Output JSON:
    [{ "sceneNumber": 1, "location": "Location Name", "scriptSegment": "Korean text trigger", "description": "Detailed visual prompt identifying architecture type and materials", "extras": "Crowd description", "timeOfDay": "Time" }]
    
    SCRIPT:
    ${e.substring(0,25e3)}
  `;try{const l=await o.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json"}});return l.text?JSON.parse(l.text).map((c,d)=>({id:`scene-${Date.now()}-${d}`,...c})):[]}catch(l){throw console.error(l),new Error("  .  .")}},s_=async(t,e,n,o=[])=>{const r=Ho(t),i=`
    Analyze script for main characters.
    ${Bn}
    
    TASK: 
    1. Define character appearance (Joseon style).
    2. Map actions to scenes.
    3. Create a specific prompt for each action that produces a CLEAN character sprite (no background).
    
    Output JSON:
    [{
      "name": "Name", "description": "Appearance", "chromaKeyColor": "green",
      "actions": [{ "sceneNumber": 1, "action": "Action", "expression": "Face", "cameraAngle": "Shot", "prompt": "Full English Prompt for image generation" }]
    }]

    SCRIPT:
    ${e.substring(0,25e3)}
  `;try{const l=await r.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json"}});return l.text?JSON.parse(l.text).map((c,d)=>({id:`char-${Date.now()}-${d}`,...c,actions:c.actions.map(f=>{var m;return{sceneId:((m=n.find(p=>p.sceneNumber===f.sceneNumber))==null?void 0:m.id)||"unknown",...f}})})):[]}catch(l){throw console.error(l),new Error("  .")}},l_=async(t,e,n)=>{const o=Ho(t),r=n.map(l=>`${l.name} (${l.description})`).join(", "),i=`
    Act as a Master Movie Director for a high-stakes, adult-oriented (but safe/legal) Korean Historical Drama (Joseon Dynasty).
    
    TASK: Create a "Hooking Opening Sequence" consisting of exactly 5 KEY SHOTS.
    The goal is to stimulate curiosity and excitement. High tension. Dramatic lighting.
    
    STRUCTURE:
    The user will generate videos using a "Start Image" to "End Image" technique in Veo.
    Therefore, the sequence must be a continuous chain:
    - Shot 1: Establishes the mood.
    - Shot 2: Escalates tension.
    - Shot 3: The climax or twist.
    - Shot 4: Deep emotion or conflict.
    - Shot 5: The cliffhanger ending.
    
    ${Bn}
    CHARACTERS: ${r}
    
    OUTPUT JSON:
    [
      {
        "sequenceNumber": 1,
        "title": "Short Dramatic Title",
        "visualPrompt": "Detailed prompt to generate the KEYFRAME IMAGE for this shot. Cinematic, 8k, detailed texture.",
        "videoPrompt": "Veo Prompt describing the motion from this image to the next image. (e.g., 'The camera zooms in slowly as the character turns their head...')"
      },
      ... (total 5 items)
    ]
    
    SCRIPT:
    ${e.substring(0,25e3)}
  `;try{const l=await o.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json"}});return l.text?JSON.parse(l.text).map(c=>({id:`open-${Date.now()}-${c.sequenceNumber}`,...c})):[]}catch(l){throw console.error(l),new Error("  ")}},ma=async(t,e,n,o="16:9",r=!1,i)=>{var f,m,p;const l=Ho(t),u=ni[n].prompt;let c="";r?c=`${u}. ${Bn}. ${i?"STRICTLY FOLLOW the appearance (face, hair, clothing) of the provided reference image. Only change the pose and expression as described.":""}. SUBJECT: ${e}. BACKGROUND: Solid color (Green #00FF00 or White #FFFFFF) for chroma keying. NO speech bubbles. NO text.`:c=`${u}. ${Bn}. CINEMATIC SHOT. ${e}. ENSURE ONDOL STRUCTURE (Raised floors). High contrast, dramatic lighting.`;const d=[{text:c}];if(i){const g=i.match(/^data:(.+);base64,(.+)$/);g&&d.unshift({inlineData:{mimeType:g[1],data:g[2]}})}try{const g=await l.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:d},config:{imageConfig:{aspectRatio:o}}});for(const T of((p=(m=(f=g.candidates)==null?void 0:f[0])==null?void 0:m.content)==null?void 0:p.parts)||[])if(T.inlineData)return`data:${T.inlineData.mimeType};base64,${T.inlineData.data}`;throw new Error("  .")}catch(g){throw console.error(g),new Error("    .")}},a_=async(t,e,n)=>{var c,d,f;const o=Ho(t),r=ni[n].prompt,i=[`Gender/Age: ${e.gender}`,`Role/Class: ${e.class}`,e.race!=="Human"?`Species: ${e.race}`:"",e.hair!=="None"?`Hair: ${e.hair}`:"",e.headwear!=="None"?`Headwear: ${e.headwear}`:"",e.outer!=="None"?`Outerwear: ${e.outer}`:"",e.top!=="None"?`Top: ${e.top}`:"",e.bottom!=="None"?`Bottom: ${e.bottom}`:"",e.shoes!=="None"?`Shoes: ${e.shoes}`:"",e.accessories!=="None"?`Accessories: ${e.accessories}`:"",e.clothingColor?`Clothing Color Palette: ${e.clothingColor}`:""].filter(m=>m!=="").join(", "),l=e.backgroundColor==="Green Screen"?"Solid Chroma Key Green Background (#00FF00)":e.backgroundColor==="Blue Screen"?"Solid Chroma Key Blue Background (#0000FF)":e.backgroundColor==="Solid Black"?"Solid Black Background":"Solid White Background",u=`${r}. Character Design Sheet. Full body shot. ${Bn}. ${i}. ${l}. High quality, detailed. NO text, NO speech bubbles.`;try{const m=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:u}]},config:{imageConfig:{aspectRatio:"9:16"}}});for(const p of((f=(d=(c=m.candidates)==null?void 0:c[0])==null?void 0:d.content)==null?void 0:f.parts)||[])if(p.inlineData)return`data:${p.inlineData.mimeType};base64,${p.inlineData.data}`;throw new Error("   ")}catch(m){throw console.error(m),new Error("     ")}},ee={gender:[{label:" ( )",value:"Adult Male, married, Joseon era"},{label:" ( )",value:"Adult Female, married, Joseon era"},{label:" ()",value:"Young Boy, unmarried, braided hair"},{label:" ()",value:"Young Girl, unmarried, braided hair"},{label:" ()",value:"Elderly Man, white beard"},{label:" ()",value:"Elderly Woman, grey hair"}],class:[{label:" ()",value:"Seonbi (Joseon Scholar), noble, silk robes"},{label:"/",value:"Bandit, rough appearance, wild, animal skins"},{label:"/",value:"King of Joseon, Red Royal Robe (Gonryongpo)"},{label:"/",value:"Queen of Joseon, Royal ceremonial dress"},{label:"/",value:"General, Warrior, Military uniform (Cheollik)"},{label:"/",value:"Merchant, Peddler, carrying bundle on back"},{label:"",value:"Buddhist Monk, grey robes"},{label:"/",value:"Peasant, Commoner, White hemp clothes"},{label:"",value:"Gisaeng, colorful Hanbok, artistic"},{label:"",value:"Shaman (Mudang), colorful ritual clothing"},{label:"/",value:"Magistrate (Sato), Official uniform"},{label:"",value:"Grim Reaper (Jeoseung Saja), Black Hanbok, Black Gat"}],race:[{label:"",value:"Human"},{label:"",value:"Dokkaebi (Korean Goblin), holding club"},{label:"",value:"Gumiho (Nine-tailed Fox)"},{label:"",value:"Virgin Ghost (Cheonyeo Gwishin), white Sobok, messy hair"},{label:" ()",value:"Tiger Spirit, anthropomorphic"},{label:" (/)",value:"Dragon King (Turtle spirit)"}],hair:[{label:" ( )",value:"Sangtu (Topknot) with Manggeon headband"},{label:" ()",value:"Daenggi-meori (Long Braid)"},{label:"   ()",value:"Binyeo Bun (Low bun with silver hairpin)"},{label:"  ()",value:"Gisaeng Gache (Large ornate wig)"},{label:"/ ",value:"Court Lady Gache (Rounded wig)"},{label:" ()",value:"Daesu-meori (Royal ceremonial wig with gold)"},{label:"  (/)",value:"Loose long black hair"},{label:" ()",value:"Wild messy hair"}],headwear:[{label:" ",value:"None"},{label:" (  )",value:"Gat (Black translucent horsehair hat)"},{label:" ()",value:"Jeongjagwan (Indoor scholar hat)"},{label:" ()",value:"Paeraengi (Bamboo hat)"},{label:" ()",value:"Jeonrip (Military hat with peacock feather)"},{label:" ()",value:"Ikseongwan (King black cap)"},{label:" ()",value:"Samo (Official black cap with wings)"},{label:" ( )",value:"Jokduri (Wedding headpiece)"},{label:" ()",value:"Jeonmo (Wide hat with butterfly decorations)"},{label:" ()",value:"Satgat (Conical straw hat)"}],outer:[{label:"  ()",value:"None"},{label:" ()",value:"Dopo (Scholar Robe with wide sleeves)"},{label:"",value:"Durumagi (Overcoat)"},{label:" ()",value:"Cheollik (Military Robe with pleated skirt)"},{label:"/",value:"Kwaeja (Long Vest)"},{label:" ( )",value:"Jangot (Coat worn over head)"},{label:"/ ()",value:"Hwarot/Wonsam (Ceremonial Robe)"},{label:" ()",value:"Sobok (White mourning clothes)"}],top:[{label:" ",value:"Jeogori (Traditional Jacket, curved sleeves)"},{label:" ",value:"Samhwejang Jeogori (Colorful cuffs and collar)"},{label:" ",value:"Saekdong Jeogori (Striped sleeves)"},{label:" ( )",value:"Jeoksam (Hemp shirt)"}],bottom:[{label:"  ()",value:"Baji (Wide trousers tied at ankles)"},{label:"  ()",value:"Chima (Full volume skirt)"},{label:" ()",value:"Seuran-chima (Skirt with gold leaf pattern)"},{label:" ( )",value:"Short Chima (Working class)"}],shoes:[{label:" ( )",value:"Jipsin (Straw shoes, covering toes like loafers)"},{label:" ()",value:"Taasahye (Leather shoes with patterns)"},{label:" ( )",value:"Mokhwa (Black velvet boots)"},{label:" ()",value:"Kkot-sin (Flower embroidered shoes)"},{label:"",value:"Barefoot"}],accessories:[{label:"",value:"None"},{label:" ()",value:"Gombangdae (Long pipe)"},{label:"",value:"Foldable Fan"},{label:" ()",value:"Hwando (Korean Sword)"},{label:" ()",value:"Cloth Bundle/Backpack (Bojim)"},{label:"",value:"Bokjumeoni (Lucky pouch)"},{label:"",value:"Norigae (Pendant)"},{label:"",value:"Eunjangdo (Silver knife)"}],bg:[{label:"  (Green)",value:"Green Screen"},{label:"  (Blue)",value:"Blue Screen"},{label:" ",value:"Solid White"},{label:" ",value:"Solid Black"}]},u_=({onClose:t})=>{const{apiKey:e,selectedStyle:n,setReferenceImages:o,showToast:r}=St(),[i,l]=H.useState(""),[u,c]=H.useState({gender:ee.gender[0].value,class:ee.class[0].value,race:ee.race[0].value,hair:ee.hair[0].value,headwear:ee.headwear[0].value,outer:ee.outer[0].value,top:ee.top[0].value,bottom:ee.bottom[0].value,shoes:ee.shoes[0].value,accessories:ee.accessories[0].value,clothingColor:"",backgroundColor:ee.bg[0].value}),[d,f]=H.useState(!1),[m,p]=H.useState(null),g=(h,y)=>{c(S=>({...S,[h]:y}))},T=async()=>{if(!i.trim())return r("  ","warning");if(!e)return r("API  ","warning");f(!0);try{const h=await a_(e,u,n);p(h),r(" .   .","success")}catch(h){r(h.message,"error")}finally{f(!1)}},E=()=>{!m||!i||(o(h=>[...h,{id:`ref-${Date.now()}`,name:i,imageUrl:m,description:`${u.class} ${u.gender}`,design:u}]),r(`${i}  .`,"success"),t())},C=(h,y,S)=>v.jsxs("div",{className:"flex flex-col gap-1",children:[v.jsx("label",{className:"text-xs text-slate-400 font-bold",children:h}),v.jsx("select",{value:u[y],onChange:_=>g(y,_.target.value),className:"bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white focus:ring-indigo-500",children:S.map((_,w)=>v.jsx("option",{value:_.value,children:_.label},w))})]});return v.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in overflow-y-auto",children:v.jsxs("div",{className:"bg-slate-800 w-full max-w-6xl h-[90vh] rounded-2xl border border-slate-600 shadow-2xl flex flex-col md:flex-row overflow-hidden",children:[v.jsxs("div",{className:"w-full md:w-1/2 p-6 overflow-y-auto border-r border-slate-700 custom-scrollbar",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[v.jsx("i",{className:"fas fa-user-edit text-indigo-400"}),"   "]}),v.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:v.jsx("i",{className:"fas fa-times text-xl"})})]}),v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"text-sm font-bold text-slate-300 block mb-2",children:"  ()"}),v.jsx("input",{type:"text",value:i,onChange:h=>l(h.target.value),placeholder:": , ",className:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white focus:ring-indigo-500"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C("1. /","gender",ee.gender),C("2. /","class",ee.class),C("3. ","race",ee.race),C("4.  ","hair",ee.hair),C("5. /","headwear",ee.headwear),C("6. ","outer",ee.outer),C("7. ","top",ee.top),C("8. ","bottom",ee.bottom),C("9. ","shoes",ee.shoes),C("10. /","accessories",ee.accessories)]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"text-xs text-slate-400 font-bold",children:"11.   ( )"}),v.jsx("input",{type:"text",value:u.clothingColor,onChange:h=>g("clothingColor",h.target.value),placeholder:":    ,  ",className:"w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm text-white"})]}),C("12.  ()","backgroundColor",ee.bg),v.jsxs("button",{onClick:T,disabled:d,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 mt-4",children:[d?v.jsx("i",{className:"fas fa-spinner fa-spin"}):v.jsx("i",{className:"fas fa-paint-brush"}),"  "]})]})]}),v.jsxs("div",{className:"w-full md:w-1/2 p-6 bg-black flex flex-col items-center justify-center relative",children:[v.jsx("h3",{className:"text-slate-500 font-bold mb-4 absolute top-6 left-6",children:""}),v.jsx("div",{className:"w-full max-w-sm aspect-[9/16] bg-slate-900 rounded-lg overflow-hidden border border-slate-700 flex items-center justify-center mb-6",children:m?v.jsx("img",{src:m,alt:"Preview",className:"w-full h-full object-contain"}):v.jsxs("div",{className:"text-center text-slate-600",children:[v.jsx("i",{className:"fas fa-user-circle text-6xl mb-4"}),v.jsxs("p",{children:["  ",v.jsx("br",{}),"  ."]})]})}),m&&v.jsxs("div",{className:"flex gap-4 w-full max-w-sm",children:[v.jsxs("button",{onClick:E,className:"flex-1 bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold shadow-lg",children:[v.jsx("i",{className:"fas fa-save mr-2"}),"   "]}),v.jsx("a",{href:m,download:`${i}_reference.png`,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-3 rounded-lg border border-slate-600",children:v.jsx("i",{className:"fas fa-download"})})]})]})]})})},c_=({id:t,style:e,selected:n,onSelect:o})=>v.jsxs("div",{onClick:()=>o(t),className:`cursor-pointer rounded-xl p-4 border-2 transition-all h-full flex flex-col gap-2 relative overflow-hidden ${n?"border-indigo-500 bg-indigo-900/30 ring-2 ring-indigo-500/50":"border-slate-700 bg-slate-800 hover:border-slate-500"}`,children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:`text-lg font-bold ${n?"text-indigo-300":"text-slate-200"}`,children:e.name}),n&&v.jsx("i",{className:"fas fa-check-circle text-indigo-400 text-xl"})]}),v.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:e.desc})]}),d_=({selected:t,onChange:e})=>{const n=[{id:"16:9",label:" (16:9)",icon:"fa-tv"},{id:"9:16",label:" (9:16)",icon:"fa-mobile-alt"},{id:"1:1",label:" (1:1)",icon:"fa-square"}];return v.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(o=>v.jsxs("button",{onClick:()=>e(o.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium flex items-center gap-2 border transition-all ${t===o.id?"bg-indigo-600 text-white border-indigo-500 shadow-md":"bg-slate-800 text-slate-400 border-slate-700 hover:bg-slate-700"}`,children:[v.jsx("i",{className:`fas ${o.icon}`}),o.label]},o.id))})},f_=({onAnalyze:t,isAnalyzing:e})=>{const{script:n,scriptSegments:o,addScriptSegment:r,removeScriptSegment:i,clearScriptSegments:l,selectedStyle:u,setSelectedStyle:c,globalAspectRatio:d,setGlobalAspectRatio:f,isContinuityMode:m,setIsContinuityMode:p,referenceImages:g,setReferenceImages:T,showToast:E}=St(),[C,h]=H.useState(!1),[y,S]=H.useState(""),[_,w]=H.useState(""),x=H.useRef(null),I=A=>{confirm("   ?")&&T(F=>F.filter(j=>j.id!==A))},R=A=>{var b;const F=(b=A.target.files)==null?void 0:b[0];if(!F)return;if(F.size>5*1024*1024){E("   5MB  .","warning");return}const j=new FileReader;j.onload=q=>{var ge;const ne=(ge=q.target)==null?void 0:ge.result,V=prompt("   ? (: )");V&&(T(M=>[...M,{id:`ref-upload-${Date.now()}`,name:V,imageUrl:ne,description:"Imported external character"}]),E("  .","success"))},j.readAsDataURL(F),x.current&&(x.current.value="")},P=()=>{if(!y.trim()){E(" .","warning");return}const A=_.trim()||`Chapter ${o.length+1}`;r(A,y),S(""),w(""),E(`${A} !`,"success")};return v.jsxs("div",{className:"space-y-10 animate-fade-in",children:[v.jsxs("section",{className:"space-y-4",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[v.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"1"}),"  ( )"]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"file",ref:x,onChange:R,accept:"image/*",className:"hidden"}),v.jsxs("button",{onClick:()=>{var A;return(A=x.current)==null?void 0:A.click()},className:"bg-slate-700 hover:bg-slate-600 text-slate-200 px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 border border-slate-600",children:[v.jsx("i",{className:"fas fa-upload"}),"   "]}),v.jsxs("button",{onClick:()=>h(!0),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 shadow-lg",children:[v.jsx("i",{className:"fas fa-plus"}),"  "]})]})]}),g.length===0?v.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 border-dashed rounded-xl p-6 text-center text-slate-500",children:[v.jsx("i",{className:"fas fa-users text-4xl mb-3 opacity-30"}),v.jsx("p",{children:"   ."})]}):v.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 custom-scrollbar",children:g.map(A=>v.jsxs("div",{className:"min-w-[120px] bg-slate-800 rounded-lg border border-slate-700 p-2 relative group",children:[v.jsx("div",{className:"aspect-[3/4] bg-black rounded overflow-hidden mb-2 relative",children:v.jsx("img",{src:A.imageUrl,alt:A.name,className:"w-full h-full object-cover"})}),v.jsx("p",{className:"font-bold text-center text-white text-xs truncate",children:A.name}),v.jsx("button",{onClick:()=>I(A.id),className:"absolute top-1 right-1 bg-red-600 text-white w-5 h-5 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",children:v.jsx("i",{className:"fas fa-times text-[10px]"})})]},A.id))})]}),v.jsxs("section",{className:"space-y-6",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[v.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"2"}),"  ( )"]}),v.jsxs("div",{className:"text-slate-400 text-sm",children:["  : ",v.jsx("span",{className:"text-indigo-400 font-bold",children:n.length}),"  / ",o.length," "]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 p-5 rounded-xl border border-slate-700 shadow-lg flex flex-col h-full",children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"text-xs text-slate-400 font-bold block mb-1",children:"  ()"}),v.jsx("input",{type:"text",value:_,onChange:A=>w(A.target.value),placeholder:`Chapter ${o.length+1}`,className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-white focus:ring-indigo-500 text-sm"})]}),v.jsx("label",{className:"text-xs text-slate-400 font-bold block mb-1",children:" "}),v.jsx("textarea",{value:y,onChange:A=>S(A.target.value),placeholder:"    . (:    ...)",className:"w-full flex-grow min-h-[200px] bg-slate-900 text-base p-4 rounded-lg border border-slate-700 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-slate-100 placeholder-slate-500 resize-none mb-4"}),v.jsxs("button",{onClick:P,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-lg font-bold shadow-lg flex items-center justify-center gap-2 transition-all",children:[v.jsx("i",{className:"fas fa-plus-circle"}),"  "]})]}),v.jsxs("div",{className:"bg-slate-900/50 p-5 rounded-xl border border-slate-700 h-full flex flex-col",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h3",{className:"text-lg font-bold text-slate-200",children:[v.jsx("i",{className:"fas fa-list-ol mr-2 text-indigo-400"}),"  "]}),o.length>0&&v.jsx("button",{onClick:()=>{confirm("  ?")&&l()},className:"text-xs text-red-400 hover:text-red-300 underline",children:" "})]}),v.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-3 pr-2",style:{maxHeight:"400px"},children:o.length===0?v.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600 opacity-50",children:[v.jsx("i",{className:"fas fa-book-open text-5xl mb-3"}),v.jsxs("p",{children:["  ",v.jsx("br",{}),"'' ."]})]}):o.map((A,F)=>v.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-600 relative group hover:border-indigo-500 transition-colors",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("span",{className:"text-xs font-bold text-indigo-300 bg-indigo-900/50 px-2 py-0.5 rounded uppercase",children:A.title||`Chapter ${F+1}`}),v.jsx("button",{onClick:()=>i(A.id),className:"text-slate-500 hover:text-red-500 p-1",children:v.jsx("i",{className:"fas fa-trash-alt"})})]}),v.jsx("p",{className:"text-sm text-slate-300 line-clamp-3",children:A.content})]},A.id))})]})]})]}),v.jsxs("section",{className:"space-y-4",children:[v.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[v.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm",children:"3"}),""]}),v.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 mb-4",children:[v.jsxs("div",{className:"mb-2 font-bold text-slate-300 flex items-center gap-2",children:[v.jsx("i",{className:"fas fa-crop-alt"}),"  "]}),v.jsx(d_,{selected:d,onChange:f})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.keys(ni).map(A=>v.jsx(c_,{id:A,style:ni[A],selected:u===A,onSelect:c},A))})]}),v.jsxs("div",{className:"flex flex-col items-center gap-4 pt-8",children:[v.jsxs("label",{className:"flex items-center gap-3 bg-slate-800 px-6 py-3 rounded-full border border-slate-600 cursor-pointer hover:bg-slate-750 select-none",children:[v.jsx("input",{type:"checkbox",checked:m,onChange:A=>p(A.target.checked),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500 border-gray-300"}),v.jsx("span",{className:"text-lg font-bold text-indigo-300",children:"  "}),v.jsx("span",{className:"text-xs text-slate-400 border-l border-slate-600 pl-3",children:"      ."})]}),o.length===0&&v.jsx("p",{className:"text-red-400 text-sm font-bold animate-pulse",children:"   !"}),v.jsxs("button",{onClick:t,disabled:e||o.length===0,className:"bg-indigo-600 hover:bg-indigo-500 text-white text-xl font-bold px-12 py-5 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-3 w-full max-w-lg justify-center",children:[e?v.jsx("i",{className:"fas fa-spinner fa-spin"}):v.jsx("i",{className:"fas fa-magic"}),e?" ...":` ${o.length}   `]})]}),C&&v.jsx(u_,{onClose:()=>h(!1)})]})},p_=({onNext:t,isNextLoading:e})=>{const{scenes:n,setScenes:o,apiKey:r,selectedStyle:i,globalAspectRatio:l,showToast:u}=St(),[c,d]=H.useState({}),f=async(p,g)=>{d(T=>({...T,[p]:!0}));try{const T=n.find(h=>h.id===p),E=(T==null?void 0:T.aspectRatio)||l,C=await ma(r,g,i,E,!1);o(h=>h.map(y=>y.id===p?{...y,generatedImageUrl:C,aspectRatio:E}:y)),u("  !","success")}catch(T){u(T.message,"error")}finally{d(T=>({...T,[p]:!1}))}},m=(p,g)=>{const T=document.createElement("a");T.href=p,T.download=g,T.click()};return v.jsxs("div",{className:"space-y-6 animate-fade-in",children:[v.jsxs("div",{className:"flex justify-between items-center bg-slate-800 p-6 rounded-xl border border-slate-700",children:[v.jsxs("h2",{className:"text-2xl font-bold text-white",children:["   (",n.length,")"]}),v.jsxs("button",{onClick:t,disabled:e,className:"bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-bold shadow-lg flex items-center gap-2",children:[e?v.jsx("i",{className:"fas fa-spinner fa-spin"}):v.jsx("i",{className:"fas fa-arrow-right"})," () "]})]}),v.jsx("div",{className:"space-y-12",children:n.map(p=>v.jsxs("div",{className:"bg-slate-800 rounded-2xl overflow-hidden border border-slate-700 shadow-xl",children:[v.jsxs("div",{className:"bg-slate-900/50 p-6 border-b border-slate-700",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[v.jsxs("span",{className:"bg-indigo-600 text-white px-3 py-1 rounded text-sm font-bold",children:["SCENE ",p.sceneNumber]}),v.jsx("h3",{className:"text-2xl font-bold text-white",children:p.location}),v.jsx("span",{className:"text-slate-400 text-sm border border-slate-600 px-2 py-0.5 rounded-full",children:p.timeOfDay})]}),v.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-600/50",children:[v.jsxs("p",{className:"text-indigo-300 text-sm font-bold mb-1",children:[v.jsx("i",{className:"fas fa-quote-left mr-2"})," "]}),v.jsx("p",{className:"text-lg text-slate-200",children:p.scriptSegment})]})]}),v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"relative w-full bg-black rounded-lg overflow-hidden border border-slate-700 mb-4 flex items-center justify-center",style:{minHeight:"400px"},children:[p.generatedImageUrl?v.jsx("img",{src:p.generatedImageUrl,alt:"Background",className:"max-w-full max-h-[600px] object-contain"}):v.jsxs("div",{className:"text-slate-600 flex flex-col items-center",children:[v.jsx("i",{className:"fas fa-image text-6xl mb-4 opacity-30"}),v.jsx("span",{children:" "})]}),c[p.id]&&v.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center backdrop-blur-sm",children:v.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-indigo-500"})})]}),v.jsxs("div",{className:"flex gap-4",children:[v.jsx("button",{onClick:()=>f(p.id,`${p.location}, ${p.description}, ${p.timeOfDay}`),disabled:c[p.id],className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg",children:p.generatedImageUrl?"  ":" "}),p.generatedImageUrl&&v.jsx("button",{onClick:()=>m(p.generatedImageUrl,`scene_${p.sceneNumber}_${p.location}.png`),className:"bg-slate-700 hover:bg-slate-600 text-white px-6 rounded-xl font-bold border border-slate-600",children:v.jsx("i",{className:"fas fa-download"})})]}),v.jsxs("details",{className:"mt-4 text-sm text-slate-500 cursor-pointer",children:[v.jsx("summary",{children:" "}),v.jsx("p",{className:"mt-2 p-2 bg-slate-900 rounded",children:p.description})]})]})]},p.id))})]})},m_=()=>{const{characters:t,setCharacters:e,scenes:n,apiKey:o,selectedStyle:r,globalAspectRatio:i,showToast:l,referenceImages:u}=St(),[c,d]=H.useState({}),[f,m]=H.useState(null),p=async(E,C)=>{const h=t.find(w=>w.id===E),y=h==null?void 0:h.actions[C];if(!h||!y)return;const S=u.find(w=>w.name===h.name),_=`${E}-${y.sceneNumber}`;d(w=>({...w,[_]:!0}));try{const w=`Character: ${h.name}. Appearance: ${h.description}. Action: ${y.action}. Expression: ${y.expression}. Camera: ${y.cameraAngle}. ${y.prompt||""}`,x=await ma(o,w,r,i,!0,S==null?void 0:S.imageUrl);e(I=>I.map(R=>{if(R.id!==E)return R;const P=[...R.actions];return P[C]={...P[C],generatedImageUrl:x,aspectRatio:i},{...R,actions:P}})),l("  ","success")}catch(w){l(w.message,"error")}finally{d(w=>({...w,[_]:!1}))}},g=(E,C)=>{const h=document.createElement("a");h.href=E,h.download=C,h.click()},T=(E,C,h)=>{e(y=>y.map(S=>{if(S.id!==E)return S;const _=[...S.actions];return _[C]={..._[C],prompt:h},{...S,actions:_}}))};return v.jsxs("div",{className:"space-y-8 animate-fade-in",children:[v.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[v.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  "}),v.jsx("p",{className:"text-slate-400",children:" (/) .     ."})]}),t.map(E=>{const C=u.find(h=>h.name===E.name);return v.jsxs("div",{className:"bg-slate-900 rounded-xl overflow-hidden border border-slate-700",children:[v.jsxs("div",{className:"p-4 bg-slate-800 border-b border-slate-700 flex justify-between items-center",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{children:[v.jsxs("h3",{className:"text-2xl font-bold text-indigo-400 flex items-center gap-2",children:[E.name,C&&v.jsxs("span",{className:"text-xs bg-indigo-600 text-white px-2 py-0.5 rounded-full flex items-center gap-1",title:"   ",children:[v.jsx("i",{className:"fas fa-link"}),"  "]})]}),v.jsx("p",{className:"text-slate-400 text-sm",children:E.description})]}),C&&v.jsx("div",{className:"w-12 h-16 rounded overflow-hidden border border-indigo-500/50 hidden md:block",children:v.jsx("img",{src:C.imageUrl,alt:"Ref",className:"w-full h-full object-cover"})})]}),v.jsx("span",{className:`px-3 py-1 rounded font-bold uppercase ${E.chromaKeyColor==="green"?"bg-green-900 text-green-300":"bg-white text-black"}`,children:E.chromaKeyColor==="green"?" ":" "})]}),v.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:E.actions.map((h,y)=>{const S=`${E.id}-${h.sceneNumber}`,_=n.find(w=>w.sceneNumber===h.sceneNumber);return v.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4 flex flex-col gap-4",children:[v.jsx("div",{className:"flex justify-between items-start",children:v.jsxs("div",{children:[v.jsxs("span",{className:"text-xs font-mono text-slate-500",children:["SCENE ",h.sceneNumber," (",_==null?void 0:_.location,")"]}),v.jsx("p",{className:"font-bold text-white text-lg",children:h.action}),v.jsxs("p",{className:"text-sm text-slate-400",children:[": ",h.expression," / : ",h.cameraAngle]})]})}),v.jsxs("div",{className:"relative w-full bg-slate-900 rounded-lg overflow-hidden border border-slate-600 flex items-center justify-center min-h-[300px]",children:[h.generatedImageUrl?v.jsx("img",{src:h.generatedImageUrl,alt:"Character",className:"max-w-full max-h-[400px] object-contain"}):v.jsxs("div",{className:"text-slate-600 flex flex-col items-center",children:[v.jsx("i",{className:"fas fa-user text-4xl mb-2 opacity-30"}),v.jsx("span",{children:" "})]}),c[S]&&v.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center backdrop-blur-sm z-10",children:v.jsx("i",{className:"fas fa-spinner fa-spin text-3xl text-indigo-500"})})]}),f===S?v.jsxs("div",{children:[v.jsx("textarea",{value:h.prompt||"",onChange:w=>T(E.id,y,w.target.value),className:"w-full bg-black/50 text-slate-200 text-sm p-2 rounded border border-indigo-500 h-24"}),v.jsx("button",{onClick:()=>m(null),className:"text-xs text-indigo-400 mt-1 hover:underline",children:" "})]}):v.jsxs("div",{className:"flex justify-between items-center bg-slate-900/50 p-2 rounded cursor-pointer hover:bg-slate-900 transition-colors",onClick:()=>m(S),children:[v.jsx("p",{className:"text-xs text-slate-500 truncate w-64",children:h.prompt||" "}),v.jsx("i",{className:"fas fa-pen text-xs text-slate-600"})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:()=>p(E.id,y),disabled:c[S],className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-2 rounded-lg font-bold shadow transition-colors flex items-center justify-center gap-2",children:[C&&v.jsx("i",{className:"fas fa-link text-xs"}),h.generatedImageUrl?" ":" "]}),h.generatedImageUrl&&v.jsx("button",{onClick:()=>g(h.generatedImageUrl,`${E.name}_scene${h.sceneNumber}.png`),className:"bg-green-600 hover:bg-green-500 text-white px-4 rounded-lg",children:v.jsx("i",{className:"fas fa-download"})})]})]},S)})})]},E.id)})]})},h_=()=>{const{script:t,characters:e,apiKey:n,selectedStyle:o,globalAspectRatio:r,showToast:i}=St(),[l,u]=H.useState(!1),[c,d]=H.useState([]),[f,m]=H.useState({}),p=async()=>{if(!t)return i(" .","warning");if(!n)return i("API  .","warning");u(!0);try{const E=await l_(n,t,e);d(E),i("  .   !","success")}catch(E){i(E.message,"error")}finally{u(!1)}},g=async E=>{m(C=>({...C,[E.id]:!0}));try{const C=await ma(n,E.visualPrompt,o,r,!1);d(h=>h.map(y=>y.id===E.id?{...y,generatedImageUrl:C}:y)),i(`${E.sequenceNumber}   `,"success")}catch(C){i(C.message,"error")}finally{m(C=>({...C,[E.id]:!1}))}},T=(E,C)=>{const h=document.createElement("a");h.href=E,h.download=C,h.click()};return v.jsxs("div",{className:"space-y-8 animate-fade-in pb-20",children:[v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-xl relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500"}),v.jsxs("div",{className:"z-10 mb-4 md:mb-0",children:[v.jsxs("h2",{className:"text-3xl font-extrabold text-white mb-2 flex items-center gap-3",children:[v.jsx("i",{className:"fas fa-film text-red-500"}),"   "]}),v.jsxs("p",{className:"text-slate-400",children:["   ",v.jsx("span",{className:"text-red-400 font-bold",children:"(Hooking)"}),"  .",v.jsx("br",{}),"    ",v.jsx("strong",{children:"Veo"}),"  ."]})]}),v.jsxs("button",{onClick:p,disabled:l,className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white px-8 py-4 rounded-full font-bold text-lg shadow-lg shadow-red-900/50 flex items-center gap-3 transition-all transform hover:scale-105",children:[l?v.jsx("i",{className:"fas fa-spinner fa-spin"}):v.jsx("i",{className:"fas fa-magic"}),"   (AI)"]})]}),c.length>0&&v.jsxs("div",{className:"space-y-0",children:[c.map((E,C)=>v.jsxs("div",{className:"relative pl-8 md:pl-12 py-6 group",children:[v.jsx("div",{className:"absolute left-4 md:left-6 top-0 bottom-0 w-0.5 bg-slate-700 group-last:bottom-auto group-last:h-1/2"}),v.jsx("div",{className:"absolute left-2 md:left-4 top-12 w-4 h-4 md:w-5 md:h-5 rounded-full bg-slate-900 border-4 border-indigo-500 z-10 shadow-lg shadow-indigo-500/50"}),v.jsx("div",{className:"bg-slate-900 rounded-xl border border-slate-700 overflow-hidden hover:border-indigo-500 transition-colors",children:v.jsxs("div",{className:"flex flex-col md:flex-row",children:[v.jsxs("div",{className:"w-full md:w-2/5 bg-black relative min-h-[250px] flex items-center justify-center border-r border-slate-800",children:[E.generatedImageUrl?v.jsx("img",{src:E.generatedImageUrl,alt:E.title,className:"w-full h-full object-cover"}):v.jsxs("div",{className:"text-center p-6",children:[v.jsx("i",{className:"fas fa-clapperboard text-4xl text-slate-700 mb-3"}),v.jsx("p",{className:"text-slate-500 text-sm",children:"  "})]}),v.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-3",children:[v.jsxs("button",{onClick:()=>g(E),disabled:f[E.id],className:"bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-2 rounded-full font-bold shadow-lg flex items-center gap-2",children:[f[E.id]?v.jsx("i",{className:"fas fa-spinner fa-spin"}):v.jsx("i",{className:"fas fa-paint-brush"}),E.generatedImageUrl?"  ":" "]}),E.generatedImageUrl&&v.jsxs("button",{onClick:()=>T(E.generatedImageUrl,`opening_shot_${E.sequenceNumber}.png`),className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-full font-bold shadow-lg flex items-center gap-2",children:[v.jsx("i",{className:"fas fa-download"})," "]})]})]}),v.jsx("div",{className:"w-full md:w-3/5 p-6 flex flex-col justify-between",children:v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[v.jsxs("span",{className:"text-indigo-400",children:["#",E.sequenceNumber]})," ",E.title]}),C<c.length-1&&v.jsxs("span",{className:"text-xs bg-slate-800 text-slate-400 px-2 py-1 rounded border border-slate-700",children:["   ",v.jsx("i",{className:"fas fa-arrow-down ml-1"})]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-700",children:[v.jsxs("p",{className:"text-xs font-bold text-slate-400 mb-1 uppercase",children:[v.jsx("i",{className:"fas fa-image mr-1"}),"   "]}),v.jsx("p",{className:"text-sm text-slate-300 line-clamp-3 hover:line-clamp-none transition-all cursor-help",children:E.visualPrompt})]}),v.jsxs("div",{className:"bg-indigo-900/20 p-3 rounded-lg border border-indigo-500/30",children:[v.jsxs("div",{className:"flex justify-between items-center mb-1",children:[v.jsxs("p",{className:"text-xs font-bold text-indigo-300 uppercase",children:[v.jsx("i",{className:"fas fa-video mr-1"})," Veo  "]}),v.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(E.videoPrompt),i(" ","success")},className:"text-xs text-indigo-400 hover:text-white",children:[v.jsx("i",{className:"fas fa-copy"})," "]})]}),v.jsx("p",{className:"text-sm text-indigo-200 font-mono",children:E.videoPrompt}),v.jsx("p",{className:"text-[10px] text-indigo-400/70 mt-2",children:"* Veo  (Start)   (End)    ."})]})]})]})})]})})]},E.id)),v.jsx("div",{className:"pl-8 md:pl-12 pb-8",children:v.jsx("div",{className:"bg-slate-800/50 border border-slate-700 border-dashed rounded-xl p-4 text-center",children:v.jsxs("p",{className:"text-slate-400 text-sm",children:[v.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"})," 5   (Cliffhanger).      ."]})})})]}),c.length===0&&!l&&v.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-600",children:[v.jsx("i",{className:"fas fa-film text-6xl mb-4 opacity-20"}),v.jsx("p",{className:"text-lg",children:"    ."})]})]})},g_=()=>{const{toast:t,closeToast:e}=St();if(!t)return null;const n={success:"bg-green-600",error:"bg-red-600",warning:"bg-yellow-600"};return v.jsxs("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 ${n[t.type]} text-white px-6 py-3 rounded-full shadow-2xl z-[100] flex items-center gap-3 animate-fade-in-up cursor-pointer`,onClick:e,children:[v.jsx("i",{className:`fas ${t.type==="success"?"fa-check-circle":t.type==="warning"?"fa-exclamation-triangle":"fa-times-circle"}`}),v.jsx("span",{className:"font-medium",children:t.message})]})},v_=({onOpenApiKey:t})=>{const{apiKey:e}=St();return v.jsxs("header",{className:"bg-slate-900 border-b border-slate-700 p-4 flex items-center justify-between sticky top-0 z-50 shadow-md",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg",children:""}),v.jsxs("h1",{className:"text-2xl font-bold text-white tracking-wide",children:["  ",v.jsx("span",{className:"text-xs text-slate-500 font-normal ml-2",children:"Ver 2.0 (Joseon Ed.)"})]})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[e&&v.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-slate-800 px-3 py-1.5 rounded-full border border-slate-600 mr-2",children:[v.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"}),v.jsx("span",{className:"text-xs text-slate-300 font-medium",children:""})]}),v.jsxs("button",{onClick:t,className:"bg-slate-800 hover:bg-slate-700 text-slate-200 px-4 py-2 rounded-lg border border-slate-600 flex items-center gap-2 transition-all text-sm font-medium",children:[v.jsx("i",{className:`fas fa-key ${e?"text-green-500":"text-yellow-500"}`}),e?"API  ":"API  "]})]})]})},dr=({active:t,label:e,icon:n,onClick:o,disabled:r})=>v.jsxs("button",{onClick:o,disabled:r,className:`flex-1 py-4 text-lg font-bold flex items-center justify-center gap-3 transition-all ${t?"bg-indigo-600 text-white shadow-inner border-b-4 border-indigo-800":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white border-b-4 border-slate-900"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[v.jsx("i",{className:`fas ${n} text-xl`}),e]}),y_=({isOpen:t,onClose:e})=>{const{apiKey:n,setApiKey:o,showToast:r}=St(),[i,l]=H.useState(n);return t?v.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:v.jsxs("div",{className:"bg-slate-800 w-full max-w-md p-8 rounded-2xl border border-slate-600 shadow-2xl relative",children:[v.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:v.jsx("i",{className:"fas fa-times text-xl"})}),v.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[v.jsx("i",{className:"fas fa-key text-yellow-500"})," API  "]}),v.jsx("p",{className:"text-slate-300 mb-6 text-sm",children:"Google AI Studio  Gemini API Key ."}),v.jsx("input",{type:"password",value:i,onChange:u=>l(u.target.value),placeholder:"AIzaSy...",className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-4 text-white focus:ring-2 focus:ring-indigo-500 mb-6 font-mono"}),v.jsx("button",{onClick:()=>{i?(o(i),e(),r(".","success")):r(" .","warning")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg",children:"  "}),v.jsx("div",{className:"mt-6 pt-4 border-t border-slate-700 text-center",children:v.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-400 text-sm",children:"API  "})})]})}):null},S_=()=>{const{apiKey:t,script:e,scenes:n,characters:o,setScenes:r,setCharacters:i,isContinuityMode:l,showToast:u,resetProject:c}=St(),[d,f]=H.useState("script"),[m,p]=H.useState(!1),[g,T]=H.useState(!1),[E,C]=H.useState(!1),h=async()=>{if(!t)return p(!0);if(!e.trim())return u(" !","warning");T(!0);try{const w=(await i_(t,e,l?n:[])).map((x,I)=>({...x,id:`scene-${Date.now()}-${I}`}));l?r(x=>[...x,...w]):(r(w),i([])),f("sintong"),u(` ! ${w.length} `,"success")}catch(S){u(S.message,"error")}finally{T(!1)}},y=async()=>{if(!t)return p(!0);C(!0);try{const _=await s_(t,e,n,l?o:[]);i(l?w=>{const x=[...w];return _.forEach(I=>{const R=x.findIndex(P=>P.name===I.name);R>=0?x[R].actions.push(...I.actions):x.push(I)}),x}:_),f("bangtong"),u("  !","success")}catch(S){u(S.message,"error")}finally{C(!1)}};return v.jsxs("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 font-sans selection:bg-indigo-500 selection:text-white pb-20",children:[v.jsx(v_,{onOpenApiKey:()=>p(!0)}),v.jsxs("div",{className:"flex border-b border-slate-700 sticky top-[72px] z-40 bg-[#0f172a]",children:[v.jsx(dr,{active:d==="script",onClick:()=>f("script"),label:"1. /",icon:"fa-file-alt"}),v.jsx(dr,{active:d==="sintong",onClick:()=>f("sintong"),label:"2. ()",icon:"fa-mountain",disabled:n.length===0}),v.jsx(dr,{active:d==="bangtong",onClick:()=>f("bangtong"),label:"3. ()",icon:"fa-user-ninja",disabled:o.length===0}),v.jsx(dr,{active:d==="opening",onClick:()=>f("opening"),label:"4. ",icon:"fa-film"})]}),v.jsxs("main",{className:"max-w-6xl mx-auto p-6 min-h-[calc(100vh-140px)]",children:[d==="script"&&v.jsx(f_,{onAnalyze:h,isAnalyzing:g}),d==="sintong"&&v.jsx(p_,{onNext:y,isNextLoading:E}),d==="bangtong"&&v.jsx(m_,{}),d==="opening"&&v.jsx(h_,{})]}),v.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:v.jsxs("button",{onClick:c,className:"bg-red-900/80 hover:bg-red-900 text-red-200 px-4 py-2 rounded-full text-xs border border-red-700 backdrop-blur",children:[v.jsx("i",{className:"fas fa-trash mr-1"}),"  "]})}),v.jsx(g_,{}),v.jsx(y_,{isOpen:m,onClose:()=>p(!1)})]})},E_=()=>v.jsx(Jg,{children:v.jsx(S_,{})}),fm=document.getElementById("root");if(!fm)throw new Error("Could not find root element to mount to");const T_=os.createRoot(fm);T_.render(v.jsx(Rm.StrictMode,{children:v.jsx(E_,{})}));
